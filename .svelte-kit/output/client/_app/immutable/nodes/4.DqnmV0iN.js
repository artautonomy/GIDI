import{s as he,c as ee,a as f,t as $,b as te,d as me}from"../chunks/disclose-version.CbQWKql7.js";import"../chunks/legacy.wwEz_KsH.js";import{u as _e,C as $e,a as oe,i as ye,T as be,c as re,b as o,B as ne,d as L,e as ke,O as xe,I as we,f as Pe,g as Me,M as Ce,h as Se}from"../chunks/Mirror.BKsKmo7Y.js";import{p as Be,q as C,v as _,a as Ie,g as s,b as S,j as h,k as ze,o as r,w as ae}from"../chunks/utils.F7Ud3tqr.js";import{c as n,i as Te}from"../chunks/props.BLHG7mnz.js";import{p as m,o as De}from"../chunks/index-client.DDb0GLON.js";import{M as Le,S as R}from"../chunks/store.rOjKrHxV.js";import{g as Re}from"../chunks/entry.CrEA1HG7.js";var Ae=$("<!> <!>",1),Ge=$("<!> <!> <!>",1),Oe=$("<!> <!>",1),Ee=$("<!> <!>",1),We=$("<!> <!>",1),Xe=$("<!> <!>",1),He=$("<!> <!> <!> <!> <!> <!> <!>",1);function je(B,I){Be(I,!0);const z=he(),e=()=>te(R,"$Settings",z),se=()=>te(ce,"$hovering",z),ie=_e(),le=m(ie.scene);le.background=new $e(`rgb(${e().colours.background.r},${e().colours.background.g},${e().colours.background.b})`);let A=C(m([{}]));const M=["Cube","Mirror"];let i=C(0),y=C(m(e().colours.key)),G=C(!1);const ue=Le.subscribe(t=>{_(A,m(t))});De(ue);function O(t){ee(R,S(e).scene=t,S(e)),_(G,!0),_(y,m({r:77,g:144,b:57})),T.set(0,{delay:250,duration:750,easing:re}),setTimeout(()=>{setTimeout(()=>{Re("../play")},750)},750)}const{onPointerEnter:E,onPointerLeave:W}=oe(),{hovering:ce,onPointerEnter:X,onPointerLeave:H}=oe();ye(),Ie(()=>{!se()&&!s(G)?_(y,m(e().colours.key)):_(y,m({r:77,g:144,b:57}))});let de=m([7.5,10,20]);const T=new be(0);T.set(50,{duration:1e3,easing:re}),ee(R,S(e).autoRotate=!1,S(e));var j=He(),q=h(j);n(q,()=>o.OrthographicCamera,(t,a)=>{a(t,{makeDefault:!0,get position(){return de},near:.001,far:5e3,get zoom(){return T.current},children:(l,c)=>{xe(l,{enableDamping:!0,get autoRotateSpeed(){return e().autoRotateSpeed},get autoRotate(){return e().autoRotate},get enabled(){return e().orbitControls}})},$$slots:{default:!0}})});var Z=r(q,2);ne(Z,{"position.y":7,children:(t,a)=>{var l=Ae(),c=h(l);L(c,{text:"Style",color:"orange",get font(){return e().font},fontSize:window.innerWidth/4e3,textAlign:"center",anchorX:"center","position.y":window.innerWidth/1250,outlineBlur:.1});var b=r(c,2);L(b,{text:"Play notes to sample, click to confirm style",color:"white",get font(){return e().font},fontSize:window.innerWidth/7e3,textAlign:"center",anchorX:"center",outlineBlur:.1}),f(t,l)},$$slots:{default:!0}});var F=r(Z,2);ke(F,17,()=>s(A).slice(0,5),Pe,(t,a,l)=>{var c=me(),b=h(c);n(b,()=>o.Group,(k,x)=>{x(k,{"position.y":-window.innerHeight/200,onpointerenter:X,onpointerleave:H,onclick:()=>O(M[s(i)]),children:(w,Q)=>{var g=Oe(),p=h(g);we(p,{children:(d,v)=>{var U=Ge(),V=h(U);n(V,()=>o.BoxGeometry,(u,D)=>{D(u,{})});var Y=r(V,2);n(Y,()=>o.MeshStandardMaterial,(u,D)=>{D(u,{shadow:!0})});var pe=r(Y,2);{var ve=u=>{Me(u,{x:l-2,get velocity(){return s(a).velocity},get attack(){return e().attack},get release(){return e().release},get keyColour(){return s(y)},get expressionColour(){return e().colours.expression}})},fe=u=>{Ce(u,{x:l-2,get velocity(){return s(a).velocity},get attack(){return e().attack},get release(){return e().release},get keyColour(){return s(y)},get expressionColour(){return e().colours.expression}})};Te(pe,u=>{M[s(i)]=="Cube"?u(ve):u(fe,!1)})}f(d,U)},$$slots:{default:!0}});var P=r(p,2);L(P,{get font(){return e().font},fontSize:.4,outlineBlur:.06,get text(){return M[s(i)]},textAlign:"center",anchorX:"center","position.x":-.5,"position.y":2.95,"position.z":3.9,color:"white",onpointerenter:X,onpointerleave:H,onclick:()=>O(M[s(i)])}),f(w,g)},$$slots:{default:!0}})}),f(t,c)});var J=r(F,2);ne(J,{"position.y":-window.innerHeight/140,children:(t,a)=>{var l=Xe(),c=h(l);n(c,()=>o.Mesh,(k,x)=>{x(k,{scale:.75,"position.x":3,"rotation.z":-Math.PI/2,onpointerenter:E,onpointerleave:W,onclick:()=>s(i)===0?ae(i):_(i,0),children:(w,Q)=>{var g=Ee(),p=h(g);n(p,()=>o.ConeGeometry,(d,v)=>{v(d,{})});var P=r(p,2);n(P,()=>o.MeshBasicMaterial,(d,v)=>{v(d,{color:"orange",shadow:!0})}),f(w,g)},$$slots:{default:!0}})});var b=r(c,2);n(b,()=>o.Mesh,(k,x)=>{x(k,{scale:.75,"position.x":-3,"rotation.z":Math.PI/2,onpointerenter:E,onpointerleave:W,onclick:()=>s(i)===1?ae(i,-1):_(i,1),children:(w,Q)=>{var g=We(),p=h(g);n(p,()=>o.ConeGeometry,(d,v)=>{v(d,{})});var P=r(p,2);n(P,()=>o.MeshBasicMaterial,(d,v)=>{v(d,{color:"orange",shadow:!0})}),f(w,g)},$$slots:{default:!0}})}),f(t,l)},$$slots:{default:!0}});var K=r(J,2);n(K,()=>o.DirectionalLight,(t,a)=>{a(t,{intensity:1,position:[1,0,11]})});var N=r(K,2);n(N,()=>o.DirectionalLight,(t,a)=>{a(t,{intensity:1,position:[-5,0,-11]})});var ge=r(N,2);n(ge,()=>o.AmbientLight,(t,a)=>{a(t,{intensity:.3,position:[0,1,0]})}),f(B,j),ze()}function Ve(B){Se(B,{children:(I,z)=>{je(I,{})},$$slots:{default:!0}})}export{Ve as component};
