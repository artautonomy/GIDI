import{s as Dt,c as ce,d as xe,a as D,t as B,b as bt}from"../chunks/disclose-version.CyJLuhDn.js";import{A as Ne,a5 as Bt,a0 as Ft,O as _t,V as Ut,a6 as jt,aB as Xt,b as C,ai as Lt,p as Ae,q as De,v as k,g as e,a as pt,j as G,k as Oe,o as b,f as K,aC as he,aD as at,t as ae,e as le,aE as Se,aF as W,l as J,m as V,aG as Vt,at as ue,aH as Xe,aA as Nt}from"../chunks/utils.CQdqtoc_.js";import{l as mt,a as Wt,w as Gt,e as R,s as Ke,d as Yt}from"../chunks/render.DKswsmsh.js";import{c as ie,i as ve,p as f,b as Je}from"../chunks/props.MNjYdPXW.js";import{a as X,r as te,b as ye,s as Me,w as Te,c as Kt}from"../chunks/index.LDKbWZ8V.js";import{i as Zt,p as ge,o as Jt,c as rt}from"../chunks/index-client.DzFwc65J.js";import{u as Qt,a as $t,i as ea,T as $e,m as wt,c as et,A as ta,e as aa,C as ra,O as na,d as _e,I as sa,f as ia,B as la,b as oa,k as ua,g as ca,P as va,M as da,h as fa}from"../chunks/Mirror.BLHeOEJu.js";import"../chunks/legacy.CRCYV9Jl.js";import{M as ga,S as ee}from"../chunks/store.2xqInZ_v.js";import{i as We}from"../chunks/lifecycle.C-_gddKC.js";function vt(r,t){Ne&&Bt(Ft(r)),_t(()=>{var l=t();for(var a in l){var i=l[a];i?r.style.setProperty(a,i):r.style.removeProperty(a)}}),Ut(()=>{r.remove()})}function ha(r,t,l,a,i){var o;Ne&&jt();var d=(o=t.$$slots)==null?void 0:o[l],h=!1;d===!0&&(d=t.children,h=!0),d===void 0||d(r,h?()=>a:a)}function ba(r,t,l){var a=r.__className,i=pa(t);Ne&&r.className===i?r.__className=i:(a!==i||Ne&&r.className!==i)&&(t==null&&!l?r.removeAttribute("class"):r.className=i,r.__className=i)}function pa(r,t){return(r??"")+""}function yt(r,t,l){if(l){if(r.classList.contains(t))return;r.classList.add(t)}else{if(!r.classList.contains(t))return;r.classList.remove(t)}}function Ve(r,t,l=t){var a=Xt();mt(r,"input",i=>{var d=i?r.defaultValue:r.value;if(d=dt(r)?ft(d):d,l(d),a&&d!==(d=t())){var h=r.selectionStart,o=r.selectionEnd;r.value=d??"",o!==null&&(r.selectionStart=h,r.selectionEnd=Math.min(o,r.value.length))}}),(Ne&&r.defaultValue!==r.value||C(t)==null&&r.value)&&l(dt(r)?ft(r.value):r.value),_t(()=>{var i=t();dt(r)&&i===ft(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function _a(r,t,l=t){mt(r,"change",a=>{var i=a?r.defaultChecked:r.checked;l(i)}),(Ne&&r.defaultChecked!==r.checked||C(t)==null)&&l(r.checked),_t(()=>{var a=t();r.checked=!!a})}function dt(r){var t=r.type;return t==="number"||t==="range"}function ft(r){return r===""?null:+r}function Mt(r,t,l){if(r.multiple)return xa(r,t);for(var a of r.options){var i=Ze(a);if(Zt(i,t)){a.selected=!0;return}}(!l||t!==void 0)&&(r.selectedIndex=-1)}function ma(r,t){Lt(()=>{var l=new MutationObserver(()=>{var a=r.__value;Mt(r,a)});return l.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function ya(r,t,l=t){var a=!0;mt(r,"change",i=>{var d=i?"[selected]":":checked",h;if(r.multiple)h=[].map.call(r.querySelectorAll(d),Ze);else{var o=r.querySelector(d)??r.querySelector("option:not([disabled])");h=o&&Ze(o)}l(h)}),Lt(()=>{var i=t();if(Mt(r,i,a),a&&i===void 0){var d=r.querySelector(":checked");d!==null&&(i=Ze(d),l(i))}r.__value=i,a=!1}),ma(r)}function xa(r,t){for(var l of r.options)l.selected=~t.indexOf(Ze(l))}function Ze(r){return"__value"in r?r.__value:r.value}function Ct(r,t){Wt(window,["resize"],()=>Gt(()=>t(window[r])))}function ka(r){return function(...t){var l=t[0];l.target===this&&(r==null||r.apply(this,t))}}function Le(r){return function(...t){var l=t[0];return l.preventDefault(),r==null?void 0:r.apply(this,t)}}var wa=B("<!> <!> <!>",1),Ca=B("<!> <!>",1),Da=B("<!> <!>",1),La=B("<!> <!> <!> <!> <!> <!> <!> <!>",1);function Ma(r,t){Ae(t,!0);const l=Dt(),a=()=>bt(ee,"$Settings",l),i=()=>bt(s,"$hovering",l),d=Qt(),h=ge(d.scene);let o=De(ge([]));const u=ga.subscribe(n=>{k(o,ge(n))});Jt(u);const{hovering:s,onPointerEnter:y,onPointerLeave:Q}=$t();ea();let P=50,z=De(!1),T=De(ge(a().colours.key)),E=De("Press and hold the mouse to rotate the scene");setTimeout(()=>{e(E)=="Press and hold the mouse to rotate the scene"&&k(E,"To zoom in and out use the mousewheel")},4e3);const be=new $e(0,{duration:1e3,easing:wt}),re=new $e(1,{duration:1e3,easing:et}),Y=new $e(0,{duration:1e3,easing:et});be.target=P;function ne(){ce(ee,C(a).edit=!0,C(a)),k(T,ge(a().colours.key)),be.set(25,{duration:1e3,easing:ua}),re.target=0,setTimeout(()=>{k(z,!0)},2e3)}pt(()=>{a().edit||be.set(50,{duration:1e3,easing:wt})}),pt(()=>{h&&(h.background=new ra(`rgb(${a().colours.background.r},${a().colours.background.g},${a().colours.background.b})`)),i()?k(T,ge({r:255-a().colours.background.r,g:255-a().colours.background.g,b:255-a().colours.background.b})):k(T,ge(a().colours.key))}),ce(ee,C(a).orbitControls=!0,C(a)),ce(ee,C(a).autoRotate=!1,C(a));var F=La(),fe=G(F);ie(fe,()=>_e.OrthographicCamera,(n,v)=>{v(n,{makeDefault:!0,position:[7.5,10,20],near:.001,far:5e3,get zoom(){return be.current},children:(N,c)=>{var g=K(()=>!a().edit);na(N,{enableDamping:!0,get enableZoom(){return e(g)},get autoRotateSpeed(){return a().autoRotateSpeed},get autoRotate(){return a().autoRotate},get enabled(){return a().orbitControls},onstart:L=>{Y.target=.75,k(E,"To edit the scene click here")},onend:L=>{P=L.target.object.zoom,console.log(P)}})},$$slots:{default:!0}})});var oe=b(fe,2);ie(oe,()=>_e.DirectionalLight,(n,v)=>{v(n,{castShadow:!0,get intensity(){return a().lighting.front},position:[0,0,5]})});var pe=b(oe,2);ie(pe,()=>_e.DirectionalLight,(n,v)=>{v(n,{castShadow:!0,get intensity(){return a().lighting.front},position:[0,0,-5]})});var w=b(pe,2);ie(w,()=>_e.DirectionalLight,(n,v)=>{v(n,{castShadow:!0,get intensity(){return a().lighting.side},position:[5,0,0]})});var x=b(w,2);ie(x,()=>_e.DirectionalLight,(n,v)=>{v(n,{castShadow:!0,get intensity(){return a().lighting.side},position:[-5,0,0]})});var p=b(x,2);ie(p,()=>_e.AmbientLight,(n,v)=>{v(n,{get intensity(){return a().lighting.above},position:[0,15,0]})});var S=b(p,2);ta(S,{y:!1,auto:!0,precise:!0,children:(n,v)=>{var N=xe(),c=G(N);aa(c,17,()=>e(o),ia,(g,L)=>{var q=xe(),j=G(q);ie(j,()=>_e.Group,(I,me)=>{me(I,{"position.y":-window.innerHeight/200,onpointerenter:y,onpointerleave:Q,onclick:()=>ne(),children:(A,ke)=>{sa(A,{children:(se,U)=>{var Ce=wa(),ze=G(Ce);ie(ze,()=>_e.BoxGeometry,(_,M)=>{M(_,{})});var Ge=b(ze,2);ie(Ge,()=>_e.MeshStandardMaterial,(_,M)=>{M(_,{shadow:!0})});var nt=b(Ge,2);{var st=_=>{var M=K(()=>i()?250:a().attack),Z=K(()=>i()?250:a().release);ca(_,{get position(){return e(L).position},get scale(){return e(L).scale},get velocity(){return e(L).velocity},get attack(){return e(M)},get release(){return e(Z)},get keyColour(){return e(T)},get expressionColour(){return a().colours.expression}})},it=_=>{var M=xe(),Z=G(M);{var He=de=>{var Be=K(()=>i()?250:a().attack),Fe=K(()=>i()?250:a().release);va(de,{get position(){return e(L).position},get scale(){return e(L).scale},get velocity(){return e(L).velocity},get attack(){return e(Be)},get release(){return e(Fe)},get keyColour(){return e(T)},get expressionColour(){return a().colours.expression}})},we=de=>{var Be=xe(),Fe=G(Be);{var lt=Ye=>{var ot=K(()=>i()?250:a().attack),ut=K(()=>i()?250:a().release);da(Ye,{get position(){return e(L).position},get scale(){return e(L).scale},get velocity(){return e(L).velocity},get attack(){return e(ot)},get release(){return e(ut)},get keyColour(){return e(T)},get expressionColour(){return a().colours.expression}})};ve(Fe,Ye=>{a().scene=="Mirror"&&Ye(lt)},!0)}D(de,Be)};ve(Z,de=>{a().scene=="Piano"?de(He):de(we,!1)},!0)}D(_,M)};ve(nt,_=>{a().scene=="Cube"?_(st):_(it,!1)})}D(se,Ce)},$$slots:{default:!0}})},$$slots:{default:!0}})}),D(g,q)}),D(n,N)},$$slots:{default:!0}});var H=b(S,2);{var m=n=>{la(n,{"position.y":-window.innerHeight/120,children:(v,N)=>{var c=Da(),g=G(c);ie(g,()=>_e.Mesh,(q,j)=>{j(q,{get scale(){return Y.current},"position.y":window.innerHeight/750,children:(I,me)=>{var A=Ca(),ke=G(A);ie(ke,()=>_e.ConeGeometry,(U,Ce)=>{Ce(U,{})});var se=b(ke,2);ie(se,()=>_e.MeshBasicMaterial,(U,Ce)=>{Ce(U,{color:"orange",transparent:!0,get opacity(){return re.current}})}),D(I,A)},$$slots:{default:!0}})});var L=b(g,2);oa(L,{get fillOpacity(){return re.current},get text(){return e(E)},color:"orange",get font(){return a().font},fontSize:window.innerWidth/6250,textAlign:"center",anchorX:"center","position.y":window.innerHeight/1250}),D(v,c)},$$slots:{default:!0}})};ve(H,n=>{e(z)||n(m)})}D(r,F),Oe()}var Ta=B('<input type="hidden">'),za=B('<div class="slider svelte-w4j1dz" role="slider" tabindex="0"><div class="track svelte-w4j1dz"></div> <div class="thumb svelte-w4j1dz"></div></div> <!>',1);function tt(r,t){Ae(t,!1);const l=W(),a=W(),i=W(),d=W();let h=f(t,"min",8,0),o=f(t,"max",8,100),u=f(t,"step",8,1),s=f(t,"value",12,50),y=f(t,"ariaValueText",8,c=>c.toString()),Q=f(t,"name",8,void 0),P=f(t,"direction",8,"horizontal"),z=f(t,"reverse",8,!1),T=f(t,"keyboardOnly",8,!1),E=f(t,"slider",12,void 0),be=f(t,"ariaLabel",8,void 0),re=f(t,"ariaLabelledBy",8,void 0),Y=f(t,"ariaControls",8,void 0),ne=f(t,"isDragging",12,!1);const F=rt();function fe(c){const g=1/e(i),L=Math.round(c*g)/g;return Math.max(e(l),Math.min(e(a),L))}function oe(c){const g=c.shiftKey?e(i)*10:e(i);c.key==="ArrowUp"||c.key==="ArrowRight"?(s(s()+g),c.preventDefault()):c.key==="ArrowDown"||c.key==="ArrowLeft"?(s(s()-g),c.preventDefault()):c.key==="Home"?(s(e(l)),c.preventDefault()):c.key==="End"?(s(e(a)),c.preventDefault()):c.key==="PageUp"?(s(s()+e(i)*10),c.preventDefault()):c.key==="PageDown"&&(s(s()-e(i)*10),c.preventDefault()),s(fe(s())),F("input",s())}const pe={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function w(c){var j,I;const g=((j=E())==null?void 0:j[pe[P()].clientSize])||120,L=((I=E())==null?void 0:I.getBoundingClientRect()[pe[P()].offset])||0;let q=c[pe[P()].client]-L;P()==="vertical"&&(q=-1*q+g),z()?s(e(a)-q/g*(e(a)-e(l))):s(q/g*(e(a)-e(l))+e(l)),s(fe(s())),F("input",s())}function x(c){w(c),ne(!0)}function p(c){ne()&&w(c)}function S(){ne(!1)}function H(c){w({clientX:c.changedTouches[0].clientX,clientY:c.changedTouches[0].clientY})}he(()=>le(h()),()=>{k(l,typeof h()=="string"?parseFloat(h()):h())}),he(()=>le(o()),()=>{k(a,typeof o()=="string"?parseFloat(o()):o())}),he(()=>le(u()),()=>{k(i,typeof u()=="string"?parseFloat(u()):u())}),he(()=>(le(s()),e(l),e(a)),()=>{k(d,((s()-e(l))/(e(a)-e(l))*1).toFixed(4))}),at(),We();var m=za();R("mousemove",Se,p),R("mouseup",Se,S);var n=G(m);ae(()=>X(n,"aria-valuetext",y()(s()))),Je(n,c=>E(c),()=>E());var v=b(n,2);{var N=c=>{var g=Ta();te(g),ae(()=>{X(g,"name",Q()),ye(g,s())}),D(c,g)};ve(v,c=>{Q()&&c(N)})}ae(()=>{X(n,"aria-orientation",P()),X(n,"aria-valuemax",e(a)),X(n,"aria-valuemin",e(l)),X(n,"aria-valuenow",s()),X(n,"aria-label",be()),X(n,"aria-labelledby",re()),X(n,"aria-controls",Y()),yt(n,"reverse",z()),Me(n,"--position",e(d))}),R("keydown",n,oe),R("mousedown",n,ka(function(...c){var g;(g=T()?void 0:x)==null||g.apply(this,c)})),R("touchstart",n,Le(function(...c){var g;(g=T()?void 0:H)==null||g.apply(this,c)}),void 0,!1),R("touchmove",n,Le(function(...c){var g;(g=T()?void 0:H)==null||g.apply(this,c)}),void 0,!1),R("touchend",n,Le(function(...c){var g;(g=T()?void 0:H)==null||g.apply(this,c)}),void 0,!1),D(r,m),Oe()}var Sa=B('<div class="picker svelte-1x9tz9y"><!> <div class="s svelte-1x9tz9y"><!></div> <div class="v svelte-1x9tz9y"><!></div></div>');function Aa(r,t){Ae(t,!1);const l=rt();let a=f(t,"components",8),i=f(t,"h",8),d=f(t,"s",12),h=f(t,"v",12),o=f(t,"isDark",8),u=f(t,"texts",8),s=W(),y=!1,Q=W(),P=W({x:100,y:0});function z(p,S,H){return Math.min(Math.max(S,p),H)}function T(p){const{width:S,left:H,height:m,top:n}=e(s).getBoundingClientRect(),v={x:z(p.clientX-H,0,S),y:z(p.clientY-n,0,m)};d(z(v.x/S,0,1)*100),h(z((m-v.y)/m,0,1)*100)}function E(p){p.button===0&&(y=!0,T(p))}function be(){y=!1}function re(p){y&&T(p)}function Y(p){p.target.isSameNode(e(s))}function ne(p){p.preventDefault(),T(p.changedTouches[0])}he(()=>(le(i()),Te),()=>{typeof i()=="number"&&k(Q,Te({h:i(),s:100,v:100,a:1}).toHex())}),he(()=>(le(d()),le(h()),e(s)),()=>{typeof d()=="number"&&typeof h()=="number"&&e(s)&&k(P,{x:d(),y:100-h()})}),he(()=>(le(d()),le(h())),()=>{l("input",{s:d(),v:h()})}),at(),We();var F=Sa();R("mouseup",Se,be),R("mousedown",Se,Y),R("mousemove",Se,re);var fe=J(F);ie(fe,()=>a().pickerIndicator,(p,S)=>{S(p,{get pos(){return e(P)},get isDark(){return o()}})});var oe=b(fe,2),pe=J(oe);tt(pe,{keyboardOnly:!0,ariaValueText:p=>`${p}%`,get ariaLabel(){return u().label.s},get value(){return d()},set value(p){d(p)},$$legacy:!0}),V(oe);var w=b(oe,2),x=J(w);tt(x,{keyboardOnly:!0,ariaValueText:p=>`${p}%`,direction:"vertical",get ariaLabel(){return u().label.v},get value(){return h()},set value(p){h(p)},$$legacy:!0}),V(w),V(F),Je(F,p=>k(s,p),()=>e(s)),ae(()=>{Me(F,"--picker-color-bg",e(Q)),Me(oe,"--pos-y",e(P).y),Me(w,"--pos-x",e(P).x)}),R("mousedown",F,Le(E)),R("touchstart",F,ne,void 0,!1),R("touchmove",F,Le(ne),void 0,!1),R("touchend",F,ne,void 0,!1),D(r,F),Oe()}var Oa=B('<div class="picker-indicator svelte-i5mg2p"></div>');function Pa(r,t){Ae(t,!1);let l=f(t,"pos",8),a=f(t,"isDark",8);We();var i=Oa();ae(()=>{yt(i,"is-dark",a()),Me(i,"--pos-x",l().x),Me(i,"--pos-y",l().y)}),D(r,i),Oe()}var Ra=B('<input class="svelte-qtukzs">'),Ia=B('<input type="number" min="0" max="255" class="svelte-qtukzs"> <input type="number" min="0" max="255" class="svelte-qtukzs"> <input type="number" min="0" max="255" class="svelte-qtukzs">',1),Ea=B('<input type="number" min="0" max="360" class="svelte-qtukzs"> <input type="number" min="0" max="100" class="svelte-qtukzs"> <input type="number" min="0" max="100" class="svelte-qtukzs">',1),qa=B('<input type="number" min="0" max="1" step="0.01" class="svelte-qtukzs">'),Ha=B('<button type="button" class="svelte-qtukzs"><span class="disappear svelte-qtukzs" aria-hidden="true"> </span> <span class="appear svelte-qtukzs"> </span></button>'),Ba=B('<div class="button-like svelte-qtukzs"> </div>'),Fa=B('<div class="text-input svelte-qtukzs"><div class="input-container svelte-qtukzs"><!> <!></div> <!></div>');function Ua(r,t){Ae(t,!1);const l=W(),a=W(),i=W(),d=W(),h=W(),o=rt();let u=f(t,"isAlpha",8),s=f(t,"rgb",12),y=f(t,"hsv",12),Q=f(t,"hex",12),P=f(t,"textInputModes",8),z=f(t,"texts",8);const T=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;let E=W(P()[0]||"hex");function be(m){const n=m.target;T.test(n.value)&&(Q(n.value),o("input",{hex:Q()}))}function re(m){return function(n){s({...s(),[m]:parseFloat(n.target.value)}),o("input",{rgb:s()})}}function Y(m){return function(n){y({...y(),[m]:parseFloat(n.target.value)}),o("input",{hsv:y()})}}he(()=>(le(P()),e(E)),()=>{k(l,P()[(P().indexOf(e(E))+1)%P().length])}),he(()=>le(y()),()=>{k(a,Math.round(y().h))}),he(()=>le(y()),()=>{k(i,Math.round(y().s))}),he(()=>le(y()),()=>{k(d,Math.round(y().v))}),he(()=>le(y()),()=>{k(h,y().a===void 0?1:Math.round(y().a*100)/100)}),at(),We();var ne=Fa(),F=J(ne),fe=J(F);{var oe=m=>{var n=Ra();te(n),ae(()=>{X(n,"aria-label",z().label.hex),ye(n,Q()),Me(n,"flex",3)}),R("input",n,be),D(m,n)},pe=m=>{var n=xe(),v=G(n);{var N=g=>{var L=Ia(),q=G(L),j=K(()=>re("r"));te(q);var I=b(q,2),me=K(()=>re("g"));te(I);var A=b(I,2),ke=K(()=>re("b"));te(A),ae(()=>{X(q,"aria-label",z().label.r),ye(q,s().r),X(I,"aria-label",z().label.g),ye(I,s().g),X(A,"aria-label",z().label.b),ye(A,s().b)}),R("input",q,function(...se){var U;(U=e(j))==null||U.apply(this,se)}),R("input",I,function(...se){var U;(U=e(me))==null||U.apply(this,se)}),R("input",A,function(...se){var U;(U=e(ke))==null||U.apply(this,se)}),D(g,L)},c=g=>{var L=Ea(),q=G(L),j=K(()=>Y("h"));te(q);var I=b(q,2),me=K(()=>Y("s"));te(I);var A=b(I,2),ke=K(()=>Y("v"));te(A),ae(()=>{X(q,"aria-label",z().label.h),ye(q,e(a)),X(I,"aria-label",z().label.s),ye(I,e(i)),X(A,"aria-label",z().label.v),ye(A,e(d))}),R("input",q,function(...se){var U;(U=e(j))==null||U.apply(this,se)}),R("input",I,function(...se){var U;(U=e(me))==null||U.apply(this,se)}),R("input",A,function(...se){var U;(U=e(ke))==null||U.apply(this,se)}),D(g,L)};ve(v,g=>{e(E)==="rgb"?g(N):g(c,!1)},!0)}D(m,n)};ve(fe,m=>{e(E)==="hex"?m(oe):m(pe,!1)})}var w=b(fe,2);{var x=m=>{var n=qa(),v=K(()=>e(E)==="hsv"?Y("a"):re("a"));te(n),ae(()=>{X(n,"aria-label",z().label.a),ye(n,e(h))}),R("input",n,function(...N){var c;(c=e(v))==null||c.apply(this,N)}),D(m,n)};ve(w,m=>{u()&&m(x)})}V(F);var p=b(F,2);{var S=m=>{var n=Ha(),v=J(n),N=J(v,!0);V(v);var c=b(v,2),g=J(c);V(c),V(n),ae(()=>{Ke(N,z().color[e(E)]),Ke(g,`${z().changeTo??""} ${e(l)??""}`)}),R("click",n,()=>k(E,e(l))),D(m,n)},H=m=>{var n=Ba(),v=J(n,!0);V(n),ae(()=>Ke(v,z().color[e(E)])),D(m,n)};ve(p,m=>{P().length>1?m(S):m(H,!1)})}V(ne),D(r,ne),Oe()}var ja=B('<label class="svelte-lemcb1"><div class="container svelte-lemcb1"><input type="color" aria-haspopup="dialog" class="svelte-lemcb1"> <div class="alpha svelte-lemcb1"></div> <div class="color svelte-lemcb1"></div></div> </label>');function Xa(r,t){let l=f(t,"labelElement",12),a=f(t,"hex",8),i=f(t,"label",8),d=f(t,"name",8,void 0);f(t,"isOpen",8);function h(){}var o=ja(),u=J(o),s=J(u);te(s);var y=b(s,4);V(u);var Q=b(u);V(o),Je(o,P=>l(P),()=>l()),ae(()=>{X(s,"name",d()),ye(s,a()),Me(y,"background",a()),Ke(Q,` ${i()??""}`)}),R("click",s,Le(h)),R("mousedown",s,Le(h)),R("click",o,Le(h)),R("mousedown",o,Le(h)),D(r,o)}var Va=B('<div class="wrapper svelte-h9ar9" aria-label="color picker"><!></div>');function Na(r,t){let l=f(t,"wrapper",12),a=f(t,"isOpen",8),i=f(t,"isDialog",8);var d=Va(),h=J(d);ha(h,t,"default",{}),V(d),Je(d,o=>l(o),()=>l()),ae(()=>{X(d,"role",i()?"dialog":void 0),yt(d,"is-open",a())}),D(r,d)}const gt={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},Tt="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function Wa(r){return function(t){if(t.target===window)return;const l=t.target;if(!r.contains(l))return;const a=r.querySelectorAll(Tt),i=a[0],d=a[a.length-1];function h(u){return u.code==="Tab"&&!u.shiftKey}function o(u){return u.code==="Tab"&&u.shiftKey}h(t)&&t.target===d?(t.preventDefault(),i.focus()):o(t)&&t.target===i&&(t.preventDefault(),d.focus())}}const Ga=r=>{const t=r.querySelector(Tt);t&&t.focus();const l=Wa(r);return document.addEventListener("keydown",l),{destroy(){document.removeEventListener("keydown",l)}}};var Ya=B('<label class="nullability-checkbox svelte-oskb5b"><div class="svelte-oskb5b"><input type="checkbox" class="svelte-oskb5b"> <span class="svelte-oskb5b"></span></div> </label>');function Ka(r,t){Ae(t,!1);let l=f(t,"isUndefined",12),a=f(t,"texts",8);We();var i=Ya(),d=J(i),h=J(d);te(h),Vt(2),V(d);var o=b(d);V(i),ae(()=>Ke(o,` ${a().label.withoutColor??""}`)),_a(h,l),D(r,i),Oe()}var Za=B('<input type="hidden">'),Ja=B('<div class="a svelte-tsvobk"><!></div>'),Qa=B('<!> <!> <div class="h svelte-tsvobk"><!></div> <!> <!> <!>',1),$a=B("<span><!> <!></span>");function ht(r,t){Ae(t,!1);const l=rt();let a=f(t,"components",24,()=>({})),i=f(t,"label",8,"Choose a color"),d=f(t,"name",8,void 0),h=f(t,"nullable",8,!1),o=f(t,"rgb",28,()=>h()?void 0:{r:255,g:0,b:0,a:1}),u=f(t,"hsv",28,()=>h()?void 0:{h:0,s:100,v:100,a:1}),s=f(t,"hex",28,()=>h()?void 0:"#ff0000"),y=f(t,"color",12,void 0),Q=f(t,"isDark",12,!1),P=f(t,"isAlpha",8,!0),z=f(t,"isDialog",8,!0),T=f(t,"isOpen",28,()=>!z()),E=f(t,"position",8,"fixed"),be=f(t,"isTextInput",8,!0),re=f(t,"textInputModes",24,()=>["hex","rgb","hsv"]),Y=f(t,"sliderDirection",8,"vertical"),ne=f(t,"disableCloseClickOutside",8,!1),F=f(t,"a11yColors",24,()=>[{bgHex:"#ffffff"}]),fe=f(t,"a11yLevel",8,"AA"),oe=f(t,"texts",8,void 0),pe=f(t,"a11yTexts",8,void 0),w=W({r:255,g:0,b:0,a:1}),x=W({h:0,s:100,v:100,a:1}),p=W("#ff0000"),S=W(!1),H=e(S),m=W(),n=W(),v=W(),N,c=W(),g=W();const L=12,q={pickerIndicator:Pa,textInput:Ua,input:Xa,nullabilityCheckbox:Ka,wrapper:Na};function j(){return{...q,...a()}}function I(){var _,M,Z;return{label:{...gt.label,...(_=oe())==null?void 0:_.label},color:{...gt.color,...(M=oe())==null?void 0:M.color},changeTo:((Z=oe())==null?void 0:Z.changeTo)??gt.changeTo}}function me({target:_}){z()&&(e(n).contains(_)||e(n).isSameNode(_)?T(!T()):T()&&!e(v).contains(_)&&!ne()&&T(!1))}function A({key:_,target:M}){var Z;if(z())_==="Enter"&&e(n).contains(M)?(T(!T()),setTimeout(()=>{N=Ga(e(v))})):_==="Escape"&&T()&&(T(!1),e(m).contains(M)&&((Z=e(n))==null||Z.focus(),N==null||N.destroy()));else return}function ke(){var _,M;if(e(S)&&!H){H=!0,u(o(s(void 0))),l("input",{color:y(),hsv:u(),rgb:o(),hex:s()});return}else if(H&&!e(S)){H=!1,u(e(x)),o(e(w)),s(e(p)),l("input",{color:y(),hsv:u(),rgb:o(),hex:s()});return}if(!u()&&!o()&&!s()){k(S,!0),H=!0,l("input",{color:void 0,hsv:u(),rgb:o(),hex:s()});return}u()&&o()&&u().h===e(x).h&&u().s===e(x).s&&u().v===e(x).v&&u().a===e(x).a&&o().r===e(w).r&&o().g===e(w).g&&o().b===e(w).b&&o().a===e(w).a&&s()===e(p)||(k(S,!1),u()&&u().a===void 0&&u(u().a=1,!0),e(x).a===void 0&&Xe(x,e(x).a=1),o()&&o().a===void 0&&o(o().a=1,!0),e(w).a===void 0&&Xe(w,e(w).a=1),((_=s())==null?void 0:_.substring(7))==="ff"&&s(s().substring(0,7)),((M=s())==null?void 0:M.substring(7))==="ff"&&s(s().substring(0,7)),u()&&(u().h!==e(x).h||u().s!==e(x).s||u().v!==e(x).v||u().a!==e(x).a||!o()&&!s())?(y(Te(u())),o(y().toRgb()),s(y().toHex())):o()&&(o().r!==e(w).r||o().g!==e(w).g||o().b!==e(w).b||o().a!==e(w).a||!u()&&!s())?(y(Te(o())),s(y().toHex()),u(y().toHsv())):s()&&(s()!==e(p)||!u()&&!o())&&(y(Te(s())),o(y().toRgb()),u(y().toHsv())),y()&&Q(y().isDark()),s()&&(k(x,Object.assign({},u())),k(w,Object.assign({},o())),k(p,s()),H=e(S),l("input",{color:y(),hsv:u(),rgb:o(),hex:s()})))}function se(_){return M=>{u()||u({...e(x)}),u(u()[_]=M.detail,!0)}}function U(_){return M=>{u()||u({...e(x)}),_.forEach(Z=>{u()&&u(u()[Z]=M.detail[Z],!0)})}}async function Ce(){if(await Nt(),E()!=="fixed"&&T()&&z()&&e(n)&&e(v)){const _=e(v).getBoundingClientRect(),M=e(n).getBoundingClientRect();(E()==="responsive"||E()==="responsive-y")&&(M.top+_.height+L>e(g)?Xe(v,e(v).style.top=`-${_.height+L}px`):Xe(v,e(v).style.top=`${M.height+L}px`)),(E()==="responsive"||E()==="responsive-x")&&(M.left+_.width+L>e(c)?Xe(v,e(v).style.left=`-${_.width-M.width+L}px`):Xe(v,e(v).style.left=`${L}px`))}}he(()=>(le(u()),le(o()),le(s())),()=>{(u()||o()||s())&&ke()}),he(()=>e(S),()=>{e(S),ke()}),he(()=>(e(c),e(g),le(T())),()=>{e(c),e(g),T(),Ce()}),at(),We();var ze=$a();R("mousedown",Se,me),R("keyup",Se,A),R("scroll",Se,Ce);var Ge=J(ze);{var nt=_=>{var M=xe(),Z=G(M);ie(Z,()=>j().input,(He,we)=>{we(He,{isOpen:!0,get hex(){return s()},get label(){return i()},get name(){return d()},get labelElement(){return e(n)},set labelElement(de){k(n,de)},$$legacy:!0})}),D(_,M)},st=_=>{var M=xe(),Z=G(M);{var He=we=>{var de=Za();te(de),ae(()=>{ye(de,s()),X(de,"name",d())}),D(we,de)};ve(Z,we=>{d()&&we(He)},!0)}D(_,M)};ve(Ge,_=>{z()?_(nt):_(st,!1)})}var it=b(Ge,2);ie(it,()=>j().wrapper,(_,M)=>{M(_,{get isOpen(){return T()},get isDialog(){return z()},get wrapper(){return e(v)},set wrapper(Z){k(v,Z)},children:(Z,He)=>{var we=Qa(),de=G(we);{var Be=O=>{var $=xe(),Pe=G($),Re=ue(I);ie(Pe,()=>j().nullabilityCheckbox,(Ie,Ee)=>{Ee(Ie,{get texts(){return e(Re)},get isUndefined(){return e(S)},set isUndefined(qe){k(S,qe)},$$legacy:!0})}),D(O,$)};ve(de,O=>{h()&&O(Be)})}var Fe=b(de,2),lt=ue(j),Ye=ue(()=>{var O;return((O=u())==null?void 0:O.h)??e(x).h}),ot=ue(()=>{var O;return((O=u())==null?void 0:O.s)??e(x).s}),ut=ue(()=>{var O;return((O=u())==null?void 0:O.v)??e(x).v}),zt=K(()=>U(["s","v"])),St=ue(I);Aa(Fe,{get components(){return e(lt)},get h(){return e(Ye)},get s(){return e(ot)},get v(){return e(ut)},get isDark(){return Q()},get texts(){return e(St)},$$events:{input(...O){var $;($=e(zt))==null||$.apply(this,O)}}});var ct=b(Fe,2),At=J(ct),Ot=ue(()=>{var O;return((O=u())==null?void 0:O.h)??e(x).h}),Pt=K(()=>se("h")),Rt=ue(()=>Y()==="vertical");tt(At,{min:0,max:360,step:1,get value(){return e(Ot)},get direction(){return Y()},get reverse(){return e(Rt)},get ariaLabel(){return I().label.h},$$events:{input(...O){var $;($=e(Pt))==null||$.apply(this,O)}}}),V(ct);var xt=b(ct,2);{var It=O=>{var $=Ja();const Pe=ue(()=>(s()?s():e(p)).substring(0,7));ae(()=>Me($,"--alphaless-color",e(Pe)));var Re=J($),Ie=ue(()=>{var Ue;return((Ue=u())==null?void 0:Ue.a)??e(x).a}),Ee=K(()=>se("a")),qe=ue(()=>Y()==="vertical");tt(Re,{min:0,max:1,step:.01,get value(){return e(Ie)},get direction(){return Y()},get reverse(){return e(qe)},get ariaLabel(){return I().label.a},$$events:{input(...Ue){var Qe;(Qe=e(Ee))==null||Qe.apply(this,Ue)}}}),V($),D(O,$)};ve(xt,O=>{P()&&O(It)})}var kt=b(xt,2);{var Et=O=>{var $=xe(),Pe=G($),Re=ue(()=>s()??e(p)),Ie=ue(()=>o()??e(w)),Ee=ue(()=>u()??e(x)),qe=ue(I);ie(Pe,()=>j().textInput,(Ue,Qe)=>{Qe(Ue,{get hex(){return e(Re)},get rgb(){return e(Ie)},get hsv(){return e(Ee)},get isAlpha(){return P()},get textInputModes(){return re()},get texts(){return e(qe)},$$events:{input:({detail:je})=>{je.hsv?u(je.hsv):je.rgb?o(je.rgb):je.hex&&s(je.hex)}}})}),D(O,$)};ve(kt,O=>{be()&&O(Et)})}var qt=b(kt,2);{var Ht=O=>{var $=xe(),Pe=G($),Re=ue(j),Ie=ue(()=>s()||"#00000000");ie(Pe,()=>j().a11yNotice,(Ee,qe)=>{qe(Ee,{get components(){return e(Re)},get a11yColors(){return F()},get hex(){return e(Ie)},get a11yTexts(){return pe()},get a11yLevel(){return fe()}})}),D(O,$)};ve(qt,O=>{j().a11yNotice&&O(Ht)})}D(Z,we)},$$slots:{default:!0},$$legacy:!0})}),V(ze),Je(ze,_=>k(m,_),()=>e(m)),ae(()=>ba(ze,`color-picker ${Y()??""} svelte-tsvobk`)),Ct("innerWidth",_=>k(c,_)),Ct("innerHeight",_=>k(g,_)),D(r,ze),Oe()}function er(r,t){ce(ee,C(t).styleReset=!0,C(t))}var tr=(r,t)=>k(t,"notes"),ar=(r,t)=>k(t,"scene"),rr=(r,t)=>{ce(ee,C(t).remap=!0,C(t))},nr=B('<h1 class="svelte-15n0il7">Colours</h1> <label for="note" class="svelte-15n0il7">Note</label> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <label for="expression" class="svelte-15n0il7">Expression</label> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <h1 class="svelte-15n0il7">ADSR</h1> <label for="attack" class="svelte-15n0il7">Attack</label> <input type="range" min="0" max="4000" step="0.1" id="attack" class="svelte-15n0il7"> <label for="release" class="svelte-15n0il7">Release</label> <input type="range" min="0" max="4000" step="0.1" id="release" class="svelte-15n0il7"> <button id="remap" class="svelte-15n0il7">Remap</button>',1),sr=(r,t)=>ce(ee,C(t).autoRotate=!t().autoRotate,C(t)),ir=B('<h1 class="svelte-15n0il7">Style</h1> <select name="styles" id="styles" class="svelte-15n0il7"><option class="svelte-15n0il7">Piano</option><option class="svelte-15n0il7">Cube</option><option class="svelte-15n0il7">Mirror</option></select> <label for="Background Colour" class="svelte-15n0il7">Background Colour</label> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <h1 class="svelte-15n0il7">Light Intensity</h1> <label for="frontLighting" class="svelte-15n0il7">Front Light</label> <input type="range" min="0" max="5.1" step="0.1" id="frontLighting" class="svelte-15n0il7"> <label for="backLighting" class="svelte-15n0il7">Side Light</label> <input type="range" min="0" max="5.1" step="0.1" id="backLighting" class="svelte-15n0il7"> <label for="aboveLighting" class="svelte-15n0il7">Above Light</label> <input type="range" min="0" max="5.1" step="0.1" id="aboveLighting" class="svelte-15n0il7"> <h1 class="svelte-15n0il7">Autorotate</h1> <input id="autoRotate" type="checkbox" class="svelte-15n0il7"> <label for="rotateSpeed" class="svelte-15n0il7">Speed</label> <input type="range" min="0.5" max="10" step="0.1" id="rotateSpeed" class="svelte-15n0il7">',1),lr=(r,t,l)=>{ce(ee,C(t).edit=!1,C(t)),setTimeout(()=>{k(l,ge(Te(`rgb(${t().colours.background.r}, ${t().colours.background.g}, ${t().colours.background.b})`).invert().desaturate(.3).darken(.1)))},2e3)},or=B('<!> <menu class="svelte-15n0il7"><settings class="svelte-15n0il7"><button class="setting svelte-15n0il7">Notes</button> <button class="setting svelte-15n0il7">Scene</button></settings> <!> <button id="close" class="svelte-15n0il7">Close</button></menu>',1);function mr(r,t){Ae(t,!0);const l=Dt(),a=()=>bt(ee,"$Settings",l);let i=De("notes");const d=new $e(0);let h=De(ge({r:a().colours.key.r,g:a().colours.key.g,b:a().colours.key.b,a:1})),o=De(ge(Te(`rgb(${a().colours.expression.r}, ${a().colours.expression.g}, ${a().colours.expression.b})`).toHsv())),u=De(ge(Te(`rgb(${a().colours.background.r}, ${a().colours.background.g}, ${a().colours.background.b})`).toHex())),s=De(ge(Te(`rgb(${a().colours.background.r}, ${a().colours.background.g}, ${a().colours.background.b})`).invert().desaturate(.3).darken(.1)));pt(()=>{a().edit?d.set(1,{delay:250,duration:750,easing:et}):d.set(0,{duration:750,easing:et})});var y=or(),Q=G(y);fa(Q,{children:(w,x)=>{Ma(w,{})},$$slots:{default:!0}});var P=b(Q,2);const z=K(()=>d.current??""),T=K(()=>e(s).toHex()??""),E=K(()=>(e(s).isLight()?"black":"white")??""),be=K(()=>`opacity:${e(z)}; --keyColour:${e(T)}; --menuTextColour: ${e(E)}`);var re=J(P),Y=J(re);Y.__click=[tr,i];var ne=b(Y,2);ne.__click=[ar,i],V(re);var F=b(re,2);{var fe=w=>{var x=nr(),p=b(G(x),4);vt(p,()=>({"--cp-bg-color":`rgba(${a().colours.background.r},${a().colours.background.g},${a().colours.background.b},1)`,"--picker-height":"150px","--picker-width":"150px","--slider-width":"15px","--picker-indicator-size":"10px"})),ht(p.lastChild,{label:"",isAlpha:!1,textInputModes:["rgb"],sliderDirection:"vertical",get rgb(){return e(h)},set rgb(v){k(h,ge(v))},$$events:{input:v=>{ce(ee,C(a).colours.key=v.detail.rgb===void 0?{r:255,g:255,b:255}:v.detail.rgb,C(a))}}}),V(p);var S=b(p,4);vt(S,()=>({"--cp-bg-color":`rgba(${a().colours.background.r},${a().colours.background.g},${a().colours.background.b},1)`,"--picker-height":"150px","--picker-width":"150px","--slider-width":"15px","--picker-indicator-size":"10px"})),ht(S.lastChild,{label:"",isAlpha:!1,textInputModes:["hsv"],sliderDirection:"vertical",get hsv(){return e(o)},set hsv(v){k(o,ge(v))},$$events:{input:v=>{ce(ee,C(a).colours.expression=v.detail.rgb===void 0?{r:255,g:255,b:255}:v.detail.rgb,C(a))}}}),V(S);var H=b(S,6);te(H);var m=b(H,4);te(m);var n=b(m,2);n.__click=[rr,a],Ve(H,()=>a().attack,v=>ce(ee,C(a).attack=v,C(a))),Ve(m,()=>a().release,v=>ce(ee,C(a).release=v,C(a))),D(w,x)},oe=w=>{var x=xe(),p=G(x);{var S=H=>{var m=ir(),n=b(G(m),2);n.__change=[er,a];var v=J(n);v.value=(v.__value="Piano")==null?"":"Piano";var N=b(v);N.value=(N.__value="Cube")==null?"":"Cube";var c=b(N);c.value=(c.__value="Mirror")==null?"":"Mirror",V(n);var g=b(n,4);vt(g,()=>({"--cp-bg-color":`rgba(${a().colours.background.r},${a().colours.background.g},${a().colours.background.b},1)`,"--picker-height":"150px","--picker-width":"150px","--slider-width":"15px","--picker-indicator-size":"10px"})),ht(g.lastChild,{label:"",isAlpha:!1,textInputModes:["rgb"],sliderDirection:"vertical",get hex(){return e(u)},set hex(A){k(u,ge(A))},$$events:{input:A=>{ce(ee,C(a).colours.background=A.detail.rgb===void 0?{r:255,g:255,b:255}:A.detail.rgb,C(a))}}}),V(g);var L=b(g,6);te(L);var q=b(L,4);te(q);var j=b(q,4);te(j);var I=b(j,4);te(I),I.__change=[sr,a];var me=b(I,4);te(me),ae(()=>Kt(I,a().autoRotate)),ya(n,()=>a().scene,A=>ce(ee,C(a).scene=A,C(a))),Ve(L,()=>a().lighting.front,A=>ce(ee,C(a).lighting.front=A,C(a))),Ve(q,()=>a().lighting.side,A=>ce(ee,C(a).lighting.side=A,C(a))),Ve(j,()=>a().lighting.above,A=>ce(ee,C(a).lighting.above=A,C(a))),Ve(me,()=>a().autoRotateSpeed,A=>ce(ee,C(a).autoRotateSpeed=A,C(a))),D(H,m)};ve(p,H=>{e(i)==="scene"&&H(S)},!0)}D(w,x)};ve(F,w=>{e(i)==="notes"?w(fe):w(oe,!1)})}var pe=b(F,2);pe.__click=[lr,a,s],V(P),ae(()=>{X(P,"style",e(be)),X(Y,"style",`background-color:${(e(i)==="notes"?"rgb(33, 122, 67)":"--menuTextColor")??""}`),X(ne,"style",`background-color:${(e(i)==="scene"?"rgb(33, 122, 67)":"--menuTextColor")??""}`)}),D(r,y),Oe()}Yt(["click","change"]);export{mr as component};
