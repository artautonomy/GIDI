import{af as I,ag as E,a6 as m,ah as P,I as k,$ as M,ai as Y,L as $,aj as T,ak as j,al as C,am as X,an as L,X as w,W as O,R as z,B as p,ao as F,ap as G,aq as J,ar as K,as as Q,at as U,au as Z,y as x,p as rr,A as R,k as er,c as tr}from"./utils.F7Ud3tqr.js";import{f as ar}from"./disclose-version.CbQWKql7.js";const nr=["touchstart","touchmove"];function sr(r){return nr.includes(r)}let D=!1;function ir(){D||(D=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function cr(r,e,t,s=!0){s&&t();for(var n of e)r.addEventListener(n,t);I(()=>{for(var a of e)r.removeEventListener(a,t)})}function V(r){var e=P,t=k;E(null),m(null);try{return r()}finally{E(e),m(t)}}function dr(r,e,t,s=t){r.addEventListener(e,()=>V(t));const n=r.__on_r;n?r.__on_r=()=>{n(),s(!0)}:r.__on_r=()=>s(!0),ir()}const W=new Set,S=new Set;function or(r,e,t,s){function n(a){if(s.capture||y.call(e,a),!a.cancelBubble)return V(()=>t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?M(()=>{e.addEventListener(r,n,s)}):e.addEventListener(r,n,s),n}function _r(r,e,t,s,n){var a={capture:s,passive:n},f=or(r,e,t,a);(e===document.body||e===window||e===document)&&I(()=>{e.removeEventListener(r,f,a)})}function vr(r){for(var e=0;e<r.length;e++)W.add(r[e]);for(var t of S)t(r)}function y(r){var A;var e=this,t=e.ownerDocument,s=r.type,n=((A=r.composedPath)==null?void 0:A.call(r))||[],a=n[0]||r.target,f=0,_=r.__root;if(_){var c=n.indexOf(_);if(c!==-1&&(e===document||e===window)){r.__root=e;return}var v=n.indexOf(e);if(v===-1)return;c<=v&&(f=c)}if(a=n[f]||r.target,a!==e){Y(r,"currentTarget",{configurable:!0,get(){return a||t}});var b=P,u=k;E(null),m(null);try{for(var i,o=[];a!==null;){var l=a.assignedSlot||a.parentNode||a.host||null;try{var d=a["__"+s];if(d!==void 0&&!a.disabled)if($(d)){var[B,...H]=d;B.apply(a,[r,...H])}else d.call(a,r)}catch(g){i?o.push(g):i=g}if(r.cancelBubble||l===e||l===null)break;a=l}if(i){for(let g of o)queueMicrotask(()=>{throw g});throw i}}finally{r.__root=e,delete r.currentTarget,E(b),m(u)}}}function hr(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t==null?"":t+"")}function fr(r,e){return q(r,e)}function pr(r,e){T(),e.intro=e.intro??!1;const t=e.target,s=R,n=p;try{for(var a=j(t);a&&(a.nodeType!==8||a.data!==C);)a=X(a);if(!a)throw L;w(!0),O(a),z();const f=q(r,{...e,anchor:a});if(p===null||p.nodeType!==8||p.data!==F)throw G(),L;return w(!1),f}catch(f){if(f===L)return e.recover===!1&&J(),T(),K(t),w(!1),fr(r,e);throw f}finally{w(s),O(n)}}const h=new Map;function q(r,{target:e,anchor:t,props:s={},events:n,context:a,intro:f=!0}){T();var _=new Set,c=u=>{for(var i=0;i<u.length;i++){var o=u[i];if(!_.has(o)){_.add(o);var l=sr(o);e.addEventListener(o,y,{passive:l});var d=h.get(o);d===void 0?(document.addEventListener(o,y,{passive:l}),h.set(o,1)):h.set(o,d+1)}}};c(Q(W)),S.add(c);var v=void 0,b=U(()=>{var u=t??e.appendChild(Z());return x(()=>{if(a){rr({});var i=tr;i.c=a}n&&(s.$$events=n),R&&ar(u,null),v=r(u,s)||{},R&&(k.nodes_end=p),a&&er()}),()=>{var l;for(var i of _){e.removeEventListener(i,y);var o=h.get(i);--o===0?(document.removeEventListener(i,y),h.delete(i)):h.set(i,o)}S.delete(c),u!==t&&((l=u.parentNode)==null||l.removeChild(u))}});return N.set(v,b),v}let N=new WeakMap;function yr(r,e){const t=N.get(r);return t?(N.delete(r),t(e)):Promise.resolve()}export{ir as a,cr as b,vr as d,_r as e,pr as h,dr as l,fr as m,hr as s,yr as u,V as w};
