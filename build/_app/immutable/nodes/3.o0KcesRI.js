import{s as xt,c as he,d as Te,a as T,t as H,b as ct}from"../chunks/disclose-version.CbQWKql7.js";import{O as dt,af as Nt,A as Oe,W as Bt,ak as Ft,R as Kt,az as Ut,aA as Xt,K as Gt,aB as Vt,aC as Wt,b as L,_ as kt,p as Le,q as Ae,v as k,g as t,a as vt,j as ne,k as Re,o as m,f as ee,aD as fe,aE as $e,aF as ze,t as te,e as ae,aG as F,l as K,m as I,Q as Yt,ay as Qt,aH as Be,ab as re}from"../chunks/utils.F7Ud3tqr.js";import{a as Zt,l as ft,b as Jt,w as $t,e as A,s as Ue,d as ea}from"../chunks/render.ncXMd3g5.js";import{i as ta,p as ce,o as aa,c as et}from"../chunks/index-client.DDb0GLON.js";import{u as ra,a as na,i as sa,T as Qe,t as _t,c as Ze,C as ia,b as xe,e as la,O as oa,B as ua,d as ca,I as va,f as da,k as fa,g as ga,M as ha,h as ba}from"../chunks/Mirror.BKsKmo7Y.js";import{c as ue,i as be,p as f,b as Ge}from"../chunks/props.BLHG7mnz.js";import"../chunks/legacy.wwEz_KsH.js";import{A as pa,w as Ce}from"../chunks/Align.RZa5lcC7.js";import{M as _a,S as ve}from"../chunks/store.rOjKrHxV.js";import{s as je}from"../chunks/style.PwPRnE0L.js";import{i as Fe}from"../chunks/lifecycle.Behz92xd.js";function nt(a,e){Oe&&Bt(Ft(a)),dt(()=>{var n=e();for(var r in n){var i=n[r];i?a.style.setProperty(r,i):a.style.removeProperty(r)}}),Nt(()=>{a.remove()})}function ma(a,e,n,r,i){var o;Oe&&Kt();var c=(o=e.$$slots)==null?void 0:o[n],g=!1;c===!0&&(c=e.children,g=!0),c===void 0||c(a,g?()=>r:r)}function de(a){if(Oe){var e=!1,n=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var r=a.value;P(a,"value",null),a.value=r}if(a.hasAttribute("checked")){var i=a.checked;P(a,"checked",null),a.checked=i}}};a.__on_r=n,Ut(n),Zt()}}function me(a,e){var n=a.__attributes??(a.__attributes={});n.value===(n.value=e??void 0)||a.value===e&&(e!==0||a.nodeName!=="PROGRESS")||(a.value=e)}function P(a,e,n,r){var i=a.__attributes??(a.__attributes={});Oe&&(i[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="style"&&"__styles"in a&&(a.__styles={}),e==="loading"&&(a[Xt]=n),n==null?a.removeAttribute(e):typeof n!="string"&&ya(a).includes(e)?a[e]=n:a.setAttribute(e,n))}var mt=new Map;function ya(a){var e=mt.get(a.nodeName);if(e)return e;mt.set(a.nodeName,e=[]);for(var n,r=a,i=Element.prototype;i!==r;){n=Vt(r);for(var c in n)n[c].set&&e.push(c);r=Gt(r)}return e}function xa(a,e,n){var r=a.__className,i=ka(e);Oe&&a.className===i?a.__className=i:(r!==i||Oe&&a.className!==i)&&(e==null&&!n?a.removeAttribute("class"):a.className=i,a.__className=i)}function ka(a,e){return(a??"")+""}function gt(a,e,n){if(n){if(a.classList.contains(e))return;a.classList.add(e)}else{if(!a.classList.contains(e))return;a.classList.remove(e)}}function st(a,e,n=e){var r=Wt();ft(a,"input",i=>{var c=i?a.defaultValue:a.value;if(c=it(a)?lt(c):c,n(c),r&&c!==(c=e())){var g=a.selectionStart,o=a.selectionEnd;a.value=c??"",o!==null&&(a.selectionStart=g,a.selectionEnd=Math.min(o,a.value.length))}}),(Oe&&a.defaultValue!==a.value||L(e)==null&&a.value)&&n(it(a)?lt(a.value):a.value),dt(()=>{var i=e();it(a)&&i===lt(a.value)||a.type==="date"&&!i&&!a.value||i!==a.value&&(a.value=i??"")})}function wa(a,e,n=e){ft(a,"change",r=>{var i=r?a.defaultChecked:a.checked;n(i)}),(Oe&&a.defaultChecked!==a.checked||L(e)==null)&&n(a.checked),dt(()=>{var r=e();a.checked=!!r})}function it(a){var e=a.type;return e==="number"||e==="range"}function lt(a){return a===""?null:+a}function wt(a,e,n){if(a.multiple)return Da(a,e);for(var r of a.options){var i=Xe(r);if(ta(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(a.selectedIndex=-1)}function Ca(a,e){kt(()=>{var n=new MutationObserver(()=>{var r=a.__value;wt(a,r)});return n.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function ja(a,e,n=e){var r=!0;ft(a,"change",i=>{var c=i?"[selected]":":checked",g;if(a.multiple)g=[].map.call(a.querySelectorAll(c),Xe);else{var o=a.querySelector(c)??a.querySelector("option:not([disabled])");g=o&&Xe(o)}n(g)}),kt(()=>{var i=e();if(wt(a,i,r),r&&i===void 0){var c=a.querySelector(":checked");c!==null&&(i=Xe(c),n(i))}a.__value=i,r=!1}),Ca(a)}function Da(a,e){for(var n of a.options)n.selected=~e.indexOf(Xe(n))}function Xe(a){return"__value"in a?a.__value:a.value}function yt(a,e){Jt(window,["resize"],()=>$t(()=>e(window[a])))}function Ma(a){return function(...e){var n=e[0];n.target===this&&(a==null||a.apply(this,e))}}function we(a){return function(...e){var n=e[0];return n.preventDefault(),a==null?void 0:a.apply(this,e)}}var Ta=H("<!> <!>",1),Aa=H("<!> <!>",1),za=H("<!> <!> <!>",1),Oa=H("<!> <!> <!> <!> <!> <!>",1);function La(a,e){Le(e,!0);const n=xt(),r=()=>ct(ve,"$Settings",n),i=()=>ct(s,"$hovering",n),c=ra(),g=ce(c.scene);let o=Ae(ce([{}]));const l=_a.subscribe(x=>{k(o,ce(x))});aa(l);const{hovering:s,onPointerEnter:y,onPointerLeave:G}=na();sa();let S=ce([10,10,20]),j=Ae(!1),D=Ae(ce(r().colours.key)),O=Ae("Press and hold the mouse to rotate the scene");setTimeout(()=>{t(O)=="Press and hold the mouse to rotate the scene"&&k(O,"To zoom in and out use the mousewheel")},4e3);const se=new Qe(0,{duration:1e3,easing:_t}),V=new Qe(1,{duration:1e3,easing:Ze}),U=new Qe(0,{duration:1e3,easing:Ze});se.target=50;function J(){he(ve,L(r).edit=!0,L(r)),k(D,ce(r().colours.key)),se.set(25,{duration:1e3,easing:fa}),V.target=0,setTimeout(()=>{k(j,!0)},2e3)}vt(()=>{r().edit||se.set(50,{duration:1e3,easing:_t})}),vt(()=>{g&&(g.background=new ia(`rgb(${r().colours.background.r},${r().colours.background.g},${r().colours.background.b})`)),i()?k(D,ce({r:255-r().colours.background.r,g:255-r().colours.background.g,b:255-r().colours.background.b})):k(D,ce(r().colours.key))}),he(ve,L(r).orbitControls=!0,L(r)),he(ve,L(r).autoRotate=!1,L(r));var q=Oa(),ie=ne(q);ue(ie,()=>xe.OrthographicCamera,(x,h)=>{h(x,{makeDefault:!0,get position(){return S},near:.001,far:5e3,get zoom(){return se.current},children:(u,v)=>{oa(u,{enableDamping:!0,get autoRotateSpeed(){return r().autoRotateSpeed},get autoRotate(){return r().autoRotate},get enabled(){return r().orbitControls},onstart:Y=>{U.target=.75,k(O,"To edit the scene click here")}})},$$slots:{default:!0}})});var W=m(ie,2);{var le=x=>{ua(x,{"position.y":-window.innerHeight/175,children:(h,u)=>{var v=Aa(),Y=ne(v);ue(Y,()=>xe.Mesh,(b,X)=>{X(b,{get scale(){return U.current},"position.y":window.innerHeight/750,children:(N,$)=>{var E=Ta(),ye=ne(E);ue(ye,()=>xe.ConeGeometry,(pe,Q)=>{Q(pe,{})});var ge=m(ye,2);ue(ge,()=>xe.MeshBasicMaterial,(pe,Q)=>{Q(pe,{color:"orange",transparent:!0,get opacity(){return V.current}})}),T(N,E)},$$slots:{default:!0}})});var d=m(Y,2);ca(d,{get fillOpacity(){return V.current},get text(){return t(O)},color:"orange",get font(){return r().font},fontSize:window.innerWidth/6250,textAlign:"center",anchorX:"center","position.y":window.innerHeight/1250}),T(h,v)},$$slots:{default:!0}})};be(W,x=>{t(j)||x(le)})}var C=m(W,2);pa(C,{auto:!0,precise:!0,children:(x,h)=>{var u=Te(),v=ne(u);la(v,17,()=>t(o),da,(Y,d,b)=>{var X=Te(),N=ne(X);ue(N,()=>xe.Group,($,E)=>{E($,{onpointerenter:y,onpointerleave:G,onclick:()=>J(),children:(ye,ge)=>{va(ye,{children:(pe,Q)=>{var B=za(),Ke=ne(B);ue(Ke,()=>xe.BoxGeometry,(_e,_)=>{_(_e,{})});var De=m(Ke,2);ue(De,()=>xe.MeshStandardMaterial,(_e,_)=>{_(_e,{shadow:!0})});var Ve=m(De,2);{var tt=_e=>{var _=ee(()=>i()?250:r().attack),z=ee(()=>i()?250:r().release);ga(_e,{x:b,get velocity(){return t(d).velocity},get attack(){return t(_)},get release(){return t(z)},get keyColour(){return t(D)},get expressionColour(){return r().colours.expression}})},at=_e=>{var _=ee(()=>i()?250:r().attack),z=ee(()=>i()?250:r().release);ha(_e,{x:b,get velocity(){return t(d).velocity},get attack(){return t(_)},get release(){return t(z)},get keyColour(){return t(D)},get expressionColour(){return r().colours.expression}})};be(Ve,_e=>{r().scene=="Cube"?_e(tt):_e(at,!1)})}T(pe,B)},$$slots:{default:!0}})},$$slots:{default:!0}})}),T(Y,X)}),T(x,u)},$$slots:{default:!0}});var w=m(C,2);ue(w,()=>xe.DirectionalLight,(x,h)=>{h(x,{intensity:1,position:[1,0,11]})});var p=m(w,2);ue(p,()=>xe.DirectionalLight,(x,h)=>{h(x,{intensity:1,position:[-5,0,-11]})});var R=m(p,2);ue(R,()=>xe.AmbientLight,(x,h)=>{h(x,{intensity:.3,position:[0,1,0]})}),T(a,q),Re()}var Ra=H('<input type="hidden">'),Sa=H('<div class="slider svelte-w4j1dz" role="slider" tabindex="0"><div class="track svelte-w4j1dz"></div> <div class="thumb svelte-w4j1dz"></div></div> <!>',1);function Je(a,e){Le(e,!1);const n=F(),r=F(),i=F(),c=F();let g=f(e,"min",8,0),o=f(e,"max",8,100),l=f(e,"step",8,1),s=f(e,"value",12,50),y=f(e,"ariaValueText",8,d=>d.toString()),G=f(e,"name",8,void 0),S=f(e,"direction",8,"horizontal"),j=f(e,"reverse",8,!1),D=f(e,"keyboardOnly",8,!1),O=f(e,"slider",12,void 0),se=f(e,"ariaLabel",8,void 0),V=f(e,"ariaLabelledBy",8,void 0),U=f(e,"ariaControls",8,void 0),J=f(e,"isDragging",12,!1);const q=et();function ie(d){const b=1/t(i),X=Math.round(d*b)/b;return Math.max(t(n),Math.min(t(r),X))}function W(d){const b=d.shiftKey?t(i)*10:t(i);d.key==="ArrowUp"||d.key==="ArrowRight"?(s(s()+b),d.preventDefault()):d.key==="ArrowDown"||d.key==="ArrowLeft"?(s(s()-b),d.preventDefault()):d.key==="Home"?(s(t(n)),d.preventDefault()):d.key==="End"?(s(t(r)),d.preventDefault()):d.key==="PageUp"?(s(s()+t(i)*10),d.preventDefault()):d.key==="PageDown"&&(s(s()-t(i)*10),d.preventDefault()),s(ie(s())),q("input",s())}const le={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function C(d){var $,E;const b=(($=O())==null?void 0:$[le[S()].clientSize])||120,X=((E=O())==null?void 0:E.getBoundingClientRect()[le[S()].offset])||0;let N=d[le[S()].client]-X;S()==="vertical"&&(N=-1*N+b),j()?s(t(r)-N/b*(t(r)-t(n))):s(N/b*(t(r)-t(n))+t(n)),s(ie(s())),q("input",s())}function w(d){C(d),J(!0)}function p(d){J()&&C(d)}function R(){J(!1)}function x(d){C({clientX:d.changedTouches[0].clientX,clientY:d.changedTouches[0].clientY})}fe(()=>ae(g()),()=>{k(n,typeof g()=="string"?parseFloat(g()):g())}),fe(()=>ae(o()),()=>{k(r,typeof o()=="string"?parseFloat(o()):o())}),fe(()=>ae(l()),()=>{k(i,typeof l()=="string"?parseFloat(l()):l())}),fe(()=>(ae(s()),t(n),t(r)),()=>{k(c,((s()-t(n))/(t(r)-t(n))*1).toFixed(4))}),$e(),Fe();var h=Sa();A("mousemove",ze,p),A("mouseup",ze,R);var u=ne(h);te(()=>P(u,"aria-valuetext",y()(s()))),Ge(u,d=>O(d),()=>O());var v=m(u,2);{var Y=d=>{var b=Ra();de(b),te(()=>{P(b,"name",G()),me(b,s())}),T(d,b)};be(v,d=>{G()&&d(Y)})}te(()=>{P(u,"aria-orientation",S()),P(u,"aria-valuemax",t(r)),P(u,"aria-valuemin",t(n)),P(u,"aria-valuenow",s()),P(u,"aria-label",se()),P(u,"aria-labelledby",V()),P(u,"aria-controls",U()),gt(u,"reverse",j()),je(u,"--position",t(c))}),A("keydown",u,W),A("mousedown",u,Ma(function(...d){var b;(b=D()?void 0:w)==null||b.apply(this,d)})),A("touchstart",u,we(function(...d){var b;(b=D()?void 0:x)==null||b.apply(this,d)}),void 0,!1),A("touchmove",u,we(function(...d){var b;(b=D()?void 0:x)==null||b.apply(this,d)}),void 0,!1),A("touchend",u,we(function(...d){var b;(b=D()?void 0:x)==null||b.apply(this,d)}),void 0,!1),T(a,h),Re()}var Ea=H('<div class="picker svelte-1x9tz9y"><!> <div class="s svelte-1x9tz9y"><!></div> <div class="v svelte-1x9tz9y"><!></div></div>');function Ia(a,e){Le(e,!1);const n=et();let r=f(e,"components",8),i=f(e,"h",8),c=f(e,"s",12),g=f(e,"v",12),o=f(e,"isDark",8),l=f(e,"texts",8),s=F(),y=!1,G=F(),S=F({x:100,y:0});function j(p,R,x){return Math.min(Math.max(R,p),x)}function D(p){const{width:R,left:x,height:h,top:u}=t(s).getBoundingClientRect(),v={x:j(p.clientX-x,0,R),y:j(p.clientY-u,0,h)};c(j(v.x/R,0,1)*100),g(j((h-v.y)/h,0,1)*100)}function O(p){p.button===0&&(y=!0,D(p))}function se(){y=!1}function V(p){y&&D(p)}function U(p){p.target.isSameNode(t(s))}function J(p){p.preventDefault(),D(p.changedTouches[0])}fe(()=>(ae(i()),Ce),()=>{typeof i()=="number"&&k(G,Ce({h:i(),s:100,v:100,a:1}).toHex())}),fe(()=>(ae(c()),ae(g()),t(s)),()=>{typeof c()=="number"&&typeof g()=="number"&&t(s)&&k(S,{x:c(),y:100-g()})}),fe(()=>(ae(c()),ae(g())),()=>{n("input",{s:c(),v:g()})}),$e(),Fe();var q=Ea();A("mouseup",ze,se),A("mousedown",ze,U),A("mousemove",ze,V);var ie=K(q);ue(ie,()=>r().pickerIndicator,(p,R)=>{R(p,{get pos(){return t(S)},get isDark(){return o()}})});var W=m(ie,2),le=K(W);Je(le,{keyboardOnly:!0,ariaValueText:p=>`${p}%`,get ariaLabel(){return l().label.s},get value(){return c()},set value(p){c(p)},$$legacy:!0}),I(W);var C=m(W,2),w=K(C);Je(w,{keyboardOnly:!0,ariaValueText:p=>`${p}%`,direction:"vertical",get ariaLabel(){return l().label.v},get value(){return g()},set value(p){g(p)},$$legacy:!0}),I(C),I(q),Ge(q,p=>k(s,p),()=>t(s)),te(()=>{je(q,"--picker-color-bg",t(G)),je(W,"--pos-y",t(S).y),je(C,"--pos-x",t(S).x)}),A("mousedown",q,we(O)),A("touchstart",q,J,void 0,!1),A("touchmove",q,we(J),void 0,!1),A("touchend",q,J,void 0,!1),T(a,q),Re()}var qa=H('<div class="picker-indicator svelte-i5mg2p"></div>');function Pa(a,e){Le(e,!1);let n=f(e,"pos",8),r=f(e,"isDark",8);Fe();var i=qa();te(()=>{gt(i,"is-dark",r()),je(i,"--pos-x",n().x),je(i,"--pos-y",n().y)}),T(a,i),Re()}var Ha=H('<input class="svelte-qtukzs">'),Na=H('<input type="number" min="0" max="255" class="svelte-qtukzs"> <input type="number" min="0" max="255" class="svelte-qtukzs"> <input type="number" min="0" max="255" class="svelte-qtukzs">',1),Ba=H('<input type="number" min="0" max="360" class="svelte-qtukzs"> <input type="number" min="0" max="100" class="svelte-qtukzs"> <input type="number" min="0" max="100" class="svelte-qtukzs">',1),Fa=H('<input type="number" min="0" max="1" step="0.01" class="svelte-qtukzs">'),Ka=H('<button type="button" class="svelte-qtukzs"><span class="disappear svelte-qtukzs" aria-hidden="true"> </span> <span class="appear svelte-qtukzs"> </span></button>'),Ua=H('<div class="button-like svelte-qtukzs"> </div>'),Xa=H('<div class="text-input svelte-qtukzs"><div class="input-container svelte-qtukzs"><!> <!></div> <!></div>');function Ga(a,e){Le(e,!1);const n=F(),r=F(),i=F(),c=F(),g=F(),o=et();let l=f(e,"isAlpha",8),s=f(e,"rgb",12),y=f(e,"hsv",12),G=f(e,"hex",12),S=f(e,"textInputModes",8),j=f(e,"texts",8);const D=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;let O=F(S()[0]||"hex");function se(h){const u=h.target;D.test(u.value)&&(G(u.value),o("input",{hex:G()}))}function V(h){return function(u){s({...s(),[h]:parseFloat(u.target.value)}),o("input",{rgb:s()})}}function U(h){return function(u){y({...y(),[h]:parseFloat(u.target.value)}),o("input",{hsv:y()})}}fe(()=>(ae(S()),t(O)),()=>{k(n,S()[(S().indexOf(t(O))+1)%S().length])}),fe(()=>ae(y()),()=>{k(r,Math.round(y().h))}),fe(()=>ae(y()),()=>{k(i,Math.round(y().s))}),fe(()=>ae(y()),()=>{k(c,Math.round(y().v))}),fe(()=>ae(y()),()=>{k(g,y().a===void 0?1:Math.round(y().a*100)/100)}),$e(),Fe();var J=Xa(),q=K(J),ie=K(q);{var W=h=>{var u=Ha();de(u),te(()=>{P(u,"aria-label",j().label.hex),me(u,G()),je(u,"flex",3)}),A("input",u,se),T(h,u)},le=h=>{var u=Te(),v=ne(u);{var Y=b=>{var X=Na(),N=ne(X),$=ee(()=>V("r"));de(N);var E=m(N,2),ye=ee(()=>V("g"));de(E);var ge=m(E,2),pe=ee(()=>V("b"));de(ge),te(()=>{P(N,"aria-label",j().label.r),me(N,s().r),P(E,"aria-label",j().label.g),me(E,s().g),P(ge,"aria-label",j().label.b),me(ge,s().b)}),A("input",N,function(...Q){var B;(B=t($))==null||B.apply(this,Q)}),A("input",E,function(...Q){var B;(B=t(ye))==null||B.apply(this,Q)}),A("input",ge,function(...Q){var B;(B=t(pe))==null||B.apply(this,Q)}),T(b,X)},d=b=>{var X=Ba(),N=ne(X),$=ee(()=>U("h"));de(N);var E=m(N,2),ye=ee(()=>U("s"));de(E);var ge=m(E,2),pe=ee(()=>U("v"));de(ge),te(()=>{P(N,"aria-label",j().label.h),me(N,t(r)),P(E,"aria-label",j().label.s),me(E,t(i)),P(ge,"aria-label",j().label.v),me(ge,t(c))}),A("input",N,function(...Q){var B;(B=t($))==null||B.apply(this,Q)}),A("input",E,function(...Q){var B;(B=t(ye))==null||B.apply(this,Q)}),A("input",ge,function(...Q){var B;(B=t(pe))==null||B.apply(this,Q)}),T(b,X)};be(v,b=>{t(O)==="rgb"?b(Y):b(d,!1)},!0)}T(h,u)};be(ie,h=>{t(O)==="hex"?h(W):h(le,!1)})}var C=m(ie,2);{var w=h=>{var u=Fa(),v=ee(()=>t(O)==="hsv"?U("a"):V("a"));de(u),te(()=>{P(u,"aria-label",j().label.a),me(u,t(g))}),A("input",u,function(...Y){var d;(d=t(v))==null||d.apply(this,Y)}),T(h,u)};be(C,h=>{l()&&h(w)})}I(q);var p=m(q,2);{var R=h=>{var u=Ka(),v=K(u),Y=K(v,!0);I(v);var d=m(v,2),b=K(d);I(d),I(u),te(()=>{Ue(Y,j().color[t(O)]),Ue(b,`${j().changeTo??""} ${t(n)??""}`)}),A("click",u,()=>k(O,t(n))),T(h,u)},x=h=>{var u=Ua(),v=K(u,!0);I(u),te(()=>Ue(v,j().color[t(O)])),T(h,u)};be(p,h=>{S().length>1?h(R):h(x,!1)})}I(J),T(a,J),Re()}var Va=H('<label class="svelte-lemcb1"><div class="container svelte-lemcb1"><input type="color" aria-haspopup="dialog" class="svelte-lemcb1"> <div class="alpha svelte-lemcb1"></div> <div class="color svelte-lemcb1"></div></div> </label>');function Wa(a,e){let n=f(e,"labelElement",12),r=f(e,"hex",8),i=f(e,"label",8),c=f(e,"name",8,void 0);f(e,"isOpen",8);function g(){}var o=Va(),l=K(o),s=K(l);de(s);var y=m(s,4);I(l);var G=m(l);I(o),Ge(o,S=>n(S),()=>n()),te(()=>{P(s,"name",c()),me(s,r()),je(y,"background",r()),Ue(G,` ${i()??""}`)}),A("click",s,we(g)),A("mousedown",s,we(g)),A("click",o,we(g)),A("mousedown",o,we(g)),T(a,o)}var Ya=H('<div class="wrapper svelte-h9ar9" aria-label="color picker"><!></div>');function Qa(a,e){let n=f(e,"wrapper",12),r=f(e,"isOpen",8),i=f(e,"isDialog",8);var c=Ya(),g=K(c);ma(g,e,"default",{}),I(c),Ge(c,o=>n(o),()=>n()),te(()=>{P(c,"role",i()?"dialog":void 0),gt(c,"is-open",r())}),T(a,c)}const ot={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},Ct="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function Za(a){return function(e){if(e.target===window)return;const n=e.target;if(!a.contains(n))return;const r=a.querySelectorAll(Ct),i=r[0],c=r[r.length-1];function g(l){return l.code==="Tab"&&!l.shiftKey}function o(l){return l.code==="Tab"&&l.shiftKey}g(e)&&e.target===c?(e.preventDefault(),i.focus()):o(e)&&e.target===i&&(e.preventDefault(),c.focus())}}const Ja=a=>{const e=a.querySelector(Ct);e&&e.focus();const n=Za(a);return document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n)}}};var $a=H('<label class="nullability-checkbox svelte-oskb5b"><div class="svelte-oskb5b"><input type="checkbox" class="svelte-oskb5b"> <span class="svelte-oskb5b"></span></div> </label>');function er(a,e){Le(e,!1);let n=f(e,"isUndefined",12),r=f(e,"texts",8);Fe();var i=$a(),c=K(i),g=K(c);de(g),Yt(2),I(c);var o=m(c);I(i),te(()=>Ue(o,` ${r().label.withoutColor??""}`)),wa(g,n),T(a,i),Re()}var tr=H('<input type="hidden">'),ar=H('<div class="a svelte-tsvobk"><!></div>'),rr=H('<!> <!> <div class="h svelte-tsvobk"><!></div> <!> <!> <!>',1),nr=H("<span><!> <!></span>");function ut(a,e){Le(e,!1);const n=et();let r=f(e,"components",24,()=>({})),i=f(e,"label",8,"Choose a color"),c=f(e,"name",8,void 0),g=f(e,"nullable",8,!1),o=f(e,"rgb",28,()=>g()?void 0:{r:255,g:0,b:0,a:1}),l=f(e,"hsv",28,()=>g()?void 0:{h:0,s:100,v:100,a:1}),s=f(e,"hex",28,()=>g()?void 0:"#ff0000"),y=f(e,"color",12,void 0),G=f(e,"isDark",12,!1),S=f(e,"isAlpha",8,!0),j=f(e,"isDialog",8,!0),D=f(e,"isOpen",28,()=>!j()),O=f(e,"position",8,"fixed"),se=f(e,"isTextInput",8,!0),V=f(e,"textInputModes",24,()=>["hex","rgb","hsv"]),U=f(e,"sliderDirection",8,"vertical"),J=f(e,"disableCloseClickOutside",8,!1),q=f(e,"a11yColors",24,()=>[{bgHex:"#ffffff"}]),ie=f(e,"a11yLevel",8,"AA"),W=f(e,"texts",8,void 0),le=f(e,"a11yTexts",8,void 0),C=F({r:255,g:0,b:0,a:1}),w=F({h:0,s:100,v:100,a:1}),p=F("#ff0000"),R=F(!1),x=t(R),h=F(),u=F(),v=F(),Y,d=F(),b=F();const X=12,N={pickerIndicator:Pa,textInput:Ga,input:Wa,nullabilityCheckbox:er,wrapper:Qa};function $(){return{...N,...r()}}function E(){var _,z,oe;return{label:{...ot.label,...(_=W())==null?void 0:_.label},color:{...ot.color,...(z=W())==null?void 0:z.color},changeTo:((oe=W())==null?void 0:oe.changeTo)??ot.changeTo}}function ye({target:_}){j()&&(t(u).contains(_)||t(u).isSameNode(_)?D(!D()):D()&&!t(v).contains(_)&&!J()&&D(!1))}function ge({key:_,target:z}){var oe;if(j())_==="Enter"&&t(u).contains(z)?(D(!D()),setTimeout(()=>{Y=Ja(t(v))})):_==="Escape"&&D()&&(D(!1),t(h).contains(z)&&((oe=t(u))==null||oe.focus(),Y==null||Y.destroy()));else return}function pe(){var _,z;if(t(R)&&!x){x=!0,l(o(s(void 0))),n("input",{color:y(),hsv:l(),rgb:o(),hex:s()});return}else if(x&&!t(R)){x=!1,l(t(w)),o(t(C)),s(t(p)),n("input",{color:y(),hsv:l(),rgb:o(),hex:s()});return}if(!l()&&!o()&&!s()){k(R,!0),x=!0,n("input",{color:void 0,hsv:l(),rgb:o(),hex:s()});return}l()&&o()&&l().h===t(w).h&&l().s===t(w).s&&l().v===t(w).v&&l().a===t(w).a&&o().r===t(C).r&&o().g===t(C).g&&o().b===t(C).b&&o().a===t(C).a&&s()===t(p)||(k(R,!1),l()&&l().a===void 0&&l(l().a=1,!0),t(w).a===void 0&&Be(w,t(w).a=1),o()&&o().a===void 0&&o(o().a=1,!0),t(C).a===void 0&&Be(C,t(C).a=1),((_=s())==null?void 0:_.substring(7))==="ff"&&s(s().substring(0,7)),((z=s())==null?void 0:z.substring(7))==="ff"&&s(s().substring(0,7)),l()&&(l().h!==t(w).h||l().s!==t(w).s||l().v!==t(w).v||l().a!==t(w).a||!o()&&!s())?(y(Ce(l())),o(y().toRgb()),s(y().toHex())):o()&&(o().r!==t(C).r||o().g!==t(C).g||o().b!==t(C).b||o().a!==t(C).a||!l()&&!s())?(y(Ce(o())),s(y().toHex()),l(y().toHsv())):s()&&(s()!==t(p)||!l()&&!o())&&(y(Ce(s())),o(y().toRgb()),l(y().toHsv())),y()&&G(y().isDark()),s()&&(k(w,Object.assign({},l())),k(C,Object.assign({},o())),k(p,s()),x=t(R),n("input",{color:y(),hsv:l(),rgb:o(),hex:s()})))}function Q(_){return z=>{l()||l({...t(w)}),l(l()[_]=z.detail,!0)}}function B(_){return z=>{l()||l({...t(w)}),_.forEach(oe=>{l()&&l(l()[oe]=z.detail[oe],!0)})}}async function Ke(){if(await Qt(),O()!=="fixed"&&D()&&j()&&t(u)&&t(v)){const _=t(v).getBoundingClientRect(),z=t(u).getBoundingClientRect();(O()==="responsive"||O()==="responsive-y")&&(z.top+_.height+X>t(b)?Be(v,t(v).style.top=`-${_.height+X}px`):Be(v,t(v).style.top=`${z.height+X}px`)),(O()==="responsive"||O()==="responsive-x")&&(z.left+_.width+X>t(d)?Be(v,t(v).style.left=`-${_.width-z.width+X}px`):Be(v,t(v).style.left=`${X}px`))}}fe(()=>(ae(l()),ae(o()),ae(s())),()=>{(l()||o()||s())&&pe()}),fe(()=>t(R),()=>{t(R),pe()}),fe(()=>(t(d),t(b),ae(D())),()=>{t(d),t(b),D(),Ke()}),$e(),Fe();var De=nr();A("mousedown",ze,ye),A("keyup",ze,ge),A("scroll",ze,Ke);var Ve=K(De);{var tt=_=>{var z=Te(),oe=ne(z);ue(oe,()=>$().input,(We,Me)=>{Me(We,{isOpen:!0,get hex(){return s()},get label(){return i()},get name(){return c()},get labelElement(){return t(u)},set labelElement(ke){k(u,ke)},$$legacy:!0})}),T(_,z)},at=_=>{var z=Te(),oe=ne(z);{var We=Me=>{var ke=tr();de(ke),te(()=>{me(ke,s()),P(ke,"name",c())}),T(Me,ke)};be(oe,Me=>{c()&&Me(We)},!0)}T(_,z)};be(Ve,_=>{j()?_(tt):_(at,!1)})}var _e=m(Ve,2);ue(_e,()=>$().wrapper,(_,z)=>{z(_,{get isOpen(){return D()},get isDialog(){return j()},get wrapper(){return t(v)},set wrapper(oe){k(v,oe)},children:(oe,We)=>{var Me=rr(),ke=ne(Me);{var jt=M=>{var Z=Te(),Se=ne(Z),Ee=re(E);ue(Se,()=>$().nullabilityCheckbox,(Ie,qe)=>{qe(Ie,{get texts(){return t(Ee)},get isUndefined(){return t(R)},set isUndefined(Pe){k(R,Pe)},$$legacy:!0})}),T(M,Z)};be(ke,M=>{g()&&M(jt)})}var ht=m(ke,2),Dt=re($),Mt=re(()=>{var M;return((M=l())==null?void 0:M.h)??t(w).h}),Tt=re(()=>{var M;return((M=l())==null?void 0:M.s)??t(w).s}),At=re(()=>{var M;return((M=l())==null?void 0:M.v)??t(w).v}),zt=ee(()=>B(["s","v"])),Ot=re(E);Ia(ht,{get components(){return t(Dt)},get h(){return t(Mt)},get s(){return t(Tt)},get v(){return t(At)},get isDark(){return G()},get texts(){return t(Ot)},$$events:{input(...M){var Z;(Z=t(zt))==null||Z.apply(this,M)}}});var rt=m(ht,2),Lt=K(rt),Rt=re(()=>{var M;return((M=l())==null?void 0:M.h)??t(w).h}),St=ee(()=>Q("h")),Et=re(()=>U()==="vertical");Je(Lt,{min:0,max:360,step:1,get value(){return t(Rt)},get direction(){return U()},get reverse(){return t(Et)},get ariaLabel(){return E().label.h},$$events:{input(...M){var Z;(Z=t(St))==null||Z.apply(this,M)}}}),I(rt);var bt=m(rt,2);{var It=M=>{var Z=ar();const Se=re(()=>(s()?s():t(p)).substring(0,7));te(()=>je(Z,"--alphaless-color",t(Se)));var Ee=K(Z),Ie=re(()=>{var He;return((He=l())==null?void 0:He.a)??t(w).a}),qe=ee(()=>Q("a")),Pe=re(()=>U()==="vertical");Je(Ee,{min:0,max:1,step:.01,get value(){return t(Ie)},get direction(){return U()},get reverse(){return t(Pe)},get ariaLabel(){return E().label.a},$$events:{input(...He){var Ye;(Ye=t(qe))==null||Ye.apply(this,He)}}}),I(Z),T(M,Z)};be(bt,M=>{S()&&M(It)})}var pt=m(bt,2);{var qt=M=>{var Z=Te(),Se=ne(Z),Ee=re(()=>s()??t(p)),Ie=re(()=>o()??t(C)),qe=re(()=>l()??t(w)),Pe=re(E);ue(Se,()=>$().textInput,(He,Ye)=>{Ye(He,{get hex(){return t(Ee)},get rgb(){return t(Ie)},get hsv(){return t(qe)},get isAlpha(){return S()},get textInputModes(){return V()},get texts(){return t(Pe)},$$events:{input:({detail:Ne})=>{Ne.hsv?l(Ne.hsv):Ne.rgb?o(Ne.rgb):Ne.hex&&s(Ne.hex)}}})}),T(M,Z)};be(pt,M=>{se()&&M(qt)})}var Pt=m(pt,2);{var Ht=M=>{var Z=Te(),Se=ne(Z),Ee=re($),Ie=re(()=>s()||"#00000000");ue(Se,()=>$().a11yNotice,(qe,Pe)=>{Pe(qe,{get components(){return t(Ee)},get a11yColors(){return q()},get hex(){return t(Ie)},get a11yTexts(){return le()},get a11yLevel(){return ie()}})}),T(M,Z)};be(Pt,M=>{$().a11yNotice&&M(Ht)})}T(oe,Me)},$$slots:{default:!0},$$legacy:!0})}),I(De),Ge(De,_=>k(h,_),()=>t(h)),te(()=>xa(De,`color-picker ${U()??""} svelte-tsvobk`)),yt("innerWidth",_=>k(d,_)),yt("innerHeight",_=>k(b,_)),T(a,De),Re()}var sr=(a,e)=>he(ve,L(e).autoRotate=!e().autoRotate,L(e)),ir=(a,e)=>{he(ve,L(e).reset=!0,L(e))},lr=(a,e,n)=>{he(ve,L(e).edit=!1,L(e)),setTimeout(()=>{k(n,ce(Ce(`rgb(${e().colours.background.r}, ${e().colours.background.g}, ${e().colours.background.b})`).invert().desaturate(.3).darken(.1)))},2e3)},or=H('<!> <menu class="svelte-1wj37j7"><setting class="svelte-1wj37j7"><h1 class="svelte-1wj37j7">Scene</h1> <label for="mirror" class="svelte-1wj37j7">Style</label> <select name="styles" id="styles" class="svelte-1wj37j7"><option class="svelte-1wj37j7">Cube</option><option class="svelte-1wj37j7">Mirror</option></select> <label for="autoRotate" class="svelte-1wj37j7">Autorotate</label> <input id="autoRotate" type="checkbox" class="svelte-1wj37j7"> <label for="rotateSpeed" class="svelte-1wj37j7">Rotate Speed</label> <input type="range" min="1" max="3" step="0.1" id="rotateSpeed" class="svelte-1wj37j7"></setting> <setting class="svelte-1wj37j7"><h1 class="svelte-1wj37j7">Colours</h1> <label for="Key Colour" class="svelte-1wj37j7">Key Colour</label> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <label for="Expression Colour" class="svelte-1wj37j7">Expression Colour</label> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <label for="Background Colour" class="svelte-1wj37j7">Background Colour</label> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></setting> <setting class="svelte-1wj37j7"><h1 class="svelte-1wj37j7">Notes</h1> <label for="attack" class="svelte-1wj37j7">Attack</label> <input type="range" min="0" max="2500" id="attack" class="svelte-1wj37j7"> <label for="release" class="svelte-1wj37j7">Release</label> <input type="range" min="0" max="2500" id="release" class="svelte-1wj37j7"> <label for="remapKeys" class="svelte-1wj37j7">Remap Keys</label> <button id="remapKeys" class="svelte-1wj37j7">Remap</button></setting> <button id="save" class="svelte-1wj37j7">Close</button></menu>',1);function yr(a,e){Le(e,!0);const n=xt(),r=()=>ct(ve,"$Settings",n),i=new Qe(0);let c=Ae(ce({r:r().colours.key.r,g:r().colours.key.g,b:r().colours.key.b,a:1})),g=Ae(ce(Ce(`rgb(${r().colours.expression.r}, ${r().colours.expression.g}, ${r().colours.expression.b})`).toHsv())),o=Ae(ce(Ce(`rgb(${r().colours.background.r}, ${r().colours.background.g}, ${r().colours.background.b})`).toHex())),l=Ae(ce(Ce(`rgb(${r().colours.background.r}, ${r().colours.background.g}, ${r().colours.background.b})`).invert().desaturate(.3).darken(.1)));vt(()=>{r().edit?i.set(1,{delay:250,duration:750,easing:Ze}):i.set(0,{duration:750,easing:Ze})});var s=or(),y=ne(s);ba(y,{children:(v,Y)=>{La(v,{})},$$slots:{default:!0}});var G=m(y,2);const S=ee(()=>i.current??""),j=ee(()=>t(l).toHex()??""),D=ee(()=>(t(l).isLight()?"black":"white")??""),O=ee(()=>`opacity:${t(S)}; --keyColour:${t(j)}; --menuTextColour: ${t(D)}`);var se=K(G),V=m(K(se),4),U=K(V);U.value=(U.__value="Cube")==null?"":"Cube";var J=m(U);J.value=(J.__value="Mirror")==null?"":"Mirror",I(V);var q=m(V,4);q.__change=[sr,r];var ie=m(q,4);de(ie),I(se);var W=m(se,2),le=m(K(W),4);nt(le,()=>({"--cp-bg-color":`rgba(${r().colours.background.r},${r().colours.background.g},${r().colours.background.b},1)`,"--picker-height":"150px","--picker-width":"150px","--slider-width":"15px","--picker-indicator-size":"10px"})),ut(le.lastChild,{label:"",isAlpha:!1,textInputModes:["rgb"],sliderDirection:"vertical",get rgb(){return t(c)},set rgb(v){k(c,ce(v))},$$events:{input:v=>{he(ve,L(r).colours.key=v.detail.rgb===void 0?{r:255,g:255,b:255}:v.detail.rgb,L(r))}}}),I(le);var C=m(le,4);nt(C,()=>({"--cp-bg-color":`rgba(${r().colours.background.r},${r().colours.background.g},${r().colours.background.b},1)`,"--picker-height":"150px","--picker-width":"150px","--slider-width":"15px","--picker-indicator-size":"10px"})),ut(C.lastChild,{label:"",isAlpha:!1,textInputModes:["hsv"],sliderDirection:"vertical",get hsv(){return t(g)},set hsv(v){k(g,ce(v))},$$events:{input:v=>{he(ve,L(r).colours.expression=v.detail.rgb===void 0?{r:255,g:255,b:255}:v.detail.rgb,L(r))}}}),I(C);var w=m(C,4);nt(w,()=>({"--cp-bg-color":`rgba(${r().colours.background.r},${r().colours.background.g},${r().colours.background.b},1)`,"--picker-height":"150px","--picker-width":"150px","--slider-width":"15px","--picker-indicator-size":"10px"})),ut(w.lastChild,{label:"",isAlpha:!1,textInputModes:["rgb"],sliderDirection:"vertical",get hex(){return t(o)},set hex(v){k(o,ce(v))},$$events:{input:v=>{he(ve,L(r).colours.background=v.detail.rgb===void 0?{r:255,g:255,b:255}:v.detail.rgb,L(r))}}}),I(w),I(W);var p=m(W,2),R=m(K(p),4);de(R);var x=m(R,4);de(x);var h=m(x,4);h.__click=[ir,r],I(p);var u=m(p,2);u.__click=[lr,r,l],I(G),te(()=>P(G,"style",t(O))),ja(V,()=>r().scene,v=>he(ve,L(r).scene=v,L(r))),st(ie,()=>r().autoRotateSpeed,v=>he(ve,L(r).autoRotateSpeed=v,L(r))),st(R,()=>r().attack,v=>he(ve,L(r).attack=v,L(r))),st(x,()=>r().release,v=>he(ve,L(r).release=v,L(r))),T(a,s),Re()}ea(["change","click"]);export{yr as component};
