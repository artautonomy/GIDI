{
  "version": 3,
  "sources": ["../../svelte/src/motion/utils.js", "../../svelte/src/motion/spring.js", "../../svelte/src/motion/tweened.js", "../../svelte/src/motion/index.js"],
  "sourcesContent": ["/**\r\n * @param {any} obj\r\n * @returns {obj is Date}\r\n */\r\nexport function is_date(obj) {\r\n\treturn Object.prototype.toString.call(obj) === '[object Date]';\r\n}\r\n", "/** @import { Task } from '#client' */\r\n/** @import { SpringOpts, SpringUpdateOpts, TickContext } from './private.js' */\r\n/** @import { Spring as SpringStore } from './public.js' */\r\nimport { writable } from '../store/shared/index.js';\r\nimport { loop } from '../internal/client/loop.js';\r\nimport { raf } from '../internal/client/timing.js';\r\nimport { is_date } from './utils.js';\r\nimport { set, source } from '../internal/client/reactivity/sources.js';\r\nimport { render_effect } from '../internal/client/reactivity/effects.js';\r\nimport { get } from '../internal/client/runtime.js';\r\nimport { deferred, noop } from '../internal/shared/utils.js';\r\n\r\n/**\r\n * @template T\r\n * @param {TickContext} ctx\r\n * @param {T} last_value\r\n * @param {T} current_value\r\n * @param {T} target_value\r\n * @returns {T}\r\n */\r\nfunction tick_spring(ctx, last_value, current_value, target_value) {\r\n\tif (typeof current_value === 'number' || is_date(current_value)) {\r\n\t\t// @ts-ignore\r\n\t\tconst delta = target_value - current_value;\r\n\t\t// @ts-ignore\r\n\t\tconst velocity = (current_value - last_value) / (ctx.dt || 1 / 60); // guard div by 0\r\n\t\tconst spring = ctx.opts.stiffness * delta;\r\n\t\tconst damper = ctx.opts.damping * velocity;\r\n\t\tconst acceleration = (spring - damper) * ctx.inv_mass;\r\n\t\tconst d = (velocity + acceleration) * ctx.dt;\r\n\t\tif (Math.abs(d) < ctx.opts.precision && Math.abs(delta) < ctx.opts.precision) {\r\n\t\t\treturn target_value; // settled\r\n\t\t} else {\r\n\t\t\tctx.settled = false; // signal loop to keep ticking\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn is_date(current_value) ? new Date(current_value.getTime() + d) : current_value + d;\r\n\t\t}\r\n\t} else if (Array.isArray(current_value)) {\r\n\t\t// @ts-ignore\r\n\t\treturn current_value.map((_, i) =>\r\n\t\t\t// @ts-ignore\r\n\t\t\ttick_spring(ctx, last_value[i], current_value[i], target_value[i])\r\n\t\t);\r\n\t} else if (typeof current_value === 'object') {\r\n\t\tconst next_value = {};\r\n\t\tfor (const k in current_value) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tnext_value[k] = tick_spring(ctx, last_value[k], current_value[k], target_value[k]);\r\n\t\t}\r\n\t\t// @ts-ignore\r\n\t\treturn next_value;\r\n\t} else {\r\n\t\tthrow new Error(`Cannot spring ${typeof current_value} values`);\r\n\t}\r\n}\r\n\r\n/**\r\n * The spring function in Svelte creates a store whose value is animated, with a motion that simulates the behavior of a spring. This means when the value changes, instead of transitioning at a steady rate, it \"bounces\" like a spring would, depending on the physics parameters provided. This adds a level of realism to the transitions and can enhance the user experience.\r\n *\r\n * @deprecated Use [`Spring`](https://svelte.dev/docs/svelte/svelte-motion#Spring) instead\r\n * @template [T=any]\r\n * @param {T} [value]\r\n * @param {SpringOpts} [opts]\r\n * @returns {SpringStore<T>}\r\n */\r\nexport function spring(value, opts = {}) {\r\n\tconst store = writable(value);\r\n\tconst { stiffness = 0.15, damping = 0.8, precision = 0.01 } = opts;\r\n\t/** @type {number} */\r\n\tlet last_time;\r\n\t/** @type {Task | null} */\r\n\tlet task;\r\n\t/** @type {object} */\r\n\tlet current_token;\r\n\r\n\tlet last_value = /** @type {T} */ (value);\r\n\tlet target_value = /** @type {T | undefined} */ (value);\r\n\r\n\tlet inv_mass = 1;\r\n\tlet inv_mass_recovery_rate = 0;\r\n\tlet cancel_task = false;\r\n\t/**\r\n\t * @param {T} new_value\r\n\t * @param {SpringUpdateOpts} opts\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\tfunction set(new_value, opts = {}) {\r\n\t\ttarget_value = new_value;\r\n\t\tconst token = (current_token = {});\r\n\t\tif (value == null || opts.hard || (spring.stiffness >= 1 && spring.damping >= 1)) {\r\n\t\t\tcancel_task = true; // cancel any running animation\r\n\t\t\tlast_time = raf.now();\r\n\t\t\tlast_value = new_value;\r\n\t\t\tstore.set((value = target_value));\r\n\t\t\treturn Promise.resolve();\r\n\t\t} else if (opts.soft) {\r\n\t\t\tconst rate = opts.soft === true ? 0.5 : +opts.soft;\r\n\t\t\tinv_mass_recovery_rate = 1 / (rate * 60);\r\n\t\t\tinv_mass = 0; // infinite mass, unaffected by spring forces\r\n\t\t}\r\n\t\tif (!task) {\r\n\t\t\tlast_time = raf.now();\r\n\t\t\tcancel_task = false;\r\n\t\t\ttask = loop((now) => {\r\n\t\t\t\tif (cancel_task) {\r\n\t\t\t\t\tcancel_task = false;\r\n\t\t\t\t\ttask = null;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tinv_mass = Math.min(inv_mass + inv_mass_recovery_rate, 1);\r\n\t\t\t\t/** @type {TickContext} */\r\n\t\t\t\tconst ctx = {\r\n\t\t\t\t\tinv_mass,\r\n\t\t\t\t\topts: spring,\r\n\t\t\t\t\tsettled: true,\r\n\t\t\t\t\tdt: ((now - last_time) * 60) / 1000\r\n\t\t\t\t};\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tconst next_value = tick_spring(ctx, last_value, value, target_value);\r\n\t\t\t\tlast_time = now;\r\n\t\t\t\tlast_value = /** @type {T} */ (value);\r\n\t\t\t\tstore.set((value = /** @type {T} */ (next_value)));\r\n\t\t\t\tif (ctx.settled) {\r\n\t\t\t\t\ttask = null;\r\n\t\t\t\t}\r\n\t\t\t\treturn !ctx.settled;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn new Promise((fulfil) => {\r\n\t\t\t/** @type {Task} */ (task).promise.then(() => {\r\n\t\t\t\tif (token === current_token) fulfil();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t/** @type {SpringStore<T>} */\r\n\t// @ts-expect-error - class-only properties are missing\r\n\tconst spring = {\r\n\t\tset,\r\n\t\tupdate: (fn, opts) => set(fn(/** @type {T} */ (target_value), /** @type {T} */ (value)), opts),\r\n\t\tsubscribe: store.subscribe,\r\n\t\tstiffness,\r\n\t\tdamping,\r\n\t\tprecision\r\n\t};\r\n\treturn spring;\r\n}\r\n\r\n/**\r\n * A wrapper for a value that behaves in a spring-like fashion. Changes to `spring.target` will cause `spring.current` to\r\n * move towards it over time, taking account of the `spring.stiffness` and `spring.damping` parameters.\r\n *\r\n * ```svelte\r\n * <script>\r\n * \timport { Spring } from 'svelte/motion';\r\n *\r\n * \tconst spring = new Spring(0);\r\n * </script>\r\n *\r\n * <input type=\"range\" bind:value={spring.target} />\r\n * <input type=\"range\" bind:value={spring.current} disabled />\r\n * ```\r\n * @template T\r\n * @since 5.8.0\r\n */\r\nexport class Spring {\r\n\t#stiffness = source(0.15);\r\n\t#damping = source(0.8);\r\n\t#precision = source(0.01);\r\n\r\n\t#current = source(/** @type {T} */ (undefined));\r\n\t#target = source(/** @type {T} */ (undefined));\r\n\r\n\t#last_value = /** @type {T} */ (undefined);\r\n\t#last_time = 0;\r\n\r\n\t#inverse_mass = 1;\r\n\t#momentum = 0;\r\n\r\n\t/** @type {import('../internal/client/types').Task | null} */\r\n\t#task = null;\r\n\r\n\t/** @type {ReturnType<typeof deferred> | null} */\r\n\t#deferred = null;\r\n\r\n\t/**\r\n\t * @param {T} value\r\n\t * @param {SpringOpts} [options]\r\n\t */\r\n\tconstructor(value, options = {}) {\r\n\t\tthis.#current.v = this.#target.v = value;\r\n\r\n\t\tif (typeof options.stiffness === 'number') this.#stiffness.v = clamp(options.stiffness, 0, 1);\r\n\t\tif (typeof options.damping === 'number') this.#damping.v = clamp(options.damping, 0, 1);\r\n\t\tif (typeof options.precision === 'number') this.#precision.v = options.precision;\r\n\t}\r\n\r\n\t/**\r\n\t * Create a spring whose value is bound to the return value of `fn`. This must be called\r\n\t * inside an effect root (for example, during component initialisation).\r\n\t *\r\n\t * ```svelte\r\n\t * <script>\r\n\t * \timport { Spring } from 'svelte/motion';\r\n\t *\r\n\t * \tlet { number } = $props();\r\n\t *\r\n\t * \tconst spring = Spring.of(() => number);\r\n\t * </script>\r\n\t * ```\r\n\t * @template U\r\n\t * @param {() => U} fn\r\n\t * @param {SpringOpts} [options]\r\n\t */\r\n\tstatic of(fn, options) {\r\n\t\tconst spring = new Spring(fn(), options);\r\n\r\n\t\trender_effect(() => {\r\n\t\t\tspring.set(fn());\r\n\t\t});\r\n\r\n\t\treturn spring;\r\n\t}\r\n\r\n\t/** @param {T} value */\r\n\t#update(value) {\r\n\t\tset(this.#target, value);\r\n\r\n\t\tthis.#current.v ??= value;\r\n\t\tthis.#last_value ??= this.#current.v;\r\n\r\n\t\tif (!this.#task) {\r\n\t\t\tthis.#last_time = raf.now();\r\n\r\n\t\t\tvar inv_mass_recovery_rate = 1000 / (this.#momentum * 60);\r\n\r\n\t\t\tthis.#task ??= loop((now) => {\r\n\t\t\t\tthis.#inverse_mass = Math.min(this.#inverse_mass + inv_mass_recovery_rate, 1);\r\n\r\n\t\t\t\t/** @type {import('./private').TickContext} */\r\n\t\t\t\tconst ctx = {\r\n\t\t\t\t\tinv_mass: this.#inverse_mass,\r\n\t\t\t\t\topts: {\r\n\t\t\t\t\t\tstiffness: this.#stiffness.v,\r\n\t\t\t\t\t\tdamping: this.#damping.v,\r\n\t\t\t\t\t\tprecision: this.#precision.v\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsettled: true,\r\n\t\t\t\t\tdt: ((now - this.#last_time) * 60) / 1000\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar next = tick_spring(ctx, this.#last_value, this.#current.v, this.#target.v);\r\n\t\t\t\tthis.#last_value = this.#current.v;\r\n\t\t\t\tthis.#last_time = now;\r\n\t\t\t\tset(this.#current, next);\r\n\r\n\t\t\t\tif (ctx.settled) {\r\n\t\t\t\t\tthis.#task = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn !ctx.settled;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.#task.promise;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets `spring.target` to `value` and returns a `Promise` that resolves if and when `spring.current` catches up to it.\r\n\t *\r\n\t * If `options.instant` is `true`, `spring.current` immediately matches `spring.target`.\r\n\t *\r\n\t * If `options.preserveMomentum` is provided, the spring will continue on its current trajectory for\r\n\t * the specified number of milliseconds. This is useful for things like 'fling' gestures.\r\n\t *\r\n\t * @param {T} value\r\n\t * @param {SpringUpdateOpts} [options]\r\n\t */\r\n\tset(value, options) {\r\n\t\tthis.#deferred?.reject(new Error('Aborted'));\r\n\r\n\t\tif (options?.instant || this.#current.v === undefined) {\r\n\t\t\tthis.#task?.abort();\r\n\t\t\tthis.#task = null;\r\n\t\t\tset(this.#current, set(this.#target, value));\r\n\t\t\tthis.#last_value = value;\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\r\n\t\tif (options?.preserveMomentum) {\r\n\t\t\tthis.#inverse_mass = 0;\r\n\t\t\tthis.#momentum = options.preserveMomentum;\r\n\t\t}\r\n\r\n\t\tvar d = (this.#deferred = deferred());\r\n\t\td.promise.catch(noop);\r\n\r\n\t\tthis.#update(value).then(() => {\r\n\t\t\tif (d !== this.#deferred) return;\r\n\t\t\td.resolve(undefined);\r\n\t\t});\r\n\r\n\t\treturn d.promise;\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn get(this.#current);\r\n\t}\r\n\r\n\tget damping() {\r\n\t\treturn get(this.#damping);\r\n\t}\r\n\r\n\tset damping(v) {\r\n\t\tset(this.#damping, clamp(v, 0, 1));\r\n\t}\r\n\r\n\tget precision() {\r\n\t\treturn get(this.#precision);\r\n\t}\r\n\r\n\tset precision(v) {\r\n\t\tset(this.#precision, v);\r\n\t}\r\n\r\n\tget stiffness() {\r\n\t\treturn get(this.#stiffness);\r\n\t}\r\n\r\n\tset stiffness(v) {\r\n\t\tset(this.#stiffness, clamp(v, 0, 1));\r\n\t}\r\n\r\n\tget target() {\r\n\t\treturn get(this.#target);\r\n\t}\r\n\r\n\tset target(v) {\r\n\t\tthis.set(v);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {number} n\r\n * @param {number} min\r\n * @param {number} max\r\n */\r\nfunction clamp(n, min, max) {\r\n\treturn Math.max(min, Math.min(max, n));\r\n}\r\n", "/** @import { Task } from '../internal/client/types' */\r\n/** @import { Tweened } from './public' */\r\n/** @import { TweenedOptions } from './private' */\r\nimport { writable } from '../store/shared/index.js';\r\nimport { raf } from '../internal/client/timing.js';\r\nimport { loop } from '../internal/client/loop.js';\r\nimport { linear } from '../easing/index.js';\r\nimport { is_date } from './utils.js';\r\nimport { set, source } from '../internal/client/reactivity/sources.js';\r\nimport { get, render_effect } from 'svelte/internal/client';\r\n\r\n/**\r\n * @template T\r\n * @param {T} a\r\n * @param {T} b\r\n * @returns {(t: number) => T}\r\n */\r\nfunction get_interpolator(a, b) {\r\n\tif (a === b || a !== a) return () => a;\r\n\r\n\tconst type = typeof a;\r\n\tif (type !== typeof b || Array.isArray(a) !== Array.isArray(b)) {\r\n\t\tthrow new Error('Cannot interpolate values of different type');\r\n\t}\r\n\r\n\tif (Array.isArray(a)) {\r\n\t\tconst arr = /** @type {Array<any>} */ (b).map((bi, i) => {\r\n\t\t\treturn get_interpolator(/** @type {Array<any>} */ (a)[i], bi);\r\n\t\t});\r\n\r\n\t\t// @ts-ignore\r\n\t\treturn (t) => arr.map((fn) => fn(t));\r\n\t}\r\n\r\n\tif (type === 'object') {\r\n\t\tif (!a || !b) {\r\n\t\t\tthrow new Error('Object cannot be null');\r\n\t\t}\r\n\r\n\t\tif (is_date(a) && is_date(b)) {\r\n\t\t\tconst an = a.getTime();\r\n\t\t\tconst bn = b.getTime();\r\n\t\t\tconst delta = bn - an;\r\n\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn (t) => new Date(an + t * delta);\r\n\t\t}\r\n\r\n\t\tconst keys = Object.keys(b);\r\n\r\n\t\t/** @type {Record<string, (t: number) => T>} */\r\n\t\tconst interpolators = {};\r\n\t\tkeys.forEach((key) => {\r\n\t\t\t// @ts-ignore\r\n\t\t\tinterpolators[key] = get_interpolator(a[key], b[key]);\r\n\t\t});\r\n\r\n\t\t// @ts-ignore\r\n\t\treturn (t) => {\r\n\t\t\t/** @type {Record<string, any>} */\r\n\t\t\tconst result = {};\r\n\t\t\tkeys.forEach((key) => {\r\n\t\t\t\tresult[key] = interpolators[key](t);\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t};\r\n\t}\r\n\r\n\tif (type === 'number') {\r\n\t\tconst delta = /** @type {number} */ (b) - /** @type {number} */ (a);\r\n\t\t// @ts-ignore\r\n\t\treturn (t) => a + t * delta;\r\n\t}\r\n\r\n\tthrow new Error(`Cannot interpolate ${type} values`);\r\n}\r\n\r\n/**\r\n * A tweened store in Svelte is a special type of store that provides smooth transitions between state values over time.\r\n *\r\n * @deprecated Use [`Tween`](https://svelte.dev/docs/svelte/svelte-motion#Tween) instead\r\n * @template T\r\n * @param {T} [value]\r\n * @param {TweenedOptions<T>} [defaults]\r\n * @returns {Tweened<T>}\r\n */\r\nexport function tweened(value, defaults = {}) {\r\n\tconst store = writable(value);\r\n\t/** @type {Task} */\r\n\tlet task;\r\n\tlet target_value = value;\r\n\t/**\r\n\t * @param {T} new_value\r\n\t * @param {TweenedOptions<T>} [opts]\r\n\t */\r\n\tfunction set(new_value, opts) {\r\n\t\ttarget_value = new_value;\r\n\r\n\t\tif (value == null) {\r\n\t\t\tstore.set((value = new_value));\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\r\n\t\t/** @type {Task | null} */\r\n\t\tlet previous_task = task;\r\n\r\n\t\tlet started = false;\r\n\t\tlet {\r\n\t\t\tdelay = 0,\r\n\t\t\tduration = 400,\r\n\t\t\teasing = linear,\r\n\t\t\tinterpolate = get_interpolator\r\n\t\t} = { ...defaults, ...opts };\r\n\r\n\t\tif (duration === 0) {\r\n\t\t\tif (previous_task) {\r\n\t\t\t\tprevious_task.abort();\r\n\t\t\t\tprevious_task = null;\r\n\t\t\t}\r\n\t\t\tstore.set((value = target_value));\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\r\n\t\tconst start = raf.now() + delay;\r\n\r\n\t\t/** @type {(t: number) => T} */\r\n\t\tlet fn;\r\n\t\ttask = loop((now) => {\r\n\t\t\tif (now < start) return true;\r\n\t\t\tif (!started) {\r\n\t\t\t\tfn = interpolate(/** @type {any} */ (value), new_value);\r\n\t\t\t\tif (typeof duration === 'function')\r\n\t\t\t\t\tduration = duration(/** @type {any} */ (value), new_value);\r\n\t\t\t\tstarted = true;\r\n\t\t\t}\r\n\t\t\tif (previous_task) {\r\n\t\t\t\tprevious_task.abort();\r\n\t\t\t\tprevious_task = null;\r\n\t\t\t}\r\n\t\t\tconst elapsed = now - start;\r\n\t\t\tif (elapsed > /** @type {number} */ (duration)) {\r\n\t\t\t\tstore.set((value = new_value));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// @ts-ignore\r\n\t\t\tstore.set((value = fn(easing(elapsed / duration))));\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\treturn task.promise;\r\n\t}\r\n\treturn {\r\n\t\tset,\r\n\t\tupdate: (fn, opts) =>\r\n\t\t\tset(fn(/** @type {any} */ (target_value), /** @type {any} */ (value)), opts),\r\n\t\tsubscribe: store.subscribe\r\n\t};\r\n}\r\n\r\n/**\r\n * A wrapper for a value that tweens smoothly to its target value. Changes to `tween.target` will cause `tween.current` to\r\n * move towards it over time, taking account of the `delay`, `duration` and `easing` options.\r\n *\r\n * ```svelte\r\n * <script>\r\n * \timport { Tween } from 'svelte/motion';\r\n *\r\n * \tconst tween = new Tween(0);\r\n * </script>\r\n *\r\n * <input type=\"range\" bind:value={tween.target} />\r\n * <input type=\"range\" bind:value={tween.current} disabled />\r\n * ```\r\n * @template T\r\n * @since 5.8.0\r\n */\r\nexport class Tween {\r\n\t#current = source(/** @type {T} */ (undefined));\r\n\t#target = source(/** @type {T} */ (undefined));\r\n\r\n\t/** @type {TweenedOptions<T>} */\r\n\t#defaults;\r\n\r\n\t/** @type {import('../internal/client/types').Task | null} */\r\n\t#task = null;\r\n\r\n\t/**\r\n\t * @param {T} value\r\n\t * @param {TweenedOptions<T>} options\r\n\t */\r\n\tconstructor(value, options = {}) {\r\n\t\tthis.#current.v = this.#target.v = value;\r\n\t\tthis.#defaults = options;\r\n\t}\r\n\r\n\t/**\r\n\t * Create a tween whose value is bound to the return value of `fn`. This must be called\r\n\t * inside an effect root (for example, during component initialisation).\r\n\t *\r\n\t * ```svelte\r\n\t * <script>\r\n\t * \timport { Tween } from 'svelte/motion';\r\n\t *\r\n\t * \tlet { number } = $props();\r\n\t *\r\n\t * \tconst tween = Tween.of(() => number);\r\n\t * </script>\r\n\t * ```\r\n\t * @template U\r\n\t * @param {() => U} fn\r\n\t * @param {TweenedOptions<U>} [options]\r\n\t */\r\n\tstatic of(fn, options) {\r\n\t\tconst tween = new Tween(fn(), options);\r\n\r\n\t\trender_effect(() => {\r\n\t\t\ttween.set(fn());\r\n\t\t});\r\n\r\n\t\treturn tween;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets `tween.target` to `value` and returns a `Promise` that resolves if and when `tween.current` catches up to it.\r\n\t *\r\n\t * If `options` are provided, they will override the tween's defaults.\r\n\t * @param {T} value\r\n\t * @param {TweenedOptions<T>} [options]\r\n\t * @returns\r\n\t */\r\n\tset(value, options) {\r\n\t\tset(this.#target, value);\r\n\r\n\t\tlet previous_value = this.#current.v;\r\n\t\tlet previous_task = this.#task;\r\n\r\n\t\tlet started = false;\r\n\t\tlet {\r\n\t\t\tdelay = 0,\r\n\t\t\tduration = 400,\r\n\t\t\teasing = linear,\r\n\t\t\tinterpolate = get_interpolator\r\n\t\t} = { ...this.#defaults, ...options };\r\n\r\n\t\tconst start = raf.now() + delay;\r\n\r\n\t\t/** @type {(t: number) => T} */\r\n\t\tlet fn;\r\n\r\n\t\tthis.#task = loop((now) => {\r\n\t\t\tif (now < start) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif (!started) {\r\n\t\t\t\tstarted = true;\r\n\r\n\t\t\t\tfn = interpolate(/** @type {any} */ (previous_value), value);\r\n\r\n\t\t\t\tif (typeof duration === 'function') {\r\n\t\t\t\t\tduration = duration(/** @type {any} */ (previous_value), value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprevious_task?.abort();\r\n\t\t\t}\r\n\r\n\t\t\tconst elapsed = now - start;\r\n\r\n\t\t\tif (elapsed > /** @type {number} */ (duration)) {\r\n\t\t\t\tset(this.#current, value);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tset(this.#current, fn(easing(elapsed / /** @type {number} */ (duration))));\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\treturn this.#task.promise;\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn get(this.#current);\r\n\t}\r\n\r\n\tget target() {\r\n\t\treturn get(this.#target);\r\n\t}\r\n\r\n\tset target(v) {\r\n\t\tthis.set(v);\r\n\t}\r\n}\r\n", "import { MediaQuery } from 'svelte/reactivity';\r\n\r\nexport * from './spring.js';\r\nexport * from './tweened.js';\r\n\r\n/**\r\n * A [media query](https://svelte.dev/docs/svelte/svelte-reactivity#MediaQuery) that matches if the user [prefers reduced motion](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion).\r\n *\r\n * ```svelte\r\n * <script>\r\n * \timport { prefersReducedMotion } from 'svelte/motion';\r\n * \timport { fly } from 'svelte/transition';\r\n *\r\n * \tlet visible = $state(false);\r\n * </script>\r\n *\r\n * <button onclick={() => visible = !visible}>\r\n * \ttoggle\r\n * </button>\r\n *\r\n * {#if visible}\r\n * \t<p transition:fly={{ y: prefersReducedMotion.current ? 0 : 200 }}>\r\n * \t\tflies in, unless the user prefers reduced motion\r\n * \t</p>\r\n * {/if}\r\n * ```\r\n * @type {MediaQuery}\r\n * @since 5.7.0\r\n */\r\nexport const prefersReducedMotion = /*@__PURE__*/ new MediaQuery(\r\n\t'(prefers-reduced-motion: reduce)'\r\n);\r\n"],
  "mappings": "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",
  "names": ["spring", "set", "opts", "set", "_current", "_target", "_task"]
}
