{
  "version": 3,
  "sources": ["../../svelte/src/reactivity/window/index.js"],
  "sourcesContent": ["import { BROWSER } from 'esm-env';\r\nimport { on } from '../../events/index.js';\r\nimport { ReactiveValue } from '../reactive-value.js';\r\nimport { get } from '../../internal/client/index.js';\r\nimport { set, source } from '../../internal/client/reactivity/sources.js';\r\n\r\n/**\r\n * `scrollX.current` is a reactive view of `window.scrollX`. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const scrollX = new ReactiveValue(\r\n\tBROWSER ? () => window.scrollX : () => undefined,\r\n\t(update) => on(window, 'scroll', update)\r\n);\r\n\r\n/**\r\n * `scrollY.current` is a reactive view of `window.scrollY`. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const scrollY = new ReactiveValue(\r\n\tBROWSER ? () => window.scrollY : () => undefined,\r\n\t(update) => on(window, 'scroll', update)\r\n);\r\n\r\n/**\r\n * `innerWidth.current` is a reactive view of `window.innerWidth`. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const innerWidth = new ReactiveValue(\r\n\tBROWSER ? () => window.innerWidth : () => undefined,\r\n\t(update) => on(window, 'resize', update)\r\n);\r\n\r\n/**\r\n * `innerHeight.current` is a reactive view of `window.innerHeight`. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const innerHeight = new ReactiveValue(\r\n\tBROWSER ? () => window.innerHeight : () => undefined,\r\n\t(update) => on(window, 'resize', update)\r\n);\r\n\r\n/**\r\n * `outerWidth.current` is a reactive view of `window.outerWidth`. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const outerWidth = new ReactiveValue(\r\n\tBROWSER ? () => window.outerWidth : () => undefined,\r\n\t(update) => on(window, 'resize', update)\r\n);\r\n\r\n/**\r\n * `outerHeight.current` is a reactive view of `window.outerHeight`. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const outerHeight = new ReactiveValue(\r\n\tBROWSER ? () => window.outerHeight : () => undefined,\r\n\t(update) => on(window, 'resize', update)\r\n);\r\n\r\n/**\r\n * `screenLeft.current` is a reactive view of `window.screenLeft`. It is updated inside a `requestAnimationFrame` callback. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const screenLeft = new ReactiveValue(\r\n\tBROWSER ? () => window.screenLeft : () => undefined,\r\n\t(update) => {\r\n\t\tlet value = window.screenLeft;\r\n\r\n\t\tlet frame = requestAnimationFrame(function check() {\r\n\t\t\tframe = requestAnimationFrame(check);\r\n\r\n\t\t\tif (value !== (value = window.screenLeft)) {\r\n\t\t\t\tupdate();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tcancelAnimationFrame(frame);\r\n\t\t};\r\n\t}\r\n);\r\n\r\n/**\r\n * `screenTop.current` is a reactive view of `window.screenTop`. It is updated inside a `requestAnimationFrame` callback. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const screenTop = new ReactiveValue(\r\n\tBROWSER ? () => window.screenTop : () => undefined,\r\n\t(update) => {\r\n\t\tlet value = window.screenTop;\r\n\r\n\t\tlet frame = requestAnimationFrame(function check() {\r\n\t\t\tframe = requestAnimationFrame(check);\r\n\r\n\t\t\tif (value !== (value = window.screenTop)) {\r\n\t\t\t\tupdate();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tcancelAnimationFrame(frame);\r\n\t\t};\r\n\t}\r\n);\r\n\r\n/**\r\n * `online.current` is a reactive view of `navigator.onLine`. On the server it is `undefined`.\r\n * @since 5.11.0\r\n */\r\nexport const online = new ReactiveValue(\r\n\tBROWSER ? () => navigator.onLine : () => undefined,\r\n\t(update) => {\r\n\t\tconst unsub_online = on(window, 'online', update);\r\n\t\tconst unsub_offline = on(window, 'offline', update);\r\n\t\treturn () => {\r\n\t\t\tunsub_online();\r\n\t\t\tunsub_offline();\r\n\t\t};\r\n\t}\r\n);\r\n\r\n/**\r\n * `devicePixelRatio.current` is a reactive view of `window.devicePixelRatio`. On the server it is `undefined`.\r\n * Note that behaviour differs between browsers â€” on Chrome it will respond to the current zoom level,\r\n * on Firefox and Safari it won't.\r\n * @type {{ get current(): number | undefined }}\r\n * @since 5.11.0\r\n */\r\nexport const devicePixelRatio = /* @__PURE__ */ new (class DevicePixelRatio {\r\n\t#dpr = source(BROWSER ? window.devicePixelRatio : undefined);\r\n\r\n\t#update() {\r\n\t\tconst off = on(\r\n\t\t\twindow.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),\r\n\t\t\t'change',\r\n\t\t\t() => {\r\n\t\t\t\tset(this.#dpr, window.devicePixelRatio);\r\n\r\n\t\t\t\toff();\r\n\t\t\t\tthis.#update();\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tif (BROWSER) {\r\n\t\t\tthis.#update();\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\tget(this.#dpr);\r\n\t\treturn BROWSER ? window.devicePixelRatio : undefined;\r\n\t}\r\n})();\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAUO,IAAM,UAAU,IAAI;AAAA,EAC1B,eAAU,MAAM,OAAO,UAAU,MAAM;AAAA,EACvC,CAAC,WAAW,GAAG,QAAQ,UAAU,MAAM;AACxC;AAMO,IAAM,UAAU,IAAI;AAAA,EAC1B,eAAU,MAAM,OAAO,UAAU,MAAM;AAAA,EACvC,CAAC,WAAW,GAAG,QAAQ,UAAU,MAAM;AACxC;AAMO,IAAM,aAAa,IAAI;AAAA,EAC7B,eAAU,MAAM,OAAO,aAAa,MAAM;AAAA,EAC1C,CAAC,WAAW,GAAG,QAAQ,UAAU,MAAM;AACxC;AAMO,IAAM,cAAc,IAAI;AAAA,EAC9B,eAAU,MAAM,OAAO,cAAc,MAAM;AAAA,EAC3C,CAAC,WAAW,GAAG,QAAQ,UAAU,MAAM;AACxC;AAMO,IAAM,aAAa,IAAI;AAAA,EAC7B,eAAU,MAAM,OAAO,aAAa,MAAM;AAAA,EAC1C,CAAC,WAAW,GAAG,QAAQ,UAAU,MAAM;AACxC;AAMO,IAAM,cAAc,IAAI;AAAA,EAC9B,eAAU,MAAM,OAAO,cAAc,MAAM;AAAA,EAC3C,CAAC,WAAW,GAAG,QAAQ,UAAU,MAAM;AACxC;AAMO,IAAM,aAAa,IAAI;AAAA,EAC7B,eAAU,MAAM,OAAO,aAAa,MAAM;AAAA,EAC1C,CAAC,WAAW;AACX,QAAI,QAAQ,OAAO;AAEnB,QAAI,QAAQ,sBAAsB,SAAS,QAAQ;AAClD,cAAQ,sBAAsB,KAAK;AAEnC,UAAI,WAAW,QAAQ,OAAO,aAAa;AAC1C,eAAO;AAAA,MACR;AAAA,IACD,CAAC;AAED,WAAO,MAAM;AACZ,2BAAqB,KAAK;AAAA,IAC3B;AAAA,EACD;AACD;AAMO,IAAM,YAAY,IAAI;AAAA,EAC5B,eAAU,MAAM,OAAO,YAAY,MAAM;AAAA,EACzC,CAAC,WAAW;AACX,QAAI,QAAQ,OAAO;AAEnB,QAAI,QAAQ,sBAAsB,SAAS,QAAQ;AAClD,cAAQ,sBAAsB,KAAK;AAEnC,UAAI,WAAW,QAAQ,OAAO,YAAY;AACzC,eAAO;AAAA,MACR;AAAA,IACD,CAAC;AAED,WAAO,MAAM;AACZ,2BAAqB,KAAK;AAAA,IAC3B;AAAA,EACD;AACD;AAMO,IAAM,SAAS,IAAI;AAAA,EACzB,eAAU,MAAM,UAAU,SAAS,MAAM;AAAA,EACzC,CAAC,WAAW;AACX,UAAM,eAAe,GAAG,QAAQ,UAAU,MAAM;AAChD,UAAM,gBAAgB,GAAG,QAAQ,WAAW,MAAM;AAClD,WAAO,MAAM;AACZ,mBAAa;AACb,oBAAc;AAAA,IACf;AAAA,EACD;AACD;AAxHA;AAiIO,IAAM,mBAAmC,KAAK,WAAuB;AAAA,EAgB3E,cAAc;AAhBsC;AACpD,6BAAO,OAAO,eAAU,OAAO,mBAAmB,MAAS;AAgB1D,QAAI,cAAS;AACZ,4BAAK,wCAAL;AAAA,IACD;AAAA,EACD;AAAA,EAEA,IAAI,UAAU;AACb,QAAI,mBAAK,KAAI;AACb,WAAO,eAAU,OAAO,mBAAmB;AAAA,EAC5C;AACD,GAzBC,sBADoD,6CAGpD,YAAO,WAAG;AACT,QAAM,MAAM;AAAA,IACX,OAAO,WAAW,gBAAgB,OAAO,gBAAgB,OAAO;AAAA,IAChE;AAAA,IACA,MAAM;AACL,UAAI,mBAAK,OAAM,OAAO,gBAAgB;AAEtC,UAAI;AACJ,4BAAK,wCAAL;AAAA,IACD;AAAA,EACD;AACD,GAdoD,IA0BlD;",
  "names": []
}
