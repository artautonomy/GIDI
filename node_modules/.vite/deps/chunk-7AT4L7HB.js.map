{
  "version": 3,
  "sources": ["../../tweakpane/dist/tweakpane.js", "../../three-perf/node_modules/troika-worker-utils/dist/troika-worker-utils.esm.js", "../../three-perf/node_modules/troika-three-utils/dist/troika-three-utils.esm.js", "../../three-perf/node_modules/troika-three-text/dist/troika-three-text.esm.js", "../../three-perf/src/ui/UI.ts", "../../three-perf/src/GLPerf.ts", "../../three-perf/src/ThreePerf.ts"],
  "sourcesContent": ["/*! Tweakpane 3.1.10 (c) 2016 cocopon, licensed under the MIT license. */\r\n(function (global, factory) {\r\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\r\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\r\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\r\n})(this, (function (exports) { 'use strict';\r\n\r\n    /***\r\n     * A simple semantic versioning perser.\r\n     */\r\n    class Semver {\r\n        /**\r\n         * @hidden\r\n         */\r\n        constructor(text) {\r\n            const [core, prerelease] = text.split('-');\r\n            const coreComps = core.split('.');\r\n            this.major = parseInt(coreComps[0], 10);\r\n            this.minor = parseInt(coreComps[1], 10);\r\n            this.patch = parseInt(coreComps[2], 10);\r\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\r\n        }\r\n        toString() {\r\n            const core = [this.major, this.minor, this.patch].join('.');\r\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\r\n        }\r\n    }\r\n\r\n    class BladeApi {\r\n        constructor(controller) {\r\n            this.controller_ = controller;\r\n        }\r\n        get element() {\r\n            return this.controller_.view.element;\r\n        }\r\n        get disabled() {\r\n            return this.controller_.viewProps.get('disabled');\r\n        }\r\n        set disabled(disabled) {\r\n            this.controller_.viewProps.set('disabled', disabled);\r\n        }\r\n        get hidden() {\r\n            return this.controller_.viewProps.get('hidden');\r\n        }\r\n        set hidden(hidden) {\r\n            this.controller_.viewProps.set('hidden', hidden);\r\n        }\r\n        dispose() {\r\n            this.controller_.viewProps.set('disposed', true);\r\n        }\r\n    }\r\n\r\n    class TpEvent {\r\n        constructor(target) {\r\n            this.target = target;\r\n        }\r\n    }\r\n    class TpChangeEvent extends TpEvent {\r\n        constructor(target, value, presetKey, last) {\r\n            super(target);\r\n            this.value = value;\r\n            this.presetKey = presetKey;\r\n            this.last = last !== null && last !== void 0 ? last : true;\r\n        }\r\n    }\r\n    class TpUpdateEvent extends TpEvent {\r\n        constructor(target, value, presetKey) {\r\n            super(target);\r\n            this.value = value;\r\n            this.presetKey = presetKey;\r\n        }\r\n    }\r\n    class TpFoldEvent extends TpEvent {\r\n        constructor(target, expanded) {\r\n            super(target);\r\n            this.expanded = expanded;\r\n        }\r\n    }\r\n    class TpTabSelectEvent extends TpEvent {\r\n        constructor(target, index) {\r\n            super(target);\r\n            this.index = index;\r\n        }\r\n    }\r\n\r\n    function forceCast(v) {\r\n        return v;\r\n    }\r\n    function isEmpty(value) {\r\n        return value === null || value === undefined;\r\n    }\r\n    function deepEqualsArray(a1, a2) {\r\n        if (a1.length !== a2.length) {\r\n            return false;\r\n        }\r\n        for (let i = 0; i < a1.length; i++) {\r\n            if (a1[i] !== a2[i]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    function isPropertyWritable(obj, key) {\r\n        let target = obj;\r\n        do {\r\n            const d = Object.getOwnPropertyDescriptor(target, key);\r\n            if (d && (d.set !== undefined || d.writable === true)) {\r\n                return true;\r\n            }\r\n            target = Object.getPrototypeOf(target);\r\n        } while (target !== null);\r\n        return false;\r\n    }\r\n\r\n    const CREATE_MESSAGE_MAP = {\r\n        alreadydisposed: () => 'View has been already disposed',\r\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\r\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\r\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\r\n        notbindable: () => `Value is not bindable`,\r\n        propertynotfound: (context) => `Property '${context.name}' not found`,\r\n        shouldneverhappen: () => 'This error should never happen',\r\n    };\r\n    class TpError {\r\n        static alreadyDisposed() {\r\n            return new TpError({ type: 'alreadydisposed' });\r\n        }\r\n        static notBindable() {\r\n            return new TpError({\r\n                type: 'notbindable',\r\n            });\r\n        }\r\n        static propertyNotFound(name) {\r\n            return new TpError({\r\n                type: 'propertynotfound',\r\n                context: {\r\n                    name: name,\r\n                },\r\n            });\r\n        }\r\n        static shouldNeverHappen() {\r\n            return new TpError({ type: 'shouldneverhappen' });\r\n        }\r\n        constructor(config) {\r\n            var _a;\r\n            this.message =\r\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\r\n            this.name = this.constructor.name;\r\n            this.stack = new Error(this.message).stack;\r\n            this.type = config.type;\r\n        }\r\n    }\r\n\r\n    class BindingTarget {\r\n        constructor(obj, key, opt_id) {\r\n            this.obj_ = obj;\r\n            this.key_ = key;\r\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\r\n        }\r\n        static isBindable(obj) {\r\n            if (obj === null) {\r\n                return false;\r\n            }\r\n            if (typeof obj !== 'object' && typeof obj !== 'function') {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        get key() {\r\n            return this.key_;\r\n        }\r\n        get presetKey() {\r\n            return this.presetKey_;\r\n        }\r\n        read() {\r\n            return this.obj_[this.key_];\r\n        }\r\n        write(value) {\r\n            this.obj_[this.key_] = value;\r\n        }\r\n        writeProperty(name, value) {\r\n            const valueObj = this.read();\r\n            if (!BindingTarget.isBindable(valueObj)) {\r\n                throw TpError.notBindable();\r\n            }\r\n            if (!(name in valueObj)) {\r\n                throw TpError.propertyNotFound(name);\r\n            }\r\n            valueObj[name] = value;\r\n        }\r\n    }\r\n\r\n    class ButtonApi extends BladeApi {\r\n        get label() {\r\n            return this.controller_.props.get('label');\r\n        }\r\n        set label(label) {\r\n            this.controller_.props.set('label', label);\r\n        }\r\n        get title() {\r\n            var _a;\r\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\r\n        }\r\n        set title(title) {\r\n            this.controller_.valueController.props.set('title', title);\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            const emitter = this.controller_.valueController.emitter;\r\n            emitter.on(eventName, () => {\r\n                bh(new TpEvent(this));\r\n            });\r\n            return this;\r\n        }\r\n    }\r\n\r\n    class Emitter {\r\n        constructor() {\r\n            this.observers_ = {};\r\n        }\r\n        on(eventName, handler) {\r\n            let observers = this.observers_[eventName];\r\n            if (!observers) {\r\n                observers = this.observers_[eventName] = [];\r\n            }\r\n            observers.push({\r\n                handler: handler,\r\n            });\r\n            return this;\r\n        }\r\n        off(eventName, handler) {\r\n            const observers = this.observers_[eventName];\r\n            if (observers) {\r\n                this.observers_[eventName] = observers.filter((observer) => {\r\n                    return observer.handler !== handler;\r\n                });\r\n            }\r\n            return this;\r\n        }\r\n        emit(eventName, event) {\r\n            const observers = this.observers_[eventName];\r\n            if (!observers) {\r\n                return;\r\n            }\r\n            observers.forEach((observer) => {\r\n                observer.handler(event);\r\n            });\r\n        }\r\n    }\r\n\r\n    const PREFIX = 'tp';\r\n    function ClassName(viewName) {\r\n        const fn = (opt_elementName, opt_modifier) => {\r\n            return [\r\n                PREFIX,\r\n                '-',\r\n                viewName,\r\n                'v',\r\n                opt_elementName ? `_${opt_elementName}` : '',\r\n                opt_modifier ? `-${opt_modifier}` : '',\r\n            ].join('');\r\n        };\r\n        return fn;\r\n    }\r\n\r\n    function compose(h1, h2) {\r\n        return (input) => h2(h1(input));\r\n    }\r\n    function extractValue(ev) {\r\n        return ev.rawValue;\r\n    }\r\n    function bindValue(value, applyValue) {\r\n        value.emitter.on('change', compose(extractValue, applyValue));\r\n        applyValue(value.rawValue);\r\n    }\r\n    function bindValueMap(valueMap, key, applyValue) {\r\n        bindValue(valueMap.value(key), applyValue);\r\n    }\r\n\r\n    function applyClass(elem, className, active) {\r\n        if (active) {\r\n            elem.classList.add(className);\r\n        }\r\n        else {\r\n            elem.classList.remove(className);\r\n        }\r\n    }\r\n    function valueToClassName(elem, className) {\r\n        return (value) => {\r\n            applyClass(elem, className, value);\r\n        };\r\n    }\r\n    function bindValueToTextContent(value, elem) {\r\n        bindValue(value, (text) => {\r\n            elem.textContent = text !== null && text !== void 0 ? text : '';\r\n        });\r\n    }\r\n\r\n    const className$q = ClassName('btn');\r\n    class ButtonView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$q());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const buttonElem = doc.createElement('button');\r\n            buttonElem.classList.add(className$q('b'));\r\n            config.viewProps.bindDisabled(buttonElem);\r\n            this.element.appendChild(buttonElem);\r\n            this.buttonElement = buttonElem;\r\n            const titleElem = doc.createElement('div');\r\n            titleElem.classList.add(className$q('t'));\r\n            bindValueToTextContent(config.props.value('title'), titleElem);\r\n            this.buttonElement.appendChild(titleElem);\r\n        }\r\n    }\r\n\r\n    class ButtonController {\r\n        constructor(doc, config) {\r\n            this.emitter = new Emitter();\r\n            this.onClick_ = this.onClick_.bind(this);\r\n            this.props = config.props;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new ButtonView(doc, {\r\n                props: this.props,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view.buttonElement.addEventListener('click', this.onClick_);\r\n        }\r\n        onClick_() {\r\n            this.emitter.emit('click', {\r\n                sender: this,\r\n            });\r\n        }\r\n    }\r\n\r\n    class BoundValue {\r\n        constructor(initialValue, config) {\r\n            var _a;\r\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\r\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\r\n            this.emitter = new Emitter();\r\n            this.rawValue_ = initialValue;\r\n        }\r\n        get constraint() {\r\n            return this.constraint_;\r\n        }\r\n        get rawValue() {\r\n            return this.rawValue_;\r\n        }\r\n        set rawValue(rawValue) {\r\n            this.setRawValue(rawValue, {\r\n                forceEmit: false,\r\n                last: true,\r\n            });\r\n        }\r\n        setRawValue(rawValue, options) {\r\n            const opts = options !== null && options !== void 0 ? options : {\r\n                forceEmit: false,\r\n                last: true,\r\n            };\r\n            const constrainedValue = this.constraint_\r\n                ? this.constraint_.constrain(rawValue)\r\n                : rawValue;\r\n            const prevValue = this.rawValue_;\r\n            const changed = !this.equals_(prevValue, constrainedValue);\r\n            if (!changed && !opts.forceEmit) {\r\n                return;\r\n            }\r\n            this.emitter.emit('beforechange', {\r\n                sender: this,\r\n            });\r\n            this.rawValue_ = constrainedValue;\r\n            this.emitter.emit('change', {\r\n                options: opts,\r\n                previousRawValue: prevValue,\r\n                rawValue: constrainedValue,\r\n                sender: this,\r\n            });\r\n        }\r\n    }\r\n\r\n    class PrimitiveValue {\r\n        constructor(initialValue) {\r\n            this.emitter = new Emitter();\r\n            this.value_ = initialValue;\r\n        }\r\n        get rawValue() {\r\n            return this.value_;\r\n        }\r\n        set rawValue(value) {\r\n            this.setRawValue(value, {\r\n                forceEmit: false,\r\n                last: true,\r\n            });\r\n        }\r\n        setRawValue(value, options) {\r\n            const opts = options !== null && options !== void 0 ? options : {\r\n                forceEmit: false,\r\n                last: true,\r\n            };\r\n            const prevValue = this.value_;\r\n            if (prevValue === value && !opts.forceEmit) {\r\n                return;\r\n            }\r\n            this.emitter.emit('beforechange', {\r\n                sender: this,\r\n            });\r\n            this.value_ = value;\r\n            this.emitter.emit('change', {\r\n                options: opts,\r\n                previousRawValue: prevValue,\r\n                rawValue: this.value_,\r\n                sender: this,\r\n            });\r\n        }\r\n    }\r\n\r\n    function createValue(initialValue, config) {\r\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\r\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\r\n        if (!constraint && !equals) {\r\n            return new PrimitiveValue(initialValue);\r\n        }\r\n        return new BoundValue(initialValue, config);\r\n    }\r\n\r\n    class ValueMap {\r\n        constructor(valueMap) {\r\n            this.emitter = new Emitter();\r\n            this.valMap_ = valueMap;\r\n            for (const key in this.valMap_) {\r\n                const v = this.valMap_[key];\r\n                v.emitter.on('change', () => {\r\n                    this.emitter.emit('change', {\r\n                        key: key,\r\n                        sender: this,\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        static createCore(initialValue) {\r\n            const keys = Object.keys(initialValue);\r\n            return keys.reduce((o, key) => {\r\n                return Object.assign(o, {\r\n                    [key]: createValue(initialValue[key]),\r\n                });\r\n            }, {});\r\n        }\r\n        static fromObject(initialValue) {\r\n            const core = this.createCore(initialValue);\r\n            return new ValueMap(core);\r\n        }\r\n        get(key) {\r\n            return this.valMap_[key].rawValue;\r\n        }\r\n        set(key, value) {\r\n            this.valMap_[key].rawValue = value;\r\n        }\r\n        value(key) {\r\n            return this.valMap_[key];\r\n        }\r\n    }\r\n\r\n    function parseObject(value, keyToParserMap) {\r\n        const keys = Object.keys(keyToParserMap);\r\n        const result = keys.reduce((tmp, key) => {\r\n            if (tmp === undefined) {\r\n                return undefined;\r\n            }\r\n            const parser = keyToParserMap[key];\r\n            const result = parser(value[key]);\r\n            return result.succeeded\r\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\r\n        }, {});\r\n        return forceCast(result);\r\n    }\r\n    function parseArray(value, parseItem) {\r\n        return value.reduce((tmp, item) => {\r\n            if (tmp === undefined) {\r\n                return undefined;\r\n            }\r\n            const result = parseItem(item);\r\n            if (!result.succeeded || result.value === undefined) {\r\n                return undefined;\r\n            }\r\n            return [...tmp, result.value];\r\n        }, []);\r\n    }\r\n    function isObject(value) {\r\n        if (value === null) {\r\n            return false;\r\n        }\r\n        return typeof value === 'object';\r\n    }\r\n    function createParamsParserBuilder(parse) {\r\n        return (optional) => (v) => {\r\n            if (!optional && v === undefined) {\r\n                return {\r\n                    succeeded: false,\r\n                    value: undefined,\r\n                };\r\n            }\r\n            if (optional && v === undefined) {\r\n                return {\r\n                    succeeded: true,\r\n                    value: undefined,\r\n                };\r\n            }\r\n            const result = parse(v);\r\n            return result !== undefined\r\n                ? {\r\n                    succeeded: true,\r\n                    value: result,\r\n                }\r\n                : {\r\n                    succeeded: false,\r\n                    value: undefined,\r\n                };\r\n        };\r\n    }\r\n    function createParamsParserBuilders(optional) {\r\n        return {\r\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\r\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\r\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\r\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\r\n            function: createParamsParserBuilder((v) =>\r\n            typeof v === 'function' ? v : undefined)(optional),\r\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\r\n            raw: createParamsParserBuilder((v) => v)(optional),\r\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\r\n                if (!isObject(v)) {\r\n                    return undefined;\r\n                }\r\n                return parseObject(v, keyToParserMap);\r\n            })(optional),\r\n            array: (itemParser) => createParamsParserBuilder((v) => {\r\n                if (!Array.isArray(v)) {\r\n                    return undefined;\r\n                }\r\n                return parseArray(v, itemParser);\r\n            })(optional),\r\n        };\r\n    }\r\n    const ParamsParsers = {\r\n        optional: createParamsParserBuilders(true),\r\n        required: createParamsParserBuilders(false),\r\n    };\r\n    function parseParams(value, keyToParserMap) {\r\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\r\n        return result.succeeded ? result.value : undefined;\r\n    }\r\n\r\n    function warnMissing(info) {\r\n        console.warn([\r\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\r\n            'Please rebuild plugins with the latest core package.',\r\n        ].join(' '));\r\n    }\r\n\r\n    function disposeElement(elem) {\r\n        if (elem && elem.parentElement) {\r\n            elem.parentElement.removeChild(elem);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    class ReadonlyValue {\r\n        constructor(value) {\r\n            this.value_ = value;\r\n        }\r\n        static create(value) {\r\n            return [\r\n                new ReadonlyValue(value),\r\n                (rawValue, options) => {\r\n                    value.setRawValue(rawValue, options);\r\n                },\r\n            ];\r\n        }\r\n        get emitter() {\r\n            return this.value_.emitter;\r\n        }\r\n        get rawValue() {\r\n            return this.value_.rawValue;\r\n        }\r\n    }\r\n\r\n    const className$p = ClassName('');\r\n    function valueToModifier(elem, modifier) {\r\n        return valueToClassName(elem, className$p(undefined, modifier));\r\n    }\r\n    class ViewProps extends ValueMap {\r\n        constructor(valueMap) {\r\n            var _a;\r\n            super(valueMap);\r\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\r\n            this.onParentChange_ = this.onParentChange_.bind(this);\r\n            this.onParentGlobalDisabledChange_ =\r\n                this.onParentGlobalDisabledChange_.bind(this);\r\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\r\n            this.value('disabled').emitter.on('change', this.onDisabledChange_);\r\n            this.value('parent').emitter.on('change', this.onParentChange_);\r\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\r\n        }\r\n        static create(opt_initialValue) {\r\n            var _a, _b, _c;\r\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\r\n            return new ViewProps(ValueMap.createCore({\r\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\r\n                disposed: false,\r\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\r\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\r\n            }));\r\n        }\r\n        get globalDisabled() {\r\n            return this.globalDisabled_;\r\n        }\r\n        bindClassModifiers(elem) {\r\n            bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\r\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\r\n        }\r\n        bindDisabled(target) {\r\n            bindValue(this.globalDisabled_, (disabled) => {\r\n                target.disabled = disabled;\r\n            });\r\n        }\r\n        bindTabIndex(elem) {\r\n            bindValue(this.globalDisabled_, (disabled) => {\r\n                elem.tabIndex = disabled ? -1 : 0;\r\n            });\r\n        }\r\n        handleDispose(callback) {\r\n            this.value('disposed').emitter.on('change', (disposed) => {\r\n                if (disposed) {\r\n                    callback();\r\n                }\r\n            });\r\n        }\r\n        getGlobalDisabled_() {\r\n            const parent = this.get('parent');\r\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\r\n            return parentDisabled || this.get('disabled');\r\n        }\r\n        updateGlobalDisabled_() {\r\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\r\n        }\r\n        onDisabledChange_() {\r\n            this.updateGlobalDisabled_();\r\n        }\r\n        onParentGlobalDisabledChange_() {\r\n            this.updateGlobalDisabled_();\r\n        }\r\n        onParentChange_(ev) {\r\n            var _a;\r\n            const prevParent = ev.previousRawValue;\r\n            prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\r\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\r\n            this.updateGlobalDisabled_();\r\n        }\r\n    }\r\n\r\n    function getAllBladePositions() {\r\n        return ['veryfirst', 'first', 'last', 'verylast'];\r\n    }\r\n\r\n    const className$o = ClassName('');\r\n    const POS_TO_CLASS_NAME_MAP = {\r\n        veryfirst: 'vfst',\r\n        first: 'fst',\r\n        last: 'lst',\r\n        verylast: 'vlst',\r\n    };\r\n    class BladeController {\r\n        constructor(config) {\r\n            this.parent_ = null;\r\n            this.blade = config.blade;\r\n            this.view = config.view;\r\n            this.viewProps = config.viewProps;\r\n            const elem = this.view.element;\r\n            this.blade.value('positions').emitter.on('change', () => {\r\n                getAllBladePositions().forEach((pos) => {\r\n                    elem.classList.remove(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\r\n                });\r\n                this.blade.get('positions').forEach((pos) => {\r\n                    elem.classList.add(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\r\n                });\r\n            });\r\n            this.viewProps.handleDispose(() => {\r\n                disposeElement(elem);\r\n            });\r\n        }\r\n        get parent() {\r\n            return this.parent_;\r\n        }\r\n        set parent(parent) {\r\n            this.parent_ = parent;\r\n            if (!('parent' in this.viewProps.valMap_)) {\r\n                warnMissing({\r\n                    key: 'parent',\r\n                    target: ViewProps.name,\r\n                    place: 'BladeController.parent',\r\n                });\r\n                return;\r\n            }\r\n            this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\r\n        }\r\n    }\r\n\r\n    const SVG_NS = 'http://www.w3.org/2000/svg';\r\n    function forceReflow(element) {\r\n        element.offsetHeight;\r\n    }\r\n    function disableTransitionTemporarily(element, callback) {\r\n        const t = element.style.transition;\r\n        element.style.transition = 'none';\r\n        callback();\r\n        element.style.transition = t;\r\n    }\r\n    function supportsTouch(doc) {\r\n        return doc.ontouchstart !== undefined;\r\n    }\r\n    function getGlobalObject() {\r\n        return globalThis;\r\n    }\r\n    function getWindowDocument() {\r\n        const globalObj = forceCast(getGlobalObject());\r\n        return globalObj.document;\r\n    }\r\n    function getCanvasContext(canvasElement) {\r\n        const win = canvasElement.ownerDocument.defaultView;\r\n        if (!win) {\r\n            return null;\r\n        }\r\n        const isBrowser = 'document' in win;\r\n        return isBrowser\r\n            ? canvasElement.getContext('2d', {\r\n                willReadFrequently: true,\r\n            })\r\n            : null;\r\n    }\r\n    const ICON_ID_TO_INNER_HTML_MAP = {\r\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\r\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\r\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\r\n    };\r\n    function createSvgIconElement(document, iconId) {\r\n        const elem = document.createElementNS(SVG_NS, 'svg');\r\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\r\n        return elem;\r\n    }\r\n    function insertElementAt(parentElement, element, index) {\r\n        parentElement.insertBefore(element, parentElement.children[index]);\r\n    }\r\n    function removeElement(element) {\r\n        if (element.parentElement) {\r\n            element.parentElement.removeChild(element);\r\n        }\r\n    }\r\n    function removeChildElements(element) {\r\n        while (element.children.length > 0) {\r\n            element.removeChild(element.children[0]);\r\n        }\r\n    }\r\n    function removeChildNodes(element) {\r\n        while (element.childNodes.length > 0) {\r\n            element.removeChild(element.childNodes[0]);\r\n        }\r\n    }\r\n    function findNextTarget(ev) {\r\n        if (ev.relatedTarget) {\r\n            return forceCast(ev.relatedTarget);\r\n        }\r\n        if ('explicitOriginalTarget' in ev) {\r\n            return ev.explicitOriginalTarget;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    const className$n = ClassName('lbl');\r\n    function createLabelNode(doc, label) {\r\n        const frag = doc.createDocumentFragment();\r\n        const lineNodes = label.split('\\n').map((line) => {\r\n            return doc.createTextNode(line);\r\n        });\r\n        lineNodes.forEach((lineNode, index) => {\r\n            if (index > 0) {\r\n                frag.appendChild(doc.createElement('br'));\r\n            }\r\n            frag.appendChild(lineNode);\r\n        });\r\n        return frag;\r\n    }\r\n    class LabelView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$n());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const labelElem = doc.createElement('div');\r\n            labelElem.classList.add(className$n('l'));\r\n            bindValueMap(config.props, 'label', (value) => {\r\n                if (isEmpty(value)) {\r\n                    this.element.classList.add(className$n(undefined, 'nol'));\r\n                }\r\n                else {\r\n                    this.element.classList.remove(className$n(undefined, 'nol'));\r\n                    removeChildNodes(labelElem);\r\n                    labelElem.appendChild(createLabelNode(doc, value));\r\n                }\r\n            });\r\n            this.element.appendChild(labelElem);\r\n            this.labelElement = labelElem;\r\n            const valueElem = doc.createElement('div');\r\n            valueElem.classList.add(className$n('v'));\r\n            this.element.appendChild(valueElem);\r\n            this.valueElement = valueElem;\r\n        }\r\n    }\r\n\r\n    class LabelController extends BladeController {\r\n        constructor(doc, config) {\r\n            const viewProps = config.valueController.viewProps;\r\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\r\n                    props: config.props,\r\n                    viewProps: viewProps,\r\n                }), viewProps: viewProps }));\r\n            this.props = config.props;\r\n            this.valueController = config.valueController;\r\n            this.view.valueElement.appendChild(this.valueController.view.element);\r\n        }\r\n    }\r\n\r\n    const ButtonBladePlugin = {\r\n        id: 'button',\r\n        type: 'blade',\r\n        accept(params) {\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                title: p.required.string,\r\n                view: p.required.constant('button'),\r\n                label: p.optional.string,\r\n            });\r\n            return result ? { params: result } : null;\r\n        },\r\n        controller(args) {\r\n            return new LabelController(args.document, {\r\n                blade: args.blade,\r\n                props: ValueMap.fromObject({\r\n                    label: args.params.label,\r\n                }),\r\n                valueController: new ButtonController(args.document, {\r\n                    props: ValueMap.fromObject({\r\n                        title: args.params.title,\r\n                    }),\r\n                    viewProps: args.viewProps,\r\n                }),\r\n            });\r\n        },\r\n        api(args) {\r\n            if (!(args.controller instanceof LabelController)) {\r\n                return null;\r\n            }\r\n            if (!(args.controller.valueController instanceof ButtonController)) {\r\n                return null;\r\n            }\r\n            return new ButtonApi(args.controller);\r\n        },\r\n    };\r\n\r\n    class ValueBladeController extends BladeController {\r\n        constructor(config) {\r\n            super(config);\r\n            this.value = config.value;\r\n        }\r\n    }\r\n\r\n    function createBlade() {\r\n        return new ValueMap({\r\n            positions: createValue([], {\r\n                equals: deepEqualsArray,\r\n            }),\r\n        });\r\n    }\r\n\r\n    class Foldable extends ValueMap {\r\n        constructor(valueMap) {\r\n            super(valueMap);\r\n        }\r\n        static create(expanded) {\r\n            const coreObj = {\r\n                completed: true,\r\n                expanded: expanded,\r\n                expandedHeight: null,\r\n                shouldFixHeight: false,\r\n                temporaryExpanded: null,\r\n            };\r\n            const core = ValueMap.createCore(coreObj);\r\n            return new Foldable(core);\r\n        }\r\n        get styleExpanded() {\r\n            var _a;\r\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\r\n        }\r\n        get styleHeight() {\r\n            if (!this.styleExpanded) {\r\n                return '0';\r\n            }\r\n            const exHeight = this.get('expandedHeight');\r\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\r\n                return `${exHeight}px`;\r\n            }\r\n            return 'auto';\r\n        }\r\n        bindExpandedClass(elem, expandedClassName) {\r\n            const onExpand = () => {\r\n                const expanded = this.styleExpanded;\r\n                if (expanded) {\r\n                    elem.classList.add(expandedClassName);\r\n                }\r\n                else {\r\n                    elem.classList.remove(expandedClassName);\r\n                }\r\n            };\r\n            bindValueMap(this, 'expanded', onExpand);\r\n            bindValueMap(this, 'temporaryExpanded', onExpand);\r\n        }\r\n        cleanUpTransition() {\r\n            this.set('shouldFixHeight', false);\r\n            this.set('expandedHeight', null);\r\n            this.set('completed', true);\r\n        }\r\n    }\r\n    function computeExpandedFolderHeight(folder, containerElement) {\r\n        let height = 0;\r\n        disableTransitionTemporarily(containerElement, () => {\r\n            folder.set('expandedHeight', null);\r\n            folder.set('temporaryExpanded', true);\r\n            forceReflow(containerElement);\r\n            height = containerElement.clientHeight;\r\n            folder.set('temporaryExpanded', null);\r\n            forceReflow(containerElement);\r\n        });\r\n        return height;\r\n    }\r\n    function applyHeight(foldable, elem) {\r\n        elem.style.height = foldable.styleHeight;\r\n    }\r\n    function bindFoldable(foldable, elem) {\r\n        foldable.value('expanded').emitter.on('beforechange', () => {\r\n            foldable.set('completed', false);\r\n            if (isEmpty(foldable.get('expandedHeight'))) {\r\n                const h = computeExpandedFolderHeight(foldable, elem);\r\n                if (h > 0) {\r\n                    foldable.set('expandedHeight', h);\r\n                }\r\n            }\r\n            foldable.set('shouldFixHeight', true);\r\n            forceReflow(elem);\r\n        });\r\n        foldable.emitter.on('change', () => {\r\n            applyHeight(foldable, elem);\r\n        });\r\n        applyHeight(foldable, elem);\r\n        elem.addEventListener('transitionend', (ev) => {\r\n            if (ev.propertyName !== 'height') {\r\n                return;\r\n            }\r\n            foldable.cleanUpTransition();\r\n        });\r\n    }\r\n\r\n    class RackLikeApi extends BladeApi {\r\n        constructor(controller, rackApi) {\r\n            super(controller);\r\n            this.rackApi_ = rackApi;\r\n        }\r\n    }\r\n\r\n    function addButtonAsBlade(api, params) {\r\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\r\n    }\r\n    function addFolderAsBlade(api, params) {\r\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\r\n    }\r\n    function addSeparatorAsBlade(api, opt_params) {\r\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\r\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\r\n    }\r\n    function addTabAsBlade(api, params) {\r\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\r\n    }\r\n\r\n    class NestedOrderedSet {\r\n        constructor(extract) {\r\n            this.emitter = new Emitter();\r\n            this.items_ = [];\r\n            this.cache_ = new Set();\r\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\r\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\r\n            this.extract_ = extract;\r\n        }\r\n        get items() {\r\n            return this.items_;\r\n        }\r\n        allItems() {\r\n            return Array.from(this.cache_);\r\n        }\r\n        find(callback) {\r\n            for (const item of this.allItems()) {\r\n                if (callback(item)) {\r\n                    return item;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        includes(item) {\r\n            return this.cache_.has(item);\r\n        }\r\n        add(item, opt_index) {\r\n            if (this.includes(item)) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\r\n            this.items_.splice(index, 0, item);\r\n            this.cache_.add(item);\r\n            const subList = this.extract_(item);\r\n            if (subList) {\r\n                subList.emitter.on('add', this.onSubListAdd_);\r\n                subList.emitter.on('remove', this.onSubListRemove_);\r\n                subList.allItems().forEach((item) => {\r\n                    this.cache_.add(item);\r\n                });\r\n            }\r\n            this.emitter.emit('add', {\r\n                index: index,\r\n                item: item,\r\n                root: this,\r\n                target: this,\r\n            });\r\n        }\r\n        remove(item) {\r\n            const index = this.items_.indexOf(item);\r\n            if (index < 0) {\r\n                return;\r\n            }\r\n            this.items_.splice(index, 1);\r\n            this.cache_.delete(item);\r\n            const subList = this.extract_(item);\r\n            if (subList) {\r\n                subList.emitter.off('add', this.onSubListAdd_);\r\n                subList.emitter.off('remove', this.onSubListRemove_);\r\n            }\r\n            this.emitter.emit('remove', {\r\n                index: index,\r\n                item: item,\r\n                root: this,\r\n                target: this,\r\n            });\r\n        }\r\n        onSubListAdd_(ev) {\r\n            this.cache_.add(ev.item);\r\n            this.emitter.emit('add', {\r\n                index: ev.index,\r\n                item: ev.item,\r\n                root: this,\r\n                target: ev.target,\r\n            });\r\n        }\r\n        onSubListRemove_(ev) {\r\n            this.cache_.delete(ev.item);\r\n            this.emitter.emit('remove', {\r\n                index: ev.index,\r\n                item: ev.item,\r\n                root: this,\r\n                target: ev.target,\r\n            });\r\n        }\r\n    }\r\n\r\n    class InputBindingApi extends BladeApi {\r\n        constructor(controller) {\r\n            super(controller);\r\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\r\n            this.emitter_ = new Emitter();\r\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\r\n        }\r\n        get label() {\r\n            return this.controller_.props.get('label');\r\n        }\r\n        set label(label) {\r\n            this.controller_.props.set('label', label);\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            this.emitter_.on(eventName, (ev) => {\r\n                bh(ev.event);\r\n            });\r\n            return this;\r\n        }\r\n        refresh() {\r\n            this.controller_.binding.read();\r\n        }\r\n        onBindingChange_(ev) {\r\n            const value = ev.sender.target.read();\r\n            this.emitter_.emit('change', {\r\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\r\n            });\r\n        }\r\n    }\r\n\r\n    class InputBindingController extends LabelController {\r\n        constructor(doc, config) {\r\n            super(doc, config);\r\n            this.binding = config.binding;\r\n        }\r\n    }\r\n\r\n    class MonitorBindingApi extends BladeApi {\r\n        constructor(controller) {\r\n            super(controller);\r\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\r\n            this.emitter_ = new Emitter();\r\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\r\n        }\r\n        get label() {\r\n            return this.controller_.props.get('label');\r\n        }\r\n        set label(label) {\r\n            this.controller_.props.set('label', label);\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            this.emitter_.on(eventName, (ev) => {\r\n                bh(ev.event);\r\n            });\r\n            return this;\r\n        }\r\n        refresh() {\r\n            this.controller_.binding.read();\r\n        }\r\n        onBindingUpdate_(ev) {\r\n            const value = ev.sender.target.read();\r\n            this.emitter_.emit('update', {\r\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\r\n            });\r\n        }\r\n    }\r\n\r\n    class MonitorBindingController extends LabelController {\r\n        constructor(doc, config) {\r\n            super(doc, config);\r\n            this.binding = config.binding;\r\n            this.viewProps.bindDisabled(this.binding.ticker);\r\n            this.viewProps.handleDispose(() => {\r\n                this.binding.dispose();\r\n            });\r\n        }\r\n    }\r\n\r\n    function findSubBladeApiSet(api) {\r\n        if (api instanceof RackApi) {\r\n            return api['apiSet_'];\r\n        }\r\n        if (api instanceof RackLikeApi) {\r\n            return api['rackApi_']['apiSet_'];\r\n        }\r\n        return null;\r\n    }\r\n    function getApiByController(apiSet, controller) {\r\n        const api = apiSet.find((api) => api.controller_ === controller);\r\n        if (!api) {\r\n            throw TpError.shouldNeverHappen();\r\n        }\r\n        return api;\r\n    }\r\n    function createBindingTarget(obj, key, opt_id) {\r\n        if (!BindingTarget.isBindable(obj)) {\r\n            throw TpError.notBindable();\r\n        }\r\n        return new BindingTarget(obj, key, opt_id);\r\n    }\r\n    class RackApi extends BladeApi {\r\n        constructor(controller, pool) {\r\n            super(controller);\r\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\r\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\r\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\r\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\r\n            this.emitter_ = new Emitter();\r\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\r\n            this.pool_ = pool;\r\n            const rack = this.controller_.rack;\r\n            rack.emitter.on('add', this.onRackAdd_);\r\n            rack.emitter.on('remove', this.onRackRemove_);\r\n            rack.emitter.on('inputchange', this.onRackInputChange_);\r\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\r\n            rack.children.forEach((bc) => {\r\n                this.setUpApi_(bc);\r\n            });\r\n        }\r\n        get children() {\r\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\r\n        }\r\n        addInput(object, key, opt_params) {\r\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\r\n            const doc = this.controller_.view.element.ownerDocument;\r\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\r\n            const api = new InputBindingApi(bc);\r\n            return this.add(api, params.index);\r\n        }\r\n        addMonitor(object, key, opt_params) {\r\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\r\n            const doc = this.controller_.view.element.ownerDocument;\r\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\r\n            const api = new MonitorBindingApi(bc);\r\n            return forceCast(this.add(api, params.index));\r\n        }\r\n        addFolder(params) {\r\n            return addFolderAsBlade(this, params);\r\n        }\r\n        addButton(params) {\r\n            return addButtonAsBlade(this, params);\r\n        }\r\n        addSeparator(opt_params) {\r\n            return addSeparatorAsBlade(this, opt_params);\r\n        }\r\n        addTab(params) {\r\n            return addTabAsBlade(this, params);\r\n        }\r\n        add(api, opt_index) {\r\n            this.controller_.rack.add(api.controller_, opt_index);\r\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\r\n            if (gapi) {\r\n                this.apiSet_.remove(gapi);\r\n            }\r\n            this.apiSet_.add(api);\r\n            return api;\r\n        }\r\n        remove(api) {\r\n            this.controller_.rack.remove(api.controller_);\r\n        }\r\n        addBlade(params) {\r\n            const doc = this.controller_.view.element.ownerDocument;\r\n            const bc = this.pool_.createBlade(doc, params);\r\n            const api = this.pool_.createBladeApi(bc);\r\n            return this.add(api, params.index);\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            this.emitter_.on(eventName, (ev) => {\r\n                bh(ev.event);\r\n            });\r\n            return this;\r\n        }\r\n        setUpApi_(bc) {\r\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\r\n            if (!api) {\r\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\r\n            }\r\n        }\r\n        onRackAdd_(ev) {\r\n            this.setUpApi_(ev.bladeController);\r\n        }\r\n        onRackRemove_(ev) {\r\n            if (ev.isRoot) {\r\n                const api = getApiByController(this.apiSet_, ev.bladeController);\r\n                this.apiSet_.remove(api);\r\n            }\r\n        }\r\n        onRackInputChange_(ev) {\r\n            const bc = ev.bladeController;\r\n            if (bc instanceof InputBindingController) {\r\n                const api = getApiByController(this.apiSet_, bc);\r\n                const binding = bc.binding;\r\n                this.emitter_.emit('change', {\r\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\r\n                });\r\n            }\r\n            else if (bc instanceof ValueBladeController) {\r\n                const api = getApiByController(this.apiSet_, bc);\r\n                this.emitter_.emit('change', {\r\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\r\n                });\r\n            }\r\n        }\r\n        onRackMonitorUpdate_(ev) {\r\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            const api = getApiByController(this.apiSet_, ev.bladeController);\r\n            const binding = ev.bladeController.binding;\r\n            this.emitter_.emit('update', {\r\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\r\n            });\r\n        }\r\n    }\r\n\r\n    class FolderApi extends RackLikeApi {\r\n        constructor(controller, pool) {\r\n            super(controller, new RackApi(controller.rackController, pool));\r\n            this.emitter_ = new Emitter();\r\n            this.controller_.foldable\r\n                .value('expanded')\r\n                .emitter.on('change', (ev) => {\r\n                this.emitter_.emit('fold', {\r\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\r\n                });\r\n            });\r\n            this.rackApi_.on('change', (ev) => {\r\n                this.emitter_.emit('change', {\r\n                    event: ev,\r\n                });\r\n            });\r\n            this.rackApi_.on('update', (ev) => {\r\n                this.emitter_.emit('update', {\r\n                    event: ev,\r\n                });\r\n            });\r\n        }\r\n        get expanded() {\r\n            return this.controller_.foldable.get('expanded');\r\n        }\r\n        set expanded(expanded) {\r\n            this.controller_.foldable.set('expanded', expanded);\r\n        }\r\n        get title() {\r\n            return this.controller_.props.get('title');\r\n        }\r\n        set title(title) {\r\n            this.controller_.props.set('title', title);\r\n        }\r\n        get children() {\r\n            return this.rackApi_.children;\r\n        }\r\n        addInput(object, key, opt_params) {\r\n            return this.rackApi_.addInput(object, key, opt_params);\r\n        }\r\n        addMonitor(object, key, opt_params) {\r\n            return this.rackApi_.addMonitor(object, key, opt_params);\r\n        }\r\n        addFolder(params) {\r\n            return this.rackApi_.addFolder(params);\r\n        }\r\n        addButton(params) {\r\n            return this.rackApi_.addButton(params);\r\n        }\r\n        addSeparator(opt_params) {\r\n            return this.rackApi_.addSeparator(opt_params);\r\n        }\r\n        addTab(params) {\r\n            return this.rackApi_.addTab(params);\r\n        }\r\n        add(api, opt_index) {\r\n            return this.rackApi_.add(api, opt_index);\r\n        }\r\n        remove(api) {\r\n            this.rackApi_.remove(api);\r\n        }\r\n        addBlade(params) {\r\n            return this.rackApi_.addBlade(params);\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            this.emitter_.on(eventName, (ev) => {\r\n                bh(ev.event);\r\n            });\r\n            return this;\r\n        }\r\n    }\r\n\r\n    class RackLikeController extends BladeController {\r\n        constructor(config) {\r\n            super({\r\n                blade: config.blade,\r\n                view: config.view,\r\n                viewProps: config.rackController.viewProps,\r\n            });\r\n            this.rackController = config.rackController;\r\n        }\r\n    }\r\n\r\n    class PlainView {\r\n        constructor(doc, config) {\r\n            const className = ClassName(config.viewName);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n        }\r\n    }\r\n\r\n    function findInputBindingController(bcs, b) {\r\n        for (let i = 0; i < bcs.length; i++) {\r\n            const bc = bcs[i];\r\n            if (bc instanceof InputBindingController && bc.binding === b) {\r\n                return bc;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    function findMonitorBindingController(bcs, b) {\r\n        for (let i = 0; i < bcs.length; i++) {\r\n            const bc = bcs[i];\r\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\r\n                return bc;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    function findValueBladeController(bcs, v) {\r\n        for (let i = 0; i < bcs.length; i++) {\r\n            const bc = bcs[i];\r\n            if (bc instanceof ValueBladeController && bc.value === v) {\r\n                return bc;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    function findSubRack(bc) {\r\n        if (bc instanceof RackController) {\r\n            return bc.rack;\r\n        }\r\n        if (bc instanceof RackLikeController) {\r\n            return bc.rackController.rack;\r\n        }\r\n        return null;\r\n    }\r\n    function findSubBladeControllerSet(bc) {\r\n        const rack = findSubRack(bc);\r\n        return rack ? rack['bcSet_'] : null;\r\n    }\r\n    class BladeRack {\r\n        constructor(config) {\r\n            var _a, _b;\r\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\r\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\r\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\r\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\r\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\r\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\r\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\r\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\r\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\r\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\r\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\r\n            this.onDescendantMonitorUpdate_ =\r\n                this.onDescendantMonitorUpdate_.bind(this);\r\n            this.emitter = new Emitter();\r\n            this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\r\n            (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\r\n            this.viewProps = config.viewProps;\r\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\r\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\r\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\r\n        }\r\n        get children() {\r\n            return this.bcSet_.items;\r\n        }\r\n        add(bc, opt_index) {\r\n            var _a;\r\n            (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\r\n            if (isPropertyWritable(bc, 'parent')) {\r\n                bc.parent = this;\r\n            }\r\n            else {\r\n                bc['parent_'] = this;\r\n                warnMissing({\r\n                    key: 'parent',\r\n                    target: 'BladeController',\r\n                    place: 'BladeRack.add',\r\n                });\r\n            }\r\n            this.bcSet_.add(bc, opt_index);\r\n        }\r\n        remove(bc) {\r\n            if (isPropertyWritable(bc, 'parent')) {\r\n                bc.parent = null;\r\n            }\r\n            else {\r\n                bc['parent_'] = null;\r\n                warnMissing({\r\n                    key: 'parent',\r\n                    target: 'BladeController',\r\n                    place: 'BladeRack.remove',\r\n                });\r\n            }\r\n            this.bcSet_.remove(bc);\r\n        }\r\n        find(controllerClass) {\r\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\r\n                return bc instanceof controllerClass;\r\n            }));\r\n        }\r\n        onSetAdd_(ev) {\r\n            this.updatePositions_();\r\n            const isRoot = ev.target === ev.root;\r\n            this.emitter.emit('add', {\r\n                bladeController: ev.item,\r\n                index: ev.index,\r\n                isRoot: isRoot,\r\n                sender: this,\r\n            });\r\n            if (!isRoot) {\r\n                return;\r\n            }\r\n            const bc = ev.item;\r\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\r\n            bc.blade\r\n                .value('positions')\r\n                .emitter.on('change', this.onChildPositionsChange_);\r\n            bc.viewProps.handleDispose(this.onChildDispose_);\r\n            if (bc instanceof InputBindingController) {\r\n                bc.binding.emitter.on('change', this.onChildInputChange_);\r\n            }\r\n            else if (bc instanceof MonitorBindingController) {\r\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\r\n            }\r\n            else if (bc instanceof ValueBladeController) {\r\n                bc.value.emitter.on('change', this.onChildValueChange_);\r\n            }\r\n            else {\r\n                const rack = findSubRack(bc);\r\n                if (rack) {\r\n                    const emitter = rack.emitter;\r\n                    emitter.on('layout', this.onDescendantLayout_);\r\n                    emitter.on('inputchange', this.onDescendantInputChange_);\r\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\r\n                }\r\n            }\r\n        }\r\n        onSetRemove_(ev) {\r\n            this.updatePositions_();\r\n            const isRoot = ev.target === ev.root;\r\n            this.emitter.emit('remove', {\r\n                bladeController: ev.item,\r\n                isRoot: isRoot,\r\n                sender: this,\r\n            });\r\n            if (!isRoot) {\r\n                return;\r\n            }\r\n            const bc = ev.item;\r\n            if (bc instanceof InputBindingController) {\r\n                bc.binding.emitter.off('change', this.onChildInputChange_);\r\n            }\r\n            else if (bc instanceof MonitorBindingController) {\r\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\r\n            }\r\n            else if (bc instanceof ValueBladeController) {\r\n                bc.value.emitter.off('change', this.onChildValueChange_);\r\n            }\r\n            else {\r\n                const rack = findSubRack(bc);\r\n                if (rack) {\r\n                    const emitter = rack.emitter;\r\n                    emitter.off('layout', this.onDescendantLayout_);\r\n                    emitter.off('inputchange', this.onDescendantInputChange_);\r\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\r\n                }\r\n            }\r\n        }\r\n        updatePositions_() {\r\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\r\n            const firstVisibleItem = visibleItems[0];\r\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\r\n            this.bcSet_.items.forEach((bc) => {\r\n                const ps = [];\r\n                if (bc === firstVisibleItem) {\r\n                    ps.push('first');\r\n                    if (!this.blade_ ||\r\n                        this.blade_.get('positions').includes('veryfirst')) {\r\n                        ps.push('veryfirst');\r\n                    }\r\n                }\r\n                if (bc === lastVisibleItem) {\r\n                    ps.push('last');\r\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\r\n                        ps.push('verylast');\r\n                    }\r\n                }\r\n                bc.blade.set('positions', ps);\r\n            });\r\n        }\r\n        onChildPositionsChange_() {\r\n            this.updatePositions_();\r\n            this.emitter.emit('layout', {\r\n                sender: this,\r\n            });\r\n        }\r\n        onChildViewPropsChange_(_ev) {\r\n            this.updatePositions_();\r\n            this.emitter.emit('layout', {\r\n                sender: this,\r\n            });\r\n        }\r\n        onChildDispose_() {\r\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\r\n                return bc.viewProps.get('disposed');\r\n            });\r\n            disposedUcs.forEach((bc) => {\r\n                this.bcSet_.remove(bc);\r\n            });\r\n        }\r\n        onChildInputChange_(ev) {\r\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\r\n            if (!bc) {\r\n                throw TpError.alreadyDisposed();\r\n            }\r\n            this.emitter.emit('inputchange', {\r\n                bladeController: bc,\r\n                options: ev.options,\r\n                sender: this,\r\n            });\r\n        }\r\n        onChildMonitorUpdate_(ev) {\r\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\r\n            if (!bc) {\r\n                throw TpError.alreadyDisposed();\r\n            }\r\n            this.emitter.emit('monitorupdate', {\r\n                bladeController: bc,\r\n                sender: this,\r\n            });\r\n        }\r\n        onChildValueChange_(ev) {\r\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\r\n            if (!bc) {\r\n                throw TpError.alreadyDisposed();\r\n            }\r\n            this.emitter.emit('inputchange', {\r\n                bladeController: bc,\r\n                options: ev.options,\r\n                sender: this,\r\n            });\r\n        }\r\n        onDescendantLayout_(_) {\r\n            this.updatePositions_();\r\n            this.emitter.emit('layout', {\r\n                sender: this,\r\n            });\r\n        }\r\n        onDescendantInputChange_(ev) {\r\n            this.emitter.emit('inputchange', {\r\n                bladeController: ev.bladeController,\r\n                options: ev.options,\r\n                sender: this,\r\n            });\r\n        }\r\n        onDescendantMonitorUpdate_(ev) {\r\n            this.emitter.emit('monitorupdate', {\r\n                bladeController: ev.bladeController,\r\n                sender: this,\r\n            });\r\n        }\r\n        onBladePositionsChange_() {\r\n            this.updatePositions_();\r\n        }\r\n    }\r\n\r\n    class RackController extends BladeController {\r\n        constructor(doc, config) {\r\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\r\n                    viewName: 'brk',\r\n                    viewProps: config.viewProps,\r\n                }) }));\r\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\r\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\r\n            const rack = new BladeRack({\r\n                blade: config.root ? undefined : config.blade,\r\n                viewProps: config.viewProps,\r\n            });\r\n            rack.emitter.on('add', this.onRackAdd_);\r\n            rack.emitter.on('remove', this.onRackRemove_);\r\n            this.rack = rack;\r\n            this.viewProps.handleDispose(() => {\r\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\r\n                    const bc = this.rack.children[i];\r\n                    bc.viewProps.set('disposed', true);\r\n                }\r\n            });\r\n        }\r\n        onRackAdd_(ev) {\r\n            if (!ev.isRoot) {\r\n                return;\r\n            }\r\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\r\n        }\r\n        onRackRemove_(ev) {\r\n            if (!ev.isRoot) {\r\n                return;\r\n            }\r\n            removeElement(ev.bladeController.view.element);\r\n        }\r\n    }\r\n\r\n    const bladeContainerClassName = ClassName('cnt');\r\n\r\n    class FolderView {\r\n        constructor(doc, config) {\r\n            var _a;\r\n            this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(this.className_(), bladeContainerClassName());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            this.foldable_ = config.foldable;\r\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\r\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\r\n            const buttonElem = doc.createElement('button');\r\n            buttonElem.classList.add(this.className_('b'));\r\n            bindValueMap(config.props, 'title', (title) => {\r\n                if (isEmpty(title)) {\r\n                    this.element.classList.add(this.className_(undefined, 'not'));\r\n                }\r\n                else {\r\n                    this.element.classList.remove(this.className_(undefined, 'not'));\r\n                }\r\n            });\r\n            config.viewProps.bindDisabled(buttonElem);\r\n            this.element.appendChild(buttonElem);\r\n            this.buttonElement = buttonElem;\r\n            const indentElem = doc.createElement('div');\r\n            indentElem.classList.add(this.className_('i'));\r\n            this.element.appendChild(indentElem);\r\n            const titleElem = doc.createElement('div');\r\n            titleElem.classList.add(this.className_('t'));\r\n            bindValueToTextContent(config.props.value('title'), titleElem);\r\n            this.buttonElement.appendChild(titleElem);\r\n            this.titleElement = titleElem;\r\n            const markElem = doc.createElement('div');\r\n            markElem.classList.add(this.className_('m'));\r\n            this.buttonElement.appendChild(markElem);\r\n            const containerElem = config.containerElement;\r\n            containerElem.classList.add(this.className_('c'));\r\n            this.element.appendChild(containerElem);\r\n            this.containerElement = containerElem;\r\n        }\r\n    }\r\n\r\n    class FolderController extends RackLikeController {\r\n        constructor(doc, config) {\r\n            var _a;\r\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\r\n            const rc = new RackController(doc, {\r\n                blade: config.blade,\r\n                root: config.root,\r\n                viewProps: config.viewProps,\r\n            });\r\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\r\n                    containerElement: rc.view.element,\r\n                    foldable: foldable,\r\n                    props: config.props,\r\n                    viewName: config.root ? 'rot' : undefined,\r\n                    viewProps: config.viewProps,\r\n                }) }));\r\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\r\n            this.props = config.props;\r\n            this.foldable = foldable;\r\n            bindFoldable(this.foldable, this.view.containerElement);\r\n            this.rackController.rack.emitter.on('add', () => {\r\n                this.foldable.cleanUpTransition();\r\n            });\r\n            this.rackController.rack.emitter.on('remove', () => {\r\n                this.foldable.cleanUpTransition();\r\n            });\r\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\r\n        }\r\n        get document() {\r\n            return this.view.element.ownerDocument;\r\n        }\r\n        onTitleClick_() {\r\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\r\n        }\r\n    }\r\n\r\n    const FolderBladePlugin = {\r\n        id: 'folder',\r\n        type: 'blade',\r\n        accept(params) {\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                title: p.required.string,\r\n                view: p.required.constant('folder'),\r\n                expanded: p.optional.boolean,\r\n            });\r\n            return result ? { params: result } : null;\r\n        },\r\n        controller(args) {\r\n            return new FolderController(args.document, {\r\n                blade: args.blade,\r\n                expanded: args.params.expanded,\r\n                props: ValueMap.fromObject({\r\n                    title: args.params.title,\r\n                }),\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n        api(args) {\r\n            if (!(args.controller instanceof FolderController)) {\r\n                return null;\r\n            }\r\n            return new FolderApi(args.controller, args.pool);\r\n        },\r\n    };\r\n\r\n    class LabeledValueController extends ValueBladeController {\r\n        constructor(doc, config) {\r\n            const viewProps = config.valueController.viewProps;\r\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\r\n                    props: config.props,\r\n                    viewProps: viewProps,\r\n                }), viewProps: viewProps }));\r\n            this.props = config.props;\r\n            this.valueController = config.valueController;\r\n            this.view.valueElement.appendChild(this.valueController.view.element);\r\n        }\r\n    }\r\n\r\n    class SeparatorApi extends BladeApi {\r\n    }\r\n\r\n    const className$m = ClassName('spr');\r\n    class SeparatorView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$m());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const hrElem = doc.createElement('hr');\r\n            hrElem.classList.add(className$m('r'));\r\n            this.element.appendChild(hrElem);\r\n        }\r\n    }\r\n\r\n    class SeparatorController extends BladeController {\r\n        constructor(doc, config) {\r\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\r\n                    viewProps: config.viewProps,\r\n                }) }));\r\n        }\r\n    }\r\n\r\n    const SeparatorBladePlugin = {\r\n        id: 'separator',\r\n        type: 'blade',\r\n        accept(params) {\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                view: p.required.constant('separator'),\r\n            });\r\n            return result ? { params: result } : null;\r\n        },\r\n        controller(args) {\r\n            return new SeparatorController(args.document, {\r\n                blade: args.blade,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n        api(args) {\r\n            if (!(args.controller instanceof SeparatorController)) {\r\n                return null;\r\n            }\r\n            return new SeparatorApi(args.controller);\r\n        },\r\n    };\r\n\r\n    const className$l = ClassName('tbi');\r\n    class TabItemView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$l());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            bindValueMap(config.props, 'selected', (selected) => {\r\n                if (selected) {\r\n                    this.element.classList.add(className$l(undefined, 'sel'));\r\n                }\r\n                else {\r\n                    this.element.classList.remove(className$l(undefined, 'sel'));\r\n                }\r\n            });\r\n            const buttonElem = doc.createElement('button');\r\n            buttonElem.classList.add(className$l('b'));\r\n            config.viewProps.bindDisabled(buttonElem);\r\n            this.element.appendChild(buttonElem);\r\n            this.buttonElement = buttonElem;\r\n            const titleElem = doc.createElement('div');\r\n            titleElem.classList.add(className$l('t'));\r\n            bindValueToTextContent(config.props.value('title'), titleElem);\r\n            this.buttonElement.appendChild(titleElem);\r\n            this.titleElement = titleElem;\r\n        }\r\n    }\r\n\r\n    class TabItemController {\r\n        constructor(doc, config) {\r\n            this.emitter = new Emitter();\r\n            this.onClick_ = this.onClick_.bind(this);\r\n            this.props = config.props;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new TabItemView(doc, {\r\n                props: config.props,\r\n                viewProps: config.viewProps,\r\n            });\r\n            this.view.buttonElement.addEventListener('click', this.onClick_);\r\n        }\r\n        onClick_() {\r\n            this.emitter.emit('click', {\r\n                sender: this,\r\n            });\r\n        }\r\n    }\r\n\r\n    class TabPageController {\r\n        constructor(doc, config) {\r\n            this.onItemClick_ = this.onItemClick_.bind(this);\r\n            this.ic_ = new TabItemController(doc, {\r\n                props: config.itemProps,\r\n                viewProps: ViewProps.create(),\r\n            });\r\n            this.ic_.emitter.on('click', this.onItemClick_);\r\n            this.cc_ = new RackController(doc, {\r\n                blade: createBlade(),\r\n                viewProps: ViewProps.create(),\r\n            });\r\n            this.props = config.props;\r\n            bindValueMap(this.props, 'selected', (selected) => {\r\n                this.itemController.props.set('selected', selected);\r\n                this.contentController.viewProps.set('hidden', !selected);\r\n            });\r\n        }\r\n        get itemController() {\r\n            return this.ic_;\r\n        }\r\n        get contentController() {\r\n            return this.cc_;\r\n        }\r\n        onItemClick_() {\r\n            this.props.set('selected', true);\r\n        }\r\n    }\r\n\r\n    class TabPageApi {\r\n        constructor(controller, contentRackApi) {\r\n            this.controller_ = controller;\r\n            this.rackApi_ = contentRackApi;\r\n        }\r\n        get title() {\r\n            var _a;\r\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\r\n        }\r\n        set title(title) {\r\n            this.controller_.itemController.props.set('title', title);\r\n        }\r\n        get selected() {\r\n            return this.controller_.props.get('selected');\r\n        }\r\n        set selected(selected) {\r\n            this.controller_.props.set('selected', selected);\r\n        }\r\n        get children() {\r\n            return this.rackApi_.children;\r\n        }\r\n        addButton(params) {\r\n            return this.rackApi_.addButton(params);\r\n        }\r\n        addFolder(params) {\r\n            return this.rackApi_.addFolder(params);\r\n        }\r\n        addSeparator(opt_params) {\r\n            return this.rackApi_.addSeparator(opt_params);\r\n        }\r\n        addTab(params) {\r\n            return this.rackApi_.addTab(params);\r\n        }\r\n        add(api, opt_index) {\r\n            this.rackApi_.add(api, opt_index);\r\n        }\r\n        remove(api) {\r\n            this.rackApi_.remove(api);\r\n        }\r\n        addInput(object, key, opt_params) {\r\n            return this.rackApi_.addInput(object, key, opt_params);\r\n        }\r\n        addMonitor(object, key, opt_params) {\r\n            return this.rackApi_.addMonitor(object, key, opt_params);\r\n        }\r\n        addBlade(params) {\r\n            return this.rackApi_.addBlade(params);\r\n        }\r\n    }\r\n\r\n    class TabApi extends RackLikeApi {\r\n        constructor(controller, pool) {\r\n            super(controller, new RackApi(controller.rackController, pool));\r\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\r\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\r\n            this.onSelect_ = this.onSelect_.bind(this);\r\n            this.emitter_ = new Emitter();\r\n            this.pageApiMap_ = new Map();\r\n            this.rackApi_.on('change', (ev) => {\r\n                this.emitter_.emit('change', {\r\n                    event: ev,\r\n                });\r\n            });\r\n            this.rackApi_.on('update', (ev) => {\r\n                this.emitter_.emit('update', {\r\n                    event: ev,\r\n                });\r\n            });\r\n            this.controller_.tab.selectedIndex.emitter.on('change', this.onSelect_);\r\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\r\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\r\n            this.controller_.pageSet.items.forEach((pc) => {\r\n                this.setUpPageApi_(pc);\r\n            });\r\n        }\r\n        get pages() {\r\n            return this.controller_.pageSet.items.map((pc) => {\r\n                const api = this.pageApiMap_.get(pc);\r\n                if (!api) {\r\n                    throw TpError.shouldNeverHappen();\r\n                }\r\n                return api;\r\n            });\r\n        }\r\n        addPage(params) {\r\n            const doc = this.controller_.view.element.ownerDocument;\r\n            const pc = new TabPageController(doc, {\r\n                itemProps: ValueMap.fromObject({\r\n                    selected: false,\r\n                    title: params.title,\r\n                }),\r\n                props: ValueMap.fromObject({\r\n                    selected: false,\r\n                }),\r\n            });\r\n            this.controller_.add(pc, params.index);\r\n            const api = this.pageApiMap_.get(pc);\r\n            if (!api) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            return api;\r\n        }\r\n        removePage(index) {\r\n            this.controller_.remove(index);\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            this.emitter_.on(eventName, (ev) => {\r\n                bh(ev.event);\r\n            });\r\n            return this;\r\n        }\r\n        setUpPageApi_(pc) {\r\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\r\n            if (!rackApi) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            const api = new TabPageApi(pc, rackApi);\r\n            this.pageApiMap_.set(pc, api);\r\n        }\r\n        onPageAdd_(ev) {\r\n            this.setUpPageApi_(ev.item);\r\n        }\r\n        onPageRemove_(ev) {\r\n            const api = this.pageApiMap_.get(ev.item);\r\n            if (!api) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            this.pageApiMap_.delete(ev.item);\r\n        }\r\n        onSelect_(ev) {\r\n            this.emitter_.emit('select', {\r\n                event: new TpTabSelectEvent(this, ev.rawValue),\r\n            });\r\n        }\r\n    }\r\n\r\n    const INDEX_NOT_SELECTED = -1;\r\n    class Tab {\r\n        constructor() {\r\n            this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\r\n            this.empty = createValue(true);\r\n            this.selectedIndex = createValue(INDEX_NOT_SELECTED);\r\n            this.items_ = [];\r\n        }\r\n        add(item, opt_index) {\r\n            const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\r\n            this.items_.splice(index, 0, item);\r\n            item.emitter.on('change', this.onItemSelectedChange_);\r\n            this.keepSelection_();\r\n        }\r\n        remove(item) {\r\n            const index = this.items_.indexOf(item);\r\n            if (index < 0) {\r\n                return;\r\n            }\r\n            this.items_.splice(index, 1);\r\n            item.emitter.off('change', this.onItemSelectedChange_);\r\n            this.keepSelection_();\r\n        }\r\n        keepSelection_() {\r\n            if (this.items_.length === 0) {\r\n                this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\r\n                this.empty.rawValue = true;\r\n                return;\r\n            }\r\n            const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\r\n            if (firstSelIndex < 0) {\r\n                this.items_.forEach((s, i) => {\r\n                    s.rawValue = i === 0;\r\n                });\r\n                this.selectedIndex.rawValue = 0;\r\n            }\r\n            else {\r\n                this.items_.forEach((s, i) => {\r\n                    s.rawValue = i === firstSelIndex;\r\n                });\r\n                this.selectedIndex.rawValue = firstSelIndex;\r\n            }\r\n            this.empty.rawValue = false;\r\n        }\r\n        onItemSelectedChange_(ev) {\r\n            if (ev.rawValue) {\r\n                const index = this.items_.findIndex((s) => s === ev.sender);\r\n                this.items_.forEach((s, i) => {\r\n                    s.rawValue = i === index;\r\n                });\r\n                this.selectedIndex.rawValue = index;\r\n            }\r\n            else {\r\n                this.keepSelection_();\r\n            }\r\n        }\r\n    }\r\n\r\n    const className$k = ClassName('tab');\r\n    class TabView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$k(), bladeContainerClassName());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\r\n            const titleElem = doc.createElement('div');\r\n            titleElem.classList.add(className$k('t'));\r\n            this.element.appendChild(titleElem);\r\n            this.itemsElement = titleElem;\r\n            const indentElem = doc.createElement('div');\r\n            indentElem.classList.add(className$k('i'));\r\n            this.element.appendChild(indentElem);\r\n            const contentsElem = config.contentsElement;\r\n            contentsElem.classList.add(className$k('c'));\r\n            this.element.appendChild(contentsElem);\r\n            this.contentsElement = contentsElem;\r\n        }\r\n    }\r\n\r\n    class TabController extends RackLikeController {\r\n        constructor(doc, config) {\r\n            const cr = new RackController(doc, {\r\n                blade: config.blade,\r\n                viewProps: config.viewProps,\r\n            });\r\n            const tab = new Tab();\r\n            super({\r\n                blade: config.blade,\r\n                rackController: cr,\r\n                view: new TabView(doc, {\r\n                    contentsElement: cr.view.element,\r\n                    empty: tab.empty,\r\n                    viewProps: config.viewProps,\r\n                }),\r\n            });\r\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\r\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\r\n            this.pageSet_ = new NestedOrderedSet(() => null);\r\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\r\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\r\n            this.tab = tab;\r\n        }\r\n        get pageSet() {\r\n            return this.pageSet_;\r\n        }\r\n        add(pc, opt_index) {\r\n            this.pageSet_.add(pc, opt_index);\r\n        }\r\n        remove(index) {\r\n            this.pageSet_.remove(this.pageSet_.items[index]);\r\n        }\r\n        onPageAdd_(ev) {\r\n            const pc = ev.item;\r\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\r\n            pc.itemController.viewProps.set('parent', this.viewProps);\r\n            this.rackController.rack.add(pc.contentController, ev.index);\r\n            this.tab.add(pc.props.value('selected'));\r\n        }\r\n        onPageRemove_(ev) {\r\n            const pc = ev.item;\r\n            removeElement(pc.itemController.view.element);\r\n            pc.itemController.viewProps.set('parent', null);\r\n            this.rackController.rack.remove(pc.contentController);\r\n            this.tab.remove(pc.props.value('selected'));\r\n        }\r\n    }\r\n\r\n    const TabBladePlugin = {\r\n        id: 'tab',\r\n        type: 'blade',\r\n        accept(params) {\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                pages: p.required.array(p.required.object({ title: p.required.string })),\r\n                view: p.required.constant('tab'),\r\n            });\r\n            if (!result || result.pages.length === 0) {\r\n                return null;\r\n            }\r\n            return { params: result };\r\n        },\r\n        controller(args) {\r\n            const c = new TabController(args.document, {\r\n                blade: args.blade,\r\n                viewProps: args.viewProps,\r\n            });\r\n            args.params.pages.forEach((p) => {\r\n                const pc = new TabPageController(args.document, {\r\n                    itemProps: ValueMap.fromObject({\r\n                        selected: false,\r\n                        title: p.title,\r\n                    }),\r\n                    props: ValueMap.fromObject({\r\n                        selected: false,\r\n                    }),\r\n                });\r\n                c.add(pc);\r\n            });\r\n            return c;\r\n        },\r\n        api(args) {\r\n            if (!(args.controller instanceof TabController)) {\r\n                return null;\r\n            }\r\n            return new TabApi(args.controller, args.pool);\r\n        },\r\n    };\r\n\r\n    function createBladeController(plugin, args) {\r\n        const ac = plugin.accept(args.params);\r\n        if (!ac) {\r\n            return null;\r\n        }\r\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\r\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\r\n        return plugin.controller({\r\n            blade: createBlade(),\r\n            document: args.document,\r\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\r\n            viewProps: ViewProps.create({\r\n                disabled: disabled,\r\n                hidden: hidden,\r\n            }),\r\n        });\r\n    }\r\n\r\n    class ManualTicker {\r\n        constructor() {\r\n            this.disabled = false;\r\n            this.emitter = new Emitter();\r\n        }\r\n        dispose() { }\r\n        tick() {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            this.emitter.emit('tick', {\r\n                sender: this,\r\n            });\r\n        }\r\n    }\r\n\r\n    class IntervalTicker {\r\n        constructor(doc, interval) {\r\n            this.disabled_ = false;\r\n            this.timerId_ = null;\r\n            this.onTick_ = this.onTick_.bind(this);\r\n            this.doc_ = doc;\r\n            this.emitter = new Emitter();\r\n            this.interval_ = interval;\r\n            this.setTimer_();\r\n        }\r\n        get disabled() {\r\n            return this.disabled_;\r\n        }\r\n        set disabled(inactive) {\r\n            this.disabled_ = inactive;\r\n            if (this.disabled_) {\r\n                this.clearTimer_();\r\n            }\r\n            else {\r\n                this.setTimer_();\r\n            }\r\n        }\r\n        dispose() {\r\n            this.clearTimer_();\r\n        }\r\n        clearTimer_() {\r\n            if (this.timerId_ === null) {\r\n                return;\r\n            }\r\n            const win = this.doc_.defaultView;\r\n            if (win) {\r\n                win.clearInterval(this.timerId_);\r\n            }\r\n            this.timerId_ = null;\r\n        }\r\n        setTimer_() {\r\n            this.clearTimer_();\r\n            if (this.interval_ <= 0) {\r\n                return;\r\n            }\r\n            const win = this.doc_.defaultView;\r\n            if (win) {\r\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\r\n            }\r\n        }\r\n        onTick_() {\r\n            if (this.disabled_) {\r\n                return;\r\n            }\r\n            this.emitter.emit('tick', {\r\n                sender: this,\r\n            });\r\n        }\r\n    }\r\n\r\n    class InputBinding {\r\n        constructor(config) {\r\n            this.onValueChange_ = this.onValueChange_.bind(this);\r\n            this.reader = config.reader;\r\n            this.writer = config.writer;\r\n            this.emitter = new Emitter();\r\n            this.value = config.value;\r\n            this.value.emitter.on('change', this.onValueChange_);\r\n            this.target = config.target;\r\n            this.read();\r\n        }\r\n        read() {\r\n            const targetValue = this.target.read();\r\n            if (targetValue !== undefined) {\r\n                this.value.rawValue = this.reader(targetValue);\r\n            }\r\n        }\r\n        write_(rawValue) {\r\n            this.writer(this.target, rawValue);\r\n        }\r\n        onValueChange_(ev) {\r\n            this.write_(ev.rawValue);\r\n            this.emitter.emit('change', {\r\n                options: ev.options,\r\n                rawValue: ev.rawValue,\r\n                sender: this,\r\n            });\r\n        }\r\n    }\r\n\r\n    function fillBuffer(buffer, bufferSize) {\r\n        while (buffer.length < bufferSize) {\r\n            buffer.push(undefined);\r\n        }\r\n    }\r\n    function initializeBuffer(bufferSize) {\r\n        const buffer = [];\r\n        fillBuffer(buffer, bufferSize);\r\n        return createValue(buffer);\r\n    }\r\n    function createTrimmedBuffer(buffer) {\r\n        const index = buffer.indexOf(undefined);\r\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\r\n    }\r\n    function createPushedBuffer(buffer, newValue) {\r\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\r\n        if (newBuffer.length > buffer.length) {\r\n            newBuffer.splice(0, newBuffer.length - buffer.length);\r\n        }\r\n        else {\r\n            fillBuffer(newBuffer, buffer.length);\r\n        }\r\n        return newBuffer;\r\n    }\r\n\r\n    class MonitorBinding {\r\n        constructor(config) {\r\n            this.onTick_ = this.onTick_.bind(this);\r\n            this.reader_ = config.reader;\r\n            this.target = config.target;\r\n            this.emitter = new Emitter();\r\n            this.value = config.value;\r\n            this.ticker = config.ticker;\r\n            this.ticker.emitter.on('tick', this.onTick_);\r\n            this.read();\r\n        }\r\n        dispose() {\r\n            this.ticker.dispose();\r\n        }\r\n        read() {\r\n            const targetValue = this.target.read();\r\n            if (targetValue === undefined) {\r\n                return;\r\n            }\r\n            const buffer = this.value.rawValue;\r\n            const newValue = this.reader_(targetValue);\r\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\r\n            this.emitter.emit('update', {\r\n                rawValue: newValue,\r\n                sender: this,\r\n            });\r\n        }\r\n        onTick_(_) {\r\n            this.read();\r\n        }\r\n    }\r\n\r\n    class CompositeConstraint {\r\n        constructor(constraints) {\r\n            this.constraints = constraints;\r\n        }\r\n        constrain(value) {\r\n            return this.constraints.reduce((result, c) => {\r\n                return c.constrain(result);\r\n            }, value);\r\n        }\r\n    }\r\n    function findConstraint(c, constraintClass) {\r\n        if (c instanceof constraintClass) {\r\n            return c;\r\n        }\r\n        if (c instanceof CompositeConstraint) {\r\n            const result = c.constraints.reduce((tmpResult, sc) => {\r\n                if (tmpResult) {\r\n                    return tmpResult;\r\n                }\r\n                return sc instanceof constraintClass ? sc : null;\r\n            }, null);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    class DefiniteRangeConstraint {\r\n        constructor(config) {\r\n            this.values = ValueMap.fromObject({\r\n                max: config.max,\r\n                min: config.min,\r\n            });\r\n        }\r\n        constrain(value) {\r\n            const max = this.values.get('max');\r\n            const min = this.values.get('min');\r\n            return Math.min(Math.max(value, min), max);\r\n        }\r\n    }\r\n\r\n    class ListConstraint {\r\n        constructor(options) {\r\n            this.values = ValueMap.fromObject({\r\n                options: options,\r\n            });\r\n        }\r\n        get options() {\r\n            return this.values.get('options');\r\n        }\r\n        constrain(value) {\r\n            const opts = this.values.get('options');\r\n            if (opts.length === 0) {\r\n                return value;\r\n            }\r\n            const matched = opts.filter((item) => {\r\n                return item.value === value;\r\n            }).length > 0;\r\n            return matched ? value : opts[0].value;\r\n        }\r\n    }\r\n\r\n    class RangeConstraint {\r\n        constructor(config) {\r\n            this.values = ValueMap.fromObject({\r\n                max: config.max,\r\n                min: config.min,\r\n            });\r\n        }\r\n        get maxValue() {\r\n            return this.values.get('max');\r\n        }\r\n        get minValue() {\r\n            return this.values.get('min');\r\n        }\r\n        constrain(value) {\r\n            const max = this.values.get('max');\r\n            const min = this.values.get('min');\r\n            let result = value;\r\n            if (!isEmpty(min)) {\r\n                result = Math.max(result, min);\r\n            }\r\n            if (!isEmpty(max)) {\r\n                result = Math.min(result, max);\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n    class StepConstraint {\r\n        constructor(step, origin = 0) {\r\n            this.step = step;\r\n            this.origin = origin;\r\n        }\r\n        constrain(value) {\r\n            const o = this.origin % this.step;\r\n            const r = Math.round((value - o) / this.step);\r\n            return o + r * this.step;\r\n        }\r\n    }\r\n\r\n    const className$j = ClassName('lst');\r\n    class ListView {\r\n        constructor(doc, config) {\r\n            this.onValueChange_ = this.onValueChange_.bind(this);\r\n            this.props_ = config.props;\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$j());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const selectElem = doc.createElement('select');\r\n            selectElem.classList.add(className$j('s'));\r\n            config.viewProps.bindDisabled(selectElem);\r\n            this.element.appendChild(selectElem);\r\n            this.selectElement = selectElem;\r\n            const markElem = doc.createElement('div');\r\n            markElem.classList.add(className$j('m'));\r\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\r\n            this.element.appendChild(markElem);\r\n            config.value.emitter.on('change', this.onValueChange_);\r\n            this.value_ = config.value;\r\n            bindValueMap(this.props_, 'options', (opts) => {\r\n                removeChildElements(this.selectElement);\r\n                opts.forEach((item) => {\r\n                    const optionElem = doc.createElement('option');\r\n                    optionElem.textContent = item.text;\r\n                    this.selectElement.appendChild(optionElem);\r\n                });\r\n                this.update_();\r\n            });\r\n        }\r\n        update_() {\r\n            const values = this.props_.get('options').map((o) => o.value);\r\n            this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\r\n        }\r\n        onValueChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class ListController {\r\n        constructor(doc, config) {\r\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\r\n            this.props = config.props;\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new ListView(doc, {\r\n                props: this.props,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\r\n        }\r\n        onSelectChange_(e) {\r\n            const selectElem = forceCast(e.currentTarget);\r\n            this.value.rawValue =\r\n                this.props.get('options')[selectElem.selectedIndex].value;\r\n        }\r\n    }\r\n\r\n    const className$i = ClassName('pop');\r\n    class PopupView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$i());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\r\n        }\r\n    }\r\n\r\n    class PopupController {\r\n        constructor(doc, config) {\r\n            this.shows = createValue(false);\r\n            this.viewProps = config.viewProps;\r\n            this.view = new PopupView(doc, {\r\n                shows: this.shows,\r\n                viewProps: this.viewProps,\r\n            });\r\n        }\r\n    }\r\n\r\n    const className$h = ClassName('txt');\r\n    class TextView {\r\n        constructor(doc, config) {\r\n            this.onChange_ = this.onChange_.bind(this);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$h());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            this.props_ = config.props;\r\n            this.props_.emitter.on('change', this.onChange_);\r\n            const inputElem = doc.createElement('input');\r\n            inputElem.classList.add(className$h('i'));\r\n            inputElem.type = 'text';\r\n            config.viewProps.bindDisabled(inputElem);\r\n            this.element.appendChild(inputElem);\r\n            this.inputElement = inputElem;\r\n            config.value.emitter.on('change', this.onChange_);\r\n            this.value_ = config.value;\r\n            this.refresh();\r\n        }\r\n        refresh() {\r\n            const formatter = this.props_.get('formatter');\r\n            this.inputElement.value = formatter(this.value_.rawValue);\r\n        }\r\n        onChange_() {\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    class TextController {\r\n        constructor(doc, config) {\r\n            this.onInputChange_ = this.onInputChange_.bind(this);\r\n            this.parser_ = config.parser;\r\n            this.props = config.props;\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new TextView(doc, {\r\n                props: config.props,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\r\n        }\r\n        onInputChange_(e) {\r\n            const inputElem = forceCast(e.currentTarget);\r\n            const value = inputElem.value;\r\n            const parsedValue = this.parser_(value);\r\n            if (!isEmpty(parsedValue)) {\r\n                this.value.rawValue = parsedValue;\r\n            }\r\n            this.view.refresh();\r\n        }\r\n    }\r\n\r\n    function boolToString(value) {\r\n        return String(value);\r\n    }\r\n    function boolFromUnknown(value) {\r\n        if (value === 'false') {\r\n            return false;\r\n        }\r\n        return !!value;\r\n    }\r\n    function BooleanFormatter(value) {\r\n        return boolToString(value);\r\n    }\r\n\r\n    class NumberLiteralNode {\r\n        constructor(text) {\r\n            this.text = text;\r\n        }\r\n        evaluate() {\r\n            return Number(this.text);\r\n        }\r\n        toString() {\r\n            return this.text;\r\n        }\r\n    }\r\n    const BINARY_OPERATION_MAP = {\r\n        '**': (v1, v2) => Math.pow(v1, v2),\r\n        '*': (v1, v2) => v1 * v2,\r\n        '/': (v1, v2) => v1 / v2,\r\n        '%': (v1, v2) => v1 % v2,\r\n        '+': (v1, v2) => v1 + v2,\r\n        '-': (v1, v2) => v1 - v2,\r\n        '<<': (v1, v2) => v1 << v2,\r\n        '>>': (v1, v2) => v1 >> v2,\r\n        '>>>': (v1, v2) => v1 >>> v2,\r\n        '&': (v1, v2) => v1 & v2,\r\n        '^': (v1, v2) => v1 ^ v2,\r\n        '|': (v1, v2) => v1 | v2,\r\n    };\r\n    class BinaryOperationNode {\r\n        constructor(operator, left, right) {\r\n            this.left = left;\r\n            this.operator = operator;\r\n            this.right = right;\r\n        }\r\n        evaluate() {\r\n            const op = BINARY_OPERATION_MAP[this.operator];\r\n            if (!op) {\r\n                throw new Error(`unexpected binary operator: '${this.operator}`);\r\n            }\r\n            return op(this.left.evaluate(), this.right.evaluate());\r\n        }\r\n        toString() {\r\n            return [\r\n                'b(',\r\n                this.left.toString(),\r\n                this.operator,\r\n                this.right.toString(),\r\n                ')',\r\n            ].join(' ');\r\n        }\r\n    }\r\n    const UNARY_OPERATION_MAP = {\r\n        '+': (v) => v,\r\n        '-': (v) => -v,\r\n        '~': (v) => ~v,\r\n    };\r\n    class UnaryOperationNode {\r\n        constructor(operator, expr) {\r\n            this.operator = operator;\r\n            this.expression = expr;\r\n        }\r\n        evaluate() {\r\n            const op = UNARY_OPERATION_MAP[this.operator];\r\n            if (!op) {\r\n                throw new Error(`unexpected unary operator: '${this.operator}`);\r\n            }\r\n            return op(this.expression.evaluate());\r\n        }\r\n        toString() {\r\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\r\n        }\r\n    }\r\n\r\n    function combineReader(parsers) {\r\n        return (text, cursor) => {\r\n            for (let i = 0; i < parsers.length; i++) {\r\n                const result = parsers[i](text, cursor);\r\n                if (result !== '') {\r\n                    return result;\r\n                }\r\n            }\r\n            return '';\r\n        };\r\n    }\r\n    function readWhitespace(text, cursor) {\r\n        var _a;\r\n        const m = text.substr(cursor).match(/^\\s+/);\r\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\r\n    }\r\n    function readNonZeroDigit(text, cursor) {\r\n        const ch = text.substr(cursor, 1);\r\n        return ch.match(/^[1-9]$/) ? ch : '';\r\n    }\r\n    function readDecimalDigits(text, cursor) {\r\n        var _a;\r\n        const m = text.substr(cursor).match(/^[0-9]+/);\r\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\r\n    }\r\n    function readSignedInteger(text, cursor) {\r\n        const ds = readDecimalDigits(text, cursor);\r\n        if (ds !== '') {\r\n            return ds;\r\n        }\r\n        const sign = text.substr(cursor, 1);\r\n        cursor += 1;\r\n        if (sign !== '-' && sign !== '+') {\r\n            return '';\r\n        }\r\n        const sds = readDecimalDigits(text, cursor);\r\n        if (sds === '') {\r\n            return '';\r\n        }\r\n        return sign + sds;\r\n    }\r\n    function readExponentPart(text, cursor) {\r\n        const e = text.substr(cursor, 1);\r\n        cursor += 1;\r\n        if (e.toLowerCase() !== 'e') {\r\n            return '';\r\n        }\r\n        const si = readSignedInteger(text, cursor);\r\n        if (si === '') {\r\n            return '';\r\n        }\r\n        return e + si;\r\n    }\r\n    function readDecimalIntegerLiteral(text, cursor) {\r\n        const ch = text.substr(cursor, 1);\r\n        if (ch === '0') {\r\n            return ch;\r\n        }\r\n        const nzd = readNonZeroDigit(text, cursor);\r\n        cursor += nzd.length;\r\n        if (nzd === '') {\r\n            return '';\r\n        }\r\n        return nzd + readDecimalDigits(text, cursor);\r\n    }\r\n    function readDecimalLiteral1(text, cursor) {\r\n        const dil = readDecimalIntegerLiteral(text, cursor);\r\n        cursor += dil.length;\r\n        if (dil === '') {\r\n            return '';\r\n        }\r\n        const dot = text.substr(cursor, 1);\r\n        cursor += dot.length;\r\n        if (dot !== '.') {\r\n            return '';\r\n        }\r\n        const dds = readDecimalDigits(text, cursor);\r\n        cursor += dds.length;\r\n        return dil + dot + dds + readExponentPart(text, cursor);\r\n    }\r\n    function readDecimalLiteral2(text, cursor) {\r\n        const dot = text.substr(cursor, 1);\r\n        cursor += dot.length;\r\n        if (dot !== '.') {\r\n            return '';\r\n        }\r\n        const dds = readDecimalDigits(text, cursor);\r\n        cursor += dds.length;\r\n        if (dds === '') {\r\n            return '';\r\n        }\r\n        return dot + dds + readExponentPart(text, cursor);\r\n    }\r\n    function readDecimalLiteral3(text, cursor) {\r\n        const dil = readDecimalIntegerLiteral(text, cursor);\r\n        cursor += dil.length;\r\n        if (dil === '') {\r\n            return '';\r\n        }\r\n        return dil + readExponentPart(text, cursor);\r\n    }\r\n    const readDecimalLiteral = combineReader([\r\n        readDecimalLiteral1,\r\n        readDecimalLiteral2,\r\n        readDecimalLiteral3,\r\n    ]);\r\n    function parseBinaryDigits(text, cursor) {\r\n        var _a;\r\n        const m = text.substr(cursor).match(/^[01]+/);\r\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\r\n    }\r\n    function readBinaryIntegerLiteral(text, cursor) {\r\n        const prefix = text.substr(cursor, 2);\r\n        cursor += prefix.length;\r\n        if (prefix.toLowerCase() !== '0b') {\r\n            return '';\r\n        }\r\n        const bds = parseBinaryDigits(text, cursor);\r\n        if (bds === '') {\r\n            return '';\r\n        }\r\n        return prefix + bds;\r\n    }\r\n    function readOctalDigits(text, cursor) {\r\n        var _a;\r\n        const m = text.substr(cursor).match(/^[0-7]+/);\r\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\r\n    }\r\n    function readOctalIntegerLiteral(text, cursor) {\r\n        const prefix = text.substr(cursor, 2);\r\n        cursor += prefix.length;\r\n        if (prefix.toLowerCase() !== '0o') {\r\n            return '';\r\n        }\r\n        const ods = readOctalDigits(text, cursor);\r\n        if (ods === '') {\r\n            return '';\r\n        }\r\n        return prefix + ods;\r\n    }\r\n    function readHexDigits(text, cursor) {\r\n        var _a;\r\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\r\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\r\n    }\r\n    function readHexIntegerLiteral(text, cursor) {\r\n        const prefix = text.substr(cursor, 2);\r\n        cursor += prefix.length;\r\n        if (prefix.toLowerCase() !== '0x') {\r\n            return '';\r\n        }\r\n        const hds = readHexDigits(text, cursor);\r\n        if (hds === '') {\r\n            return '';\r\n        }\r\n        return prefix + hds;\r\n    }\r\n    const readNonDecimalIntegerLiteral = combineReader([\r\n        readBinaryIntegerLiteral,\r\n        readOctalIntegerLiteral,\r\n        readHexIntegerLiteral,\r\n    ]);\r\n    const readNumericLiteral = combineReader([\r\n        readNonDecimalIntegerLiteral,\r\n        readDecimalLiteral,\r\n    ]);\r\n\r\n    function parseLiteral(text, cursor) {\r\n        const num = readNumericLiteral(text, cursor);\r\n        cursor += num.length;\r\n        if (num === '') {\r\n            return null;\r\n        }\r\n        return {\r\n            evaluable: new NumberLiteralNode(num),\r\n            cursor: cursor,\r\n        };\r\n    }\r\n    function parseParenthesizedExpression(text, cursor) {\r\n        const op = text.substr(cursor, 1);\r\n        cursor += op.length;\r\n        if (op !== '(') {\r\n            return null;\r\n        }\r\n        const expr = parseExpression(text, cursor);\r\n        if (!expr) {\r\n            return null;\r\n        }\r\n        cursor = expr.cursor;\r\n        cursor += readWhitespace(text, cursor).length;\r\n        const cl = text.substr(cursor, 1);\r\n        cursor += cl.length;\r\n        if (cl !== ')') {\r\n            return null;\r\n        }\r\n        return {\r\n            evaluable: expr.evaluable,\r\n            cursor: cursor,\r\n        };\r\n    }\r\n    function parsePrimaryExpression(text, cursor) {\r\n        var _a;\r\n        return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\r\n    }\r\n    function parseUnaryExpression(text, cursor) {\r\n        const expr = parsePrimaryExpression(text, cursor);\r\n        if (expr) {\r\n            return expr;\r\n        }\r\n        const op = text.substr(cursor, 1);\r\n        cursor += op.length;\r\n        if (op !== '+' && op !== '-' && op !== '~') {\r\n            return null;\r\n        }\r\n        const num = parseUnaryExpression(text, cursor);\r\n        if (!num) {\r\n            return null;\r\n        }\r\n        cursor = num.cursor;\r\n        return {\r\n            cursor: cursor,\r\n            evaluable: new UnaryOperationNode(op, num.evaluable),\r\n        };\r\n    }\r\n    function readBinaryOperator(ops, text, cursor) {\r\n        cursor += readWhitespace(text, cursor).length;\r\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\r\n        if (!op) {\r\n            return null;\r\n        }\r\n        cursor += op.length;\r\n        cursor += readWhitespace(text, cursor).length;\r\n        return {\r\n            cursor: cursor,\r\n            operator: op,\r\n        };\r\n    }\r\n    function createBinaryOperationExpressionParser(exprParser, ops) {\r\n        return (text, cursor) => {\r\n            const firstExpr = exprParser(text, cursor);\r\n            if (!firstExpr) {\r\n                return null;\r\n            }\r\n            cursor = firstExpr.cursor;\r\n            let expr = firstExpr.evaluable;\r\n            for (;;) {\r\n                const op = readBinaryOperator(ops, text, cursor);\r\n                if (!op) {\r\n                    break;\r\n                }\r\n                cursor = op.cursor;\r\n                const nextExpr = exprParser(text, cursor);\r\n                if (!nextExpr) {\r\n                    return null;\r\n                }\r\n                cursor = nextExpr.cursor;\r\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\r\n            }\r\n            return expr\r\n                ? {\r\n                    cursor: cursor,\r\n                    evaluable: expr,\r\n                }\r\n                : null;\r\n        };\r\n    }\r\n    const parseBinaryOperationExpression = [\r\n        ['**'],\r\n        ['*', '/', '%'],\r\n        ['+', '-'],\r\n        ['<<', '>>>', '>>'],\r\n        ['&'],\r\n        ['^'],\r\n        ['|'],\r\n    ].reduce((parser, ops) => {\r\n        return createBinaryOperationExpressionParser(parser, ops);\r\n    }, parseUnaryExpression);\r\n    function parseExpression(text, cursor) {\r\n        cursor += readWhitespace(text, cursor).length;\r\n        return parseBinaryOperationExpression(text, cursor);\r\n    }\r\n    function parseEcmaNumberExpression(text) {\r\n        const expr = parseExpression(text, 0);\r\n        if (!expr) {\r\n            return null;\r\n        }\r\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\r\n        if (cursor !== text.length) {\r\n            return null;\r\n        }\r\n        return expr.evaluable;\r\n    }\r\n\r\n    function parseNumber(text) {\r\n        var _a;\r\n        const r = parseEcmaNumberExpression(text);\r\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    function numberFromUnknown(value) {\r\n        if (typeof value === 'number') {\r\n            return value;\r\n        }\r\n        if (typeof value === 'string') {\r\n            const pv = parseNumber(value);\r\n            if (!isEmpty(pv)) {\r\n                return pv;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    function numberToString(value) {\r\n        return String(value);\r\n    }\r\n    function createNumberFormatter(digits) {\r\n        return (value) => {\r\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\r\n        };\r\n    }\r\n\r\n    const innerFormatter = createNumberFormatter(0);\r\n    function formatPercentage(value) {\r\n        return innerFormatter(value) + '%';\r\n    }\r\n\r\n    function stringFromUnknown(value) {\r\n        return String(value);\r\n    }\r\n    function formatString(value) {\r\n        return value;\r\n    }\r\n\r\n    function connectValues({ primary, secondary, forward, backward, }) {\r\n        let changing = false;\r\n        function preventFeedback(callback) {\r\n            if (changing) {\r\n                return;\r\n            }\r\n            changing = true;\r\n            callback();\r\n            changing = false;\r\n        }\r\n        primary.emitter.on('change', (ev) => {\r\n            preventFeedback(() => {\r\n                secondary.setRawValue(forward(primary, secondary), ev.options);\r\n            });\r\n        });\r\n        secondary.emitter.on('change', (ev) => {\r\n            preventFeedback(() => {\r\n                primary.setRawValue(backward(primary, secondary), ev.options);\r\n            });\r\n            preventFeedback(() => {\r\n                secondary.setRawValue(forward(primary, secondary), ev.options);\r\n            });\r\n        });\r\n        preventFeedback(() => {\r\n            secondary.setRawValue(forward(primary, secondary), {\r\n                forceEmit: false,\r\n                last: true,\r\n            });\r\n        });\r\n    }\r\n\r\n    function getStepForKey(baseStep, keys) {\r\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\r\n        if (keys.upKey) {\r\n            return +step;\r\n        }\r\n        else if (keys.downKey) {\r\n            return -step;\r\n        }\r\n        return 0;\r\n    }\r\n    function getVerticalStepKeys(ev) {\r\n        return {\r\n            altKey: ev.altKey,\r\n            downKey: ev.key === 'ArrowDown',\r\n            shiftKey: ev.shiftKey,\r\n            upKey: ev.key === 'ArrowUp',\r\n        };\r\n    }\r\n    function getHorizontalStepKeys(ev) {\r\n        return {\r\n            altKey: ev.altKey,\r\n            downKey: ev.key === 'ArrowLeft',\r\n            shiftKey: ev.shiftKey,\r\n            upKey: ev.key === 'ArrowRight',\r\n        };\r\n    }\r\n    function isVerticalArrowKey(key) {\r\n        return key === 'ArrowUp' || key === 'ArrowDown';\r\n    }\r\n    function isArrowKey(key) {\r\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\r\n    }\r\n\r\n    function computeOffset$1(ev, elem) {\r\n        var _a, _b;\r\n        const win = elem.ownerDocument.defaultView;\r\n        const rect = elem.getBoundingClientRect();\r\n        return {\r\n            x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\r\n            y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\r\n        };\r\n    }\r\n    class PointerHandler {\r\n        constructor(element) {\r\n            this.lastTouch_ = null;\r\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\r\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\r\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\r\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\r\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\r\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\r\n            this.elem_ = element;\r\n            this.emitter = new Emitter();\r\n            element.addEventListener('touchstart', this.onTouchStart_, {\r\n                passive: false,\r\n            });\r\n            element.addEventListener('touchmove', this.onTouchMove_, {\r\n                passive: true,\r\n            });\r\n            element.addEventListener('touchend', this.onTouchEnd_);\r\n            element.addEventListener('mousedown', this.onMouseDown_);\r\n        }\r\n        computePosition_(offset) {\r\n            const rect = this.elem_.getBoundingClientRect();\r\n            return {\r\n                bounds: {\r\n                    width: rect.width,\r\n                    height: rect.height,\r\n                },\r\n                point: offset\r\n                    ? {\r\n                        x: offset.x,\r\n                        y: offset.y,\r\n                    }\r\n                    : null,\r\n            };\r\n        }\r\n        onMouseDown_(ev) {\r\n            var _a;\r\n            ev.preventDefault();\r\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\r\n            const doc = this.elem_.ownerDocument;\r\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\r\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\r\n            this.emitter.emit('down', {\r\n                altKey: ev.altKey,\r\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\r\n                sender: this,\r\n                shiftKey: ev.shiftKey,\r\n            });\r\n        }\r\n        onDocumentMouseMove_(ev) {\r\n            this.emitter.emit('move', {\r\n                altKey: ev.altKey,\r\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\r\n                sender: this,\r\n                shiftKey: ev.shiftKey,\r\n            });\r\n        }\r\n        onDocumentMouseUp_(ev) {\r\n            const doc = this.elem_.ownerDocument;\r\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\r\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\r\n            this.emitter.emit('up', {\r\n                altKey: ev.altKey,\r\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\r\n                sender: this,\r\n                shiftKey: ev.shiftKey,\r\n            });\r\n        }\r\n        onTouchStart_(ev) {\r\n            ev.preventDefault();\r\n            const touch = ev.targetTouches.item(0);\r\n            const rect = this.elem_.getBoundingClientRect();\r\n            this.emitter.emit('down', {\r\n                altKey: ev.altKey,\r\n                data: this.computePosition_(touch\r\n                    ? {\r\n                        x: touch.clientX - rect.left,\r\n                        y: touch.clientY - rect.top,\r\n                    }\r\n                    : undefined),\r\n                sender: this,\r\n                shiftKey: ev.shiftKey,\r\n            });\r\n            this.lastTouch_ = touch;\r\n        }\r\n        onTouchMove_(ev) {\r\n            const touch = ev.targetTouches.item(0);\r\n            const rect = this.elem_.getBoundingClientRect();\r\n            this.emitter.emit('move', {\r\n                altKey: ev.altKey,\r\n                data: this.computePosition_(touch\r\n                    ? {\r\n                        x: touch.clientX - rect.left,\r\n                        y: touch.clientY - rect.top,\r\n                    }\r\n                    : undefined),\r\n                sender: this,\r\n                shiftKey: ev.shiftKey,\r\n            });\r\n            this.lastTouch_ = touch;\r\n        }\r\n        onTouchEnd_(ev) {\r\n            var _a;\r\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\r\n            const rect = this.elem_.getBoundingClientRect();\r\n            this.emitter.emit('up', {\r\n                altKey: ev.altKey,\r\n                data: this.computePosition_(touch\r\n                    ? {\r\n                        x: touch.clientX - rect.left,\r\n                        y: touch.clientY - rect.top,\r\n                    }\r\n                    : undefined),\r\n                sender: this,\r\n                shiftKey: ev.shiftKey,\r\n            });\r\n        }\r\n    }\r\n\r\n    function mapRange(value, start1, end1, start2, end2) {\r\n        const p = (value - start1) / (end1 - start1);\r\n        return start2 + p * (end2 - start2);\r\n    }\r\n    function getDecimalDigits(value) {\r\n        const text = String(value.toFixed(10));\r\n        const frac = text.split('.')[1];\r\n        return frac.replace(/0+$/, '').length;\r\n    }\r\n    function constrainRange(value, min, max) {\r\n        return Math.min(Math.max(value, min), max);\r\n    }\r\n    function loopRange(value, max) {\r\n        return ((value % max) + max) % max;\r\n    }\r\n\r\n    const className$g = ClassName('txt');\r\n    class NumberTextView {\r\n        constructor(doc, config) {\r\n            this.onChange_ = this.onChange_.bind(this);\r\n            this.props_ = config.props;\r\n            this.props_.emitter.on('change', this.onChange_);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\r\n            if (config.arrayPosition) {\r\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\r\n            }\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const inputElem = doc.createElement('input');\r\n            inputElem.classList.add(className$g('i'));\r\n            inputElem.type = 'text';\r\n            config.viewProps.bindDisabled(inputElem);\r\n            this.element.appendChild(inputElem);\r\n            this.inputElement = inputElem;\r\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\r\n            this.dragging_ = config.dragging;\r\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\r\n            this.element.classList.add(className$g());\r\n            this.inputElement.classList.add(className$g('i'));\r\n            const knobElem = doc.createElement('div');\r\n            knobElem.classList.add(className$g('k'));\r\n            this.element.appendChild(knobElem);\r\n            this.knobElement = knobElem;\r\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\r\n            guideElem.classList.add(className$g('g'));\r\n            this.knobElement.appendChild(guideElem);\r\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\r\n            bodyElem.classList.add(className$g('gb'));\r\n            guideElem.appendChild(bodyElem);\r\n            this.guideBodyElem_ = bodyElem;\r\n            const headElem = doc.createElementNS(SVG_NS, 'path');\r\n            headElem.classList.add(className$g('gh'));\r\n            guideElem.appendChild(headElem);\r\n            this.guideHeadElem_ = headElem;\r\n            const tooltipElem = doc.createElement('div');\r\n            tooltipElem.classList.add(ClassName('tt')());\r\n            this.knobElement.appendChild(tooltipElem);\r\n            this.tooltipElem_ = tooltipElem;\r\n            config.value.emitter.on('change', this.onChange_);\r\n            this.value = config.value;\r\n            this.refresh();\r\n        }\r\n        onDraggingChange_(ev) {\r\n            if (ev.rawValue === null) {\r\n                this.element.classList.remove(className$g(undefined, 'drg'));\r\n                return;\r\n            }\r\n            this.element.classList.add(className$g(undefined, 'drg'));\r\n            const x = ev.rawValue / this.props_.get('draggingScale');\r\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\r\n            const adx = constrainRange(-aox, -4, +4);\r\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\r\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\r\n            const formatter = this.props_.get('formatter');\r\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\r\n            this.tooltipElem_.style.left = `${x}px`;\r\n        }\r\n        refresh() {\r\n            const formatter = this.props_.get('formatter');\r\n            this.inputElement.value = formatter(this.value.rawValue);\r\n        }\r\n        onChange_() {\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    class NumberTextController {\r\n        constructor(doc, config) {\r\n            var _a;\r\n            this.originRawValue_ = 0;\r\n            this.onInputChange_ = this.onInputChange_.bind(this);\r\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\r\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\r\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\r\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\r\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\r\n            this.baseStep_ = config.baseStep;\r\n            this.parser_ = config.parser;\r\n            this.props = config.props;\r\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.dragging_ = createValue(null);\r\n            this.view = new NumberTextView(doc, {\r\n                arrayPosition: config.arrayPosition,\r\n                dragging: this.dragging_,\r\n                props: this.props,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\r\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\r\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\r\n            const ph = new PointerHandler(this.view.knobElement);\r\n            ph.emitter.on('down', this.onPointerDown_);\r\n            ph.emitter.on('move', this.onPointerMove_);\r\n            ph.emitter.on('up', this.onPointerUp_);\r\n        }\r\n        constrainValue_(value) {\r\n            var _a, _b;\r\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('minValue');\r\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('maxValue');\r\n            let v = value;\r\n            if (min !== undefined) {\r\n                v = Math.max(v, min);\r\n            }\r\n            if (max !== undefined) {\r\n                v = Math.min(v, max);\r\n            }\r\n            return v;\r\n        }\r\n        onInputChange_(e) {\r\n            const inputElem = forceCast(e.currentTarget);\r\n            const value = inputElem.value;\r\n            const parsedValue = this.parser_(value);\r\n            if (!isEmpty(parsedValue)) {\r\n                this.value.rawValue = this.constrainValue_(parsedValue);\r\n            }\r\n            this.view.refresh();\r\n        }\r\n        onInputKeyDown_(ev) {\r\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\r\n            if (step === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onInputKeyUp_(ev) {\r\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\r\n            if (step === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(this.value.rawValue, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n        onPointerDown_() {\r\n            this.originRawValue_ = this.value.rawValue;\r\n            this.dragging_.rawValue = 0;\r\n        }\r\n        computeDraggingValue_(data) {\r\n            if (!data.point) {\r\n                return null;\r\n            }\r\n            const dx = data.point.x - data.bounds.width / 2;\r\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get('draggingScale'));\r\n        }\r\n        onPointerMove_(ev) {\r\n            const v = this.computeDraggingValue_(ev.data);\r\n            if (v === null) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(v, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\r\n        }\r\n        onPointerUp_(ev) {\r\n            const v = this.computeDraggingValue_(ev.data);\r\n            if (v === null) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(v, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n            this.dragging_.rawValue = null;\r\n        }\r\n    }\r\n\r\n    const className$f = ClassName('sld');\r\n    class SliderView {\r\n        constructor(doc, config) {\r\n            this.onChange_ = this.onChange_.bind(this);\r\n            this.props_ = config.props;\r\n            this.props_.emitter.on('change', this.onChange_);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$f());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const trackElem = doc.createElement('div');\r\n            trackElem.classList.add(className$f('t'));\r\n            config.viewProps.bindTabIndex(trackElem);\r\n            this.element.appendChild(trackElem);\r\n            this.trackElement = trackElem;\r\n            const knobElem = doc.createElement('div');\r\n            knobElem.classList.add(className$f('k'));\r\n            this.trackElement.appendChild(knobElem);\r\n            this.knobElement = knobElem;\r\n            config.value.emitter.on('change', this.onChange_);\r\n            this.value = config.value;\r\n            this.update_();\r\n        }\r\n        update_() {\r\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\r\n            this.knobElement.style.width = `${p}%`;\r\n        }\r\n        onChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class SliderController {\r\n        constructor(doc, config) {\r\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\r\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\r\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\r\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\r\n            this.baseStep_ = config.baseStep;\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.props = config.props;\r\n            this.view = new SliderView(doc, {\r\n                props: this.props,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\r\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\r\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\r\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\r\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\r\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\r\n        }\r\n        handlePointerEvent_(d, opts) {\r\n            if (!d.point) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\r\n        }\r\n        onPointerDownOrMove_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerUp_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n        onKeyDown_(ev) {\r\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\r\n            if (step === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(this.value.rawValue + step, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onKeyUp_(ev) {\r\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\r\n            if (step === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(this.value.rawValue, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    const className$e = ClassName('sldtxt');\r\n    class SliderTextView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$e());\r\n            const sliderElem = doc.createElement('div');\r\n            sliderElem.classList.add(className$e('s'));\r\n            this.sliderView_ = config.sliderView;\r\n            sliderElem.appendChild(this.sliderView_.element);\r\n            this.element.appendChild(sliderElem);\r\n            const textElem = doc.createElement('div');\r\n            textElem.classList.add(className$e('t'));\r\n            this.textView_ = config.textView;\r\n            textElem.appendChild(this.textView_.element);\r\n            this.element.appendChild(textElem);\r\n        }\r\n    }\r\n\r\n    class SliderTextController {\r\n        constructor(doc, config) {\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.sliderC_ = new SliderController(doc, {\r\n                baseStep: config.baseStep,\r\n                props: config.sliderProps,\r\n                value: config.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.textC_ = new NumberTextController(doc, {\r\n                baseStep: config.baseStep,\r\n                parser: config.parser,\r\n                props: config.textProps,\r\n                sliderProps: config.sliderProps,\r\n                value: config.value,\r\n                viewProps: config.viewProps,\r\n            });\r\n            this.view = new SliderTextView(doc, {\r\n                sliderView: this.sliderC_.view,\r\n                textView: this.textC_.view,\r\n            });\r\n        }\r\n        get sliderController() {\r\n            return this.sliderC_;\r\n        }\r\n        get textController() {\r\n            return this.textC_;\r\n        }\r\n    }\r\n\r\n    function writePrimitive(target, value) {\r\n        target.write(value);\r\n    }\r\n\r\n    function parseListOptions(value) {\r\n        const p = ParamsParsers;\r\n        if (Array.isArray(value)) {\r\n            return p.required.array(p.required.object({\r\n                text: p.required.string,\r\n                value: p.required.raw,\r\n            }))(value).value;\r\n        }\r\n        if (typeof value === 'object') {\r\n            return p.required.raw(value)\r\n                .value;\r\n        }\r\n        return undefined;\r\n    }\r\n    function parsePickerLayout(value) {\r\n        if (value === 'inline' || value === 'popup') {\r\n            return value;\r\n        }\r\n        return undefined;\r\n    }\r\n    function parsePointDimensionParams(value) {\r\n        const p = ParamsParsers;\r\n        return p.required.object({\r\n            max: p.optional.number,\r\n            min: p.optional.number,\r\n            step: p.optional.number,\r\n        })(value).value;\r\n    }\r\n    function normalizeListOptions(options) {\r\n        if (Array.isArray(options)) {\r\n            return options;\r\n        }\r\n        const items = [];\r\n        Object.keys(options).forEach((text) => {\r\n            items.push({ text: text, value: options[text] });\r\n        });\r\n        return items;\r\n    }\r\n    function createListConstraint(options) {\r\n        return !isEmpty(options)\r\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\r\n            : null;\r\n    }\r\n    function findStep(constraint) {\r\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\r\n        if (!c) {\r\n            return null;\r\n        }\r\n        return c.step;\r\n    }\r\n    function getSuitableDecimalDigits(constraint, rawValue) {\r\n        const sc = constraint && findConstraint(constraint, StepConstraint);\r\n        if (sc) {\r\n            return getDecimalDigits(sc.step);\r\n        }\r\n        return Math.max(getDecimalDigits(rawValue), 2);\r\n    }\r\n    function getBaseStep(constraint) {\r\n        const step = findStep(constraint);\r\n        return step !== null && step !== void 0 ? step : 1;\r\n    }\r\n    function getSuitableDraggingScale(constraint, rawValue) {\r\n        var _a;\r\n        const sc = constraint && findConstraint(constraint, StepConstraint);\r\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\r\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\r\n    }\r\n\r\n    const className$d = ClassName('ckb');\r\n    class CheckboxView {\r\n        constructor(doc, config) {\r\n            this.onValueChange_ = this.onValueChange_.bind(this);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$d());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const labelElem = doc.createElement('label');\r\n            labelElem.classList.add(className$d('l'));\r\n            this.element.appendChild(labelElem);\r\n            const inputElem = doc.createElement('input');\r\n            inputElem.classList.add(className$d('i'));\r\n            inputElem.type = 'checkbox';\r\n            labelElem.appendChild(inputElem);\r\n            this.inputElement = inputElem;\r\n            config.viewProps.bindDisabled(this.inputElement);\r\n            const wrapperElem = doc.createElement('div');\r\n            wrapperElem.classList.add(className$d('w'));\r\n            labelElem.appendChild(wrapperElem);\r\n            const markElem = createSvgIconElement(doc, 'check');\r\n            wrapperElem.appendChild(markElem);\r\n            config.value.emitter.on('change', this.onValueChange_);\r\n            this.value = config.value;\r\n            this.update_();\r\n        }\r\n        update_() {\r\n            this.inputElement.checked = this.value.rawValue;\r\n        }\r\n        onValueChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class CheckboxController {\r\n        constructor(doc, config) {\r\n            this.onInputChange_ = this.onInputChange_.bind(this);\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new CheckboxView(doc, {\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\r\n        }\r\n        onInputChange_(e) {\r\n            const inputElem = forceCast(e.currentTarget);\r\n            this.value.rawValue = inputElem.checked;\r\n        }\r\n    }\r\n\r\n    function createConstraint$6(params) {\r\n        const constraints = [];\r\n        const lc = createListConstraint(params.options);\r\n        if (lc) {\r\n            constraints.push(lc);\r\n        }\r\n        return new CompositeConstraint(constraints);\r\n    }\r\n    const BooleanInputPlugin = {\r\n        id: 'input-bool',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (typeof value !== 'boolean') {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                options: p.optional.custom(parseListOptions),\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (_args) => boolFromUnknown,\r\n            constraint: (args) => createConstraint$6(args.params),\r\n            writer: (_args) => writePrimitive,\r\n        },\r\n        controller: (args) => {\r\n            const doc = args.document;\r\n            const value = args.value;\r\n            const c = args.constraint;\r\n            const lc = c && findConstraint(c, ListConstraint);\r\n            if (lc) {\r\n                return new ListController(doc, {\r\n                    props: new ValueMap({\r\n                        options: lc.values.value('options'),\r\n                    }),\r\n                    value: value,\r\n                    viewProps: args.viewProps,\r\n                });\r\n            }\r\n            return new CheckboxController(doc, {\r\n                value: value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    const className$c = ClassName('col');\r\n    class ColorView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$c());\r\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\r\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\r\n            const headElem = doc.createElement('div');\r\n            headElem.classList.add(className$c('h'));\r\n            this.element.appendChild(headElem);\r\n            const swatchElem = doc.createElement('div');\r\n            swatchElem.classList.add(className$c('s'));\r\n            headElem.appendChild(swatchElem);\r\n            this.swatchElement = swatchElem;\r\n            const textElem = doc.createElement('div');\r\n            textElem.classList.add(className$c('t'));\r\n            headElem.appendChild(textElem);\r\n            this.textElement = textElem;\r\n            if (config.pickerLayout === 'inline') {\r\n                const pickerElem = doc.createElement('div');\r\n                pickerElem.classList.add(className$c('p'));\r\n                this.element.appendChild(pickerElem);\r\n                this.pickerElement = pickerElem;\r\n            }\r\n            else {\r\n                this.pickerElement = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    function rgbToHslInt(r, g, b) {\r\n        const rp = constrainRange(r / 255, 0, 1);\r\n        const gp = constrainRange(g / 255, 0, 1);\r\n        const bp = constrainRange(b / 255, 0, 1);\r\n        const cmax = Math.max(rp, gp, bp);\r\n        const cmin = Math.min(rp, gp, bp);\r\n        const c = cmax - cmin;\r\n        let h = 0;\r\n        let s = 0;\r\n        const l = (cmin + cmax) / 2;\r\n        if (c !== 0) {\r\n            s = c / (1 - Math.abs(cmax + cmin - 1));\r\n            if (rp === cmax) {\r\n                h = (gp - bp) / c;\r\n            }\r\n            else if (gp === cmax) {\r\n                h = 2 + (bp - rp) / c;\r\n            }\r\n            else {\r\n                h = 4 + (rp - gp) / c;\r\n            }\r\n            h = h / 6 + (h < 0 ? 1 : 0);\r\n        }\r\n        return [h * 360, s * 100, l * 100];\r\n    }\r\n    function hslToRgbInt(h, s, l) {\r\n        const hp = ((h % 360) + 360) % 360;\r\n        const sp = constrainRange(s / 100, 0, 1);\r\n        const lp = constrainRange(l / 100, 0, 1);\r\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\r\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\r\n        const m = lp - c / 2;\r\n        let rp, gp, bp;\r\n        if (hp >= 0 && hp < 60) {\r\n            [rp, gp, bp] = [c, x, 0];\r\n        }\r\n        else if (hp >= 60 && hp < 120) {\r\n            [rp, gp, bp] = [x, c, 0];\r\n        }\r\n        else if (hp >= 120 && hp < 180) {\r\n            [rp, gp, bp] = [0, c, x];\r\n        }\r\n        else if (hp >= 180 && hp < 240) {\r\n            [rp, gp, bp] = [0, x, c];\r\n        }\r\n        else if (hp >= 240 && hp < 300) {\r\n            [rp, gp, bp] = [x, 0, c];\r\n        }\r\n        else {\r\n            [rp, gp, bp] = [c, 0, x];\r\n        }\r\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\r\n    }\r\n    function rgbToHsvInt(r, g, b) {\r\n        const rp = constrainRange(r / 255, 0, 1);\r\n        const gp = constrainRange(g / 255, 0, 1);\r\n        const bp = constrainRange(b / 255, 0, 1);\r\n        const cmax = Math.max(rp, gp, bp);\r\n        const cmin = Math.min(rp, gp, bp);\r\n        const d = cmax - cmin;\r\n        let h;\r\n        if (d === 0) {\r\n            h = 0;\r\n        }\r\n        else if (cmax === rp) {\r\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\r\n        }\r\n        else if (cmax === gp) {\r\n            h = 60 * ((bp - rp) / d + 2);\r\n        }\r\n        else {\r\n            h = 60 * ((rp - gp) / d + 4);\r\n        }\r\n        const s = cmax === 0 ? 0 : d / cmax;\r\n        const v = cmax;\r\n        return [h, s * 100, v * 100];\r\n    }\r\n    function hsvToRgbInt(h, s, v) {\r\n        const hp = loopRange(h, 360);\r\n        const sp = constrainRange(s / 100, 0, 1);\r\n        const vp = constrainRange(v / 100, 0, 1);\r\n        const c = vp * sp;\r\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\r\n        const m = vp - c;\r\n        let rp, gp, bp;\r\n        if (hp >= 0 && hp < 60) {\r\n            [rp, gp, bp] = [c, x, 0];\r\n        }\r\n        else if (hp >= 60 && hp < 120) {\r\n            [rp, gp, bp] = [x, c, 0];\r\n        }\r\n        else if (hp >= 120 && hp < 180) {\r\n            [rp, gp, bp] = [0, c, x];\r\n        }\r\n        else if (hp >= 180 && hp < 240) {\r\n            [rp, gp, bp] = [0, x, c];\r\n        }\r\n        else if (hp >= 240 && hp < 300) {\r\n            [rp, gp, bp] = [x, 0, c];\r\n        }\r\n        else {\r\n            [rp, gp, bp] = [c, 0, x];\r\n        }\r\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\r\n    }\r\n    function hslToHsvInt(h, s, l) {\r\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\r\n        return [\r\n            h,\r\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\r\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\r\n        ];\r\n    }\r\n    function hsvToHslInt(h, s, v) {\r\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\r\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\r\n    }\r\n    function removeAlphaComponent(comps) {\r\n        return [comps[0], comps[1], comps[2]];\r\n    }\r\n    function appendAlphaComponent(comps, alpha) {\r\n        return [comps[0], comps[1], comps[2], alpha];\r\n    }\r\n    const MODE_CONVERTER_MAP = {\r\n        hsl: {\r\n            hsl: (h, s, l) => [h, s, l],\r\n            hsv: hslToHsvInt,\r\n            rgb: hslToRgbInt,\r\n        },\r\n        hsv: {\r\n            hsl: hsvToHslInt,\r\n            hsv: (h, s, v) => [h, s, v],\r\n            rgb: hsvToRgbInt,\r\n        },\r\n        rgb: {\r\n            hsl: rgbToHslInt,\r\n            hsv: rgbToHsvInt,\r\n            rgb: (r, g, b) => [r, g, b],\r\n        },\r\n    };\r\n    function getColorMaxComponents(mode, type) {\r\n        return [\r\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\r\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\r\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\r\n        ];\r\n    }\r\n    function loopHueRange(hue, max) {\r\n        return hue === max ? max : loopRange(hue, max);\r\n    }\r\n    function constrainColorComponents(components, mode, type) {\r\n        var _a;\r\n        const ms = getColorMaxComponents(mode, type);\r\n        return [\r\n            mode === 'rgb'\r\n                ? constrainRange(components[0], 0, ms[0])\r\n                : loopHueRange(components[0], ms[0]),\r\n            constrainRange(components[1], 0, ms[1]),\r\n            constrainRange(components[2], 0, ms[2]),\r\n            constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\r\n        ];\r\n    }\r\n    function convertColorType(comps, mode, from, to) {\r\n        const fms = getColorMaxComponents(mode, from);\r\n        const tms = getColorMaxComponents(mode, to);\r\n        return comps.map((c, index) => (c / fms[index]) * tms[index]);\r\n    }\r\n    function convertColor(components, from, to) {\r\n        const intComps = convertColorType(components, from.mode, from.type, 'int');\r\n        const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\r\n        return convertColorType(result, to.mode, 'int', to.type);\r\n    }\r\n\r\n    function isRgbColorComponent(obj, key) {\r\n        if (typeof obj !== 'object' || isEmpty(obj)) {\r\n            return false;\r\n        }\r\n        return key in obj && typeof obj[key] === 'number';\r\n    }\r\n    class Color {\r\n        static black(type = 'int') {\r\n            return new Color([0, 0, 0], 'rgb', type);\r\n        }\r\n        static fromObject(obj, type = 'int') {\r\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\r\n            return new Color(comps, 'rgb', type);\r\n        }\r\n        static toRgbaObject(color, type = 'int') {\r\n            return color.toRgbaObject(type);\r\n        }\r\n        static isRgbColorObject(obj) {\r\n            return (isRgbColorComponent(obj, 'r') &&\r\n                isRgbColorComponent(obj, 'g') &&\r\n                isRgbColorComponent(obj, 'b'));\r\n        }\r\n        static isRgbaColorObject(obj) {\r\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\r\n        }\r\n        static isColorObject(obj) {\r\n            return this.isRgbColorObject(obj);\r\n        }\r\n        static equals(v1, v2) {\r\n            if (v1.mode !== v2.mode) {\r\n                return false;\r\n            }\r\n            const comps1 = v1.comps_;\r\n            const comps2 = v2.comps_;\r\n            for (let i = 0; i < comps1.length; i++) {\r\n                if (comps1[i] !== comps2[i]) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        constructor(comps, mode, type = 'int') {\r\n            this.mode = mode;\r\n            this.type = type;\r\n            this.comps_ = constrainColorComponents(comps, mode, type);\r\n        }\r\n        getComponents(opt_mode, type = 'int') {\r\n            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type }), this.comps_[3]);\r\n        }\r\n        toRgbaObject(type = 'int') {\r\n            const rgbComps = this.getComponents('rgb', type);\r\n            return {\r\n                r: rgbComps[0],\r\n                g: rgbComps[1],\r\n                b: rgbComps[2],\r\n                a: rgbComps[3],\r\n            };\r\n        }\r\n    }\r\n\r\n    const className$b = ClassName('colp');\r\n    class ColorPickerView {\r\n        constructor(doc, config) {\r\n            this.alphaViews_ = null;\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$b());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const hsvElem = doc.createElement('div');\r\n            hsvElem.classList.add(className$b('hsv'));\r\n            const svElem = doc.createElement('div');\r\n            svElem.classList.add(className$b('sv'));\r\n            this.svPaletteView_ = config.svPaletteView;\r\n            svElem.appendChild(this.svPaletteView_.element);\r\n            hsvElem.appendChild(svElem);\r\n            const hElem = doc.createElement('div');\r\n            hElem.classList.add(className$b('h'));\r\n            this.hPaletteView_ = config.hPaletteView;\r\n            hElem.appendChild(this.hPaletteView_.element);\r\n            hsvElem.appendChild(hElem);\r\n            this.element.appendChild(hsvElem);\r\n            const rgbElem = doc.createElement('div');\r\n            rgbElem.classList.add(className$b('rgb'));\r\n            this.textView_ = config.textView;\r\n            rgbElem.appendChild(this.textView_.element);\r\n            this.element.appendChild(rgbElem);\r\n            if (config.alphaViews) {\r\n                this.alphaViews_ = {\r\n                    palette: config.alphaViews.palette,\r\n                    text: config.alphaViews.text,\r\n                };\r\n                const aElem = doc.createElement('div');\r\n                aElem.classList.add(className$b('a'));\r\n                const apElem = doc.createElement('div');\r\n                apElem.classList.add(className$b('ap'));\r\n                apElem.appendChild(this.alphaViews_.palette.element);\r\n                aElem.appendChild(apElem);\r\n                const atElem = doc.createElement('div');\r\n                atElem.classList.add(className$b('at'));\r\n                atElem.appendChild(this.alphaViews_.text.element);\r\n                aElem.appendChild(atElem);\r\n                this.element.appendChild(aElem);\r\n            }\r\n        }\r\n        get allFocusableElements() {\r\n            const elems = [\r\n                this.svPaletteView_.element,\r\n                this.hPaletteView_.element,\r\n                this.textView_.modeSelectElement,\r\n                ...this.textView_.textViews.map((v) => v.inputElement),\r\n            ];\r\n            if (this.alphaViews_) {\r\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\r\n            }\r\n            return elems;\r\n        }\r\n    }\r\n\r\n    function parseColorType(value) {\r\n        return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\r\n    }\r\n    function parseColorInputParams(params) {\r\n        const p = ParamsParsers;\r\n        return parseParams(params, {\r\n            alpha: p.optional.boolean,\r\n            color: p.optional.object({\r\n                alpha: p.optional.boolean,\r\n                type: p.optional.custom(parseColorType),\r\n            }),\r\n            expanded: p.optional.boolean,\r\n            picker: p.optional.custom(parsePickerLayout),\r\n        });\r\n    }\r\n    function getBaseStepForColor(forAlpha) {\r\n        return forAlpha ? 0.1 : 1;\r\n    }\r\n    function extractColorType(params) {\r\n        var _a;\r\n        return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\r\n    }\r\n\r\n    function equalsStringColorFormat(f1, f2) {\r\n        return (f1.alpha === f2.alpha &&\r\n            f1.mode === f2.mode &&\r\n            f1.notation === f2.notation &&\r\n            f1.type === f2.type);\r\n    }\r\n    function parseCssNumberOrPercentage(text, maxValue) {\r\n        const m = text.match(/^(.+)%$/);\r\n        if (!m) {\r\n            return Math.min(parseFloat(text), maxValue);\r\n        }\r\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\r\n    }\r\n    const ANGLE_TO_DEG_MAP = {\r\n        deg: (angle) => angle,\r\n        grad: (angle) => (angle * 360) / 400,\r\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\r\n        turn: (angle) => angle * 360,\r\n    };\r\n    function parseCssNumberOrAngle(text) {\r\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\r\n        if (!m) {\r\n            return parseFloat(text);\r\n        }\r\n        const angle = parseFloat(m[1]);\r\n        const unit = m[2];\r\n        return ANGLE_TO_DEG_MAP[unit](angle);\r\n    }\r\n    function parseFunctionalRgbColorComponents(text) {\r\n        const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\r\n        if (!m) {\r\n            return null;\r\n        }\r\n        const comps = [\r\n            parseCssNumberOrPercentage(m[1], 255),\r\n            parseCssNumberOrPercentage(m[2], 255),\r\n            parseCssNumberOrPercentage(m[3], 255),\r\n        ];\r\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\r\n            return null;\r\n        }\r\n        return comps;\r\n    }\r\n    function createFunctionalRgbColorParser(type) {\r\n        return (text) => {\r\n            const comps = parseFunctionalRgbColorComponents(text);\r\n            return comps ? new Color(comps, 'rgb', type) : null;\r\n        };\r\n    }\r\n    function parseFunctionalRgbaColorComponents(text) {\r\n        const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\r\n        if (!m) {\r\n            return null;\r\n        }\r\n        const comps = [\r\n            parseCssNumberOrPercentage(m[1], 255),\r\n            parseCssNumberOrPercentage(m[2], 255),\r\n            parseCssNumberOrPercentage(m[3], 255),\r\n            parseCssNumberOrPercentage(m[4], 1),\r\n        ];\r\n        if (isNaN(comps[0]) ||\r\n            isNaN(comps[1]) ||\r\n            isNaN(comps[2]) ||\r\n            isNaN(comps[3])) {\r\n            return null;\r\n        }\r\n        return comps;\r\n    }\r\n    function createFunctionalRgbaColorParser(type) {\r\n        return (text) => {\r\n            const comps = parseFunctionalRgbaColorComponents(text);\r\n            return comps ? new Color(comps, 'rgb', type) : null;\r\n        };\r\n    }\r\n    function parseHslColorComponents(text) {\r\n        const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\r\n        if (!m) {\r\n            return null;\r\n        }\r\n        const comps = [\r\n            parseCssNumberOrAngle(m[1]),\r\n            parseCssNumberOrPercentage(m[2], 100),\r\n            parseCssNumberOrPercentage(m[3], 100),\r\n        ];\r\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\r\n            return null;\r\n        }\r\n        return comps;\r\n    }\r\n    function createHslColorParser(type) {\r\n        return (text) => {\r\n            const comps = parseHslColorComponents(text);\r\n            return comps ? new Color(comps, 'hsl', type) : null;\r\n        };\r\n    }\r\n    function parseHslaColorComponents(text) {\r\n        const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\r\n        if (!m) {\r\n            return null;\r\n        }\r\n        const comps = [\r\n            parseCssNumberOrAngle(m[1]),\r\n            parseCssNumberOrPercentage(m[2], 100),\r\n            parseCssNumberOrPercentage(m[3], 100),\r\n            parseCssNumberOrPercentage(m[4], 1),\r\n        ];\r\n        if (isNaN(comps[0]) ||\r\n            isNaN(comps[1]) ||\r\n            isNaN(comps[2]) ||\r\n            isNaN(comps[3])) {\r\n            return null;\r\n        }\r\n        return comps;\r\n    }\r\n    function createHslaColorParser(type) {\r\n        return (text) => {\r\n            const comps = parseHslaColorComponents(text);\r\n            return comps ? new Color(comps, 'hsl', type) : null;\r\n        };\r\n    }\r\n    function parseHexRgbColorComponents(text) {\r\n        const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\r\n        if (mRgb) {\r\n            return [\r\n                parseInt(mRgb[1] + mRgb[1], 16),\r\n                parseInt(mRgb[2] + mRgb[2], 16),\r\n                parseInt(mRgb[3] + mRgb[3], 16),\r\n            ];\r\n        }\r\n        const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\r\n        if (mRrggbb) {\r\n            return [\r\n                parseInt(mRrggbb[1], 16),\r\n                parseInt(mRrggbb[2], 16),\r\n                parseInt(mRrggbb[3], 16),\r\n            ];\r\n        }\r\n        return null;\r\n    }\r\n    function parseHexRgbColor(text) {\r\n        const comps = parseHexRgbColorComponents(text);\r\n        return comps ? new Color(comps, 'rgb', 'int') : null;\r\n    }\r\n    function parseHexRgbaColorComponents(text) {\r\n        const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\r\n        if (mRgb) {\r\n            return [\r\n                parseInt(mRgb[1] + mRgb[1], 16),\r\n                parseInt(mRgb[2] + mRgb[2], 16),\r\n                parseInt(mRgb[3] + mRgb[3], 16),\r\n                mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\r\n            ];\r\n        }\r\n        const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\r\n        if (mRrggbb) {\r\n            return [\r\n                parseInt(mRrggbb[1], 16),\r\n                parseInt(mRrggbb[2], 16),\r\n                parseInt(mRrggbb[3], 16),\r\n                mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\r\n            ];\r\n        }\r\n        return null;\r\n    }\r\n    function parseHexRgbaColor(text) {\r\n        const comps = parseHexRgbaColorComponents(text);\r\n        return comps ? new Color(comps, 'rgb', 'int') : null;\r\n    }\r\n    function parseObjectRgbColorComponents(text) {\r\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\r\n        if (!m) {\r\n            return null;\r\n        }\r\n        const comps = [\r\n            parseFloat(m[1]),\r\n            parseFloat(m[2]),\r\n            parseFloat(m[3]),\r\n        ];\r\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\r\n            return null;\r\n        }\r\n        return comps;\r\n    }\r\n    function createObjectRgbColorParser(type) {\r\n        return (text) => {\r\n            const comps = parseObjectRgbColorComponents(text);\r\n            return comps ? new Color(comps, 'rgb', type) : null;\r\n        };\r\n    }\r\n    function parseObjectRgbaColorComponents(text) {\r\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\r\n        if (!m) {\r\n            return null;\r\n        }\r\n        const comps = [\r\n            parseFloat(m[1]),\r\n            parseFloat(m[2]),\r\n            parseFloat(m[3]),\r\n            parseFloat(m[4]),\r\n        ];\r\n        if (isNaN(comps[0]) ||\r\n            isNaN(comps[1]) ||\r\n            isNaN(comps[2]) ||\r\n            isNaN(comps[3])) {\r\n            return null;\r\n        }\r\n        return comps;\r\n    }\r\n    function createObjectRgbaColorParser(type) {\r\n        return (text) => {\r\n            const comps = parseObjectRgbaColorComponents(text);\r\n            return comps ? new Color(comps, 'rgb', type) : null;\r\n        };\r\n    }\r\n    const PARSER_AND_RESULT = [\r\n        {\r\n            parser: parseHexRgbColorComponents,\r\n            result: {\r\n                alpha: false,\r\n                mode: 'rgb',\r\n                notation: 'hex',\r\n            },\r\n        },\r\n        {\r\n            parser: parseHexRgbaColorComponents,\r\n            result: {\r\n                alpha: true,\r\n                mode: 'rgb',\r\n                notation: 'hex',\r\n            },\r\n        },\r\n        {\r\n            parser: parseFunctionalRgbColorComponents,\r\n            result: {\r\n                alpha: false,\r\n                mode: 'rgb',\r\n                notation: 'func',\r\n            },\r\n        },\r\n        {\r\n            parser: parseFunctionalRgbaColorComponents,\r\n            result: {\r\n                alpha: true,\r\n                mode: 'rgb',\r\n                notation: 'func',\r\n            },\r\n        },\r\n        {\r\n            parser: parseHslColorComponents,\r\n            result: {\r\n                alpha: false,\r\n                mode: 'hsl',\r\n                notation: 'func',\r\n            },\r\n        },\r\n        {\r\n            parser: parseHslaColorComponents,\r\n            result: {\r\n                alpha: true,\r\n                mode: 'hsl',\r\n                notation: 'func',\r\n            },\r\n        },\r\n        {\r\n            parser: parseObjectRgbColorComponents,\r\n            result: {\r\n                alpha: false,\r\n                mode: 'rgb',\r\n                notation: 'object',\r\n            },\r\n        },\r\n        {\r\n            parser: parseObjectRgbaColorComponents,\r\n            result: {\r\n                alpha: true,\r\n                mode: 'rgb',\r\n                notation: 'object',\r\n            },\r\n        },\r\n    ];\r\n    function detectStringColor(text) {\r\n        return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\r\n            if (prev) {\r\n                return prev;\r\n            }\r\n            return parser(text) ? detection : null;\r\n        }, null);\r\n    }\r\n    function detectStringColorFormat(text, type = 'int') {\r\n        const r = detectStringColor(text);\r\n        if (!r) {\r\n            return null;\r\n        }\r\n        if (r.notation === 'hex' && type !== 'float') {\r\n            return Object.assign(Object.assign({}, r), { type: 'int' });\r\n        }\r\n        if (r.notation === 'func') {\r\n            return Object.assign(Object.assign({}, r), { type: type });\r\n        }\r\n        return null;\r\n    }\r\n    const TYPE_TO_PARSERS = {\r\n        int: [\r\n            parseHexRgbColor,\r\n            parseHexRgbaColor,\r\n            createFunctionalRgbColorParser('int'),\r\n            createFunctionalRgbaColorParser('int'),\r\n            createHslColorParser('int'),\r\n            createHslaColorParser('int'),\r\n            createObjectRgbColorParser('int'),\r\n            createObjectRgbaColorParser('int'),\r\n        ],\r\n        float: [\r\n            createFunctionalRgbColorParser('float'),\r\n            createFunctionalRgbaColorParser('float'),\r\n            createHslColorParser('float'),\r\n            createHslaColorParser('float'),\r\n            createObjectRgbColorParser('float'),\r\n            createObjectRgbaColorParser('float'),\r\n        ],\r\n    };\r\n    function createColorStringBindingReader(type) {\r\n        const parsers = TYPE_TO_PARSERS[type];\r\n        return (value) => {\r\n            if (typeof value !== 'string') {\r\n                return Color.black(type);\r\n            }\r\n            const result = parsers.reduce((prev, parser) => {\r\n                if (prev) {\r\n                    return prev;\r\n                }\r\n                return parser(value);\r\n            }, null);\r\n            return result !== null && result !== void 0 ? result : Color.black(type);\r\n        };\r\n    }\r\n    function createColorStringParser(type) {\r\n        const parsers = TYPE_TO_PARSERS[type];\r\n        return (value) => {\r\n            return parsers.reduce((prev, parser) => {\r\n                if (prev) {\r\n                    return prev;\r\n                }\r\n                return parser(value);\r\n            }, null);\r\n        };\r\n    }\r\n    function zerofill(comp) {\r\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\r\n        return hex.length === 1 ? `0${hex}` : hex;\r\n    }\r\n    function colorToHexRgbString(value, prefix = '#') {\r\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\r\n            .map(zerofill)\r\n            .join('');\r\n        return `${prefix}${hexes}`;\r\n    }\r\n    function colorToHexRgbaString(value, prefix = '#') {\r\n        const rgbaComps = value.getComponents('rgb');\r\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\r\n            .map(zerofill)\r\n            .join('');\r\n        return `${prefix}${hexes}`;\r\n    }\r\n    function colorToFunctionalRgbString(value, opt_type) {\r\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\r\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp) => formatter(comp));\r\n        return `rgb(${comps.join(', ')})`;\r\n    }\r\n    function createFunctionalRgbColorFormatter(type) {\r\n        return (value) => {\r\n            return colorToFunctionalRgbString(value, type);\r\n        };\r\n    }\r\n    function colorToFunctionalRgbaString(value, opt_type) {\r\n        const aFormatter = createNumberFormatter(2);\r\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\r\n        const comps = value.getComponents('rgb', opt_type).map((comp, index) => {\r\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\r\n            return formatter(comp);\r\n        });\r\n        return `rgba(${comps.join(', ')})`;\r\n    }\r\n    function createFunctionalRgbaColorFormatter(type) {\r\n        return (value) => {\r\n            return colorToFunctionalRgbaString(value, type);\r\n        };\r\n    }\r\n    function colorToFunctionalHslString(value) {\r\n        const formatters = [\r\n            createNumberFormatter(0),\r\n            formatPercentage,\r\n            formatPercentage,\r\n        ];\r\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\r\n        return `hsl(${comps.join(', ')})`;\r\n    }\r\n    function colorToFunctionalHslaString(value) {\r\n        const formatters = [\r\n            createNumberFormatter(0),\r\n            formatPercentage,\r\n            formatPercentage,\r\n            createNumberFormatter(2),\r\n        ];\r\n        const comps = value\r\n            .getComponents('hsl')\r\n            .map((comp, index) => formatters[index](comp));\r\n        return `hsla(${comps.join(', ')})`;\r\n    }\r\n    function colorToObjectRgbString(value, type) {\r\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\r\n        const names = ['r', 'g', 'b'];\r\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\r\n        return `{${comps.join(', ')}}`;\r\n    }\r\n    function createObjectRgbColorFormatter(type) {\r\n        return (value) => colorToObjectRgbString(value, type);\r\n    }\r\n    function colorToObjectRgbaString(value, type) {\r\n        const aFormatter = createNumberFormatter(2);\r\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\r\n        const names = ['r', 'g', 'b', 'a'];\r\n        const comps = value.getComponents('rgb', type).map((comp, index) => {\r\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\r\n            return `${names[index]}: ${formatter(comp)}`;\r\n        });\r\n        return `{${comps.join(', ')}}`;\r\n    }\r\n    function createObjectRgbaColorFormatter(type) {\r\n        return (value) => colorToObjectRgbaString(value, type);\r\n    }\r\n    const FORMAT_AND_STRINGIFIERS = [\r\n        {\r\n            format: {\r\n                alpha: false,\r\n                mode: 'rgb',\r\n                notation: 'hex',\r\n                type: 'int',\r\n            },\r\n            stringifier: colorToHexRgbString,\r\n        },\r\n        {\r\n            format: {\r\n                alpha: true,\r\n                mode: 'rgb',\r\n                notation: 'hex',\r\n                type: 'int',\r\n            },\r\n            stringifier: colorToHexRgbaString,\r\n        },\r\n        {\r\n            format: {\r\n                alpha: false,\r\n                mode: 'hsl',\r\n                notation: 'func',\r\n                type: 'int',\r\n            },\r\n            stringifier: colorToFunctionalHslString,\r\n        },\r\n        {\r\n            format: {\r\n                alpha: true,\r\n                mode: 'hsl',\r\n                notation: 'func',\r\n                type: 'int',\r\n            },\r\n            stringifier: colorToFunctionalHslaString,\r\n        },\r\n        ...['int', 'float'].reduce((prev, type) => {\r\n            return [\r\n                ...prev,\r\n                {\r\n                    format: {\r\n                        alpha: false,\r\n                        mode: 'rgb',\r\n                        notation: 'func',\r\n                        type: type,\r\n                    },\r\n                    stringifier: createFunctionalRgbColorFormatter(type),\r\n                },\r\n                {\r\n                    format: {\r\n                        alpha: true,\r\n                        mode: 'rgb',\r\n                        notation: 'func',\r\n                        type: type,\r\n                    },\r\n                    stringifier: createFunctionalRgbaColorFormatter(type),\r\n                },\r\n                {\r\n                    format: {\r\n                        alpha: false,\r\n                        mode: 'rgb',\r\n                        notation: 'object',\r\n                        type: type,\r\n                    },\r\n                    stringifier: createObjectRgbColorFormatter(type),\r\n                },\r\n                {\r\n                    format: {\r\n                        alpha: true,\r\n                        mode: 'rgb',\r\n                        notation: 'object',\r\n                        type: type,\r\n                    },\r\n                    stringifier: createObjectRgbaColorFormatter(type),\r\n                },\r\n            ];\r\n        }, []),\r\n    ];\r\n    function findColorStringifier(format) {\r\n        return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\r\n            if (prev) {\r\n                return prev;\r\n            }\r\n            return equalsStringColorFormat(fas.format, format)\r\n                ? fas.stringifier\r\n                : null;\r\n        }, null);\r\n    }\r\n\r\n    const className$a = ClassName('apl');\r\n    class APaletteView {\r\n        constructor(doc, config) {\r\n            this.onValueChange_ = this.onValueChange_.bind(this);\r\n            this.value = config.value;\r\n            this.value.emitter.on('change', this.onValueChange_);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$a());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            config.viewProps.bindTabIndex(this.element);\r\n            const barElem = doc.createElement('div');\r\n            barElem.classList.add(className$a('b'));\r\n            this.element.appendChild(barElem);\r\n            const colorElem = doc.createElement('div');\r\n            colorElem.classList.add(className$a('c'));\r\n            barElem.appendChild(colorElem);\r\n            this.colorElem_ = colorElem;\r\n            const markerElem = doc.createElement('div');\r\n            markerElem.classList.add(className$a('m'));\r\n            this.element.appendChild(markerElem);\r\n            this.markerElem_ = markerElem;\r\n            const previewElem = doc.createElement('div');\r\n            previewElem.classList.add(className$a('p'));\r\n            this.markerElem_.appendChild(previewElem);\r\n            this.previewElem_ = previewElem;\r\n            this.update_();\r\n        }\r\n        update_() {\r\n            const c = this.value.rawValue;\r\n            const rgbaComps = c.getComponents('rgb');\r\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\r\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\r\n            const gradientComps = [\r\n                'to right',\r\n                colorToFunctionalRgbaString(leftColor),\r\n                colorToFunctionalRgbaString(rightColor),\r\n            ];\r\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\r\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\r\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\r\n            this.markerElem_.style.left = `${left}%`;\r\n        }\r\n        onValueChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class APaletteController {\r\n        constructor(doc, config) {\r\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\r\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\r\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\r\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\r\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new APaletteView(doc, {\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.ptHandler_ = new PointerHandler(this.view.element);\r\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\r\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\r\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\r\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\r\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\r\n        }\r\n        handlePointerEvent_(d, opts) {\r\n            if (!d.point) {\r\n                return;\r\n            }\r\n            const alpha = d.point.x / d.bounds.width;\r\n            const c = this.value.rawValue;\r\n            const [h, s, v] = c.getComponents('hsv');\r\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\r\n        }\r\n        onPointerDown_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerMove_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerUp_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n        onKeyDown_(ev) {\r\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\r\n            if (step === 0) {\r\n                return;\r\n            }\r\n            const c = this.value.rawValue;\r\n            const [h, s, v, a] = c.getComponents('hsv');\r\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onKeyUp_(ev) {\r\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\r\n            if (step === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(this.value.rawValue, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    const className$9 = ClassName('coltxt');\r\n    function createModeSelectElement(doc) {\r\n        const selectElem = doc.createElement('select');\r\n        const items = [\r\n            { text: 'RGB', value: 'rgb' },\r\n            { text: 'HSL', value: 'hsl' },\r\n            { text: 'HSV', value: 'hsv' },\r\n        ];\r\n        selectElem.appendChild(items.reduce((frag, item) => {\r\n            const optElem = doc.createElement('option');\r\n            optElem.textContent = item.text;\r\n            optElem.value = item.value;\r\n            frag.appendChild(optElem);\r\n            return frag;\r\n        }, doc.createDocumentFragment()));\r\n        return selectElem;\r\n    }\r\n    class ColorTextView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$9());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const modeElem = doc.createElement('div');\r\n            modeElem.classList.add(className$9('m'));\r\n            this.modeElem_ = createModeSelectElement(doc);\r\n            this.modeElem_.classList.add(className$9('ms'));\r\n            modeElem.appendChild(this.modeSelectElement);\r\n            config.viewProps.bindDisabled(this.modeElem_);\r\n            const modeMarkerElem = doc.createElement('div');\r\n            modeMarkerElem.classList.add(className$9('mm'));\r\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\r\n            modeElem.appendChild(modeMarkerElem);\r\n            this.element.appendChild(modeElem);\r\n            const textsElem = doc.createElement('div');\r\n            textsElem.classList.add(className$9('w'));\r\n            this.element.appendChild(textsElem);\r\n            this.textsElem_ = textsElem;\r\n            this.textViews_ = config.textViews;\r\n            this.applyTextViews_();\r\n            bindValue(config.colorMode, (mode) => {\r\n                this.modeElem_.value = mode;\r\n            });\r\n        }\r\n        get modeSelectElement() {\r\n            return this.modeElem_;\r\n        }\r\n        get textViews() {\r\n            return this.textViews_;\r\n        }\r\n        set textViews(textViews) {\r\n            this.textViews_ = textViews;\r\n            this.applyTextViews_();\r\n        }\r\n        applyTextViews_() {\r\n            removeChildElements(this.textsElem_);\r\n            const doc = this.element.ownerDocument;\r\n            this.textViews_.forEach((v) => {\r\n                const compElem = doc.createElement('div');\r\n                compElem.classList.add(className$9('c'));\r\n                compElem.appendChild(v.element);\r\n                this.textsElem_.appendChild(compElem);\r\n            });\r\n        }\r\n    }\r\n\r\n    function createFormatter$2(type) {\r\n        return createNumberFormatter(type === 'float' ? 2 : 0);\r\n    }\r\n    function createConstraint$5(mode, type, index) {\r\n        const max = getColorMaxComponents(mode, type)[index];\r\n        return new DefiniteRangeConstraint({\r\n            min: 0,\r\n            max: max,\r\n        });\r\n    }\r\n    function createComponentController(doc, config, index) {\r\n        return new NumberTextController(doc, {\r\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\r\n            baseStep: getBaseStepForColor(false),\r\n            parser: config.parser,\r\n            props: ValueMap.fromObject({\r\n                draggingScale: config.colorType === 'float' ? 0.01 : 1,\r\n                formatter: createFormatter$2(config.colorType),\r\n            }),\r\n            value: createValue(0, {\r\n                constraint: createConstraint$5(config.colorMode, config.colorType, index),\r\n            }),\r\n            viewProps: config.viewProps,\r\n        });\r\n    }\r\n    class ColorTextController {\r\n        constructor(doc, config) {\r\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\r\n            this.colorType_ = config.colorType;\r\n            this.parser_ = config.parser;\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.colorMode = createValue(this.value.rawValue.mode);\r\n            this.ccs_ = this.createComponentControllers_(doc);\r\n            this.view = new ColorTextView(doc, {\r\n                colorMode: this.colorMode,\r\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\r\n        }\r\n        createComponentControllers_(doc) {\r\n            const cc = {\r\n                colorMode: this.colorMode.rawValue,\r\n                colorType: this.colorType_,\r\n                parser: this.parser_,\r\n                viewProps: this.viewProps,\r\n            };\r\n            const ccs = [\r\n                createComponentController(doc, cc, 0),\r\n                createComponentController(doc, cc, 1),\r\n                createComponentController(doc, cc, 2),\r\n            ];\r\n            ccs.forEach((cs, index) => {\r\n                connectValues({\r\n                    primary: this.value,\r\n                    secondary: cs.value,\r\n                    forward: (p) => {\r\n                        return p.rawValue.getComponents(this.colorMode.rawValue, this.colorType_)[index];\r\n                    },\r\n                    backward: (p, s) => {\r\n                        const pickedMode = this.colorMode.rawValue;\r\n                        const comps = p.rawValue.getComponents(pickedMode, this.colorType_);\r\n                        comps[index] = s.rawValue;\r\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, this.colorType_);\r\n                    },\r\n                });\r\n            });\r\n            return ccs;\r\n        }\r\n        onModeSelectChange_(ev) {\r\n            const selectElem = ev.currentTarget;\r\n            this.colorMode.rawValue = selectElem.value;\r\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\r\n            this.view.textViews = [\r\n                this.ccs_[0].view,\r\n                this.ccs_[1].view,\r\n                this.ccs_[2].view,\r\n            ];\r\n        }\r\n    }\r\n\r\n    const className$8 = ClassName('hpl');\r\n    class HPaletteView {\r\n        constructor(doc, config) {\r\n            this.onValueChange_ = this.onValueChange_.bind(this);\r\n            this.value = config.value;\r\n            this.value.emitter.on('change', this.onValueChange_);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$8());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            config.viewProps.bindTabIndex(this.element);\r\n            const colorElem = doc.createElement('div');\r\n            colorElem.classList.add(className$8('c'));\r\n            this.element.appendChild(colorElem);\r\n            const markerElem = doc.createElement('div');\r\n            markerElem.classList.add(className$8('m'));\r\n            this.element.appendChild(markerElem);\r\n            this.markerElem_ = markerElem;\r\n            this.update_();\r\n        }\r\n        update_() {\r\n            const c = this.value.rawValue;\r\n            const [h] = c.getComponents('hsv');\r\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\r\n            const left = mapRange(h, 0, 360, 0, 100);\r\n            this.markerElem_.style.left = `${left}%`;\r\n        }\r\n        onValueChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class HPaletteController {\r\n        constructor(doc, config) {\r\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\r\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\r\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\r\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\r\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new HPaletteView(doc, {\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.ptHandler_ = new PointerHandler(this.view.element);\r\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\r\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\r\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\r\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\r\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\r\n        }\r\n        handlePointerEvent_(d, opts) {\r\n            if (!d.point) {\r\n                return;\r\n            }\r\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\r\n            const c = this.value.rawValue;\r\n            const [, s, v, a] = c.getComponents('hsv');\r\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\r\n        }\r\n        onPointerDown_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerMove_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerUp_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n        onKeyDown_(ev) {\r\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\r\n            if (step === 0) {\r\n                return;\r\n            }\r\n            const c = this.value.rawValue;\r\n            const [h, s, v, a] = c.getComponents('hsv');\r\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onKeyUp_(ev) {\r\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\r\n            if (step === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(this.value.rawValue, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    const className$7 = ClassName('svp');\r\n    const CANVAS_RESOL = 64;\r\n    class SvPaletteView {\r\n        constructor(doc, config) {\r\n            this.onValueChange_ = this.onValueChange_.bind(this);\r\n            this.value = config.value;\r\n            this.value.emitter.on('change', this.onValueChange_);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$7());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            config.viewProps.bindTabIndex(this.element);\r\n            const canvasElem = doc.createElement('canvas');\r\n            canvasElem.height = CANVAS_RESOL;\r\n            canvasElem.width = CANVAS_RESOL;\r\n            canvasElem.classList.add(className$7('c'));\r\n            this.element.appendChild(canvasElem);\r\n            this.canvasElement = canvasElem;\r\n            const markerElem = doc.createElement('div');\r\n            markerElem.classList.add(className$7('m'));\r\n            this.element.appendChild(markerElem);\r\n            this.markerElem_ = markerElem;\r\n            this.update_();\r\n        }\r\n        update_() {\r\n            const ctx = getCanvasContext(this.canvasElement);\r\n            if (!ctx) {\r\n                return;\r\n            }\r\n            const c = this.value.rawValue;\r\n            const hsvComps = c.getComponents('hsv');\r\n            const width = this.canvasElement.width;\r\n            const height = this.canvasElement.height;\r\n            const imgData = ctx.getImageData(0, 0, width, height);\r\n            const data = imgData.data;\r\n            for (let iy = 0; iy < height; iy++) {\r\n                for (let ix = 0; ix < width; ix++) {\r\n                    const s = mapRange(ix, 0, width, 0, 100);\r\n                    const v = mapRange(iy, 0, height, 100, 0);\r\n                    const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\r\n                    const i = (iy * width + ix) * 4;\r\n                    data[i] = rgbComps[0];\r\n                    data[i + 1] = rgbComps[1];\r\n                    data[i + 2] = rgbComps[2];\r\n                    data[i + 3] = 255;\r\n                }\r\n            }\r\n            ctx.putImageData(imgData, 0, 0);\r\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\r\n            this.markerElem_.style.left = `${left}%`;\r\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\r\n            this.markerElem_.style.top = `${top}%`;\r\n        }\r\n        onValueChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class SvPaletteController {\r\n        constructor(doc, config) {\r\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\r\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\r\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\r\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\r\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new SvPaletteView(doc, {\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.ptHandler_ = new PointerHandler(this.view.element);\r\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\r\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\r\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\r\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\r\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\r\n        }\r\n        handlePointerEvent_(d, opts) {\r\n            if (!d.point) {\r\n                return;\r\n            }\r\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\r\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\r\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\r\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\r\n        }\r\n        onPointerDown_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerMove_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerUp_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n        onKeyDown_(ev) {\r\n            if (isArrowKey(ev.key)) {\r\n                ev.preventDefault();\r\n            }\r\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\r\n            const baseStep = getBaseStepForColor(false);\r\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\r\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\r\n            if (ds === 0 && dv === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onKeyUp_(ev) {\r\n            const baseStep = getBaseStepForColor(false);\r\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\r\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\r\n            if (ds === 0 && dv === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(this.value.rawValue, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    class ColorPickerController {\r\n        constructor(doc, config) {\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.hPaletteC_ = new HPaletteController(doc, {\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.svPaletteC_ = new SvPaletteController(doc, {\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.alphaIcs_ = config.supportsAlpha\r\n                ? {\r\n                    palette: new APaletteController(doc, {\r\n                        value: this.value,\r\n                        viewProps: this.viewProps,\r\n                    }),\r\n                    text: new NumberTextController(doc, {\r\n                        parser: parseNumber,\r\n                        baseStep: 0.1,\r\n                        props: ValueMap.fromObject({\r\n                            draggingScale: 0.01,\r\n                            formatter: createNumberFormatter(2),\r\n                        }),\r\n                        value: createValue(0, {\r\n                            constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\r\n                        }),\r\n                        viewProps: this.viewProps,\r\n                    }),\r\n                }\r\n                : null;\r\n            if (this.alphaIcs_) {\r\n                connectValues({\r\n                    primary: this.value,\r\n                    secondary: this.alphaIcs_.text.value,\r\n                    forward: (p) => {\r\n                        return p.rawValue.getComponents()[3];\r\n                    },\r\n                    backward: (p, s) => {\r\n                        const comps = p.rawValue.getComponents();\r\n                        comps[3] = s.rawValue;\r\n                        return new Color(comps, p.rawValue.mode);\r\n                    },\r\n                });\r\n            }\r\n            this.textC_ = new ColorTextController(doc, {\r\n                colorType: config.colorType,\r\n                parser: parseNumber,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view = new ColorPickerView(doc, {\r\n                alphaViews: this.alphaIcs_\r\n                    ? {\r\n                        palette: this.alphaIcs_.palette.view,\r\n                        text: this.alphaIcs_.text.view,\r\n                    }\r\n                    : null,\r\n                hPaletteView: this.hPaletteC_.view,\r\n                supportsAlpha: config.supportsAlpha,\r\n                svPaletteView: this.svPaletteC_.view,\r\n                textView: this.textC_.view,\r\n                viewProps: this.viewProps,\r\n            });\r\n        }\r\n        get textController() {\r\n            return this.textC_;\r\n        }\r\n    }\r\n\r\n    const className$6 = ClassName('colsw');\r\n    class ColorSwatchView {\r\n        constructor(doc, config) {\r\n            this.onValueChange_ = this.onValueChange_.bind(this);\r\n            config.value.emitter.on('change', this.onValueChange_);\r\n            this.value = config.value;\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$6());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const swatchElem = doc.createElement('div');\r\n            swatchElem.classList.add(className$6('sw'));\r\n            this.element.appendChild(swatchElem);\r\n            this.swatchElem_ = swatchElem;\r\n            const buttonElem = doc.createElement('button');\r\n            buttonElem.classList.add(className$6('b'));\r\n            config.viewProps.bindDisabled(buttonElem);\r\n            this.element.appendChild(buttonElem);\r\n            this.buttonElement = buttonElem;\r\n            this.update_();\r\n        }\r\n        update_() {\r\n            const value = this.value.rawValue;\r\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\r\n        }\r\n        onValueChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class ColorSwatchController {\r\n        constructor(doc, config) {\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new ColorSwatchView(doc, {\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n        }\r\n    }\r\n\r\n    class ColorController {\r\n        constructor(doc, config) {\r\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\r\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\r\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\r\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.foldable_ = Foldable.create(config.expanded);\r\n            this.swatchC_ = new ColorSwatchController(doc, {\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            const buttonElem = this.swatchC_.view.buttonElement;\r\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\r\n            buttonElem.addEventListener('click', this.onButtonClick_);\r\n            this.textC_ = new TextController(doc, {\r\n                parser: config.parser,\r\n                props: ValueMap.fromObject({\r\n                    formatter: config.formatter,\r\n                }),\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view = new ColorView(doc, {\r\n                foldable: this.foldable_,\r\n                pickerLayout: config.pickerLayout,\r\n            });\r\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\r\n            this.view.textElement.appendChild(this.textC_.view.element);\r\n            this.popC_ =\r\n                config.pickerLayout === 'popup'\r\n                    ? new PopupController(doc, {\r\n                        viewProps: this.viewProps,\r\n                    })\r\n                    : null;\r\n            const pickerC = new ColorPickerController(doc, {\r\n                colorType: config.colorType,\r\n                supportsAlpha: config.supportsAlpha,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            pickerC.view.allFocusableElements.forEach((elem) => {\r\n                elem.addEventListener('blur', this.onPopupChildBlur_);\r\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\r\n            });\r\n            this.pickerC_ = pickerC;\r\n            if (this.popC_) {\r\n                this.view.element.appendChild(this.popC_.view.element);\r\n                this.popC_.view.element.appendChild(pickerC.view.element);\r\n                connectValues({\r\n                    primary: this.foldable_.value('expanded'),\r\n                    secondary: this.popC_.shows,\r\n                    forward: (p) => p.rawValue,\r\n                    backward: (_, s) => s.rawValue,\r\n                });\r\n            }\r\n            else if (this.view.pickerElement) {\r\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\r\n                bindFoldable(this.foldable_, this.view.pickerElement);\r\n            }\r\n        }\r\n        get textController() {\r\n            return this.textC_;\r\n        }\r\n        onButtonBlur_(e) {\r\n            if (!this.popC_) {\r\n                return;\r\n            }\r\n            const elem = this.view.element;\r\n            const nextTarget = forceCast(e.relatedTarget);\r\n            if (!nextTarget || !elem.contains(nextTarget)) {\r\n                this.popC_.shows.rawValue = false;\r\n            }\r\n        }\r\n        onButtonClick_() {\r\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\r\n            if (this.foldable_.get('expanded')) {\r\n                this.pickerC_.view.allFocusableElements[0].focus();\r\n            }\r\n        }\r\n        onPopupChildBlur_(ev) {\r\n            if (!this.popC_) {\r\n                return;\r\n            }\r\n            const elem = this.popC_.view.element;\r\n            const nextTarget = findNextTarget(ev);\r\n            if (nextTarget && elem.contains(nextTarget)) {\r\n                return;\r\n            }\r\n            if (nextTarget &&\r\n                nextTarget === this.swatchC_.view.buttonElement &&\r\n                !supportsTouch(elem.ownerDocument)) {\r\n                return;\r\n            }\r\n            this.popC_.shows.rawValue = false;\r\n        }\r\n        onPopupChildKeydown_(ev) {\r\n            if (this.popC_) {\r\n                if (ev.key === 'Escape') {\r\n                    this.popC_.shows.rawValue = false;\r\n                }\r\n            }\r\n            else if (this.view.pickerElement) {\r\n                if (ev.key === 'Escape') {\r\n                    this.swatchC_.view.buttonElement.focus();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function colorFromObject(value, opt_type) {\r\n        if (Color.isColorObject(value)) {\r\n            return Color.fromObject(value, opt_type);\r\n        }\r\n        return Color.black(opt_type);\r\n    }\r\n    function colorToRgbNumber(value) {\r\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\r\n            return (result << 8) | (Math.floor(comp) & 0xff);\r\n        }, 0);\r\n    }\r\n    function colorToRgbaNumber(value) {\r\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\r\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\r\n            return (result << 8) | hex;\r\n        }, 0) >>> 0);\r\n    }\r\n    function numberToRgbColor(num) {\r\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\r\n    }\r\n    function numberToRgbaColor(num) {\r\n        return new Color([\r\n            (num >> 24) & 0xff,\r\n            (num >> 16) & 0xff,\r\n            (num >> 8) & 0xff,\r\n            mapRange(num & 0xff, 0, 255, 0, 1),\r\n        ], 'rgb');\r\n    }\r\n    function colorFromRgbNumber(value) {\r\n        if (typeof value !== 'number') {\r\n            return Color.black();\r\n        }\r\n        return numberToRgbColor(value);\r\n    }\r\n    function colorFromRgbaNumber(value) {\r\n        if (typeof value !== 'number') {\r\n            return Color.black();\r\n        }\r\n        return numberToRgbaColor(value);\r\n    }\r\n\r\n    function createColorStringWriter(format) {\r\n        const stringify = findColorStringifier(format);\r\n        return stringify\r\n            ? (target, value) => {\r\n                writePrimitive(target, stringify(value));\r\n            }\r\n            : null;\r\n    }\r\n    function createColorNumberWriter(supportsAlpha) {\r\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\r\n        return (target, value) => {\r\n            writePrimitive(target, colorToNumber(value));\r\n        };\r\n    }\r\n    function writeRgbaColorObject(target, value, opt_type) {\r\n        const obj = value.toRgbaObject(opt_type);\r\n        target.writeProperty('r', obj.r);\r\n        target.writeProperty('g', obj.g);\r\n        target.writeProperty('b', obj.b);\r\n        target.writeProperty('a', obj.a);\r\n    }\r\n    function writeRgbColorObject(target, value, opt_type) {\r\n        const obj = value.toRgbaObject(opt_type);\r\n        target.writeProperty('r', obj.r);\r\n        target.writeProperty('g', obj.g);\r\n        target.writeProperty('b', obj.b);\r\n    }\r\n    function createColorObjectWriter(supportsAlpha, opt_type) {\r\n        return (target, inValue) => {\r\n            if (supportsAlpha) {\r\n                writeRgbaColorObject(target, inValue, opt_type);\r\n            }\r\n            else {\r\n                writeRgbColorObject(target, inValue, opt_type);\r\n            }\r\n        };\r\n    }\r\n\r\n    function shouldSupportAlpha$1(inputParams) {\r\n        var _a;\r\n        if ((inputParams === null || inputParams === void 0 ? void 0 : inputParams.alpha) || ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    function createFormatter$1(supportsAlpha) {\r\n        return supportsAlpha\r\n            ? (v) => colorToHexRgbaString(v, '0x')\r\n            : (v) => colorToHexRgbString(v, '0x');\r\n    }\r\n    function isForColor(params) {\r\n        if ('color' in params) {\r\n            return true;\r\n        }\r\n        if ('view' in params && params.view === 'color') {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    const NumberColorInputPlugin = {\r\n        id: 'input-color-number',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (typeof value !== 'number') {\r\n                return null;\r\n            }\r\n            if (!isForColor(params)) {\r\n                return null;\r\n            }\r\n            const result = parseColorInputParams(params);\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (args) => {\r\n                return shouldSupportAlpha$1(args.params)\r\n                    ? colorFromRgbaNumber\r\n                    : colorFromRgbNumber;\r\n            },\r\n            equals: Color.equals,\r\n            writer: (args) => {\r\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\r\n            },\r\n        },\r\n        controller: (args) => {\r\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\r\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\r\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\r\n            return new ColorController(args.document, {\r\n                colorType: 'int',\r\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\r\n                formatter: createFormatter$1(supportsAlpha),\r\n                parser: createColorStringParser('int'),\r\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\r\n                supportsAlpha: supportsAlpha,\r\n                value: args.value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    function shouldSupportAlpha(initialValue) {\r\n        return Color.isRgbaColorObject(initialValue);\r\n    }\r\n    function createColorObjectReader(opt_type) {\r\n        return (value) => {\r\n            return colorFromObject(value, opt_type);\r\n        };\r\n    }\r\n    function createColorObjectFormatter(supportsAlpha, type) {\r\n        return (value) => {\r\n            if (supportsAlpha) {\r\n                return colorToObjectRgbaString(value, type);\r\n            }\r\n            return colorToObjectRgbString(value, type);\r\n        };\r\n    }\r\n    const ObjectColorInputPlugin = {\r\n        id: 'input-color-object',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (!Color.isColorObject(value)) {\r\n                return null;\r\n            }\r\n            const result = parseColorInputParams(params);\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (args) => createColorObjectReader(extractColorType(args.params)),\r\n            equals: Color.equals,\r\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), extractColorType(args.params)),\r\n        },\r\n        controller: (args) => {\r\n            var _a;\r\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\r\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\r\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\r\n            const type = (_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int';\r\n            return new ColorController(args.document, {\r\n                colorType: type,\r\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\r\n                formatter: createColorObjectFormatter(supportsAlpha, type),\r\n                parser: createColorStringParser(type),\r\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\r\n                supportsAlpha: supportsAlpha,\r\n                value: args.value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    const StringColorInputPlugin = {\r\n        id: 'input-color-string',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (typeof value !== 'string') {\r\n                return null;\r\n            }\r\n            if ('view' in params && params.view === 'text') {\r\n                return null;\r\n            }\r\n            const format = detectStringColorFormat(value, extractColorType(params));\r\n            if (!format) {\r\n                return null;\r\n            }\r\n            const stringifier = findColorStringifier(format);\r\n            if (!stringifier) {\r\n                return null;\r\n            }\r\n            const result = parseColorInputParams(params);\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (args) => { var _a; return createColorStringBindingReader((_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int'); },\r\n            equals: Color.equals,\r\n            writer: (args) => {\r\n                const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\r\n                if (!format) {\r\n                    throw TpError.shouldNeverHappen();\r\n                }\r\n                const writer = createColorStringWriter(format);\r\n                if (!writer) {\r\n                    throw TpError.notBindable();\r\n                }\r\n                return writer;\r\n            },\r\n        },\r\n        controller: (args) => {\r\n            const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\r\n            if (!format) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            const stringifier = findColorStringifier(format);\r\n            if (!stringifier) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\r\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\r\n            return new ColorController(args.document, {\r\n                colorType: format.type,\r\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\r\n                formatter: stringifier,\r\n                parser: createColorStringParser(format.type),\r\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\r\n                supportsAlpha: format.alpha,\r\n                value: args.value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    class PointNdConstraint {\r\n        constructor(config) {\r\n            this.components = config.components;\r\n            this.asm_ = config.assembly;\r\n        }\r\n        constrain(value) {\r\n            const comps = this.asm_\r\n                .toComponents(value)\r\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\r\n            return this.asm_.fromComponents(comps);\r\n        }\r\n    }\r\n\r\n    const className$5 = ClassName('pndtxt');\r\n    class PointNdTextView {\r\n        constructor(doc, config) {\r\n            this.textViews = config.textViews;\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$5());\r\n            this.textViews.forEach((v) => {\r\n                const axisElem = doc.createElement('div');\r\n                axisElem.classList.add(className$5('a'));\r\n                axisElem.appendChild(v.element);\r\n                this.element.appendChild(axisElem);\r\n            });\r\n        }\r\n    }\r\n\r\n    function createAxisController(doc, config, index) {\r\n        return new NumberTextController(doc, {\r\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\r\n            baseStep: config.axes[index].baseStep,\r\n            parser: config.parser,\r\n            props: config.axes[index].textProps,\r\n            value: createValue(0, {\r\n                constraint: config.axes[index].constraint,\r\n            }),\r\n            viewProps: config.viewProps,\r\n        });\r\n    }\r\n    class PointNdTextController {\r\n        constructor(doc, config) {\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\r\n            this.acs_.forEach((c, index) => {\r\n                connectValues({\r\n                    primary: this.value,\r\n                    secondary: c.value,\r\n                    forward: (p) => {\r\n                        return config.assembly.toComponents(p.rawValue)[index];\r\n                    },\r\n                    backward: (p, s) => {\r\n                        const comps = config.assembly.toComponents(p.rawValue);\r\n                        comps[index] = s.rawValue;\r\n                        return config.assembly.fromComponents(comps);\r\n                    },\r\n                });\r\n            });\r\n            this.view = new PointNdTextView(doc, {\r\n                textViews: this.acs_.map((ac) => ac.view),\r\n            });\r\n        }\r\n    }\r\n\r\n    function createStepConstraint(params, initialValue) {\r\n        if ('step' in params && !isEmpty(params.step)) {\r\n            return new StepConstraint(params.step, initialValue);\r\n        }\r\n        return null;\r\n    }\r\n    function createRangeConstraint(params) {\r\n        if (!isEmpty(params.max) && !isEmpty(params.min)) {\r\n            return new DefiniteRangeConstraint({\r\n                max: params.max,\r\n                min: params.min,\r\n            });\r\n        }\r\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\r\n            return new RangeConstraint({\r\n                max: params.max,\r\n                min: params.min,\r\n            });\r\n        }\r\n        return null;\r\n    }\r\n    function findNumberRange(c) {\r\n        const drc = findConstraint(c, DefiniteRangeConstraint);\r\n        if (drc) {\r\n            return [drc.values.get('min'), drc.values.get('max')];\r\n        }\r\n        const rc = findConstraint(c, RangeConstraint);\r\n        if (rc) {\r\n            return [rc.minValue, rc.maxValue];\r\n        }\r\n        return [undefined, undefined];\r\n    }\r\n    function createConstraint$4(params,\r\n    initialValue) {\r\n        const constraints = [];\r\n        const sc = createStepConstraint(params, initialValue);\r\n        if (sc) {\r\n            constraints.push(sc);\r\n        }\r\n        const rc = createRangeConstraint(params);\r\n        if (rc) {\r\n            constraints.push(rc);\r\n        }\r\n        const lc = createListConstraint(params.options);\r\n        if (lc) {\r\n            constraints.push(lc);\r\n        }\r\n        return new CompositeConstraint(constraints);\r\n    }\r\n    const NumberInputPlugin = {\r\n        id: 'input-number',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (typeof value !== 'number') {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                format: p.optional.function,\r\n                max: p.optional.number,\r\n                min: p.optional.number,\r\n                options: p.optional.custom(parseListOptions),\r\n                step: p.optional.number,\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (_args) => numberFromUnknown,\r\n            constraint: (args) => createConstraint$4(args.params, args.initialValue),\r\n            writer: (_args) => writePrimitive,\r\n        },\r\n        controller: (args) => {\r\n            var _a;\r\n            const value = args.value;\r\n            const c = args.constraint;\r\n            const lc = c && findConstraint(c, ListConstraint);\r\n            if (lc) {\r\n                return new ListController(args.document, {\r\n                    props: new ValueMap({\r\n                        options: lc.values.value('options'),\r\n                    }),\r\n                    value: value,\r\n                    viewProps: args.viewProps,\r\n                });\r\n            }\r\n            const formatter = (_a = ('format' in args.params ? args.params.format : undefined)) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\r\n            const drc = c && findConstraint(c, DefiniteRangeConstraint);\r\n            if (drc) {\r\n                return new SliderTextController(args.document, {\r\n                    baseStep: getBaseStep(c),\r\n                    parser: parseNumber,\r\n                    sliderProps: new ValueMap({\r\n                        maxValue: drc.values.value('max'),\r\n                        minValue: drc.values.value('min'),\r\n                    }),\r\n                    textProps: ValueMap.fromObject({\r\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\r\n                        formatter: formatter,\r\n                    }),\r\n                    value: value,\r\n                    viewProps: args.viewProps,\r\n                });\r\n            }\r\n            return new NumberTextController(args.document, {\r\n                baseStep: getBaseStep(c),\r\n                parser: parseNumber,\r\n                props: ValueMap.fromObject({\r\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\r\n                    formatter: formatter,\r\n                }),\r\n                value: value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    class Point2d {\r\n        constructor(x = 0, y = 0) {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n        getComponents() {\r\n            return [this.x, this.y];\r\n        }\r\n        static isObject(obj) {\r\n            if (isEmpty(obj)) {\r\n                return false;\r\n            }\r\n            const x = obj.x;\r\n            const y = obj.y;\r\n            if (typeof x !== 'number' || typeof y !== 'number') {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        static equals(v1, v2) {\r\n            return v1.x === v2.x && v1.y === v2.y;\r\n        }\r\n        toObject() {\r\n            return {\r\n                x: this.x,\r\n                y: this.y,\r\n            };\r\n        }\r\n    }\r\n    const Point2dAssembly = {\r\n        toComponents: (p) => p.getComponents(),\r\n        fromComponents: (comps) => new Point2d(...comps),\r\n    };\r\n\r\n    const className$4 = ClassName('p2d');\r\n    class Point2dView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$4());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\r\n            const headElem = doc.createElement('div');\r\n            headElem.classList.add(className$4('h'));\r\n            this.element.appendChild(headElem);\r\n            const buttonElem = doc.createElement('button');\r\n            buttonElem.classList.add(className$4('b'));\r\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\r\n            config.viewProps.bindDisabled(buttonElem);\r\n            headElem.appendChild(buttonElem);\r\n            this.buttonElement = buttonElem;\r\n            const textElem = doc.createElement('div');\r\n            textElem.classList.add(className$4('t'));\r\n            headElem.appendChild(textElem);\r\n            this.textElement = textElem;\r\n            if (config.pickerLayout === 'inline') {\r\n                const pickerElem = doc.createElement('div');\r\n                pickerElem.classList.add(className$4('p'));\r\n                this.element.appendChild(pickerElem);\r\n                this.pickerElement = pickerElem;\r\n            }\r\n            else {\r\n                this.pickerElement = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    const className$3 = ClassName('p2dp');\r\n    class Point2dPickerView {\r\n        constructor(doc, config) {\r\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\r\n            this.onValueChange_ = this.onValueChange_.bind(this);\r\n            this.invertsY_ = config.invertsY;\r\n            this.maxValue_ = config.maxValue;\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$3());\r\n            if (config.layout === 'popup') {\r\n                this.element.classList.add(className$3(undefined, 'p'));\r\n            }\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const padElem = doc.createElement('div');\r\n            padElem.classList.add(className$3('p'));\r\n            config.viewProps.bindTabIndex(padElem);\r\n            this.element.appendChild(padElem);\r\n            this.padElement = padElem;\r\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\r\n            svgElem.classList.add(className$3('g'));\r\n            this.padElement.appendChild(svgElem);\r\n            this.svgElem_ = svgElem;\r\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\r\n            xAxisElem.classList.add(className$3('ax'));\r\n            xAxisElem.setAttributeNS(null, 'x1', '0');\r\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\r\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\r\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\r\n            this.svgElem_.appendChild(xAxisElem);\r\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\r\n            yAxisElem.classList.add(className$3('ax'));\r\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\r\n            yAxisElem.setAttributeNS(null, 'y1', '0');\r\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\r\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\r\n            this.svgElem_.appendChild(yAxisElem);\r\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\r\n            lineElem.classList.add(className$3('l'));\r\n            lineElem.setAttributeNS(null, 'x1', '50%');\r\n            lineElem.setAttributeNS(null, 'y1', '50%');\r\n            this.svgElem_.appendChild(lineElem);\r\n            this.lineElem_ = lineElem;\r\n            const markerElem = doc.createElement('div');\r\n            markerElem.classList.add(className$3('m'));\r\n            this.padElement.appendChild(markerElem);\r\n            this.markerElem_ = markerElem;\r\n            config.value.emitter.on('change', this.onValueChange_);\r\n            this.value = config.value;\r\n            this.update_();\r\n        }\r\n        get allFocusableElements() {\r\n            return [this.padElement];\r\n        }\r\n        update_() {\r\n            const [x, y] = this.value.rawValue.getComponents();\r\n            const max = this.maxValue_;\r\n            const px = mapRange(x, -max, +max, 0, 100);\r\n            const py = mapRange(y, -max, +max, 0, 100);\r\n            const ipy = this.invertsY_ ? 100 - py : py;\r\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\r\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\r\n            this.markerElem_.style.left = `${px}%`;\r\n            this.markerElem_.style.top = `${ipy}%`;\r\n        }\r\n        onValueChange_() {\r\n            this.update_();\r\n        }\r\n        onFoldableChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    function computeOffset(ev, baseSteps, invertsY) {\r\n        return [\r\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\r\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\r\n        ];\r\n    }\r\n    class Point2dPickerController {\r\n        constructor(doc, config) {\r\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\r\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\r\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\r\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\r\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.baseSteps_ = config.baseSteps;\r\n            this.maxValue_ = config.maxValue;\r\n            this.invertsY_ = config.invertsY;\r\n            this.view = new Point2dPickerView(doc, {\r\n                invertsY: this.invertsY_,\r\n                layout: config.layout,\r\n                maxValue: this.maxValue_,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\r\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\r\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\r\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\r\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\r\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\r\n        }\r\n        handlePointerEvent_(d, opts) {\r\n            if (!d.point) {\r\n                return;\r\n            }\r\n            const max = this.maxValue_;\r\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\r\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\r\n            this.value.setRawValue(new Point2d(px, py), opts);\r\n        }\r\n        onPointerDown_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerMove_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPointerUp_(ev) {\r\n            this.handlePointerEvent_(ev.data, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n        onPadKeyDown_(ev) {\r\n            if (isArrowKey(ev.key)) {\r\n                ev.preventDefault();\r\n            }\r\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\r\n            if (dx === 0 && dy === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\r\n                forceEmit: false,\r\n                last: false,\r\n            });\r\n        }\r\n        onPadKeyUp_(ev) {\r\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\r\n            if (dx === 0 && dy === 0) {\r\n                return;\r\n            }\r\n            this.value.setRawValue(this.value.rawValue, {\r\n                forceEmit: true,\r\n                last: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    class Point2dController {\r\n        constructor(doc, config) {\r\n            var _a, _b;\r\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\r\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\r\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\r\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.foldable_ = Foldable.create(config.expanded);\r\n            this.popC_ =\r\n                config.pickerLayout === 'popup'\r\n                    ? new PopupController(doc, {\r\n                        viewProps: this.viewProps,\r\n                    })\r\n                    : null;\r\n            const padC = new Point2dPickerController(doc, {\r\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\r\n                invertsY: config.invertsY,\r\n                layout: config.pickerLayout,\r\n                maxValue: config.maxValue,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            padC.view.allFocusableElements.forEach((elem) => {\r\n                elem.addEventListener('blur', this.onPopupChildBlur_);\r\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\r\n            });\r\n            this.pickerC_ = padC;\r\n            this.textC_ = new PointNdTextController(doc, {\r\n                assembly: Point2dAssembly,\r\n                axes: config.axes,\r\n                parser: config.parser,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view = new Point2dView(doc, {\r\n                expanded: this.foldable_.value('expanded'),\r\n                pickerLayout: config.pickerLayout,\r\n                viewProps: this.viewProps,\r\n            });\r\n            this.view.textElement.appendChild(this.textC_.view.element);\r\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\r\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\r\n            if (this.popC_) {\r\n                this.view.element.appendChild(this.popC_.view.element);\r\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\r\n                connectValues({\r\n                    primary: this.foldable_.value('expanded'),\r\n                    secondary: this.popC_.shows,\r\n                    forward: (p) => p.rawValue,\r\n                    backward: (_, s) => s.rawValue,\r\n                });\r\n            }\r\n            else if (this.view.pickerElement) {\r\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\r\n                bindFoldable(this.foldable_, this.view.pickerElement);\r\n            }\r\n        }\r\n        onPadButtonBlur_(e) {\r\n            if (!this.popC_) {\r\n                return;\r\n            }\r\n            const elem = this.view.element;\r\n            const nextTarget = forceCast(e.relatedTarget);\r\n            if (!nextTarget || !elem.contains(nextTarget)) {\r\n                this.popC_.shows.rawValue = false;\r\n            }\r\n        }\r\n        onPadButtonClick_() {\r\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\r\n            if (this.foldable_.get('expanded')) {\r\n                this.pickerC_.view.allFocusableElements[0].focus();\r\n            }\r\n        }\r\n        onPopupChildBlur_(ev) {\r\n            if (!this.popC_) {\r\n                return;\r\n            }\r\n            const elem = this.popC_.view.element;\r\n            const nextTarget = findNextTarget(ev);\r\n            if (nextTarget && elem.contains(nextTarget)) {\r\n                return;\r\n            }\r\n            if (nextTarget &&\r\n                nextTarget === this.view.buttonElement &&\r\n                !supportsTouch(elem.ownerDocument)) {\r\n                return;\r\n            }\r\n            this.popC_.shows.rawValue = false;\r\n        }\r\n        onPopupChildKeydown_(ev) {\r\n            if (this.popC_) {\r\n                if (ev.key === 'Escape') {\r\n                    this.popC_.shows.rawValue = false;\r\n                }\r\n            }\r\n            else if (this.view.pickerElement) {\r\n                if (ev.key === 'Escape') {\r\n                    this.view.buttonElement.focus();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    class Point3d {\r\n        constructor(x = 0, y = 0, z = 0) {\r\n            this.x = x;\r\n            this.y = y;\r\n            this.z = z;\r\n        }\r\n        getComponents() {\r\n            return [this.x, this.y, this.z];\r\n        }\r\n        static isObject(obj) {\r\n            if (isEmpty(obj)) {\r\n                return false;\r\n            }\r\n            const x = obj.x;\r\n            const y = obj.y;\r\n            const z = obj.z;\r\n            if (typeof x !== 'number' ||\r\n                typeof y !== 'number' ||\r\n                typeof z !== 'number') {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        static equals(v1, v2) {\r\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\r\n        }\r\n        toObject() {\r\n            return {\r\n                x: this.x,\r\n                y: this.y,\r\n                z: this.z,\r\n            };\r\n        }\r\n    }\r\n    const Point3dAssembly = {\r\n        toComponents: (p) => p.getComponents(),\r\n        fromComponents: (comps) => new Point3d(...comps),\r\n    };\r\n\r\n    function point3dFromUnknown(value) {\r\n        return Point3d.isObject(value)\r\n            ? new Point3d(value.x, value.y, value.z)\r\n            : new Point3d();\r\n    }\r\n    function writePoint3d(target, value) {\r\n        target.writeProperty('x', value.x);\r\n        target.writeProperty('y', value.y);\r\n        target.writeProperty('z', value.z);\r\n    }\r\n\r\n    function createConstraint$3(params, initialValue) {\r\n        return new PointNdConstraint({\r\n            assembly: Point3dAssembly,\r\n            components: [\r\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\r\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\r\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\r\n            ],\r\n        });\r\n    }\r\n    function createAxis$2(initialValue, constraint) {\r\n        return {\r\n            baseStep: getBaseStep(constraint),\r\n            constraint: constraint,\r\n            textProps: ValueMap.fromObject({\r\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\r\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\r\n            }),\r\n        };\r\n    }\r\n    const Point3dInputPlugin = {\r\n        id: 'input-point3d',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (!Point3d.isObject(value)) {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                x: p.optional.custom(parsePointDimensionParams),\r\n                y: p.optional.custom(parsePointDimensionParams),\r\n                z: p.optional.custom(parsePointDimensionParams),\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (_args) => point3dFromUnknown,\r\n            constraint: (args) => createConstraint$3(args.params, args.initialValue),\r\n            equals: Point3d.equals,\r\n            writer: (_args) => writePoint3d,\r\n        },\r\n        controller: (args) => {\r\n            const value = args.value;\r\n            const c = args.constraint;\r\n            if (!(c instanceof PointNdConstraint)) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            return new PointNdTextController(args.document, {\r\n                assembly: Point3dAssembly,\r\n                axes: [\r\n                    createAxis$2(value.rawValue.x, c.components[0]),\r\n                    createAxis$2(value.rawValue.y, c.components[1]),\r\n                    createAxis$2(value.rawValue.z, c.components[2]),\r\n                ],\r\n                parser: parseNumber,\r\n                value: value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    class Point4d {\r\n        constructor(x = 0, y = 0, z = 0, w = 0) {\r\n            this.x = x;\r\n            this.y = y;\r\n            this.z = z;\r\n            this.w = w;\r\n        }\r\n        getComponents() {\r\n            return [this.x, this.y, this.z, this.w];\r\n        }\r\n        static isObject(obj) {\r\n            if (isEmpty(obj)) {\r\n                return false;\r\n            }\r\n            const x = obj.x;\r\n            const y = obj.y;\r\n            const z = obj.z;\r\n            const w = obj.w;\r\n            if (typeof x !== 'number' ||\r\n                typeof y !== 'number' ||\r\n                typeof z !== 'number' ||\r\n                typeof w !== 'number') {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        static equals(v1, v2) {\r\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\r\n        }\r\n        toObject() {\r\n            return {\r\n                x: this.x,\r\n                y: this.y,\r\n                z: this.z,\r\n                w: this.w,\r\n            };\r\n        }\r\n    }\r\n    const Point4dAssembly = {\r\n        toComponents: (p) => p.getComponents(),\r\n        fromComponents: (comps) => new Point4d(...comps),\r\n    };\r\n\r\n    function point4dFromUnknown(value) {\r\n        return Point4d.isObject(value)\r\n            ? new Point4d(value.x, value.y, value.z, value.w)\r\n            : new Point4d();\r\n    }\r\n    function writePoint4d(target, value) {\r\n        target.writeProperty('x', value.x);\r\n        target.writeProperty('y', value.y);\r\n        target.writeProperty('z', value.z);\r\n        target.writeProperty('w', value.w);\r\n    }\r\n\r\n    function createConstraint$2(params, initialValue) {\r\n        return new PointNdConstraint({\r\n            assembly: Point4dAssembly,\r\n            components: [\r\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\r\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\r\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\r\n                createDimensionConstraint('w' in params ? params.w : undefined, initialValue.w),\r\n            ],\r\n        });\r\n    }\r\n    function createAxis$1(initialValue, constraint) {\r\n        return {\r\n            baseStep: getBaseStep(constraint),\r\n            constraint: constraint,\r\n            textProps: ValueMap.fromObject({\r\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\r\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\r\n            }),\r\n        };\r\n    }\r\n    const Point4dInputPlugin = {\r\n        id: 'input-point4d',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (!Point4d.isObject(value)) {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                x: p.optional.custom(parsePointDimensionParams),\r\n                y: p.optional.custom(parsePointDimensionParams),\r\n                z: p.optional.custom(parsePointDimensionParams),\r\n                w: p.optional.custom(parsePointDimensionParams),\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (_args) => point4dFromUnknown,\r\n            constraint: (args) => createConstraint$2(args.params, args.initialValue),\r\n            equals: Point4d.equals,\r\n            writer: (_args) => writePoint4d,\r\n        },\r\n        controller: (args) => {\r\n            const value = args.value;\r\n            const c = args.constraint;\r\n            if (!(c instanceof PointNdConstraint)) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            return new PointNdTextController(args.document, {\r\n                assembly: Point4dAssembly,\r\n                axes: value.rawValue\r\n                    .getComponents()\r\n                    .map((comp, index) => createAxis$1(comp, c.components[index])),\r\n                parser: parseNumber,\r\n                value: value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    function createConstraint$1(params) {\r\n        const constraints = [];\r\n        const lc = createListConstraint(params.options);\r\n        if (lc) {\r\n            constraints.push(lc);\r\n        }\r\n        return new CompositeConstraint(constraints);\r\n    }\r\n    const StringInputPlugin = {\r\n        id: 'input-string',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (typeof value !== 'string') {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                options: p.optional.custom(parseListOptions),\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (_args) => stringFromUnknown,\r\n            constraint: (args) => createConstraint$1(args.params),\r\n            writer: (_args) => writePrimitive,\r\n        },\r\n        controller: (args) => {\r\n            const doc = args.document;\r\n            const value = args.value;\r\n            const c = args.constraint;\r\n            const lc = c && findConstraint(c, ListConstraint);\r\n            if (lc) {\r\n                return new ListController(doc, {\r\n                    props: new ValueMap({\r\n                        options: lc.values.value('options'),\r\n                    }),\r\n                    value: value,\r\n                    viewProps: args.viewProps,\r\n                });\r\n            }\r\n            return new TextController(doc, {\r\n                parser: (v) => v,\r\n                props: ValueMap.fromObject({\r\n                    formatter: formatString,\r\n                }),\r\n                value: value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    const Constants = {\r\n        monitor: {\r\n            defaultInterval: 200,\r\n            defaultLineCount: 3,\r\n        },\r\n    };\r\n\r\n    const className$2 = ClassName('mll');\r\n    class MultiLogView {\r\n        constructor(doc, config) {\r\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\r\n            this.formatter_ = config.formatter;\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$2());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const textareaElem = doc.createElement('textarea');\r\n            textareaElem.classList.add(className$2('i'));\r\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\r\n            textareaElem.readOnly = true;\r\n            config.viewProps.bindDisabled(textareaElem);\r\n            this.element.appendChild(textareaElem);\r\n            this.textareaElem_ = textareaElem;\r\n            config.value.emitter.on('change', this.onValueUpdate_);\r\n            this.value = config.value;\r\n            this.update_();\r\n        }\r\n        update_() {\r\n            const elem = this.textareaElem_;\r\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\r\n            const lines = [];\r\n            this.value.rawValue.forEach((value) => {\r\n                if (value !== undefined) {\r\n                    lines.push(this.formatter_(value));\r\n                }\r\n            });\r\n            elem.textContent = lines.join('\\n');\r\n            if (shouldScroll) {\r\n                elem.scrollTop = elem.scrollHeight;\r\n            }\r\n        }\r\n        onValueUpdate_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class MultiLogController {\r\n        constructor(doc, config) {\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new MultiLogView(doc, {\r\n                formatter: config.formatter,\r\n                lineCount: config.lineCount,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n        }\r\n    }\r\n\r\n    const className$1 = ClassName('sgl');\r\n    class SingleLogView {\r\n        constructor(doc, config) {\r\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\r\n            this.formatter_ = config.formatter;\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className$1());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const inputElem = doc.createElement('input');\r\n            inputElem.classList.add(className$1('i'));\r\n            inputElem.readOnly = true;\r\n            inputElem.type = 'text';\r\n            config.viewProps.bindDisabled(inputElem);\r\n            this.element.appendChild(inputElem);\r\n            this.inputElement = inputElem;\r\n            config.value.emitter.on('change', this.onValueUpdate_);\r\n            this.value = config.value;\r\n            this.update_();\r\n        }\r\n        update_() {\r\n            const values = this.value.rawValue;\r\n            const lastValue = values[values.length - 1];\r\n            this.inputElement.value =\r\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\r\n        }\r\n        onValueUpdate_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class SingleLogController {\r\n        constructor(doc, config) {\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.view = new SingleLogView(doc, {\r\n                formatter: config.formatter,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n        }\r\n    }\r\n\r\n    const BooleanMonitorPlugin = {\r\n        id: 'monitor-bool',\r\n        type: 'monitor',\r\n        accept: (value, params) => {\r\n            if (typeof value !== 'boolean') {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                lineCount: p.optional.number,\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (_args) => boolFromUnknown,\r\n        },\r\n        controller: (args) => {\r\n            var _a;\r\n            if (args.value.rawValue.length === 1) {\r\n                return new SingleLogController(args.document, {\r\n                    formatter: BooleanFormatter,\r\n                    value: args.value,\r\n                    viewProps: args.viewProps,\r\n                });\r\n            }\r\n            return new MultiLogController(args.document, {\r\n                formatter: BooleanFormatter,\r\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\r\n                value: args.value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    const className = ClassName('grl');\r\n    class GraphLogView {\r\n        constructor(doc, config) {\r\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\r\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className());\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            this.formatter_ = config.formatter;\r\n            this.props_ = config.props;\r\n            this.cursor_ = config.cursor;\r\n            this.cursor_.emitter.on('change', this.onCursorChange_);\r\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\r\n            svgElem.classList.add(className('g'));\r\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\r\n            this.element.appendChild(svgElem);\r\n            this.svgElem_ = svgElem;\r\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\r\n            this.svgElem_.appendChild(lineElem);\r\n            this.lineElem_ = lineElem;\r\n            const tooltipElem = doc.createElement('div');\r\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\r\n            this.element.appendChild(tooltipElem);\r\n            this.tooltipElem_ = tooltipElem;\r\n            config.value.emitter.on('change', this.onValueUpdate_);\r\n            this.value = config.value;\r\n            this.update_();\r\n        }\r\n        get graphElement() {\r\n            return this.svgElem_;\r\n        }\r\n        update_() {\r\n            const bounds = this.svgElem_.getBoundingClientRect();\r\n            const maxIndex = this.value.rawValue.length - 1;\r\n            const min = this.props_.get('minValue');\r\n            const max = this.props_.get('maxValue');\r\n            const points = [];\r\n            this.value.rawValue.forEach((v, index) => {\r\n                if (v === undefined) {\r\n                    return;\r\n                }\r\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\r\n                const y = mapRange(v, min, max, bounds.height, 0);\r\n                points.push([x, y].join(','));\r\n            });\r\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\r\n            const tooltipElem = this.tooltipElem_;\r\n            const value = this.value.rawValue[this.cursor_.rawValue];\r\n            if (value === undefined) {\r\n                tooltipElem.classList.remove(className('t', 'a'));\r\n                return;\r\n            }\r\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\r\n            const ty = mapRange(value, min, max, bounds.height, 0);\r\n            tooltipElem.style.left = `${tx}px`;\r\n            tooltipElem.style.top = `${ty}px`;\r\n            tooltipElem.textContent = `${this.formatter_(value)}`;\r\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\r\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\r\n                forceReflow(tooltipElem);\r\n                tooltipElem.classList.remove(className('t', 'in'));\r\n            }\r\n        }\r\n        onValueUpdate_() {\r\n            this.update_();\r\n        }\r\n        onCursorChange_() {\r\n            this.update_();\r\n        }\r\n    }\r\n\r\n    class GraphLogController {\r\n        constructor(doc, config) {\r\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\r\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\r\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\r\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\r\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\r\n            this.props_ = config.props;\r\n            this.value = config.value;\r\n            this.viewProps = config.viewProps;\r\n            this.cursor_ = createValue(-1);\r\n            this.view = new GraphLogView(doc, {\r\n                cursor: this.cursor_,\r\n                formatter: config.formatter,\r\n                lineCount: config.lineCount,\r\n                props: this.props_,\r\n                value: this.value,\r\n                viewProps: this.viewProps,\r\n            });\r\n            if (!supportsTouch(doc)) {\r\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\r\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\r\n            }\r\n            else {\r\n                const ph = new PointerHandler(this.view.element);\r\n                ph.emitter.on('down', this.onGraphPointerDown_);\r\n                ph.emitter.on('move', this.onGraphPointerMove_);\r\n                ph.emitter.on('up', this.onGraphPointerUp_);\r\n            }\r\n        }\r\n        onGraphMouseLeave_() {\r\n            this.cursor_.rawValue = -1;\r\n        }\r\n        onGraphMouseMove_(ev) {\r\n            const bounds = this.view.element.getBoundingClientRect();\r\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\r\n        }\r\n        onGraphPointerDown_(ev) {\r\n            this.onGraphPointerMove_(ev);\r\n        }\r\n        onGraphPointerMove_(ev) {\r\n            if (!ev.data.point) {\r\n                this.cursor_.rawValue = -1;\r\n                return;\r\n            }\r\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\r\n        }\r\n        onGraphPointerUp_() {\r\n            this.cursor_.rawValue = -1;\r\n        }\r\n    }\r\n\r\n    function createFormatter(params) {\r\n        return 'format' in params && !isEmpty(params.format)\r\n            ? params.format\r\n            : createNumberFormatter(2);\r\n    }\r\n    function createTextMonitor(args) {\r\n        var _a;\r\n        if (args.value.rawValue.length === 1) {\r\n            return new SingleLogController(args.document, {\r\n                formatter: createFormatter(args.params),\r\n                value: args.value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        }\r\n        return new MultiLogController(args.document, {\r\n            formatter: createFormatter(args.params),\r\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\r\n            value: args.value,\r\n            viewProps: args.viewProps,\r\n        });\r\n    }\r\n    function createGraphMonitor(args) {\r\n        var _a, _b, _c;\r\n        return new GraphLogController(args.document, {\r\n            formatter: createFormatter(args.params),\r\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\r\n            props: ValueMap.fromObject({\r\n                maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\r\n                minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\r\n            }),\r\n            value: args.value,\r\n            viewProps: args.viewProps,\r\n        });\r\n    }\r\n    function shouldShowGraph(params) {\r\n        return 'view' in params && params.view === 'graph';\r\n    }\r\n    const NumberMonitorPlugin = {\r\n        id: 'monitor-number',\r\n        type: 'monitor',\r\n        accept: (value, params) => {\r\n            if (typeof value !== 'number') {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                format: p.optional.function,\r\n                lineCount: p.optional.number,\r\n                max: p.optional.number,\r\n                min: p.optional.number,\r\n                view: p.optional.string,\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\r\n            reader: (_args) => numberFromUnknown,\r\n        },\r\n        controller: (args) => {\r\n            if (shouldShowGraph(args.params)) {\r\n                return createGraphMonitor(args);\r\n            }\r\n            return createTextMonitor(args);\r\n        },\r\n    };\r\n\r\n    const StringMonitorPlugin = {\r\n        id: 'monitor-string',\r\n        type: 'monitor',\r\n        accept: (value, params) => {\r\n            if (typeof value !== 'string') {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                lineCount: p.optional.number,\r\n                multiline: p.optional.boolean,\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (_args) => stringFromUnknown,\r\n        },\r\n        controller: (args) => {\r\n            var _a;\r\n            const value = args.value;\r\n            const multiline = value.rawValue.length > 1 ||\r\n                ('multiline' in args.params && args.params.multiline);\r\n            if (multiline) {\r\n                return new MultiLogController(args.document, {\r\n                    formatter: formatString,\r\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\r\n                    value: value,\r\n                    viewProps: args.viewProps,\r\n                });\r\n            }\r\n            return new SingleLogController(args.document, {\r\n                formatter: formatString,\r\n                value: value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    function createInputBindingController(plugin, args) {\r\n        var _a;\r\n        const result = plugin.accept(args.target.read(), args.params);\r\n        if (isEmpty(result)) {\r\n            return null;\r\n        }\r\n        const p = ParamsParsers;\r\n        const valueArgs = {\r\n            target: args.target,\r\n            initialValue: result.initialValue,\r\n            params: result.params,\r\n        };\r\n        const reader = plugin.binding.reader(valueArgs);\r\n        const constraint = plugin.binding.constraint\r\n            ? plugin.binding.constraint(valueArgs)\r\n            : undefined;\r\n        const value = createValue(reader(result.initialValue), {\r\n            constraint: constraint,\r\n            equals: plugin.binding.equals,\r\n        });\r\n        const binding = new InputBinding({\r\n            reader: reader,\r\n            target: args.target,\r\n            value: value,\r\n            writer: plugin.binding.writer(valueArgs),\r\n        });\r\n        const disabled = p.optional.boolean(args.params.disabled).value;\r\n        const hidden = p.optional.boolean(args.params.hidden).value;\r\n        const controller = plugin.controller({\r\n            constraint: constraint,\r\n            document: args.document,\r\n            initialValue: result.initialValue,\r\n            params: result.params,\r\n            value: binding.value,\r\n            viewProps: ViewProps.create({\r\n                disabled: disabled,\r\n                hidden: hidden,\r\n            }),\r\n        });\r\n        return new InputBindingController(args.document, {\r\n            binding: binding,\r\n            blade: createBlade(),\r\n            props: ValueMap.fromObject({\r\n                label: 'label' in args.params\r\n                    ? (_a = p.optional.string(args.params.label).value) !== null && _a !== void 0 ? _a : null\r\n                    : args.target.key,\r\n            }),\r\n            valueController: controller,\r\n        });\r\n    }\r\n\r\n    function createTicker(document, interval) {\r\n        return interval === 0\r\n            ? new ManualTicker()\r\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\r\n    }\r\n    function createMonitorBindingController(plugin, args) {\r\n        var _a, _b, _c;\r\n        const p = ParamsParsers;\r\n        const result = plugin.accept(args.target.read(), args.params);\r\n        if (isEmpty(result)) {\r\n            return null;\r\n        }\r\n        const bindingArgs = {\r\n            target: args.target,\r\n            initialValue: result.initialValue,\r\n            params: result.params,\r\n        };\r\n        const reader = plugin.binding.reader(bindingArgs);\r\n        const bufferSize = (_b = (_a = p.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\r\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\r\n        const interval = p.optional.number(args.params.interval).value;\r\n        const binding = new MonitorBinding({\r\n            reader: reader,\r\n            target: args.target,\r\n            ticker: createTicker(args.document, interval),\r\n            value: initializeBuffer(bufferSize),\r\n        });\r\n        const disabled = p.optional.boolean(args.params.disabled).value;\r\n        const hidden = p.optional.boolean(args.params.hidden).value;\r\n        const controller = plugin.controller({\r\n            document: args.document,\r\n            params: result.params,\r\n            value: binding.value,\r\n            viewProps: ViewProps.create({\r\n                disabled: disabled,\r\n                hidden: hidden,\r\n            }),\r\n        });\r\n        return new MonitorBindingController(args.document, {\r\n            binding: binding,\r\n            blade: createBlade(),\r\n            props: ValueMap.fromObject({\r\n                label: 'label' in args.params\r\n                    ? (_c = p.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : null\r\n                    : args.target.key,\r\n            }),\r\n            valueController: controller,\r\n        });\r\n    }\r\n\r\n    class PluginPool {\r\n        constructor() {\r\n            this.pluginsMap_ = {\r\n                blades: [],\r\n                inputs: [],\r\n                monitors: [],\r\n            };\r\n        }\r\n        getAll() {\r\n            return [\r\n                ...this.pluginsMap_.blades,\r\n                ...this.pluginsMap_.inputs,\r\n                ...this.pluginsMap_.monitors,\r\n            ];\r\n        }\r\n        register(r) {\r\n            if (r.type === 'blade') {\r\n                this.pluginsMap_.blades.unshift(r);\r\n            }\r\n            else if (r.type === 'input') {\r\n                this.pluginsMap_.inputs.unshift(r);\r\n            }\r\n            else if (r.type === 'monitor') {\r\n                this.pluginsMap_.monitors.unshift(r);\r\n            }\r\n        }\r\n        createInput(document, target, params) {\r\n            const initialValue = target.read();\r\n            if (isEmpty(initialValue)) {\r\n                throw new TpError({\r\n                    context: {\r\n                        key: target.key,\r\n                    },\r\n                    type: 'nomatchingcontroller',\r\n                });\r\n            }\r\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\r\n                document: document,\r\n                target: target,\r\n                params: params,\r\n            }), null);\r\n            if (bc) {\r\n                return bc;\r\n            }\r\n            throw new TpError({\r\n                context: {\r\n                    key: target.key,\r\n                },\r\n                type: 'nomatchingcontroller',\r\n            });\r\n        }\r\n        createMonitor(document, target, params) {\r\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\r\n                document: document,\r\n                params: params,\r\n                target: target,\r\n            }), null);\r\n            if (bc) {\r\n                return bc;\r\n            }\r\n            throw new TpError({\r\n                context: {\r\n                    key: target.key,\r\n                },\r\n                type: 'nomatchingcontroller',\r\n            });\r\n        }\r\n        createBlade(document, params) {\r\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\r\n                document: document,\r\n                params: params,\r\n            }), null);\r\n            if (!bc) {\r\n                throw new TpError({\r\n                    type: 'nomatchingview',\r\n                    context: {\r\n                        params: params,\r\n                    },\r\n                });\r\n            }\r\n            return bc;\r\n        }\r\n        createBladeApi(bc) {\r\n            if (bc instanceof InputBindingController) {\r\n                return new InputBindingApi(bc);\r\n            }\r\n            if (bc instanceof MonitorBindingController) {\r\n                return new MonitorBindingApi(bc);\r\n            }\r\n            if (bc instanceof RackController) {\r\n                return new RackApi(bc, this);\r\n            }\r\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\r\n                controller: bc,\r\n                pool: this,\r\n            }), null);\r\n            if (!api) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            return api;\r\n        }\r\n    }\r\n\r\n    function createDefaultPluginPool() {\r\n        const pool = new PluginPool();\r\n        [\r\n            Point2dInputPlugin,\r\n            Point3dInputPlugin,\r\n            Point4dInputPlugin,\r\n            StringInputPlugin,\r\n            NumberInputPlugin,\r\n            StringColorInputPlugin,\r\n            ObjectColorInputPlugin,\r\n            NumberColorInputPlugin,\r\n            BooleanInputPlugin,\r\n            BooleanMonitorPlugin,\r\n            StringMonitorPlugin,\r\n            NumberMonitorPlugin,\r\n            ButtonBladePlugin,\r\n            FolderBladePlugin,\r\n            SeparatorBladePlugin,\r\n            TabBladePlugin,\r\n        ].forEach((p) => {\r\n            pool.register(p);\r\n        });\r\n        return pool;\r\n    }\r\n\r\n    function point2dFromUnknown(value) {\r\n        return Point2d.isObject(value)\r\n            ? new Point2d(value.x, value.y)\r\n            : new Point2d();\r\n    }\r\n    function writePoint2d(target, value) {\r\n        target.writeProperty('x', value.x);\r\n        target.writeProperty('y', value.y);\r\n    }\r\n\r\n    function createDimensionConstraint(params, initialValue) {\r\n        if (!params) {\r\n            return undefined;\r\n        }\r\n        const constraints = [];\r\n        const cs = createStepConstraint(params, initialValue);\r\n        if (cs) {\r\n            constraints.push(cs);\r\n        }\r\n        const rs = createRangeConstraint(params);\r\n        if (rs) {\r\n            constraints.push(rs);\r\n        }\r\n        return new CompositeConstraint(constraints);\r\n    }\r\n    function createConstraint(params, initialValue) {\r\n        return new PointNdConstraint({\r\n            assembly: Point2dAssembly,\r\n            components: [\r\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\r\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\r\n            ],\r\n        });\r\n    }\r\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\r\n        const [min, max] = constraint ? findNumberRange(constraint) : [];\r\n        if (!isEmpty(min) || !isEmpty(max)) {\r\n            return Math.max(Math.abs(min !== null && min !== void 0 ? min : 0), Math.abs(max !== null && max !== void 0 ? max : 0));\r\n        }\r\n        const step = getBaseStep(constraint);\r\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\r\n    }\r\n    function getSuitableMaxValue(initialValue, constraint) {\r\n        const xc = constraint instanceof PointNdConstraint\r\n            ? constraint.components[0]\r\n            : undefined;\r\n        const yc = constraint instanceof PointNdConstraint\r\n            ? constraint.components[1]\r\n            : undefined;\r\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\r\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\r\n        return Math.max(xr, yr);\r\n    }\r\n    function createAxis(initialValue, constraint) {\r\n        return {\r\n            baseStep: getBaseStep(constraint),\r\n            constraint: constraint,\r\n            textProps: ValueMap.fromObject({\r\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\r\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\r\n            }),\r\n        };\r\n    }\r\n    function shouldInvertY(params) {\r\n        if (!('y' in params)) {\r\n            return false;\r\n        }\r\n        const yParams = params.y;\r\n        if (!yParams) {\r\n            return false;\r\n        }\r\n        return 'inverted' in yParams ? !!yParams.inverted : false;\r\n    }\r\n    const Point2dInputPlugin = {\r\n        id: 'input-point2d',\r\n        type: 'input',\r\n        accept: (value, params) => {\r\n            if (!Point2d.isObject(value)) {\r\n                return null;\r\n            }\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                expanded: p.optional.boolean,\r\n                picker: p.optional.custom(parsePickerLayout),\r\n                x: p.optional.custom(parsePointDimensionParams),\r\n                y: p.optional.object({\r\n                    inverted: p.optional.boolean,\r\n                    max: p.optional.number,\r\n                    min: p.optional.number,\r\n                    step: p.optional.number,\r\n                }),\r\n            });\r\n            return result\r\n                ? {\r\n                    initialValue: value,\r\n                    params: result,\r\n                }\r\n                : null;\r\n        },\r\n        binding: {\r\n            reader: (_args) => point2dFromUnknown,\r\n            constraint: (args) => createConstraint(args.params, args.initialValue),\r\n            equals: Point2d.equals,\r\n            writer: (_args) => writePoint2d,\r\n        },\r\n        controller: (args) => {\r\n            const doc = args.document;\r\n            const value = args.value;\r\n            const c = args.constraint;\r\n            if (!(c instanceof PointNdConstraint)) {\r\n                throw TpError.shouldNeverHappen();\r\n            }\r\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\r\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\r\n            return new Point2dController(doc, {\r\n                axes: [\r\n                    createAxis(value.rawValue.x, c.components[0]),\r\n                    createAxis(value.rawValue.y, c.components[1]),\r\n                ],\r\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\r\n                invertsY: shouldInvertY(args.params),\r\n                maxValue: getSuitableMaxValue(value.rawValue, c),\r\n                parser: parseNumber,\r\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\r\n                value: value,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n    };\r\n\r\n    class ListApi extends BladeApi {\r\n        constructor(controller) {\r\n            super(controller);\r\n            this.emitter_ = new Emitter();\r\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\r\n                this.emitter_.emit('change', {\r\n                    event: new TpChangeEvent(this, ev.rawValue),\r\n                });\r\n            });\r\n        }\r\n        get label() {\r\n            return this.controller_.props.get('label');\r\n        }\r\n        set label(label) {\r\n            this.controller_.props.set('label', label);\r\n        }\r\n        get options() {\r\n            return this.controller_.valueController.props.get('options');\r\n        }\r\n        set options(options) {\r\n            this.controller_.valueController.props.set('options', options);\r\n        }\r\n        get value() {\r\n            return this.controller_.valueController.value.rawValue;\r\n        }\r\n        set value(value) {\r\n            this.controller_.valueController.value.rawValue = value;\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            this.emitter_.on(eventName, (ev) => {\r\n                bh(ev.event);\r\n            });\r\n            return this;\r\n        }\r\n    }\r\n\r\n    class SliderApi extends BladeApi {\r\n        constructor(controller) {\r\n            super(controller);\r\n            this.emitter_ = new Emitter();\r\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\r\n                this.emitter_.emit('change', {\r\n                    event: new TpChangeEvent(this, ev.rawValue),\r\n                });\r\n            });\r\n        }\r\n        get label() {\r\n            return this.controller_.props.get('label');\r\n        }\r\n        set label(label) {\r\n            this.controller_.props.set('label', label);\r\n        }\r\n        get maxValue() {\r\n            return this.controller_.valueController.sliderController.props.get('maxValue');\r\n        }\r\n        set maxValue(maxValue) {\r\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\r\n        }\r\n        get minValue() {\r\n            return this.controller_.valueController.sliderController.props.get('minValue');\r\n        }\r\n        set minValue(minValue) {\r\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\r\n        }\r\n        get value() {\r\n            return this.controller_.valueController.value.rawValue;\r\n        }\r\n        set value(value) {\r\n            this.controller_.valueController.value.rawValue = value;\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            this.emitter_.on(eventName, (ev) => {\r\n                bh(ev.event);\r\n            });\r\n            return this;\r\n        }\r\n    }\r\n\r\n    class TextApi extends BladeApi {\r\n        constructor(controller) {\r\n            super(controller);\r\n            this.emitter_ = new Emitter();\r\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\r\n                this.emitter_.emit('change', {\r\n                    event: new TpChangeEvent(this, ev.rawValue),\r\n                });\r\n            });\r\n        }\r\n        get label() {\r\n            return this.controller_.props.get('label');\r\n        }\r\n        set label(label) {\r\n            this.controller_.props.set('label', label);\r\n        }\r\n        get formatter() {\r\n            return this.controller_.valueController.props.get('formatter');\r\n        }\r\n        set formatter(formatter) {\r\n            this.controller_.valueController.props.set('formatter', formatter);\r\n        }\r\n        get value() {\r\n            return this.controller_.valueController.value.rawValue;\r\n        }\r\n        set value(value) {\r\n            this.controller_.valueController.value.rawValue = value;\r\n        }\r\n        on(eventName, handler) {\r\n            const bh = handler.bind(this);\r\n            this.emitter_.on(eventName, (ev) => {\r\n                bh(ev.event);\r\n            });\r\n            return this;\r\n        }\r\n    }\r\n\r\n    const ListBladePlugin = (function () {\r\n        return {\r\n            id: 'list',\r\n            type: 'blade',\r\n            accept(params) {\r\n                const p = ParamsParsers;\r\n                const result = parseParams(params, {\r\n                    options: p.required.custom(parseListOptions),\r\n                    value: p.required.raw,\r\n                    view: p.required.constant('list'),\r\n                    label: p.optional.string,\r\n                });\r\n                return result ? { params: result } : null;\r\n            },\r\n            controller(args) {\r\n                const lc = new ListConstraint(normalizeListOptions(args.params.options));\r\n                const value = createValue(args.params.value, {\r\n                    constraint: lc,\r\n                });\r\n                const ic = new ListController(args.document, {\r\n                    props: new ValueMap({\r\n                        options: lc.values.value('options'),\r\n                    }),\r\n                    value: value,\r\n                    viewProps: args.viewProps,\r\n                });\r\n                return new LabeledValueController(args.document, {\r\n                    blade: args.blade,\r\n                    props: ValueMap.fromObject({\r\n                        label: args.params.label,\r\n                    }),\r\n                    valueController: ic,\r\n                });\r\n            },\r\n            api(args) {\r\n                if (!(args.controller instanceof LabeledValueController)) {\r\n                    return null;\r\n                }\r\n                if (!(args.controller.valueController instanceof ListController)) {\r\n                    return null;\r\n                }\r\n                return new ListApi(args.controller);\r\n            },\r\n        };\r\n    })();\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    function exportPresetJson(targets) {\r\n        return targets.reduce((result, target) => {\r\n            return Object.assign(result, {\r\n                [target.presetKey]: target.read(),\r\n            });\r\n        }, {});\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function importPresetJson(bindings, preset) {\r\n        bindings.forEach((binding) => {\r\n            const value = preset[binding.target.presetKey];\r\n            if (value !== undefined) {\r\n                binding.writer(binding.target, binding.reader(value));\r\n            }\r\n        });\r\n    }\r\n\r\n    class RootApi extends FolderApi {\r\n        /**\r\n         * @hidden\r\n         */\r\n        constructor(controller, pool) {\r\n            super(controller, pool);\r\n        }\r\n        get element() {\r\n            return this.controller_.view.element;\r\n        }\r\n        /**\r\n         * Imports a preset of all inputs.\r\n         * @param preset The preset object to import.\r\n         */\r\n        importPreset(preset) {\r\n            const bindings = this.controller_.rackController.rack\r\n                .find(InputBindingController)\r\n                .map((ibc) => {\r\n                return ibc.binding;\r\n            });\r\n            importPresetJson(bindings, preset);\r\n            this.refresh();\r\n        }\r\n        /**\r\n         * Exports a preset of all inputs.\r\n         * @return An exported preset object.\r\n         */\r\n        exportPreset() {\r\n            const targets = this.controller_.rackController.rack\r\n                .find(InputBindingController)\r\n                .map((ibc) => {\r\n                return ibc.binding.target;\r\n            });\r\n            return exportPresetJson(targets);\r\n        }\r\n        /**\r\n         * Refreshes all bindings of the pane.\r\n         */\r\n        refresh() {\r\n            // Force-read all input bindings\r\n            this.controller_.rackController.rack\r\n                .find(InputBindingController)\r\n                .forEach((ibc) => {\r\n                ibc.binding.read();\r\n            });\r\n            // Force-read all monitor bindings\r\n            this.controller_.rackController.rack\r\n                .find(MonitorBindingController)\r\n                .forEach((mbc) => {\r\n                mbc.binding.read();\r\n            });\r\n        }\r\n    }\r\n\r\n    class RootController extends FolderController {\r\n        constructor(doc, config) {\r\n            super(doc, {\r\n                expanded: config.expanded,\r\n                blade: config.blade,\r\n                props: config.props,\r\n                root: true,\r\n                viewProps: config.viewProps,\r\n            });\r\n        }\r\n    }\r\n\r\n    const SliderBladePlugin = {\r\n        id: 'slider',\r\n        type: 'blade',\r\n        accept(params) {\r\n            const p = ParamsParsers;\r\n            const result = parseParams(params, {\r\n                max: p.required.number,\r\n                min: p.required.number,\r\n                view: p.required.constant('slider'),\r\n                format: p.optional.function,\r\n                label: p.optional.string,\r\n                value: p.optional.number,\r\n            });\r\n            return result ? { params: result } : null;\r\n        },\r\n        controller(args) {\r\n            var _a, _b;\r\n            const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\r\n            const drc = new DefiniteRangeConstraint({\r\n                max: args.params.max,\r\n                min: args.params.min,\r\n            });\r\n            const vc = new SliderTextController(args.document, {\r\n                baseStep: 1,\r\n                parser: parseNumber,\r\n                sliderProps: new ValueMap({\r\n                    maxValue: drc.values.value('max'),\r\n                    minValue: drc.values.value('min'),\r\n                }),\r\n                textProps: ValueMap.fromObject({\r\n                    draggingScale: getSuitableDraggingScale(undefined, initialValue),\r\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\r\n                }),\r\n                value: createValue(initialValue, {\r\n                    constraint: drc,\r\n                }),\r\n                viewProps: args.viewProps,\r\n            });\r\n            return new LabeledValueController(args.document, {\r\n                blade: args.blade,\r\n                props: ValueMap.fromObject({\r\n                    label: args.params.label,\r\n                }),\r\n                valueController: vc,\r\n            });\r\n        },\r\n        api(args) {\r\n            if (!(args.controller instanceof LabeledValueController)) {\r\n                return null;\r\n            }\r\n            if (!(args.controller.valueController instanceof SliderTextController)) {\r\n                return null;\r\n            }\r\n            return new SliderApi(args.controller);\r\n        },\r\n    };\r\n\r\n    const TextBladePlugin = (function () {\r\n        return {\r\n            id: 'text',\r\n            type: 'blade',\r\n            accept(params) {\r\n                const p = ParamsParsers;\r\n                const result = parseParams(params, {\r\n                    parse: p.required.function,\r\n                    value: p.required.raw,\r\n                    view: p.required.constant('text'),\r\n                    format: p.optional.function,\r\n                    label: p.optional.string,\r\n                });\r\n                return result ? { params: result } : null;\r\n            },\r\n            controller(args) {\r\n                var _a;\r\n                const ic = new TextController(args.document, {\r\n                    parser: args.params.parse,\r\n                    props: ValueMap.fromObject({\r\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\r\n                    }),\r\n                    value: createValue(args.params.value),\r\n                    viewProps: args.viewProps,\r\n                });\r\n                return new LabeledValueController(args.document, {\r\n                    blade: args.blade,\r\n                    props: ValueMap.fromObject({\r\n                        label: args.params.label,\r\n                    }),\r\n                    valueController: ic,\r\n                });\r\n            },\r\n            api(args) {\r\n                if (!(args.controller instanceof LabeledValueController)) {\r\n                    return null;\r\n                }\r\n                if (!(args.controller.valueController instanceof TextController)) {\r\n                    return null;\r\n                }\r\n                return new TextApi(args.controller);\r\n            },\r\n        };\r\n    })();\r\n\r\n    function createDefaultWrapperElement(doc) {\r\n        const elem = doc.createElement('div');\r\n        elem.classList.add(ClassName('dfw')());\r\n        if (doc.body) {\r\n            doc.body.appendChild(elem);\r\n        }\r\n        return elem;\r\n    }\r\n    function embedStyle(doc, id, css) {\r\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\r\n            return;\r\n        }\r\n        const styleElem = doc.createElement('style');\r\n        styleElem.dataset.tpStyle = id;\r\n        styleElem.textContent = css;\r\n        doc.head.appendChild(styleElem);\r\n    }\r\n    /**\r\n     * The root pane of Tweakpane.\r\n     */\r\n    class Pane extends RootApi {\r\n        constructor(opt_config) {\r\n            var _a, _b;\r\n            const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\r\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\r\n            const pool = createDefaultPluginPool();\r\n            const rootController = new RootController(doc, {\r\n                expanded: config.expanded,\r\n                blade: createBlade(),\r\n                props: ValueMap.fromObject({\r\n                    title: config.title,\r\n                }),\r\n                viewProps: ViewProps.create(),\r\n            });\r\n            super(rootController, pool);\r\n            this.pool_ = pool;\r\n            this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\r\n            this.containerElem_.appendChild(this.element);\r\n            this.doc_ = doc;\r\n            this.usesDefaultWrapper_ = !config.container;\r\n            this.setUpDefaultPlugins_();\r\n        }\r\n        get document() {\r\n            if (!this.doc_) {\r\n                throw TpError.alreadyDisposed();\r\n            }\r\n            return this.doc_;\r\n        }\r\n        dispose() {\r\n            const containerElem = this.containerElem_;\r\n            if (!containerElem) {\r\n                throw TpError.alreadyDisposed();\r\n            }\r\n            if (this.usesDefaultWrapper_) {\r\n                const parentElem = containerElem.parentElement;\r\n                if (parentElem) {\r\n                    parentElem.removeChild(containerElem);\r\n                }\r\n            }\r\n            this.containerElem_ = null;\r\n            this.doc_ = null;\r\n            super.dispose();\r\n        }\r\n        registerPlugin(bundle) {\r\n            const plugins = 'plugin' in bundle\r\n                ? [bundle.plugin]\r\n                : 'plugins' in bundle\r\n                    ? bundle.plugins\r\n                    : [];\r\n            plugins.forEach((p) => {\r\n                this.pool_.register(p);\r\n                this.embedPluginStyle_(p);\r\n            });\r\n        }\r\n        embedPluginStyle_(plugin) {\r\n            if (plugin.css) {\r\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\r\n            }\r\n        }\r\n        setUpDefaultPlugins_() {\r\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\r\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\r\n            this.pool_.getAll().forEach((plugin) => {\r\n                this.embedPluginStyle_(plugin);\r\n            });\r\n            this.registerPlugin({\r\n                plugins: [\r\n                    SliderBladePlugin,\r\n                    ListBladePlugin,\r\n                    TabBladePlugin,\r\n                    TextBladePlugin,\r\n                ],\r\n            });\r\n        }\r\n    }\r\n\r\n    const VERSION = new Semver('3.1.10');\r\n\r\n    exports.BladeApi = BladeApi;\r\n    exports.ButtonApi = ButtonApi;\r\n    exports.FolderApi = FolderApi;\r\n    exports.InputBindingApi = InputBindingApi;\r\n    exports.ListApi = ListApi;\r\n    exports.MonitorBindingApi = MonitorBindingApi;\r\n    exports.Pane = Pane;\r\n    exports.SeparatorApi = SeparatorApi;\r\n    exports.SliderApi = SliderApi;\r\n    exports.TabApi = TabApi;\r\n    exports.TabPageApi = TabPageApi;\r\n    exports.TextApi = TextApi;\r\n    exports.TpChangeEvent = TpChangeEvent;\r\n    exports.VERSION = VERSION;\r\n\r\n    Object.defineProperty(exports, '__esModule', { value: true });\r\n\r\n}));\r\n", "/**\r\n * Main content for the worker that handles the loading and execution of\r\n * modules within it.\r\n */\r\nfunction workerBootstrap() {\r\n  var modules = Object.create(null);\r\n\r\n  // Handle messages for registering a module\r\n  function registerModule(ref, callback) {\r\n    var id = ref.id;\r\n    var name = ref.name;\r\n    var dependencies = ref.dependencies; if ( dependencies === void 0 ) dependencies = [];\r\n    var init = ref.init; if ( init === void 0 ) init = function(){};\r\n    var getTransferables = ref.getTransferables; if ( getTransferables === void 0 ) getTransferables = null;\r\n\r\n    // Only register once\r\n    if (modules[id]) { return }\r\n\r\n    try {\r\n      // If any dependencies are modules, ensure they're registered and grab their value\r\n      dependencies = dependencies.map(function (dep) {\r\n        if (dep && dep.isWorkerModule) {\r\n          registerModule(dep, function (depResult) {\r\n            if (depResult instanceof Error) { throw depResult }\r\n          });\r\n          dep = modules[dep.id].value;\r\n        }\r\n        return dep\r\n      });\r\n\r\n      // Rehydrate functions\r\n      init = rehydrate((\"<\" + name + \">.init\"), init);\r\n      if (getTransferables) {\r\n        getTransferables = rehydrate((\"<\" + name + \">.getTransferables\"), getTransferables);\r\n      }\r\n\r\n      // Initialize the module and store its value\r\n      var value = null;\r\n      if (typeof init === 'function') {\r\n        value = init.apply(void 0, dependencies);\r\n      } else {\r\n        console.error('worker module init function failed to rehydrate');\r\n      }\r\n      modules[id] = {\r\n        id: id,\r\n        value: value,\r\n        getTransferables: getTransferables\r\n      };\r\n      callback(value);\r\n    } catch(err) {\r\n      if (!(err && err.noLog)) {\r\n        console.error(err);\r\n      }\r\n      callback(err);\r\n    }\r\n  }\r\n\r\n  // Handle messages for calling a registered module's result function\r\n  function callModule(ref, callback) {\r\n    var ref$1;\r\n\r\n    var id = ref.id;\r\n    var args = ref.args;\r\n    if (!modules[id] || typeof modules[id].value !== 'function') {\r\n      callback(new Error((\"Worker module \" + id + \": not found or its 'init' did not return a function\")));\r\n    }\r\n    try {\r\n      var result = (ref$1 = modules[id]).value.apply(ref$1, args);\r\n      if (result && typeof result.then === 'function') {\r\n        result.then(handleResult, function (rej) { return callback(rej instanceof Error ? rej : new Error('' + rej)); });\r\n      } else {\r\n        handleResult(result);\r\n      }\r\n    } catch(err) {\r\n      callback(err);\r\n    }\r\n    function handleResult(result) {\r\n      try {\r\n        var tx = modules[id].getTransferables && modules[id].getTransferables(result);\r\n        if (!tx || !Array.isArray(tx) || !tx.length) {\r\n          tx = undefined; //postMessage is very picky about not passing null or empty transferables\r\n        }\r\n        callback(result, tx);\r\n      } catch(err) {\r\n        console.error(err);\r\n        callback(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  function rehydrate(name, str) {\r\n    var result = void 0;\r\n    self.troikaDefine = function (r) { return result = r; };\r\n    var url = URL.createObjectURL(\r\n      new Blob(\r\n        [(\"/** \" + (name.replace(/\\*/g, '')) + \" **/\\n\\ntroikaDefine(\\n\" + str + \"\\n)\")],\r\n        {type: 'application/javascript'}\r\n      )\r\n    );\r\n    try {\r\n      importScripts(url);\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n    URL.revokeObjectURL(url);\r\n    delete self.troikaDefine;\r\n    return result\r\n  }\r\n\r\n  // Handler for all messages within the worker\r\n  self.addEventListener('message', function (e) {\r\n    var ref = e.data;\r\n    var messageId = ref.messageId;\r\n    var action = ref.action;\r\n    var data = ref.data;\r\n    try {\r\n      // Module registration\r\n      if (action === 'registerModule') {\r\n        registerModule(data, function (result) {\r\n          if (result instanceof Error) {\r\n            postMessage({\r\n              messageId: messageId,\r\n              success: false,\r\n              error: result.message\r\n            });\r\n          } else {\r\n            postMessage({\r\n              messageId: messageId,\r\n              success: true,\r\n              result: {isCallable: typeof result === 'function'}\r\n            });\r\n          }\r\n        });\r\n      }\r\n      // Invocation\r\n      if (action === 'callModule') {\r\n        callModule(data, function (result, transferables) {\r\n          if (result instanceof Error) {\r\n            postMessage({\r\n              messageId: messageId,\r\n              success: false,\r\n              error: result.message\r\n            });\r\n          } else {\r\n            postMessage({\r\n              messageId: messageId,\r\n              success: true,\r\n              result: result\r\n            }, transferables || undefined);\r\n          }\r\n        });\r\n      }\r\n    } catch(err) {\r\n      postMessage({\r\n        messageId: messageId,\r\n        success: false,\r\n        error: err.stack\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Fallback for `defineWorkerModule` that behaves identically but runs in the main\r\n * thread, for when the execution environment doesn't support web workers or they\r\n * are disallowed due to e.g. CSP security restrictions.\r\n */\r\nfunction defineMainThreadModule(options) {\r\n  var moduleFunc = function() {\r\n    var args = [], len = arguments.length;\r\n    while ( len-- ) args[ len ] = arguments[ len ];\r\n\r\n    return moduleFunc._getInitResult().then(function (initResult) {\r\n      if (typeof initResult === 'function') {\r\n        return initResult.apply(void 0, args)\r\n      } else {\r\n        throw new Error('Worker module function was called but `init` did not return a callable function')\r\n      }\r\n    })\r\n  };\r\n  moduleFunc._getInitResult = function() {\r\n    // We can ignore getTransferables in main thread. TODO workerId?\r\n    var dependencies = options.dependencies;\r\n    var init = options.init;\r\n\r\n    // Resolve dependencies\r\n    dependencies = Array.isArray(dependencies) ? dependencies.map(function (dep) { return dep && dep._getInitResult ? dep._getInitResult() : dep; }\r\n    ) : [];\r\n\r\n    // Invoke init with the resolved dependencies\r\n    var initPromise = Promise.all(dependencies).then(function (deps) {\r\n      return init.apply(null, deps)\r\n    });\r\n\r\n    // Cache the resolved promise for subsequent calls\r\n    moduleFunc._getInitResult = function () { return initPromise; };\r\n\r\n    return initPromise\r\n  };\r\n  return moduleFunc\r\n}\r\n\r\nvar supportsWorkers = function () {\r\n  var supported = false;\r\n\r\n  // Only attempt worker initialization in browsers; elsewhere it would just be\r\n  // noise e.g. loading into a Node environment for SSR.\r\n  if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\r\n    try {\r\n      // TODO additional checks for things like importScripts within the worker?\r\n      //  Would need to be an async check.\r\n      var worker = new Worker(\r\n        URL.createObjectURL(new Blob([''], { type: 'application/javascript' }))\r\n      );\r\n      worker.terminate();\r\n      supported = true;\r\n    } catch (err) {\r\n      if (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') ; else {\r\n        console.log(\r\n          (\"Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: [\" + (err.message) + \"]\")\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  // Cached result\r\n  supportsWorkers = function () { return supported; };\r\n  return supported\r\n};\r\n\r\nvar _workerModuleId = 0;\r\nvar _messageId = 0;\r\nvar _allowInitAsString = false;\r\nvar workers = Object.create(null);\r\nvar registeredModules = Object.create(null); //workerId -> Set<unregisterFn>\r\nvar openRequests = Object.create(null);\r\n\r\n\r\n/**\r\n * Define a module of code that will be executed with a web worker. This provides a simple\r\n * interface for moving chunks of logic off the main thread, and managing their dependencies\r\n * among one another.\r\n *\r\n * @param {object} options\r\n * @param {function} options.init\r\n * @param {array} [options.dependencies]\r\n * @param {function} [options.getTransferables]\r\n * @param {string} [options.name]\r\n * @param {string} [options.workerId]\r\n * @return {function(...[*]): {then}}\r\n */\r\nfunction defineWorkerModule(options) {\r\n  if ((!options || typeof options.init !== 'function') && !_allowInitAsString) {\r\n    throw new Error('requires `options.init` function')\r\n  }\r\n  var dependencies = options.dependencies;\r\n  var init = options.init;\r\n  var getTransferables = options.getTransferables;\r\n  var workerId = options.workerId;\r\n\r\n  if (!supportsWorkers()) {\r\n    return defineMainThreadModule(options)\r\n  }\r\n\r\n  if (workerId == null) {\r\n    workerId = '#default';\r\n  }\r\n  var id = \"workerModule\" + (++_workerModuleId);\r\n  var name = options.name || id;\r\n  var registrationPromise = null;\r\n\r\n  dependencies = dependencies && dependencies.map(function (dep) {\r\n    // Wrap raw functions as worker modules with no dependencies\r\n    if (typeof dep === 'function' && !dep.workerModuleData) {\r\n      _allowInitAsString = true;\r\n      dep = defineWorkerModule({\r\n        workerId: workerId,\r\n        name: (\"<\" + name + \"> function dependency: \" + (dep.name)),\r\n        init: (\"function(){return (\\n\" + (stringifyFunction(dep)) + \"\\n)}\")\r\n      });\r\n      _allowInitAsString = false;\r\n    }\r\n    // Grab postable data for worker modules\r\n    if (dep && dep.workerModuleData) {\r\n      dep = dep.workerModuleData;\r\n    }\r\n    return dep\r\n  });\r\n\r\n  function moduleFunc() {\r\n    var args = [], len = arguments.length;\r\n    while ( len-- ) args[ len ] = arguments[ len ];\r\n\r\n    // Register this module if needed\r\n    if (!registrationPromise) {\r\n      registrationPromise = callWorker(workerId,'registerModule', moduleFunc.workerModuleData);\r\n      var unregister = function () {\r\n        registrationPromise = null;\r\n        registeredModules[workerId].delete(unregister);\r\n      }\r\n      ;(registeredModules[workerId] || (registeredModules[workerId] = new Set())).add(unregister);\r\n    }\r\n\r\n    // Invoke the module, returning a promise\r\n    return registrationPromise.then(function (ref) {\r\n      var isCallable = ref.isCallable;\r\n\r\n      if (isCallable) {\r\n        return callWorker(workerId,'callModule', {id: id, args: args})\r\n      } else {\r\n        throw new Error('Worker module function was called but `init` did not return a callable function')\r\n      }\r\n    })\r\n  }\r\n  moduleFunc.workerModuleData = {\r\n    isWorkerModule: true,\r\n    id: id,\r\n    name: name,\r\n    dependencies: dependencies,\r\n    init: stringifyFunction(init),\r\n    getTransferables: getTransferables && stringifyFunction(getTransferables)\r\n  };\r\n  return moduleFunc\r\n}\r\n\r\n/**\r\n * Terminate an active Worker by a workerId that was passed to defineWorkerModule.\r\n * This only terminates the Worker itself; the worker module will remain available\r\n * and if you call it again its Worker will be respawned.\r\n * @param {string} workerId\r\n */\r\nfunction terminateWorker(workerId) {\r\n  // Unregister all modules that were registered in that worker\r\n  if (registeredModules[workerId]) {\r\n    registeredModules[workerId].forEach(function (unregister) {\r\n      unregister();\r\n    });\r\n  }\r\n  // Terminate the Worker object\r\n  if (workers[workerId]) {\r\n    workers[workerId].terminate();\r\n    delete workers[workerId];\r\n  }\r\n}\r\n\r\n/**\r\n * Stringifies a function into a form that can be deserialized in the worker\r\n * @param fn\r\n */\r\nfunction stringifyFunction(fn) {\r\n  var str = fn.toString();\r\n  // If it was defined in object method/property format, it needs to be modified\r\n  if (!/^function/.test(str) && /^\\w+\\s*\\(/.test(str)) {\r\n    str = 'function ' + str;\r\n  }\r\n  return str\r\n}\r\n\r\n\r\nfunction getWorker(workerId) {\r\n  var worker = workers[workerId];\r\n  if (!worker) {\r\n    // Bootstrap the worker's content\r\n    var bootstrap = stringifyFunction(workerBootstrap);\r\n\r\n    // Create the worker from the bootstrap function content\r\n    worker = workers[workerId] = new Worker(\r\n      URL.createObjectURL(\r\n        new Blob(\r\n          [(\"/** Worker Module Bootstrap: \" + (workerId.replace(/\\*/g, '')) + \" **/\\n\\n;(\" + bootstrap + \")()\")],\r\n          {type: 'application/javascript'}\r\n        )\r\n      )\r\n    );\r\n\r\n    // Single handler for response messages from the worker\r\n    worker.onmessage = function (e) {\r\n      var response = e.data;\r\n      var msgId = response.messageId;\r\n      var callback = openRequests[msgId];\r\n      if (!callback) {\r\n        throw new Error('WorkerModule response with empty or unknown messageId')\r\n      }\r\n      delete openRequests[msgId];\r\n      callback(response);\r\n    };\r\n  }\r\n  return worker\r\n}\r\n\r\n// Issue a call to the worker with a callback to handle the response\r\nfunction callWorker(workerId, action, data) {\r\n  return new Promise(function (resolve, reject) {\r\n    var messageId = ++_messageId;\r\n    openRequests[messageId] = function (response) {\r\n      if (response.success) {\r\n        resolve(response.result);\r\n      } else {\r\n        reject(new Error((\"Error in worker \" + action + \" call: \" + (response.error))));\r\n      }\r\n    };\r\n    getWorker(workerId).postMessage({\r\n      messageId: messageId,\r\n      action: action,\r\n      data: data\r\n    });\r\n  })\r\n}\r\n\r\nexport { defineWorkerModule, stringifyFunction, terminateWorker };\r\n", "import { ShaderChunk, UniformsUtils, MeshDepthMaterial, RGBADepthPacking, MeshDistanceMaterial, ShaderLib, Matrix4, Vector3, Mesh, CylinderGeometry, Vector2, MeshStandardMaterial, DoubleSide } from 'three';\r\n\r\n/**\r\n * Regular expression for matching the `void main() {` opener line in GLSL.\r\n * @type {RegExp}\r\n */\r\nconst voidMainRegExp = /\\bvoid\\s+main\\s*\\(\\s*\\)\\s*{/g;\r\n\r\n/**\r\n * Recursively expands all `#include <xyz>` statements within string of shader code.\r\n * Copied from three's WebGLProgram#parseIncludes for external use.\r\n *\r\n * @param {string} source - The GLSL source code to evaluate\r\n * @return {string} The GLSL code with all includes expanded\r\n */\r\nfunction expandShaderIncludes( source ) {\r\n  const pattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\r\n  function replace(match, include) {\r\n    let chunk = ShaderChunk[include];\r\n    return chunk ? expandShaderIncludes(chunk) : match\r\n  }\r\n  return source.replace( pattern, replace )\r\n}\r\n\r\n/*\r\n * This is a direct copy of MathUtils.generateUUID from Three.js, to preserve compatibility with three\r\n * versions before 0.113.0 as it was changed from Math to MathUtils in that version.\r\n * https://github.com/mrdoob/three.js/blob/dd8b5aa3b270c17096b90945cd2d6d1b13aaec53/src/math/MathUtils.js#L16\r\n */\r\n\r\nconst _lut = [];\r\n\r\nfor (let i = 0; i < 256; i++) {\r\n  _lut[i] = (i < 16 ? '0' : '') + (i).toString(16);\r\n}\r\n\r\nfunction generateUUID() {\r\n\r\n  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n\r\n  const d0 = Math.random() * 0xffffffff | 0;\r\n  const d1 = Math.random() * 0xffffffff | 0;\r\n  const d2 = Math.random() * 0xffffffff | 0;\r\n  const d3 = Math.random() * 0xffffffff | 0;\r\n  const uuid = _lut[d0 & 0xff] + _lut[d0 >> 8 & 0xff] + _lut[d0 >> 16 & 0xff] + _lut[d0 >> 24 & 0xff] + '-' +\r\n    _lut[d1 & 0xff] + _lut[d1 >> 8 & 0xff] + '-' + _lut[d1 >> 16 & 0x0f | 0x40] + _lut[d1 >> 24 & 0xff] + '-' +\r\n    _lut[d2 & 0x3f | 0x80] + _lut[d2 >> 8 & 0xff] + '-' + _lut[d2 >> 16 & 0xff] + _lut[d2 >> 24 & 0xff] +\r\n    _lut[d3 & 0xff] + _lut[d3 >> 8 & 0xff] + _lut[d3 >> 16 & 0xff] + _lut[d3 >> 24 & 0xff];\r\n\r\n  // .toUpperCase() here flattens concatenated strings to save heap memory space.\r\n  return uuid.toUpperCase()\r\n\r\n}\r\n\r\n// Local assign polyfill to avoid importing troika-core\r\nconst assign = Object.assign || function(/*target, ...sources*/) {\r\n  let target = arguments[0];\r\n  for (let i = 1, len = arguments.length; i < len; i++) {\r\n    let source = arguments[i];\r\n    if (source) {\r\n      for (let prop in source) {\r\n        if (Object.prototype.hasOwnProperty.call(source, prop)) {\r\n          target[prop] = source[prop];\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return target\r\n};\r\n\r\n\r\nconst epoch = Date.now();\r\nconst CONSTRUCTOR_CACHE = new WeakMap();\r\nconst SHADER_UPGRADE_CACHE = new Map();\r\n\r\n// Material ids must be integers, but we can't access the increment from Three's `Material` module,\r\n// so let's choose a sufficiently large starting value that should theoretically never collide.\r\nlet materialInstanceId = 1e10;\r\n\r\n/**\r\n * A utility for creating a custom shader material derived from another material's\r\n * shaders. This allows you to inject custom shader logic and transforms into the\r\n * builtin ThreeJS materials without having to recreate them from scratch.\r\n *\r\n * @param {THREE.Material} baseMaterial - the original material to derive from\r\n *\r\n * @param {Object} options - How the base material should be modified.\r\n * @param {Object} options.defines - Custom `defines` for the material\r\n * @param {Object} options.extensions - Custom `extensions` for the material, e.g. `{derivatives: true}`\r\n * @param {Object} options.uniforms - Custom `uniforms` for use in the modified shader. These can\r\n *        be accessed and manipulated via the resulting material's `uniforms` property, just like\r\n *        in a ShaderMaterial. You do not need to repeat the base material's own uniforms here.\r\n * @param {String} options.timeUniform - If specified, a uniform of this name will be injected into\r\n *        both shaders, and it will automatically be updated on each render frame with a number of\r\n *        elapsed milliseconds. The \"zero\" epoch time is not significant so don't rely on this as a\r\n *        true calendar time.\r\n * @param {String} options.vertexDefs - Custom GLSL code to inject into the vertex shader's top-level\r\n *        definitions, above the `void main()` function.\r\n * @param {String} options.vertexMainIntro - Custom GLSL code to inject at the top of the vertex\r\n *        shader's `void main` function.\r\n * @param {String} options.vertexMainOutro - Custom GLSL code to inject at the end of the vertex\r\n *        shader's `void main` function.\r\n * @param {String} options.vertexTransform - Custom GLSL code to manipulate the `position`, `normal`,\r\n *        and/or `uv` vertex attributes. This code will be wrapped within a standalone function with\r\n *        those attributes exposed by their normal names as read/write values.\r\n * @param {String} options.fragmentDefs - Custom GLSL code to inject into the fragment shader's top-level\r\n *        definitions, above the `void main()` function.\r\n * @param {String} options.fragmentMainIntro - Custom GLSL code to inject at the top of the fragment\r\n *        shader's `void main` function.\r\n * @param {String} options.fragmentMainOutro - Custom GLSL code to inject at the end of the fragment\r\n *        shader's `void main` function. You can manipulate `gl_FragColor` here but keep in mind it goes\r\n *        after any of ThreeJS's color postprocessing shader chunks (tonemapping, fog, etc.), so if you\r\n *        want those to apply to your changes use `fragmentColorTransform` instead.\r\n * @param {String} options.fragmentColorTransform - Custom GLSL code to manipulate the `gl_FragColor`\r\n *        output value. Will be injected near the end of the `void main` function, but before any\r\n *        of ThreeJS's color postprocessing shader chunks (tonemapping, fog, etc.), and before the\r\n *        `fragmentMainOutro`.\r\n * @param {function<{vertexShader,fragmentShader}>:{vertexShader,fragmentShader}} options.customRewriter - A function\r\n *        for performing custom rewrites of the full shader code. Useful if you need to do something\r\n *        special that's not covered by the other builtin options. This function will be executed before\r\n *        any other transforms are applied.\r\n * @param {boolean} options.chained - Set to `true` to prototype-chain the derived material to the base\r\n *        material, rather than the default behavior of copying it. This allows the derived material to\r\n *        automatically pick up changes made to the base material and its properties. This can be useful\r\n *        where the derived material is hidden from the user as an implementation detail, allowing them\r\n *        to work with the original material like normal. But it can result in unexpected behavior if not\r\n *        handled carefully.\r\n *\r\n * @return {THREE.Material}\r\n *\r\n * The returned material will also have two new methods, `getDepthMaterial()` and `getDistanceMaterial()`,\r\n * which can be called to get a variant of the derived material for use in shadow casting. If the\r\n * target mesh is expected to cast shadows, then you can assign these to the mesh's `customDepthMaterial`\r\n * (for directional and spot lights) and/or `customDistanceMaterial` (for point lights) properties to\r\n * allow the cast shadow to honor your derived shader's vertex transforms and discarded fragments. These\r\n * will also set a custom `#define IS_DEPTH_MATERIAL` or `#define IS_DISTANCE_MATERIAL` that you can look\r\n * for in your derived shaders with `#ifdef` to customize their behavior for the depth or distance\r\n * scenarios, e.g. skipping antialiasing or expensive shader logic.\r\n */\r\nfunction createDerivedMaterial(baseMaterial, options) {\r\n  // Generate a key that is unique to the content of these `options`. We'll use this\r\n  // throughout for caching and for generating the upgraded shader code. This increases\r\n  // the likelihood that the resulting shaders will line up across multiple calls so\r\n  // their GL programs can be shared and cached.\r\n  const optionsKey = getKeyForOptions(options);\r\n\r\n  // First check to see if we've already derived from this baseMaterial using this\r\n  // unique set of options, and if so reuse the constructor to avoid some allocations.\r\n  let ctorsByDerivation = CONSTRUCTOR_CACHE.get(baseMaterial);\r\n  if (!ctorsByDerivation) {\r\n    CONSTRUCTOR_CACHE.set(baseMaterial, (ctorsByDerivation = Object.create(null)));\r\n  }\r\n  if (ctorsByDerivation[optionsKey]) {\r\n    return new ctorsByDerivation[optionsKey]()\r\n  }\r\n\r\n  const privateBeforeCompileProp = `_onBeforeCompile${optionsKey}`;\r\n\r\n  // Private onBeforeCompile handler that injects the modified shaders and uniforms when\r\n  // the renderer switches to this material's program\r\n  const onBeforeCompile = function (shaderInfo, renderer) {\r\n    baseMaterial.onBeforeCompile.call(this, shaderInfo, renderer);\r\n\r\n    // Upgrade the shaders, caching the result by incoming source code\r\n    const cacheKey = this.customProgramCacheKey() + '|' + shaderInfo.vertexShader + '|' + shaderInfo.fragmentShader;\r\n    let upgradedShaders = SHADER_UPGRADE_CACHE[cacheKey];\r\n    if (!upgradedShaders) {\r\n      const upgraded = upgradeShaders(this, shaderInfo, options, optionsKey);\r\n      upgradedShaders = SHADER_UPGRADE_CACHE[cacheKey] = upgraded;\r\n    }\r\n\r\n    // Inject upgraded shaders and uniforms into the program\r\n    shaderInfo.vertexShader = upgradedShaders.vertexShader;\r\n    shaderInfo.fragmentShader = upgradedShaders.fragmentShader;\r\n    assign(shaderInfo.uniforms, this.uniforms);\r\n\r\n    // Inject auto-updating time uniform if requested\r\n    if (options.timeUniform) {\r\n      shaderInfo.uniforms[options.timeUniform] = {\r\n        get value() {return Date.now() - epoch}\r\n      };\r\n    }\r\n\r\n    // Users can still add their own handlers on top of ours\r\n    if (this[privateBeforeCompileProp]) {\r\n      this[privateBeforeCompileProp](shaderInfo);\r\n    }\r\n  };\r\n\r\n  const DerivedMaterial = function DerivedMaterial() {\r\n    return derive(options.chained ? baseMaterial : baseMaterial.clone())\r\n  };\r\n\r\n  const derive = function(base) {\r\n    // Prototype chain to the base material\r\n    const derived = Object.create(base, descriptor);\r\n\r\n    // Store the baseMaterial for reference; this is always the original even when cloning\r\n    Object.defineProperty(derived, 'baseMaterial', { value: baseMaterial });\r\n\r\n    // Needs its own ids\r\n    Object.defineProperty(derived, 'id', { value: materialInstanceId++ });\r\n    derived.uuid = generateUUID();\r\n\r\n    // Merge uniforms, defines, and extensions\r\n    derived.uniforms = assign({}, base.uniforms, options.uniforms);\r\n    derived.defines = assign({}, base.defines, options.defines);\r\n    derived.defines[`TROIKA_DERIVED_MATERIAL_${optionsKey}`] = ''; //force a program change from the base material\r\n    derived.extensions = assign({}, base.extensions, options.extensions);\r\n\r\n    // Don't inherit EventDispatcher listeners\r\n    derived._listeners = undefined;\r\n\r\n    return derived\r\n  };\r\n\r\n  const descriptor = {\r\n    constructor: {value: DerivedMaterial},\r\n    isDerivedMaterial: {value: true},\r\n\r\n    customProgramCacheKey: {\r\n      writable: true,\r\n      configurable: true,\r\n      value: function () {\r\n        return baseMaterial.customProgramCacheKey() + '|' + optionsKey\r\n      }\r\n    },\r\n\r\n    onBeforeCompile: {\r\n      get() {\r\n        return onBeforeCompile\r\n      },\r\n      set(fn) {\r\n        this[privateBeforeCompileProp] = fn;\r\n      }\r\n    },\r\n\r\n    copy: {\r\n      writable: true,\r\n      configurable: true,\r\n      value: function (source) {\r\n        baseMaterial.copy.call(this, source);\r\n        if (!baseMaterial.isShaderMaterial && !baseMaterial.isDerivedMaterial) {\r\n          assign(this.extensions, source.extensions);\r\n          assign(this.defines, source.defines);\r\n          assign(this.uniforms, UniformsUtils.clone(source.uniforms));\r\n        }\r\n        return this\r\n      }\r\n    },\r\n\r\n    clone: {\r\n      writable: true,\r\n      configurable: true,\r\n      value: function () {\r\n        const newBase = new baseMaterial.constructor();\r\n        return derive(newBase).copy(this)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Utility to get a MeshDepthMaterial that will honor this derived material's vertex\r\n     * transformations and discarded fragments.\r\n     */\r\n    getDepthMaterial: {\r\n      writable: true,\r\n      configurable: true,\r\n      value: function() {\r\n        let depthMaterial = this._depthMaterial;\r\n        if (!depthMaterial) {\r\n          depthMaterial = this._depthMaterial = createDerivedMaterial(\r\n            baseMaterial.isDerivedMaterial\r\n              ? baseMaterial.getDepthMaterial()\r\n              : new MeshDepthMaterial({ depthPacking: RGBADepthPacking }),\r\n            options\r\n          );\r\n          depthMaterial.defines.IS_DEPTH_MATERIAL = '';\r\n          depthMaterial.uniforms = this.uniforms; //automatically recieve same uniform values\r\n        }\r\n        return depthMaterial\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Utility to get a MeshDistanceMaterial that will honor this derived material's vertex\r\n     * transformations and discarded fragments.\r\n     */\r\n    getDistanceMaterial: {\r\n      writable: true,\r\n      configurable: true,\r\n      value: function() {\r\n        let distanceMaterial = this._distanceMaterial;\r\n        if (!distanceMaterial) {\r\n          distanceMaterial = this._distanceMaterial = createDerivedMaterial(\r\n            baseMaterial.isDerivedMaterial\r\n              ? baseMaterial.getDistanceMaterial()\r\n              : new MeshDistanceMaterial(),\r\n            options\r\n          );\r\n          distanceMaterial.defines.IS_DISTANCE_MATERIAL = '';\r\n          distanceMaterial.uniforms = this.uniforms; //automatically recieve same uniform values\r\n        }\r\n        return distanceMaterial\r\n      }\r\n    },\r\n\r\n    dispose: {\r\n      writable: true,\r\n      configurable: true,\r\n      value() {\r\n        const {_depthMaterial, _distanceMaterial} = this;\r\n        if (_depthMaterial) _depthMaterial.dispose();\r\n        if (_distanceMaterial) _distanceMaterial.dispose();\r\n        baseMaterial.dispose.call(this);\r\n      }\r\n    }\r\n  };\r\n\r\n  ctorsByDerivation[optionsKey] = DerivedMaterial;\r\n  return new DerivedMaterial()\r\n}\r\n\r\n\r\nfunction upgradeShaders(material, {vertexShader, fragmentShader}, options, key) {\r\n  let {\r\n    vertexDefs,\r\n    vertexMainIntro,\r\n    vertexMainOutro,\r\n    vertexTransform,\r\n    fragmentDefs,\r\n    fragmentMainIntro,\r\n    fragmentMainOutro,\r\n    fragmentColorTransform,\r\n    customRewriter,\r\n    timeUniform\r\n  } = options;\r\n\r\n  vertexDefs = vertexDefs || '';\r\n  vertexMainIntro = vertexMainIntro || '';\r\n  vertexMainOutro = vertexMainOutro || '';\r\n  fragmentDefs = fragmentDefs || '';\r\n  fragmentMainIntro = fragmentMainIntro || '';\r\n  fragmentMainOutro = fragmentMainOutro || '';\r\n\r\n  // Expand includes if needed\r\n  if (vertexTransform || customRewriter) {\r\n    vertexShader = expandShaderIncludes(vertexShader);\r\n  }\r\n  if (fragmentColorTransform || customRewriter) {\r\n    // We need to be able to find postprocessing chunks after include expansion in order to\r\n    // put them after the fragmentColorTransform, so mark them with comments first. Even if\r\n    // this particular derivation doesn't have a fragmentColorTransform, other derivations may,\r\n    // so we still mark them.\r\n    fragmentShader = fragmentShader.replace(\r\n      /^[ \\t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,\r\n      '\\n//!BEGIN_POST_CHUNK $1\\n$&\\n//!END_POST_CHUNK\\n'\r\n    );\r\n    fragmentShader = expandShaderIncludes(fragmentShader);\r\n  }\r\n\r\n  // Apply custom rewriter function\r\n  if (customRewriter) {\r\n    let res = customRewriter({vertexShader, fragmentShader});\r\n    vertexShader = res.vertexShader;\r\n    fragmentShader = res.fragmentShader;\r\n  }\r\n\r\n  // The fragmentColorTransform needs to go before any postprocessing chunks, so extract\r\n  // those and re-insert them into the outro in the correct place:\r\n  if (fragmentColorTransform) {\r\n    let postChunks = [];\r\n    fragmentShader = fragmentShader.replace(\r\n      /^\\/\\/!BEGIN_POST_CHUNK[^]+?^\\/\\/!END_POST_CHUNK/gm, // [^]+? = non-greedy match of any chars including newlines\r\n      match => {\r\n        postChunks.push(match);\r\n        return ''\r\n      }\r\n    );\r\n    fragmentMainOutro = `${fragmentColorTransform}\\n${postChunks.join('\\n')}\\n${fragmentMainOutro}`;\r\n  }\r\n\r\n  // Inject auto-updating time uniform if requested\r\n  if (timeUniform) {\r\n    const code = `\\nuniform float ${timeUniform};\\n`;\r\n    vertexDefs = code + vertexDefs;\r\n    fragmentDefs = code + fragmentDefs;\r\n  }\r\n\r\n  // Inject a function for the vertexTransform and rename all usages of position/normal/uv\r\n  if (vertexTransform) {\r\n    // Hoist these defs to the very top so they work in other function defs\r\n    vertexShader = `vec3 troika_position_${key};\r\nvec3 troika_normal_${key};\r\nvec2 troika_uv_${key};\r\n${vertexShader}\r\n`;\r\n    vertexDefs = `${vertexDefs}\r\nvoid troikaVertexTransform${key}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\r\n  ${vertexTransform}\r\n}\r\n`;\r\n    vertexMainIntro = `\r\ntroika_position_${key} = vec3(position);\r\ntroika_normal_${key} = vec3(normal);\r\ntroika_uv_${key} = vec2(uv);\r\ntroikaVertexTransform${key}(troika_position_${key}, troika_normal_${key}, troika_uv_${key});\r\n${vertexMainIntro}\r\n`;\r\n    vertexShader = vertexShader.replace(/\\b(position|normal|uv)\\b/g, (match, match1, index, fullStr) => {\r\n      return /\\battribute\\s+vec[23]\\s+$/.test(fullStr.substr(0, index)) ? match1 : `troika_${match1}_${key}`\r\n    });\r\n\r\n    // Three r152 introduced the MAP_UV token, replace it too if it's pointing to the main 'uv'\r\n    // Perhaps the other textures too going forward?\r\n    if (!(material.map && material.map.channel > 0)) {\r\n      vertexShader = vertexShader.replace(/\\bMAP_UV\\b/g, `troika_uv_${key}`);\r\n    }\r\n  }\r\n\r\n  // Inject defs and intro/outro snippets\r\n  vertexShader = injectIntoShaderCode(vertexShader, key, vertexDefs, vertexMainIntro, vertexMainOutro);\r\n  fragmentShader = injectIntoShaderCode(fragmentShader, key, fragmentDefs, fragmentMainIntro, fragmentMainOutro);\r\n\r\n  return {\r\n    vertexShader,\r\n    fragmentShader\r\n  }\r\n}\r\n\r\nfunction injectIntoShaderCode(shaderCode, id, defs, intro, outro) {\r\n  if (intro || outro || defs) {\r\n    shaderCode = shaderCode.replace(voidMainRegExp, `\r\n${defs}\r\nvoid troikaOrigMain${id}() {`\r\n    );\r\n    shaderCode += `\r\nvoid main() {\r\n  ${intro}\r\n  troikaOrigMain${id}();\r\n  ${outro}\r\n}`;\r\n  }\r\n  return shaderCode\r\n}\r\n\r\n\r\nfunction optionsJsonReplacer(key, value) {\r\n  return key === 'uniforms' ? undefined : typeof value === 'function' ? value.toString() : value\r\n}\r\n\r\nlet _idCtr = 0;\r\nconst optionsHashesToIds = new Map();\r\nfunction getKeyForOptions(options) {\r\n  const optionsHash = JSON.stringify(options, optionsJsonReplacer);\r\n  let id = optionsHashesToIds.get(optionsHash);\r\n  if (id == null) {\r\n    optionsHashesToIds.set(optionsHash, (id = ++_idCtr));\r\n  }\r\n  return id\r\n}\r\n\r\n// Copied from threejs WebGLPrograms.js so we can resolve builtin materials to their shaders\r\n// TODO how can we keep this from getting stale?\r\nconst MATERIAL_TYPES_TO_SHADERS = {\r\n  MeshDepthMaterial: 'depth',\r\n  MeshDistanceMaterial: 'distanceRGBA',\r\n  MeshNormalMaterial: 'normal',\r\n  MeshBasicMaterial: 'basic',\r\n  MeshLambertMaterial: 'lambert',\r\n  MeshPhongMaterial: 'phong',\r\n  MeshToonMaterial: 'toon',\r\n  MeshStandardMaterial: 'physical',\r\n  MeshPhysicalMaterial: 'physical',\r\n  MeshMatcapMaterial: 'matcap',\r\n  LineBasicMaterial: 'basic',\r\n  LineDashedMaterial: 'dashed',\r\n  PointsMaterial: 'points',\r\n  ShadowMaterial: 'shadow',\r\n  SpriteMaterial: 'sprite'\r\n};\r\n\r\n/**\r\n * Given a Three.js `Material` instance, find the shaders/uniforms that will be\r\n * used to render that material.\r\n *\r\n * @param material - the Material instance\r\n * @return {object} - the material's shader info: `{uniforms:{}, fragmentShader:'', vertexShader:''}`\r\n */\r\nfunction getShadersForMaterial(material) {\r\n  let builtinType = MATERIAL_TYPES_TO_SHADERS[material.type];\r\n  return builtinType ? ShaderLib[builtinType] : material //TODO fallback for unknown type?\r\n}\r\n\r\n/**\r\n * Find all uniforms and their types within a shader code string.\r\n *\r\n * @param {string} shader - The shader code to parse\r\n * @return {object} mapping of uniform names to their glsl type\r\n */\r\nfunction getShaderUniformTypes(shader) {\r\n  let uniformRE = /\\buniform\\s+(int|float|vec[234]|mat[34])\\s+([A-Za-z_][\\w]*)/g;\r\n  let uniforms = Object.create(null);\r\n  let match;\r\n  while ((match = uniformRE.exec(shader)) !== null) {\r\n    uniforms[match[2]] = match[1];\r\n  }\r\n  return uniforms\r\n}\r\n\r\n/**\r\n * Helper for smoothing out the `m.getInverse(x)` --> `m.copy(x).invert()` conversion\r\n * that happened in ThreeJS r123.\r\n * @param {Matrix4} srcMatrix\r\n * @param {Matrix4} [tgtMatrix]\r\n */\r\nfunction invertMatrix4(srcMatrix, tgtMatrix = new Matrix4()) {\r\n  if (typeof tgtMatrix.invert === 'function') {\r\n    tgtMatrix.copy(srcMatrix).invert();\r\n  } else {\r\n    tgtMatrix.getInverse(srcMatrix);\r\n  }\r\n  return tgtMatrix\r\n}\r\n\r\n/*\r\nInput geometry is a cylinder with r=1, height in y dimension from 0 to 1,\r\ndivided into a reasonable number of height segments.\r\n*/\r\n\r\nconst vertexDefs = `\r\nuniform vec3 pointA;\r\nuniform vec3 controlA;\r\nuniform vec3 controlB;\r\nuniform vec3 pointB;\r\nuniform float radius;\r\nvarying float bezierT;\r\n\r\nvec3 cubicBezier(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\r\n  float t2 = 1.0 - t;\r\n  float b0 = t2 * t2 * t2;\r\n  float b1 = 3.0 * t * t2 * t2;\r\n  float b2 = 3.0 * t * t * t2;\r\n  float b3 = t * t * t;\r\n  return b0 * p1 + b1 * c1 + b2 * c2 + b3 * p2;\r\n}\r\n\r\nvec3 cubicBezierDerivative(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\r\n  float t2 = 1.0 - t;\r\n  return -3.0 * p1 * t2 * t2 +\r\n    c1 * (3.0 * t2 * t2 - 6.0 * t2 * t) +\r\n    c2 * (6.0 * t2 * t - 3.0 * t * t) +\r\n    3.0 * p2 * t * t;\r\n}\r\n`;\r\n\r\nconst vertexTransform = `\r\nfloat t = position.y;\r\nbezierT = t;\r\nvec3 bezierCenterPos = cubicBezier(pointA, controlA, controlB, pointB, t);\r\nvec3 bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t));\r\n\r\n// Make \"sideways\" always perpendicular to the camera ray; this ensures that any twists\r\n// in the cylinder occur where you won't see them: \r\nvec3 viewDirection = normalMatrix * vec3(0.0, 0.0, 1.0);\r\nif (bezierDir == viewDirection) {\r\n  bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t == 1.0 ? t - 0.0001 : t + 0.0001));\r\n}\r\nvec3 sideways = normalize(cross(bezierDir, viewDirection));\r\nvec3 upish = normalize(cross(sideways, bezierDir));\r\n\r\n// Build a matrix for transforming this disc in the cylinder:\r\nmat4 discTx;\r\ndiscTx[0].xyz = sideways * radius;\r\ndiscTx[1].xyz = bezierDir * radius;\r\ndiscTx[2].xyz = upish * radius;\r\ndiscTx[3].xyz = bezierCenterPos;\r\ndiscTx[3][3] = 1.0;\r\n\r\n// Apply transform, ignoring original y\r\nposition = (discTx * vec4(position.x, 0.0, position.z, 1.0)).xyz;\r\nnormal = normalize(mat3(discTx) * normal);\r\n`;\r\n\r\nconst fragmentDefs = `\r\nuniform vec3 dashing;\r\nvarying float bezierT;\r\n`;\r\n\r\nconst fragmentMainIntro = `\r\nif (dashing.x + dashing.y > 0.0) {\r\n  float dashFrac = mod(bezierT - dashing.z, dashing.x + dashing.y);\r\n  if (dashFrac > dashing.x) {\r\n    discard;\r\n  }\r\n}\r\n`;\r\n\r\n// Debugging: separate color for each of the 6 sides:\r\n// const fragmentColorTransform = `\r\n// float sideNum = floor(vUV.x * 6.0);\r\n// vec3 mixColor = sideNum < 1.0 ? vec3(1.0, 0.0, 0.0) :\r\n//   sideNum < 2.0 ? vec3(0.0, 1.0, 1.0) :\r\n//   sideNum < 3.0 ? vec3(1.0, 1.0, 0.0) :\r\n//   sideNum < 4.0 ? vec3(0.0, 0.0, 1.0) :\r\n//   sideNum < 5.0 ? vec3(0.0, 1.0, 0.0) :\r\n//   vec3(1.0, 0.0, 1.0);\r\n// gl_FragColor.xyz = mix(gl_FragColor.xyz, mixColor, 0.5);\r\n// `\r\n\r\n\r\n\r\nfunction createBezierMeshMaterial(baseMaterial) {\r\n  return createDerivedMaterial(\r\n    baseMaterial,\r\n    {\r\n      chained: true,\r\n      uniforms: {\r\n        pointA: {value: new Vector3()},\r\n        controlA: {value: new Vector3()},\r\n        controlB: {value: new Vector3()},\r\n        pointB: {value: new Vector3()},\r\n        radius: {value: 0.01},\r\n        dashing: {value: new Vector3()} //on, off, offset\r\n      },\r\n      vertexDefs,\r\n      vertexTransform,\r\n      fragmentDefs,\r\n      fragmentMainIntro\r\n    }\r\n  )\r\n}\r\n\r\nlet geometry = null;\r\n\r\nconst defaultBaseMaterial = /*#__PURE__*/new MeshStandardMaterial({color: 0xffffff, side: DoubleSide});\r\n\r\n\r\n/**\r\n * A ThreeJS `Mesh` that bends a tube shape along a 3D cubic bezier path. The bending is done\r\n * by deforming a straight cylindrical geometry in the vertex shader based on a set of four\r\n * control point uniforms. It patches the necessary GLSL into the mesh's assigned `material`\r\n * automatically.\r\n *\r\n * The cubiz bezier path is determined by its four `Vector3` properties:\r\n * - `pointA`\r\n * - `controlA`\r\n * - `controlB`\r\n * - `pointB`\r\n *\r\n * The tube's radius is controlled by its `radius` property, which defaults to `0.01`.\r\n *\r\n * You can also give the tube a dashed appearance with two properties:\r\n *\r\n * - `dashArray` - an array of two numbers, defining the length of \"on\" and \"off\" parts of\r\n *   the dash. Each is a 0-1 ratio of the entire path's length. (Actually this is the `t` length\r\n *   used as input to the cubic bezier function, not its visible length.)\r\n * - `dashOffset` - offset of where the dash starts. You can animate this to make the dashes move.\r\n *\r\n * Note that the dashes will appear like a hollow tube, not solid. This will be more apparent on\r\n * thicker tubes.\r\n *\r\n * TODO: proper geometry bounding sphere and raycasting\r\n * TODO: allow control of the geometry's segment counts\r\n */\r\nclass BezierMesh extends Mesh {\r\n  static getGeometry() {\r\n    return geometry || (geometry =\r\n      new CylinderGeometry(1, 1, 1, 6, 64).translate(0, 0.5, 0)\r\n    )\r\n  }\r\n\r\n  constructor() {\r\n    super(\r\n      BezierMesh.getGeometry(),\r\n      defaultBaseMaterial\r\n    );\r\n\r\n    this.pointA = new Vector3();\r\n    this.controlA = new Vector3();\r\n    this.controlB = new Vector3();\r\n    this.pointB = new Vector3();\r\n    this.radius = 0.01;\r\n    this.dashArray = new Vector2();\r\n    this.dashOffset = 0;\r\n\r\n    // TODO - disabling frustum culling until I figure out how to customize the\r\n    //  geometry's bounding sphere that gets used\r\n    this.frustumCulled = false;\r\n  }\r\n\r\n  // Handler for automatically wrapping the base material with our upgrades. We do the wrapping\r\n  // lazily on _read_ rather than write to avoid unnecessary wrapping on transient values.\r\n  get material() {\r\n    let derivedMaterial = this._derivedMaterial;\r\n    const baseMaterial = this._baseMaterial || this._defaultMaterial || (this._defaultMaterial = defaultBaseMaterial.clone());\r\n    if (!derivedMaterial || derivedMaterial.baseMaterial !== baseMaterial) {\r\n      derivedMaterial = this._derivedMaterial = createBezierMeshMaterial(baseMaterial);\r\n      // dispose the derived material when its base material is disposed:\r\n      baseMaterial.addEventListener('dispose', function onDispose() {\r\n        baseMaterial.removeEventListener('dispose', onDispose);\r\n        derivedMaterial.dispose();\r\n      });\r\n    }\r\n    return derivedMaterial\r\n  }\r\n  set material(baseMaterial) {\r\n    this._baseMaterial = baseMaterial;\r\n  }\r\n\r\n  // Create and update material for shadows upon request:\r\n  get customDepthMaterial() {\r\n    return this.material.getDepthMaterial()\r\n  }\r\n  get customDistanceMaterial() {\r\n    return this.material.getDistanceMaterial()\r\n  }\r\n\r\n  onBeforeRender() {\r\n    const {uniforms} = this.material;\r\n    const {pointA, controlA, controlB, pointB, radius, dashArray, dashOffset} = this;\r\n    uniforms.pointA.value.copy(pointA);\r\n    uniforms.controlA.value.copy(controlA);\r\n    uniforms.controlB.value.copy(controlB);\r\n    uniforms.pointB.value.copy(pointB);\r\n    uniforms.radius.value = radius;\r\n    uniforms.dashing.value.set(dashArray.x, dashArray.y, dashOffset || 0);\r\n  }\r\n\r\n  raycast(/*raycaster, intersects*/) {\r\n    // TODO - just fail for now\r\n  }\r\n}\r\n\r\nexport { BezierMesh, createDerivedMaterial, expandShaderIncludes, getShaderUniformTypes, getShadersForMaterial, invertMatrix4, voidMainRegExp };\r\n", "import { Texture, LinearFilter, Color, InstancedBufferGeometry, Sphere, Box3, BackSide, DoubleSide, InstancedBufferAttribute, PlaneGeometry, BufferGeometry, Float32BufferAttribute, Vector2, Vector4, Matrix3, Mesh, FrontSide, MeshBasicMaterial, Matrix4, Vector3 } from 'three';\r\nimport { terminateWorker, defineWorkerModule } from 'troika-worker-utils';\r\nimport createSDFGenerator from 'webgl-sdf-generator';\r\nimport bidiFactory from 'bidi-js';\r\nimport { createDerivedMaterial, voidMainRegExp } from 'troika-three-utils';\r\n\r\n/**\r\n * Factory function that creates a self-contained environment for processing text typesetting requests.\r\n *\r\n * It is important that this function has no closure dependencies, so that it can be easily injected\r\n * into the source for a Worker without requiring a build step or complex dependency loading. All its\r\n * dependencies must be passed in at initialization.\r\n *\r\n * @param {function} fontParser - a function that accepts an ArrayBuffer of the font data and returns\r\n * a standardized structure giving access to the font and its glyphs:\r\n *   {\r\n *     unitsPerEm: number,\r\n *     ascender: number,\r\n *     descender: number,\r\n *     capHeight: number,\r\n *     xHeight: number,\r\n *     lineGap: number,\r\n *     forEachGlyph(string, fontSize, letterSpacing, callback) {\r\n *       //invokes callback for each glyph to render, passing it an object:\r\n *       callback({\r\n *         index: number,\r\n *         advanceWidth: number,\r\n *         xMin: number,\r\n *         yMin: number,\r\n *         xMax: number,\r\n *         yMax: number,\r\n *         path: string,\r\n *         pathCommandCount: number\r\n *       })\r\n *     }\r\n *   }\r\n * @param {object} bidi - the bidi.js implementation object\r\n * @param {Object} config\r\n * @return {Object}\r\n */\r\nfunction createTypesetter(fontParser, bidi, config) {\r\n\r\n  const {\r\n    defaultFontURL\r\n  } = config;\r\n\r\n  /**\r\n   * Holds parsed font objects by url\r\n   */\r\n  const fonts = Object.create(null);\r\n\r\n  const INF = Infinity;\r\n\r\n  // Set of Unicode Default_Ignorable_Code_Point characters, these will not produce visible glyphs\r\n  // eslint-disable-next-line no-misleading-character-class\r\n  const DEFAULT_IGNORABLE_CHARS = /[\\u00AD\\u034F\\u061C\\u115F-\\u1160\\u17B4-\\u17B5\\u180B-\\u180E\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u3164\\uFE00-\\uFE0F\\uFEFF\\uFFA0\\uFFF0-\\uFFF8]/;\r\n\r\n  // This regex (instead of /\\s/) allows us to select all whitespace EXCEPT for non-breaking white spaces\r\n  const lineBreakingWhiteSpace = `[^\\\\S\\\\u00A0]`;\r\n\r\n  // Incomplete set of characters that allow line breaking after them\r\n  // In the future we may consider a full Unicode line breaking algorithm impl: https://www.unicode.org/reports/tr14\r\n  const BREAK_AFTER_CHARS = new RegExp(`${lineBreakingWhiteSpace}|[\\\\-\\\\u007C\\\\u00AD\\\\u2010\\\\u2012-\\\\u2014\\\\u2027\\\\u2056\\\\u2E17\\\\u2E40]`);\r\n\r\n  /**\r\n   * Load a given font url\r\n   */\r\n  function doLoadFont(url, callback) {\r\n    function tryLoad() {\r\n      const onError = err => {\r\n        console.error(`Failure loading font ${url}${url === defaultFontURL ? '' : '; trying fallback'}`, err);\r\n        if (url !== defaultFontURL) {\r\n          url = defaultFontURL;\r\n          tryLoad();\r\n        }\r\n      };\r\n      try {\r\n        const request = new XMLHttpRequest();\r\n        request.open('get', url, true);\r\n        request.responseType = 'arraybuffer';\r\n        request.onload = function () {\r\n          if (request.status >= 400) {\r\n            onError(new Error(request.statusText));\r\n          }\r\n          else if (request.status > 0) {\r\n            try {\r\n              const fontObj = fontParser(request.response);\r\n              callback(fontObj);\r\n            } catch (e) {\r\n              onError(e);\r\n            }\r\n          }\r\n        };\r\n        request.onerror = onError;\r\n        request.send();\r\n      } catch(err) {\r\n        onError(err);\r\n      }\r\n    }\r\n    tryLoad();\r\n  }\r\n\r\n\r\n  /**\r\n   * Load a given font url if needed, invoking a callback when it's loaded. If already\r\n   * loaded, the callback will be called synchronously.\r\n   */\r\n  function loadFont(fontUrl, callback) {\r\n    if (!fontUrl) fontUrl = defaultFontURL;\r\n    let font = fonts[fontUrl];\r\n    if (font) {\r\n      // if currently loading font, add to callbacks, otherwise execute immediately\r\n      if (font.pending) {\r\n        font.pending.push(callback);\r\n      } else {\r\n        callback(font);\r\n      }\r\n    } else {\r\n      fonts[fontUrl] = {pending: [callback]};\r\n      doLoadFont(fontUrl, fontObj => {\r\n        let callbacks = fonts[fontUrl].pending;\r\n        fonts[fontUrl] = fontObj;\r\n        callbacks.forEach(cb => cb(fontObj));\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Main entry point.\r\n   * Process a text string with given font and formatting parameters, and return all info\r\n   * necessary to render all its glyphs.\r\n   */\r\n  function typeset(\r\n    {\r\n      text='',\r\n      font=defaultFontURL,\r\n      sdfGlyphSize=64,\r\n      fontSize=1,\r\n      letterSpacing=0,\r\n      lineHeight='normal',\r\n      maxWidth=INF,\r\n      direction,\r\n      textAlign='left',\r\n      textIndent=0,\r\n      whiteSpace='normal',\r\n      overflowWrap='normal',\r\n      anchorX = 0,\r\n      anchorY = 0,\r\n      includeCaretPositions=false,\r\n      chunkedBoundsSize=8192,\r\n      colorRanges=null\r\n    },\r\n    callback,\r\n    metricsOnly=false\r\n  ) {\r\n    const mainStart = now();\r\n    const timings = {fontLoad: 0, typesetting: 0};\r\n\r\n    // Ensure newlines are normalized\r\n    if (text.indexOf('\\r') > -1) {\r\n      console.info('Typesetter: got text with \\\\r chars; normalizing to \\\\n');\r\n      text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\r\n    }\r\n\r\n    // Ensure we've got numbers not strings\r\n    fontSize = +fontSize;\r\n    letterSpacing = +letterSpacing;\r\n    maxWidth = +maxWidth;\r\n    lineHeight = lineHeight || 'normal';\r\n    textIndent = +textIndent;\r\n\r\n    loadFont(font, fontObj => {\r\n      const hasMaxWidth = isFinite(maxWidth);\r\n      let glyphIds = null;\r\n      let glyphPositions = null;\r\n      let glyphData = null;\r\n      let glyphColors = null;\r\n      let caretPositions = null;\r\n      let visibleBounds = null;\r\n      let chunkedBounds = null;\r\n      let maxLineWidth = 0;\r\n      let renderableGlyphCount = 0;\r\n      let canWrap = whiteSpace !== 'nowrap';\r\n      const {ascender, descender, unitsPerEm, lineGap, capHeight, xHeight} = fontObj;\r\n      timings.fontLoad = now() - mainStart;\r\n      const typesetStart = now();\r\n\r\n      // Find conversion between native font units and fontSize units; this will already be done\r\n      // for the gx/gy values below but everything else we'll need to convert\r\n      const fontSizeMult = fontSize / unitsPerEm;\r\n\r\n      // Determine appropriate value for 'normal' line height based on the font's actual metrics\r\n      // TODO this does not guarantee individual glyphs won't exceed the line height, e.g. Roboto; should we use yMin/Max instead?\r\n      if (lineHeight === 'normal') {\r\n        lineHeight = (ascender - descender + lineGap) / unitsPerEm;\r\n      }\r\n\r\n      // Determine line height and leading adjustments\r\n      lineHeight = lineHeight * fontSize;\r\n      const halfLeading = (lineHeight - (ascender - descender) * fontSizeMult) / 2;\r\n      const topBaseline = -(ascender * fontSizeMult + halfLeading);\r\n      const caretHeight = Math.min(lineHeight, (ascender - descender) * fontSizeMult);\r\n      const caretBottomOffset = (ascender + descender) / 2 * fontSizeMult - caretHeight / 2;\r\n\r\n      // Distribute glyphs into lines based on wrapping\r\n      let lineXOffset = textIndent;\r\n      let currentLine = new TextLine();\r\n      const lines = [currentLine];\r\n\r\n      fontObj.forEachGlyph(text, fontSize, letterSpacing, (glyphObj, glyphX, charIndex) => {\r\n        const char = text.charAt(charIndex);\r\n        const glyphWidth = glyphObj.advanceWidth * fontSizeMult;\r\n        const curLineCount = currentLine.count;\r\n        let nextLine;\r\n\r\n        // Calc isWhitespace and isEmpty once per glyphObj\r\n        if (!('isEmpty' in glyphObj)) {\r\n          glyphObj.isWhitespace = !!char && new RegExp(lineBreakingWhiteSpace).test(char);\r\n          glyphObj.canBreakAfter = !!char && BREAK_AFTER_CHARS.test(char);\r\n          glyphObj.isEmpty = glyphObj.xMin === glyphObj.xMax || glyphObj.yMin === glyphObj.yMax || DEFAULT_IGNORABLE_CHARS.test(char);\r\n        }\r\n        if (!glyphObj.isWhitespace && !glyphObj.isEmpty) {\r\n          renderableGlyphCount++;\r\n        }\r\n\r\n        // If a non-whitespace character overflows the max width, we need to soft-wrap\r\n        if (canWrap && hasMaxWidth && !glyphObj.isWhitespace && glyphX + glyphWidth + lineXOffset > maxWidth && curLineCount) {\r\n          // If it's the first char after a whitespace, start a new line\r\n          if (currentLine.glyphAt(curLineCount - 1).glyphObj.canBreakAfter) {\r\n            nextLine = new TextLine();\r\n            lineXOffset = -glyphX;\r\n          } else {\r\n            // Back up looking for a whitespace character to wrap at\r\n            for (let i = curLineCount; i--;) {\r\n              // If we got the start of the line there's no soft break point; make hard break if overflowWrap='break-word'\r\n              if (i === 0 && overflowWrap === 'break-word') {\r\n                nextLine = new TextLine();\r\n                lineXOffset = -glyphX;\r\n                break\r\n              }\r\n              // Found a soft break point; move all chars since it to a new line\r\n              else if (currentLine.glyphAt(i).glyphObj.canBreakAfter) {\r\n                nextLine = currentLine.splitAt(i + 1);\r\n                const adjustX = nextLine.glyphAt(0).x;\r\n                lineXOffset -= adjustX;\r\n                for (let j = nextLine.count; j--;) {\r\n                  nextLine.glyphAt(j).x -= adjustX;\r\n                }\r\n                break\r\n              }\r\n            }\r\n          }\r\n          if (nextLine) {\r\n            currentLine.isSoftWrapped = true;\r\n            currentLine = nextLine;\r\n            lines.push(currentLine);\r\n            maxLineWidth = maxWidth; //after soft wrapping use maxWidth as calculated width\r\n          }\r\n        }\r\n\r\n        let fly = currentLine.glyphAt(currentLine.count);\r\n        fly.glyphObj = glyphObj;\r\n        fly.x = glyphX + lineXOffset;\r\n        fly.width = glyphWidth;\r\n        fly.charIndex = charIndex;\r\n\r\n        // Handle hard line breaks\r\n        if (char === '\\n') {\r\n          currentLine = new TextLine();\r\n          lines.push(currentLine);\r\n          lineXOffset = -(glyphX + glyphWidth + (letterSpacing * fontSize)) + textIndent;\r\n        }\r\n      });\r\n\r\n      // Calculate width of each line (excluding trailing whitespace) and maximum block width\r\n      lines.forEach(line => {\r\n        for (let i = line.count; i--;) {\r\n          let {glyphObj, x, width} = line.glyphAt(i);\r\n          if (!glyphObj.isWhitespace) {\r\n            line.width = x + width;\r\n            if (line.width > maxLineWidth) {\r\n              maxLineWidth = line.width;\r\n            }\r\n            return\r\n          }\r\n        }\r\n      });\r\n\r\n      // Find overall position adjustments for anchoring\r\n      let anchorXOffset = 0;\r\n      let anchorYOffset = 0;\r\n      if (anchorX) {\r\n        if (typeof anchorX === 'number') {\r\n          anchorXOffset = -anchorX;\r\n        }\r\n        else if (typeof anchorX === 'string') {\r\n          anchorXOffset = -maxLineWidth * (\r\n            anchorX === 'left' ? 0 :\r\n            anchorX === 'center' ? 0.5 :\r\n            anchorX === 'right' ? 1 :\r\n            parsePercent(anchorX)\r\n          );\r\n        }\r\n      }\r\n      if (anchorY) {\r\n        if (typeof anchorY === 'number') {\r\n          anchorYOffset = -anchorY;\r\n        }\r\n        else if (typeof anchorY === 'string') {\r\n          let height = lines.length * lineHeight;\r\n          anchorYOffset = anchorY === 'top' ? 0 :\r\n            anchorY === 'top-baseline' ? -topBaseline :\r\n            anchorY === 'top-cap' ? -topBaseline - capHeight * fontSizeMult :\r\n            anchorY === 'top-ex' ? -topBaseline - xHeight * fontSizeMult :\r\n            anchorY === 'middle' ? height / 2 :\r\n            anchorY === 'bottom' ? height :\r\n            anchorY === 'bottom-baseline' ? height - halfLeading + descender * fontSizeMult :\r\n            parsePercent(anchorY) * height;\r\n        }\r\n      }\r\n\r\n      if (!metricsOnly) {\r\n        // Resolve bidi levels\r\n        const bidiLevelsResult = bidi.getEmbeddingLevels(text, direction);\r\n\r\n        // Process each line, applying alignment offsets, adding each glyph to the atlas, and\r\n        // collecting all renderable glyphs into a single collection.\r\n        glyphIds = new Uint16Array(renderableGlyphCount);\r\n        glyphPositions = new Float32Array(renderableGlyphCount * 2);\r\n        glyphData = {};\r\n        visibleBounds = [INF, INF, -INF, -INF];\r\n        chunkedBounds = [];\r\n        let lineYOffset = topBaseline;\r\n        if (includeCaretPositions) {\r\n          caretPositions = new Float32Array(text.length * 3);\r\n        }\r\n        if (colorRanges) {\r\n          glyphColors = new Uint8Array(renderableGlyphCount * 3);\r\n        }\r\n        let renderableGlyphIndex = 0;\r\n        let prevCharIndex = -1;\r\n        let colorCharIndex = -1;\r\n        let chunk;\r\n        let currentColor;\r\n        lines.forEach((line, lineIndex) => {\r\n          let {count:lineGlyphCount, width:lineWidth} = line;\r\n\r\n          // Ignore empty lines\r\n          if (lineGlyphCount > 0) {\r\n            // Count trailing whitespaces, we want to ignore these for certain things\r\n            let trailingWhitespaceCount = 0;\r\n            for (let i = lineGlyphCount; i-- && line.glyphAt(i).glyphObj.isWhitespace;) {\r\n              trailingWhitespaceCount++;\r\n            }\r\n\r\n            // Apply horizontal alignment adjustments\r\n            let lineXOffset = 0;\r\n            let justifyAdjust = 0;\r\n            if (textAlign === 'center') {\r\n              lineXOffset = (maxLineWidth - lineWidth) / 2;\r\n            } else if (textAlign === 'right') {\r\n              lineXOffset = maxLineWidth - lineWidth;\r\n            } else if (textAlign === 'justify' && line.isSoftWrapped) {\r\n              // count non-trailing whitespace characters, and we'll adjust the offsets per character in the next loop\r\n              let whitespaceCount = 0;\r\n              for (let i = lineGlyphCount - trailingWhitespaceCount; i--;) {\r\n                if (line.glyphAt(i).glyphObj.isWhitespace) {\r\n                  whitespaceCount++;\r\n                }\r\n              }\r\n              justifyAdjust = (maxLineWidth - lineWidth) / whitespaceCount;\r\n            }\r\n            if (justifyAdjust || lineXOffset) {\r\n              let justifyOffset = 0;\r\n              for (let i = 0; i < lineGlyphCount; i++) {\r\n                let glyphInfo = line.glyphAt(i);\r\n                const glyphObj = glyphInfo.glyphObj;\r\n                glyphInfo.x += lineXOffset + justifyOffset;\r\n                // Expand non-trailing whitespaces for justify alignment\r\n                if (justifyAdjust !== 0 && glyphObj.isWhitespace && i < lineGlyphCount - trailingWhitespaceCount) {\r\n                  justifyOffset += justifyAdjust;\r\n                  glyphInfo.width += justifyAdjust;\r\n                }\r\n              }\r\n            }\r\n\r\n            // Perform bidi range flipping\r\n            const flips = bidi.getReorderSegments(\r\n              text, bidiLevelsResult, line.glyphAt(0).charIndex, line.glyphAt(line.count - 1).charIndex\r\n            );\r\n            for (let fi = 0; fi < flips.length; fi++) {\r\n              const [start, end] = flips[fi];\r\n              // Map start/end string indices to indices in the line\r\n              let left = Infinity, right = -Infinity;\r\n              for (let i = 0; i < lineGlyphCount; i++) {\r\n                if (line.glyphAt(i).charIndex >= start) { // gte to handle removed characters\r\n                  let startInLine = i, endInLine = i;\r\n                  for (; endInLine < lineGlyphCount; endInLine++) {\r\n                    let info = line.glyphAt(endInLine);\r\n                    if (info.charIndex > end) {\r\n                      break\r\n                    }\r\n                    if (endInLine < lineGlyphCount - trailingWhitespaceCount) { //don't include trailing ws in flip width\r\n                      left = Math.min(left, info.x);\r\n                      right = Math.max(right, info.x + info.width);\r\n                    }\r\n                  }\r\n                  for (let j = startInLine; j < endInLine; j++) {\r\n                    const glyphInfo = line.glyphAt(j);\r\n                    glyphInfo.x = right - (glyphInfo.x + glyphInfo.width - left);\r\n                  }\r\n                  break\r\n                }\r\n              }\r\n            }\r\n\r\n            // Assemble final data arrays\r\n            let glyphObj;\r\n            const setGlyphObj = g => glyphObj = g;\r\n            for (let i = 0; i < lineGlyphCount; i++) {\r\n              let glyphInfo = line.glyphAt(i);\r\n              glyphObj = glyphInfo.glyphObj;\r\n              const glyphId = glyphObj.index;\r\n\r\n              // Replace mirrored characters in rtl\r\n              const rtl = bidiLevelsResult.levels[glyphInfo.charIndex] & 1; //odd level means rtl\r\n              if (rtl) {\r\n                const mirrored = bidi.getMirroredCharacter(text[glyphInfo.charIndex]);\r\n                if (mirrored) {\r\n                  fontObj.forEachGlyph(mirrored, 0, 0, setGlyphObj);\r\n                }\r\n              }\r\n\r\n              // Add caret positions\r\n              if (includeCaretPositions) {\r\n                const {charIndex} = glyphInfo;\r\n                const caretLeft = glyphInfo.x + anchorXOffset;\r\n                const caretRight = glyphInfo.x + glyphInfo.width + anchorXOffset;\r\n                caretPositions[charIndex * 3] = rtl ? caretRight : caretLeft; //start edge x\r\n                caretPositions[charIndex * 3 + 1] = rtl ? caretLeft : caretRight; //end edge x\r\n                caretPositions[charIndex * 3 + 2] = lineYOffset + caretBottomOffset + anchorYOffset; //common bottom y\r\n\r\n                // If we skipped any chars from the previous glyph (due to ligature subs), fill in caret\r\n                // positions for those missing char indices; currently this uses a best-guess by dividing\r\n                // the ligature's width evenly. In the future we may try to use the font's LigatureCaretList\r\n                // table to get better interior caret positions.\r\n                const ligCount = charIndex - prevCharIndex;\r\n                if (ligCount > 1) {\r\n                  fillLigatureCaretPositions(caretPositions, prevCharIndex, ligCount);\r\n                }\r\n                prevCharIndex = charIndex;\r\n              }\r\n\r\n              // Track current color range\r\n              if (colorRanges) {\r\n                const {charIndex} = glyphInfo;\r\n                while(charIndex > colorCharIndex) {\r\n                  colorCharIndex++;\r\n                  if (colorRanges.hasOwnProperty(colorCharIndex)) {\r\n                    currentColor = colorRanges[colorCharIndex];\r\n                  }\r\n                }\r\n              }\r\n\r\n              // Get atlas data for renderable glyphs\r\n              if (!glyphObj.isWhitespace && !glyphObj.isEmpty) {\r\n                const idx = renderableGlyphIndex++;\r\n\r\n                // Add this glyph's path data\r\n                if (!glyphData[glyphId]) {\r\n                  glyphData[glyphId] = {\r\n                    path: glyphObj.path,\r\n                    pathBounds: [glyphObj.xMin, glyphObj.yMin, glyphObj.xMax, glyphObj.yMax]\r\n                  };\r\n                }\r\n\r\n                // Determine final glyph position and add to glyphPositions array\r\n                const glyphX = glyphInfo.x + anchorXOffset;\r\n                const glyphY = lineYOffset + anchorYOffset;\r\n                glyphPositions[idx * 2] = glyphX;\r\n                glyphPositions[idx * 2 + 1] = glyphY;\r\n\r\n                // Track total visible bounds\r\n                const visX0 = glyphX + glyphObj.xMin * fontSizeMult;\r\n                const visY0 = glyphY + glyphObj.yMin * fontSizeMult;\r\n                const visX1 = glyphX + glyphObj.xMax * fontSizeMult;\r\n                const visY1 = glyphY + glyphObj.yMax * fontSizeMult;\r\n                if (visX0 < visibleBounds[0]) visibleBounds[0] = visX0;\r\n                if (visY0 < visibleBounds[1]) visibleBounds[1] = visY0;\r\n                if (visX1 > visibleBounds[2]) visibleBounds[2] = visX1;\r\n                if (visY1 > visibleBounds[3]) visibleBounds[3] = visY1;\r\n\r\n                // Track bounding rects for each chunk of N glyphs\r\n                if (idx % chunkedBoundsSize === 0) {\r\n                  chunk = {start: idx, end: idx, rect: [INF, INF, -INF, -INF]};\r\n                  chunkedBounds.push(chunk);\r\n                }\r\n                chunk.end++;\r\n                const chunkRect = chunk.rect;\r\n                if (visX0 < chunkRect[0]) chunkRect[0] = visX0;\r\n                if (visY0 < chunkRect[1]) chunkRect[1] = visY0;\r\n                if (visX1 > chunkRect[2]) chunkRect[2] = visX1;\r\n                if (visY1 > chunkRect[3]) chunkRect[3] = visY1;\r\n\r\n                // Add to glyph ids array\r\n                glyphIds[idx] = glyphId;\r\n\r\n                // Add colors\r\n                if (colorRanges) {\r\n                  const start = idx * 3;\r\n                  glyphColors[start] = currentColor >> 16 & 255;\r\n                  glyphColors[start + 1] = currentColor >> 8 & 255;\r\n                  glyphColors[start + 2] = currentColor & 255;\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          // Increment y offset for next line\r\n          lineYOffset -= lineHeight;\r\n        });\r\n\r\n        // Fill in remaining caret positions in case the final character was a ligature\r\n        if (caretPositions) {\r\n          const ligCount = text.length - prevCharIndex;\r\n          if (ligCount > 1) {\r\n            fillLigatureCaretPositions(caretPositions, prevCharIndex, ligCount);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Timing stats\r\n      timings.typesetting = now() - typesetStart;\r\n\r\n      callback({\r\n        glyphIds, //font indices for each glyph\r\n        glyphPositions, //x,y of each glyph's origin in layout\r\n        glyphData, //dict holding data about each glyph appearing in the text\r\n        caretPositions, //startX,endX,bottomY caret positions for each char\r\n        caretHeight, //height of cursor from bottom to top\r\n        glyphColors, //color for each glyph, if color ranges supplied\r\n        chunkedBounds, //total rects per (n=chunkedBoundsSize) consecutive glyphs\r\n        fontSize, //calculated em height\r\n        unitsPerEm, //font units per em\r\n        ascender: ascender * fontSizeMult, //font ascender\r\n        descender: descender * fontSizeMult, //font descender\r\n        capHeight: capHeight * fontSizeMult, //font cap-height\r\n        xHeight: xHeight * fontSizeMult, //font x-height\r\n        lineHeight, //computed line height\r\n        topBaseline, //y coordinate of the top line's baseline\r\n        blockBounds: [ //bounds for the whole block of text, including vertical padding for lineHeight\r\n          anchorXOffset,\r\n          anchorYOffset - lines.length * lineHeight,\r\n          anchorXOffset + maxLineWidth,\r\n          anchorYOffset\r\n        ],\r\n        visibleBounds, //total bounds of visible text paths, may be larger or smaller than blockBounds\r\n        timings\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * For a given text string and font parameters, determine the resulting block dimensions\r\n   * after wrapping for the given maxWidth.\r\n   * @param args\r\n   * @param callback\r\n   */\r\n  function measure(args, callback) {\r\n    typeset(args, (result) => {\r\n      const [x0, y0, x1, y1] = result.blockBounds;\r\n      callback({\r\n        width: x1 - x0,\r\n        height: y1 - y0\r\n      });\r\n    }, {metricsOnly: true});\r\n  }\r\n\r\n  function parsePercent(str) {\r\n    let match = str.match(/^([\\d.]+)%$/);\r\n    let pct = match ? parseFloat(match[1]) : NaN;\r\n    return isNaN(pct) ? 0 : pct / 100\r\n  }\r\n\r\n  function fillLigatureCaretPositions(caretPositions, ligStartIndex, ligCount) {\r\n    const ligStartX = caretPositions[ligStartIndex * 3];\r\n    const ligEndX = caretPositions[ligStartIndex * 3 + 1];\r\n    const ligY = caretPositions[ligStartIndex * 3 + 2];\r\n    const guessedAdvanceX = (ligEndX - ligStartX) / ligCount;\r\n    for (let i = 0; i < ligCount; i++) {\r\n      const startIndex = (ligStartIndex + i) * 3;\r\n      caretPositions[startIndex] = ligStartX + guessedAdvanceX * i;\r\n      caretPositions[startIndex + 1] = ligStartX + guessedAdvanceX * (i + 1);\r\n      caretPositions[startIndex + 2] = ligY;\r\n    }\r\n  }\r\n\r\n  function now() {\r\n    return (self.performance || Date).now()\r\n  }\r\n\r\n  // Array-backed structure for a single line's glyphs data\r\n  function TextLine() {\r\n    this.data = [];\r\n  }\r\n  const textLineProps = ['glyphObj', 'x', 'width', 'charIndex'];\r\n  TextLine.prototype = {\r\n    width: 0,\r\n    isSoftWrapped: false,\r\n    get count() {\r\n      return Math.ceil(this.data.length / textLineProps.length)\r\n    },\r\n    glyphAt(i) {\r\n      let fly = TextLine.flyweight;\r\n      fly.data = this.data;\r\n      fly.index = i;\r\n      return fly\r\n    },\r\n    splitAt(i) {\r\n      let newLine = new TextLine();\r\n      newLine.data = this.data.splice(i * textLineProps.length);\r\n      return newLine\r\n    }\r\n  };\r\n  TextLine.flyweight = textLineProps.reduce((obj, prop, i, all) => {\r\n    Object.defineProperty(obj, prop, {\r\n      get() {\r\n        return this.data[this.index * textLineProps.length + i]\r\n      },\r\n      set(val) {\r\n        this.data[this.index * textLineProps.length + i] = val;\r\n      }\r\n    });\r\n    return obj\r\n  }, {data: null, index: 0});\r\n\r\n\r\n  return {\r\n    typeset,\r\n    measure,\r\n    loadFont\r\n  }\r\n}\r\n\r\nconst now = () => (self.performance || Date).now();\r\n\r\nconst mainThreadGenerator = /*#__PURE__*/ createSDFGenerator();\r\n\r\nlet warned;\r\n\r\n/**\r\n * Generate an SDF texture image for a single glyph path, placing the result into a webgl canvas at a\r\n * given location and channel. Utilizes the webgl-sdf-generator external package for GPU-accelerated SDF\r\n * generation when supported.\r\n */\r\nfunction generateSDF(width, height, path, viewBox, distance, exponent, canvas, x, y, channel, useWebGL = true) {\r\n  // Allow opt-out\r\n  if (!useWebGL) {\r\n    return generateSDF_JS_Worker(width, height, path, viewBox, distance, exponent, canvas, x, y, channel)\r\n  }\r\n\r\n  // Attempt GPU-accelerated generation first\r\n  return generateSDF_GL(width, height, path, viewBox, distance, exponent, canvas, x, y, channel).then(\r\n    null,\r\n    err => {\r\n      // WebGL failed either due to a hard error or unexpected results; fall back to JS in workers\r\n      if (!warned) {\r\n        console.warn(`WebGL SDF generation failed, falling back to JS`, err);\r\n        warned = true;\r\n      }\r\n      return generateSDF_JS_Worker(width, height, path, viewBox, distance, exponent, canvas, x, y, channel)\r\n    }\r\n  )\r\n}\r\n\r\nconst queue = [];\r\nconst chunkTimeBudget = 5; // ms\r\nlet timer = 0;\r\n\r\nfunction nextChunk() {\r\n  const start = now();\r\n  while (queue.length && now() - start < chunkTimeBudget) {\r\n    queue.shift()();\r\n  }\r\n  timer = queue.length ? setTimeout(nextChunk, 0) : 0;\r\n}\r\n\r\n/**\r\n * WebGL-based implementation executed on the main thread. Requests are executed in time-bounded\r\n * macrotask chunks to allow render frames to execute in between.\r\n */\r\nconst generateSDF_GL = (...args) => {\r\n  return new Promise((resolve, reject) => {\r\n    queue.push(() => {\r\n      const start = now();\r\n      try {\r\n        mainThreadGenerator.webgl.generateIntoCanvas(...args);\r\n        resolve({ timing: now() - start });\r\n      } catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n    if (!timer) {\r\n      timer = setTimeout(nextChunk, 0);\r\n    }\r\n  })\r\n};\r\n\r\nconst threadCount = 4; // how many workers to spawn\r\nconst idleTimeout = 2000; // workers will be terminated after being idle this many milliseconds\r\nconst threads = {};\r\nlet callNum = 0;\r\n\r\n/**\r\n * Fallback JS-based implementation, fanned out to a number of worker threads for parallelism\r\n */\r\nfunction generateSDF_JS_Worker(width, height, path, viewBox, distance, exponent, canvas, x, y, channel) {\r\n  const workerId = 'TroikaTextSDFGenerator_JS_' + ((callNum++) % threadCount);\r\n  let thread = threads[workerId];\r\n  if (!thread) {\r\n    thread = threads[workerId] = {\r\n      workerModule: defineWorkerModule({\r\n        name: workerId,\r\n        workerId,\r\n        dependencies: [\r\n          createSDFGenerator,\r\n          now\r\n        ],\r\n        init(_createSDFGenerator, now) {\r\n          const generate = _createSDFGenerator().javascript.generate;\r\n          return function (...args) {\r\n            const start = now();\r\n            const textureData = generate(...args);\r\n            return {\r\n              textureData,\r\n              timing: now() - start\r\n            }\r\n          }\r\n        },\r\n        getTransferables(result) {\r\n          return [result.textureData.buffer]\r\n        }\r\n      }),\r\n      requests: 0,\r\n      idleTimer: null\r\n    };\r\n  }\r\n\r\n  thread.requests++;\r\n  clearTimeout(thread.idleTimer);\r\n  return thread.workerModule(width, height, path, viewBox, distance, exponent)\r\n    .then(({ textureData, timing }) => {\r\n      // copy result data into the canvas\r\n      const start = now();\r\n      // expand single-channel data into rgba\r\n      const imageData = new Uint8Array(textureData.length * 4);\r\n      for (let i = 0; i < textureData.length; i++) {\r\n        imageData[i * 4 + channel] = textureData[i];\r\n      }\r\n      mainThreadGenerator.webglUtils.renderImageData(canvas, imageData, x, y, width, height, 1 << (3 - channel));\r\n      timing += now() - start;\r\n\r\n      // clean up workers after a while\r\n      if (--thread.requests === 0) {\r\n        thread.idleTimer = setTimeout(() => { terminateWorker(workerId); }, idleTimeout);\r\n      }\r\n      return { timing }\r\n    })\r\n}\r\n\r\nfunction warmUpSDFCanvas(canvas) {\r\n  if (!canvas._warm) {\r\n    mainThreadGenerator.webgl.isSupported(canvas);\r\n    canvas._warm = true;\r\n  }\r\n}\r\n\r\nconst resizeWebGLCanvasWithoutClearing = mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing;\r\n\r\n/*!\r\nCustom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.\r\nOriginal MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE\r\n*/\r\nfunction typrFactory(){return \"undefined\"==typeof window&&(self.window=self),function(r){var e={parse:function(r){var t=e._bin,a=new Uint8Array(r);if(\"ttcf\"==t.readASCII(a,0,4)){var n=4;t.readUshort(a,n),n+=2,t.readUshort(a,n),n+=2;var o=t.readUint(a,n);n+=4;for(var s=[],i=0;i<o;i++){var h=t.readUint(a,n);n+=4,s.push(e._readFont(a,h));}return s}return [e._readFont(a,0)]},_readFont:function(r,t){var a=e._bin,n=t;a.readFixed(r,t),t+=4;var o=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2;for(var s=[\"cmap\",\"head\",\"hhea\",\"maxp\",\"hmtx\",\"name\",\"OS/2\",\"post\",\"loca\",\"glyf\",\"kern\",\"CFF \",\"GPOS\",\"GSUB\",\"SVG \"],i={_data:r,_offset:n},h={},f=0;f<o;f++){var d=a.readASCII(r,t,4);t+=4,a.readUint(r,t),t+=4;var u=a.readUint(r,t);t+=4;var l=a.readUint(r,t);t+=4,h[d]={offset:u,length:l};}for(f=0;f<s.length;f++){var v=s[f];h[v]&&(i[v.trim()]=e[v.trim()].parse(r,h[v].offset,h[v].length,i));}return i},_tabOffset:function(r,t,a){for(var n=e._bin,o=n.readUshort(r,a+4),s=a+12,i=0;i<o;i++){var h=n.readASCII(r,s,4);s+=4,n.readUint(r,s),s+=4;var f=n.readUint(r,s);if(s+=4,n.readUint(r,s),s+=4,h==t)return f}return 0}};e._bin={readFixed:function(r,e){return (r[e]<<8|r[e+1])+(r[e+2]<<8|r[e+3])/65540},readF2dot14:function(r,t){return e._bin.readShort(r,t)/16384},readInt:function(r,t){return e._bin._view(r).getInt32(t)},readInt8:function(r,t){return e._bin._view(r).getInt8(t)},readShort:function(r,t){return e._bin._view(r).getInt16(t)},readUshort:function(r,t){return e._bin._view(r).getUint16(t)},readUshorts:function(r,t,a){for(var n=[],o=0;o<a;o++)n.push(e._bin.readUshort(r,t+2*o));return n},readUint:function(r,t){return e._bin._view(r).getUint32(t)},readUint64:function(r,t){return 4294967296*e._bin.readUint(r,t)+e._bin.readUint(r,t+4)},readASCII:function(r,e,t){for(var a=\"\",n=0;n<t;n++)a+=String.fromCharCode(r[e+n]);return a},readUnicode:function(r,e,t){for(var a=\"\",n=0;n<t;n++){var o=r[e++]<<8|r[e++];a+=String.fromCharCode(o);}return a},_tdec:\"undefined\"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,t,a){var n=e._bin._tdec;return n&&0==t&&a==r.length?n.decode(r):e._bin.readASCII(r,t,a)},readBytes:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(r[e+n]);return a},readASCIIArray:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(String.fromCharCode(r[e+n]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,t,a,n,o){var s=e._bin,i={},h=t;s.readFixed(r,t),t+=4;var f=s.readUshort(r,t);t+=2;var d=s.readUshort(r,t);t+=2;var u=s.readUshort(r,t);return t+=2,i.scriptList=e._lctf.readScriptList(r,h+f),i.featureList=e._lctf.readFeatureList(r,h+d),i.lookupList=e._lctf.readLookupList(r,h+u,o),i},e._lctf.readLookupList=function(r,t,a){var n=e._bin,o=t,s=[],i=n.readUshort(r,t);t+=2;for(var h=0;h<i;h++){var f=n.readUshort(r,t);t+=2;var d=e._lctf.readLookupTable(r,o+f,a);s.push(d);}return s},e._lctf.readLookupTable=function(r,t,a){var n=e._bin,o=t,s={tabs:[]};s.ltype=n.readUshort(r,t),t+=2,s.flag=n.readUshort(r,t),t+=2;var i=n.readUshort(r,t);t+=2;for(var h=s.ltype,f=0;f<i;f++){var d=n.readUshort(r,t);t+=2;var u=a(r,h,o+d,s);s.tabs.push(u);}return s},e._lctf.numOfOnes=function(r){for(var e=0,t=0;t<32;t++)0!=(r>>>t&1)&&e++;return e},e._lctf.readClassDef=function(r,t){var a=e._bin,n=[],o=a.readUshort(r,t);if(t+=2,1==o){var s=a.readUshort(r,t);t+=2;var i=a.readUshort(r,t);t+=2;for(var h=0;h<i;h++)n.push(s+h),n.push(s+h),n.push(a.readUshort(r,t)),t+=2;}if(2==o){var f=a.readUshort(r,t);t+=2;for(h=0;h<f;h++)n.push(a.readUshort(r,t)),t+=2,n.push(a.readUshort(r,t)),t+=2,n.push(a.readUshort(r,t)),t+=2;}return n},e._lctf.getInterval=function(r,e){for(var t=0;t<r.length;t+=3){var a=r[t],n=r[t+1];if(r[t+2],a<=e&&e<=n)return t}return -1},e._lctf.readCoverage=function(r,t){var a=e._bin,n={};n.fmt=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);return t+=2,1==n.fmt&&(n.tab=a.readUshorts(r,t,o)),2==n.fmt&&(n.tab=a.readUshorts(r,t,3*o)),n},e._lctf.coverageIndex=function(r,t){var a=r.tab;if(1==r.fmt)return a.indexOf(t);if(2==r.fmt){var n=e._lctf.getInterval(a,t);if(-1!=n)return a[n+2]+(t-a[n])}return -1},e._lctf.readFeatureList=function(r,t){var a=e._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readASCII(r,t,4);t+=4;var f=a.readUshort(r,t);t+=2;var d=e._lctf.readFeatureTable(r,n+f);d.tag=h.trim(),o.push(d);}return o},e._lctf.readFeatureTable=function(r,t){var a=e._bin,n=t,o={},s=a.readUshort(r,t);t+=2,s>0&&(o.featureParams=n+s);var i=a.readUshort(r,t);t+=2,o.tab=[];for(var h=0;h<i;h++)o.tab.push(a.readUshort(r,t+2*h));return o},e._lctf.readScriptList=function(r,t){var a=e._bin,n=t,o={},s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readASCII(r,t,4);t+=4;var f=a.readUshort(r,t);t+=2,o[h.trim()]=e._lctf.readScriptTable(r,n+f);}return o},e._lctf.readScriptTable=function(r,t){var a=e._bin,n=t,o={},s=a.readUshort(r,t);t+=2,o.default=e._lctf.readLangSysTable(r,n+s);var i=a.readUshort(r,t);t+=2;for(var h=0;h<i;h++){var f=a.readASCII(r,t,4);t+=4;var d=a.readUshort(r,t);t+=2,o[f.trim()]=e._lctf.readLangSysTable(r,n+d);}return o},e._lctf.readLangSysTable=function(r,t){var a=e._bin,n={};a.readUshort(r,t),t+=2,n.reqFeature=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);return t+=2,n.features=a.readUshorts(r,t,o),n},e.CFF={},e.CFF.parse=function(r,t,a){var n=e._bin;(r=new Uint8Array(r.buffer,t,a))[t=0],r[++t],r[++t],r[++t],t++;var o=[];t=e.CFF.readIndex(r,t,o);for(var s=[],i=0;i<o.length-1;i++)s.push(n.readASCII(r,t+o[i],o[i+1]-o[i]));t+=o[o.length-1];var h=[];t=e.CFF.readIndex(r,t,h);var f=[];for(i=0;i<h.length-1;i++)f.push(e.CFF.readDict(r,t+h[i],t+h[i+1]));t+=h[h.length-1];var d=f[0],u=[];t=e.CFF.readIndex(r,t,u);var l=[];for(i=0;i<u.length-1;i++)l.push(n.readASCII(r,t+u[i],u[i+1]-u[i]));if(t+=u[u.length-1],e.CFF.readSubrs(r,t,d),d.CharStrings){t=d.CharStrings;u=[];t=e.CFF.readIndex(r,t,u);var v=[];for(i=0;i<u.length-1;i++)v.push(n.readBytes(r,t+u[i],u[i+1]-u[i]));d.CharStrings=v;}if(d.ROS){t=d.FDArray;var c=[];t=e.CFF.readIndex(r,t,c),d.FDArray=[];for(i=0;i<c.length-1;i++){var p=e.CFF.readDict(r,t+c[i],t+c[i+1]);e.CFF._readFDict(r,p,l),d.FDArray.push(p);}t+=c[c.length-1],t=d.FDSelect,d.FDSelect=[];var U=r[t];if(t++,3!=U)throw U;var g=n.readUshort(r,t);t+=2;for(i=0;i<g+1;i++)d.FDSelect.push(n.readUshort(r,t),r[t+2]),t+=3;}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r,d.charset,d.CharStrings.length)),e.CFF._readFDict(r,d,l),d},e.CFF._readFDict=function(r,t,a){var n;for(var o in t.Private&&(n=t.Private[1],t.Private=e.CFF.readDict(r,n,n+t.Private[0]),t.Private.Subrs&&e.CFF.readSubrs(r,n+t.Private.Subrs,t.Private)),t)-1!=[\"FamilyName\",\"FontName\",\"FullName\",\"Notice\",\"version\",\"Copyright\"].indexOf(o)&&(t[o]=a[t[o]-426+35]);},e.CFF.readSubrs=function(r,t,a){var n=e._bin,o=[];t=e.CFF.readIndex(r,t,o);var s,i=o.length;s=i<1240?107:i<33900?1131:32768,a.Bias=s,a.Subrs=[];for(var h=0;h<o.length-1;h++)a.Subrs.push(n.readBytes(r,t+o[h],o[h+1]-o[h]));},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,e){for(var t=0;t<r.charset.length;t++)if(r.charset[t]==e)return t;return -1},e.CFF.glyphBySE=function(r,t){return t<0||t>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[t])},e.CFF.readEncoding=function(r,t,a){e._bin;var n=[\".notdef\"],o=r[t];if(t++,0!=o)throw \"error: unknown encoding format: \"+o;var s=r[t];t++;for(var i=0;i<s;i++)n.push(r[t+i]);return n},e.CFF.readCharset=function(r,t,a){var n=e._bin,o=[\".notdef\"],s=r[t];if(t++,0==s)for(var i=0;i<a;i++){var h=n.readUshort(r,t);t+=2,o.push(h);}else {if(1!=s&&2!=s)throw \"error: format: \"+s;for(;o.length<a;){h=n.readUshort(r,t);t+=2;var f=0;1==s?(f=r[t],t++):(f=n.readUshort(r,t),t+=2);for(i=0;i<=f;i++)o.push(h),h++;}}return o},e.CFF.readIndex=function(r,t,a){var n=e._bin,o=n.readUshort(r,t)+1,s=r[t+=2];if(t++,1==s)for(var i=0;i<o;i++)a.push(r[t+i]);else if(2==s)for(i=0;i<o;i++)a.push(n.readUshort(r,t+2*i));else if(3==s)for(i=0;i<o;i++)a.push(16777215&n.readUint(r,t+3*i-1));else if(1!=o)throw \"unsupported offset size: \"+s+\", count: \"+o;return (t+=o*s)-1},e.CFF.getCharString=function(r,t,a){var n=e._bin,o=r[t],s=r[t+1];r[t+2],r[t+3],r[t+4];var i=1,h=null,f=null;o<=20&&(h=o,i=1),12==o&&(h=100*o+s,i=2),21<=o&&o<=27&&(h=o,i=1),28==o&&(f=n.readShort(r,t+1),i=3),29<=o&&o<=31&&(h=o,i=1),32<=o&&o<=246&&(f=o-139,i=1),247<=o&&o<=250&&(f=256*(o-247)+s+108,i=2),251<=o&&o<=254&&(f=256*-(o-251)-s-108,i=2),255==o&&(f=n.readInt(r,t+1)/65535,i=5),a.val=null!=f?f:\"o\"+h,a.size=i;},e.CFF.readCharString=function(r,t,a){for(var n=t+a,o=e._bin,s=[];t<n;){var i=r[t],h=r[t+1];r[t+2],r[t+3],r[t+4];var f=1,d=null,u=null;i<=20&&(d=i,f=1),12==i&&(d=100*i+h,f=2),19!=i&&20!=i||(d=i,f=2),21<=i&&i<=27&&(d=i,f=1),28==i&&(u=o.readShort(r,t+1),f=3),29<=i&&i<=31&&(d=i,f=1),32<=i&&i<=246&&(u=i-139,f=1),247<=i&&i<=250&&(u=256*(i-247)+h+108,f=2),251<=i&&i<=254&&(u=256*-(i-251)-h-108,f=2),255==i&&(u=o.readInt(r,t+1)/65535,f=5),s.push(null!=u?u:\"o\"+d),t+=f;}return s},e.CFF.readDict=function(r,t,a){for(var n=e._bin,o={},s=[];t<a;){var i=r[t],h=r[t+1];r[t+2],r[t+3],r[t+4];var f=1,d=null,u=null;if(28==i&&(u=n.readShort(r,t+1),f=3),29==i&&(u=n.readInt(r,t+1),f=5),32<=i&&i<=246&&(u=i-139,f=1),247<=i&&i<=250&&(u=256*(i-247)+h+108,f=2),251<=i&&i<=254&&(u=256*-(i-251)-h-108,f=2),255==i)throw u=n.readInt(r,t+1)/65535,f=5,\"unknown number\";if(30==i){var l=[];for(f=1;;){var v=r[t+f];f++;var c=v>>4,p=15&v;if(15!=c&&l.push(c),15!=p&&l.push(p),15==p)break}for(var U=\"\",g=[0,1,2,3,4,5,6,7,8,9,\".\",\"e\",\"e-\",\"reserved\",\"-\",\"endOfNumber\"],S=0;S<l.length;S++)U+=g[l[S]];u=parseFloat(U);}if(i<=21)if(d=[\"version\",\"Notice\",\"FullName\",\"FamilyName\",\"Weight\",\"FontBBox\",\"BlueValues\",\"OtherBlues\",\"FamilyBlues\",\"FamilyOtherBlues\",\"StdHW\",\"StdVW\",\"escape\",\"UniqueID\",\"XUID\",\"charset\",\"Encoding\",\"CharStrings\",\"Private\",\"Subrs\",\"defaultWidthX\",\"nominalWidthX\"][i],f=1,12==i)d=[\"Copyright\",\"isFixedPitch\",\"ItalicAngle\",\"UnderlinePosition\",\"UnderlineThickness\",\"PaintType\",\"CharstringType\",\"FontMatrix\",\"StrokeWidth\",\"BlueScale\",\"BlueShift\",\"BlueFuzz\",\"StemSnapH\",\"StemSnapV\",\"ForceBold\",0,0,\"LanguageGroup\",\"ExpansionFactor\",\"initialRandomSeed\",\"SyntheticBase\",\"PostScript\",\"BaseFontName\",\"BaseFontBlend\",0,0,0,0,0,0,\"ROS\",\"CIDFontVersion\",\"CIDFontRevision\",\"CIDFontType\",\"CIDCount\",\"UIDBase\",\"FDArray\",\"FDSelect\",\"FontName\"][h],f=2;null!=d?(o[d]=1==s.length?s[0]:s,s=[]):s.push(u),t+=f;}return o},e.cmap={},e.cmap.parse=function(r,t,a){r=new Uint8Array(r.buffer,t,a),t=0;var n=e._bin,o={};n.readUshort(r,t),t+=2;var s=n.readUshort(r,t);t+=2;var i=[];o.tables=[];for(var h=0;h<s;h++){var f=n.readUshort(r,t);t+=2;var d=n.readUshort(r,t);t+=2;var u=n.readUint(r,t);t+=4;var l=\"p\"+f+\"e\"+d,v=i.indexOf(u);if(-1==v){var c;v=o.tables.length,i.push(u);var p=n.readUshort(r,u);0==p?c=e.cmap.parse0(r,u):4==p?c=e.cmap.parse4(r,u):6==p?c=e.cmap.parse6(r,u):12==p?c=e.cmap.parse12(r,u):console.debug(\"unknown format: \"+p,f,d,u),o.tables.push(c);}if(null!=o[l])throw \"multiple tables for one platform+encoding\";o[l]=v;}return o},e.cmap.parse0=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2,n.map=[];for(var s=0;s<o-6;s++)n.map.push(r[t+s]);return n},e.cmap.parse4=function(r,t){var a=e._bin,n=t,o={};o.format=a.readUshort(r,t),t+=2;var s=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2;var i=a.readUshort(r,t);t+=2;var h=i/2;o.searchRange=a.readUshort(r,t),t+=2,o.entrySelector=a.readUshort(r,t),t+=2,o.rangeShift=a.readUshort(r,t),t+=2,o.endCount=a.readUshorts(r,t,h),t+=2*h,t+=2,o.startCount=a.readUshorts(r,t,h),t+=2*h,o.idDelta=[];for(var f=0;f<h;f++)o.idDelta.push(a.readShort(r,t)),t+=2;for(o.idRangeOffset=a.readUshorts(r,t,h),t+=2*h,o.glyphIdArray=[];t<n+s;)o.glyphIdArray.push(a.readUshort(r,t)),t+=2;return o},e.cmap.parse6=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,n.firstCode=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2,n.glyphIdArray=[];for(var s=0;s<o;s++)n.glyphIdArray.push(a.readUshort(r,t)),t+=2;return n},e.cmap.parse12=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2,t+=2,a.readUint(r,t),t+=4,a.readUint(r,t),t+=4;var o=a.readUint(r,t);t+=4,n.groups=[];for(var s=0;s<o;s++){var i=t+12*s,h=a.readUint(r,i+0),f=a.readUint(r,i+4),d=a.readUint(r,i+8);n.groups.push([h,f,d]);}return n},e.glyf={},e.glyf.parse=function(r,e,t,a){for(var n=[],o=0;o<a.maxp.numGlyphs;o++)n.push(null);return n},e.glyf._parseGlyf=function(r,t){var a=e._bin,n=r._data,o=e._tabOffset(n,\"glyf\",r._offset)+r.loca[t];if(r.loca[t]==r.loca[t+1])return null;var s={};if(s.noc=a.readShort(n,o),o+=2,s.xMin=a.readShort(n,o),o+=2,s.yMin=a.readShort(n,o),o+=2,s.xMax=a.readShort(n,o),o+=2,s.yMax=a.readShort(n,o),o+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var i=0;i<s.noc;i++)s.endPts.push(a.readUshort(n,o)),o+=2;var h=a.readUshort(n,o);if(o+=2,n.length-o<h)return null;s.instructions=a.readBytes(n,o,h),o+=h;var f=s.endPts[s.noc-1]+1;s.flags=[];for(i=0;i<f;i++){var d=n[o];if(o++,s.flags.push(d),0!=(8&d)){var u=n[o];o++;for(var l=0;l<u;l++)s.flags.push(d),i++;}}s.xs=[];for(i=0;i<f;i++){var v=0!=(2&s.flags[i]),c=0!=(16&s.flags[i]);v?(s.xs.push(c?n[o]:-n[o]),o++):c?s.xs.push(0):(s.xs.push(a.readShort(n,o)),o+=2);}s.ys=[];for(i=0;i<f;i++){v=0!=(4&s.flags[i]),c=0!=(32&s.flags[i]);v?(s.ys.push(c?n[o]:-n[o]),o++):c?s.ys.push(0):(s.ys.push(a.readShort(n,o)),o+=2);}var p=0,U=0;for(i=0;i<f;i++)p+=s.xs[i],U+=s.ys[i],s.xs[i]=p,s.ys[i]=U;}else {var g;s.parts=[];do{g=a.readUshort(n,o),o+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(S),S.glyphIndex=a.readUshort(n,o),o+=2,1&g){var m=a.readShort(n,o);o+=2;var b=a.readShort(n,o);o+=2;}else {m=a.readInt8(n,o);o++;b=a.readInt8(n,o);o++;}2&g?(S.m.tx=m,S.m.ty=b):(S.p1=m,S.p2=b),8&g?(S.m.a=S.m.d=a.readF2dot14(n,o),o+=2):64&g?(S.m.a=a.readF2dot14(n,o),o+=2,S.m.d=a.readF2dot14(n,o),o+=2):128&g&&(S.m.a=a.readF2dot14(n,o),o+=2,S.m.b=a.readF2dot14(n,o),o+=2,S.m.c=a.readF2dot14(n,o),o+=2,S.m.d=a.readF2dot14(n,o),o+=2);}while(32&g);if(256&g){var y=a.readUshort(n,o);o+=2,s.instr=[];for(i=0;i<y;i++)s.instr.push(n[o]),o++;}}return s},e.GPOS={},e.GPOS.parse=function(r,t,a,n){return e._lctf.parse(r,t,a,n,e.GPOS.subt)},e.GPOS.subt=function(r,t,a,n){var o=e._bin,s=a,i={};if(i.fmt=o.readUshort(r,a),a+=2,1==t||2==t||3==t||7==t||8==t&&i.fmt<=2){var h=o.readUshort(r,a);a+=2,i.coverage=e._lctf.readCoverage(r,h+s);}if(1==t&&1==i.fmt){var f=o.readUshort(r,a);a+=2;var d=e._lctf.numOfOnes(f);0!=f&&(i.pos=e.GPOS.readValueRecord(r,a,f));}else if(2==t&&i.fmt>=1&&i.fmt<=2){f=o.readUshort(r,a);a+=2;var u=o.readUshort(r,a);a+=2;d=e._lctf.numOfOnes(f);var l=e._lctf.numOfOnes(u);if(1==i.fmt){i.pairsets=[];var v=o.readUshort(r,a);a+=2;for(var c=0;c<v;c++){var p=s+o.readUshort(r,a);a+=2;var U=o.readUshort(r,p);p+=2;for(var g=[],S=0;S<U;S++){var m=o.readUshort(r,p);p+=2,0!=f&&(x=e.GPOS.readValueRecord(r,p,f),p+=2*d),0!=u&&(P=e.GPOS.readValueRecord(r,p,u),p+=2*l),g.push({gid2:m,val1:x,val2:P});}i.pairsets.push(g);}}if(2==i.fmt){var b=o.readUshort(r,a);a+=2;var y=o.readUshort(r,a);a+=2;var F=o.readUshort(r,a);a+=2;var _=o.readUshort(r,a);a+=2,i.classDef1=e._lctf.readClassDef(r,s+b),i.classDef2=e._lctf.readClassDef(r,s+y),i.matrix=[];for(c=0;c<F;c++){var C=[];for(S=0;S<_;S++){var x=null,P=null;0!=f&&(x=e.GPOS.readValueRecord(r,a,f),a+=2*d),0!=u&&(P=e.GPOS.readValueRecord(r,a,u),a+=2*l),C.push({val1:x,val2:P});}i.matrix.push(C);}}}else {if(9==t&&1==i.fmt){var I=o.readUshort(r,a);a+=2;var w=o.readUint(r,a);if(a+=4,9==n.ltype)n.ltype=I;else if(n.ltype!=I)throw \"invalid extension substitution\";return e.GPOS.subt(r,n.ltype,s+w)}console.debug(\"unsupported GPOS table LookupType\",t,\"format\",i.fmt);}return i},e.GPOS.readValueRecord=function(r,t,a){var n=e._bin,o=[];return o.push(1&a?n.readShort(r,t):0),t+=1&a?2:0,o.push(2&a?n.readShort(r,t):0),t+=2&a?2:0,o.push(4&a?n.readShort(r,t):0),t+=4&a?2:0,o.push(8&a?n.readShort(r,t):0),t+=8&a?2:0,o},e.GSUB={},e.GSUB.parse=function(r,t,a,n){return e._lctf.parse(r,t,a,n,e.GSUB.subt)},e.GSUB.subt=function(r,t,a,n){var o=e._bin,s=a,i={};if(i.fmt=o.readUshort(r,a),a+=2,1!=t&&4!=t&&5!=t&&6!=t)return null;if(1==t||4==t||5==t&&i.fmt<=2||6==t&&i.fmt<=2){var h=o.readUshort(r,a);a+=2,i.coverage=e._lctf.readCoverage(r,s+h);}if(1==t&&i.fmt>=1&&i.fmt<=2){if(1==i.fmt)i.delta=o.readShort(r,a),a+=2;else if(2==i.fmt){var f=o.readUshort(r,a);a+=2,i.newg=o.readUshorts(r,a,f),a+=2*i.newg.length;}}else if(4==t){i.vals=[];f=o.readUshort(r,a);a+=2;for(var d=0;d<f;d++){var u=o.readUshort(r,a);a+=2,i.vals.push(e.GSUB.readLigatureSet(r,s+u));}}else if(5==t&&2==i.fmt){if(2==i.fmt){var l=o.readUshort(r,a);a+=2,i.cDef=e._lctf.readClassDef(r,s+l),i.scset=[];var v=o.readUshort(r,a);a+=2;for(d=0;d<v;d++){var c=o.readUshort(r,a);a+=2,i.scset.push(0==c?null:e.GSUB.readSubClassSet(r,s+c));}}}else if(6==t&&3==i.fmt){if(3==i.fmt){for(d=0;d<3;d++){f=o.readUshort(r,a);a+=2;for(var p=[],U=0;U<f;U++)p.push(e._lctf.readCoverage(r,s+o.readUshort(r,a+2*U)));a+=2*f,0==d&&(i.backCvg=p),1==d&&(i.inptCvg=p),2==d&&(i.ahedCvg=p);}f=o.readUshort(r,a);a+=2,i.lookupRec=e.GSUB.readSubstLookupRecords(r,a,f);}}else {if(7==t&&1==i.fmt){var g=o.readUshort(r,a);a+=2;var S=o.readUint(r,a);if(a+=4,9==n.ltype)n.ltype=g;else if(n.ltype!=g)throw \"invalid extension substitution\";return e.GSUB.subt(r,n.ltype,s+S)}console.debug(\"unsupported GSUB table LookupType\",t,\"format\",i.fmt);}return i},e.GSUB.readSubClassSet=function(r,t){var a=e._bin.readUshort,n=t,o=[],s=a(r,t);t+=2;for(var i=0;i<s;i++){var h=a(r,t);t+=2,o.push(e.GSUB.readSubClassRule(r,n+h));}return o},e.GSUB.readSubClassRule=function(r,t){var a=e._bin.readUshort,n={},o=a(r,t),s=a(r,t+=2);t+=2,n.input=[];for(var i=0;i<o-1;i++)n.input.push(a(r,t)),t+=2;return n.substLookupRecords=e.GSUB.readSubstLookupRecords(r,t,s),n},e.GSUB.readSubstLookupRecords=function(r,t,a){for(var n=e._bin.readUshort,o=[],s=0;s<a;s++)o.push(n(r,t),n(r,t+2)),t+=4;return o},e.GSUB.readChainSubClassSet=function(r,t){var a=e._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readUshort(r,t);t+=2,o.push(e.GSUB.readChainSubClassRule(r,n+h));}return o},e.GSUB.readChainSubClassRule=function(r,t){for(var a=e._bin,n={},o=[\"backtrack\",\"input\",\"lookahead\"],s=0;s<o.length;s++){var i=a.readUshort(r,t);t+=2,1==s&&i--,n[o[s]]=a.readUshorts(r,t,i),t+=2*n[o[s]].length;}i=a.readUshort(r,t);return t+=2,n.subst=a.readUshorts(r,t,2*i),t+=2*n.subst.length,n},e.GSUB.readLigatureSet=function(r,t){var a=e._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readUshort(r,t);t+=2,o.push(e.GSUB.readLigature(r,n+h));}return o},e.GSUB.readLigature=function(r,t){var a=e._bin,n={chain:[]};n.nglyph=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2;for(var s=0;s<o-1;s++)n.chain.push(a.readUshort(r,t)),t+=2;return n},e.head={},e.head.parse=function(r,t,a){var n=e._bin,o={};return n.readFixed(r,t),t+=4,o.fontRevision=n.readFixed(r,t),t+=4,n.readUint(r,t),t+=4,n.readUint(r,t),t+=4,o.flags=n.readUshort(r,t),t+=2,o.unitsPerEm=n.readUshort(r,t),t+=2,o.created=n.readUint64(r,t),t+=8,o.modified=n.readUint64(r,t),t+=8,o.xMin=n.readShort(r,t),t+=2,o.yMin=n.readShort(r,t),t+=2,o.xMax=n.readShort(r,t),t+=2,o.yMax=n.readShort(r,t),t+=2,o.macStyle=n.readUshort(r,t),t+=2,o.lowestRecPPEM=n.readUshort(r,t),t+=2,o.fontDirectionHint=n.readShort(r,t),t+=2,o.indexToLocFormat=n.readShort(r,t),t+=2,o.glyphDataFormat=n.readShort(r,t),t+=2,o},e.hhea={},e.hhea.parse=function(r,t,a){var n=e._bin,o={};return n.readFixed(r,t),t+=4,o.ascender=n.readShort(r,t),t+=2,o.descender=n.readShort(r,t),t+=2,o.lineGap=n.readShort(r,t),t+=2,o.advanceWidthMax=n.readUshort(r,t),t+=2,o.minLeftSideBearing=n.readShort(r,t),t+=2,o.minRightSideBearing=n.readShort(r,t),t+=2,o.xMaxExtent=n.readShort(r,t),t+=2,o.caretSlopeRise=n.readShort(r,t),t+=2,o.caretSlopeRun=n.readShort(r,t),t+=2,o.caretOffset=n.readShort(r,t),t+=2,t+=8,o.metricDataFormat=n.readShort(r,t),t+=2,o.numberOfHMetrics=n.readUshort(r,t),t+=2,o},e.hmtx={},e.hmtx.parse=function(r,t,a,n){for(var o=e._bin,s={aWidth:[],lsBearing:[]},i=0,h=0,f=0;f<n.maxp.numGlyphs;f++)f<n.hhea.numberOfHMetrics&&(i=o.readUshort(r,t),t+=2,h=o.readShort(r,t),t+=2),s.aWidth.push(i),s.lsBearing.push(h);return s},e.kern={},e.kern.parse=function(r,t,a,n){var o=e._bin,s=o.readUshort(r,t);if(t+=2,1==s)return e.kern.parseV1(r,t-2,a,n);var i=o.readUshort(r,t);t+=2;for(var h={glyph1:[],rval:[]},f=0;f<i;f++){t+=2;a=o.readUshort(r,t);t+=2;var d=o.readUshort(r,t);t+=2;var u=d>>>8;if(0!=(u&=15))throw \"unknown kern table format: \"+u;t=e.kern.readFormat0(r,t,h);}return h},e.kern.parseV1=function(r,t,a,n){var o=e._bin;o.readFixed(r,t),t+=4;var s=o.readUint(r,t);t+=4;for(var i={glyph1:[],rval:[]},h=0;h<s;h++){o.readUint(r,t),t+=4;var f=o.readUshort(r,t);t+=2,o.readUshort(r,t),t+=2;var d=f>>>8;if(0!=(d&=15))throw \"unknown kern table format: \"+d;t=e.kern.readFormat0(r,t,i);}return i},e.kern.readFormat0=function(r,t,a){var n=e._bin,o=-1,s=n.readUshort(r,t);t+=2,n.readUshort(r,t),t+=2,n.readUshort(r,t),t+=2,n.readUshort(r,t),t+=2;for(var i=0;i<s;i++){var h=n.readUshort(r,t);t+=2;var f=n.readUshort(r,t);t+=2;var d=n.readShort(r,t);t+=2,h!=o&&(a.glyph1.push(h),a.rval.push({glyph2:[],vals:[]}));var u=a.rval[a.rval.length-1];u.glyph2.push(f),u.vals.push(d),o=h;}return t},e.loca={},e.loca.parse=function(r,t,a,n){var o=e._bin,s=[],i=n.head.indexToLocFormat,h=n.maxp.numGlyphs+1;if(0==i)for(var f=0;f<h;f++)s.push(o.readUshort(r,t+(f<<1))<<1);if(1==i)for(f=0;f<h;f++)s.push(o.readUint(r,t+(f<<2)));return s},e.maxp={},e.maxp.parse=function(r,t,a){var n=e._bin,o={},s=n.readUint(r,t);return t+=4,o.numGlyphs=n.readUshort(r,t),t+=2,65536==s&&(o.maxPoints=n.readUshort(r,t),t+=2,o.maxContours=n.readUshort(r,t),t+=2,o.maxCompositePoints=n.readUshort(r,t),t+=2,o.maxCompositeContours=n.readUshort(r,t),t+=2,o.maxZones=n.readUshort(r,t),t+=2,o.maxTwilightPoints=n.readUshort(r,t),t+=2,o.maxStorage=n.readUshort(r,t),t+=2,o.maxFunctionDefs=n.readUshort(r,t),t+=2,o.maxInstructionDefs=n.readUshort(r,t),t+=2,o.maxStackElements=n.readUshort(r,t),t+=2,o.maxSizeOfInstructions=n.readUshort(r,t),t+=2,o.maxComponentElements=n.readUshort(r,t),t+=2,o.maxComponentDepth=n.readUshort(r,t),t+=2),o},e.name={},e.name.parse=function(r,t,a){var n=e._bin,o={};n.readUshort(r,t),t+=2;var s=n.readUshort(r,t);t+=2,n.readUshort(r,t);for(var i,h=[\"copyright\",\"fontFamily\",\"fontSubfamily\",\"ID\",\"fullName\",\"version\",\"postScriptName\",\"trademark\",\"manufacturer\",\"designer\",\"description\",\"urlVendor\",\"urlDesigner\",\"licence\",\"licenceURL\",\"---\",\"typoFamilyName\",\"typoSubfamilyName\",\"compatibleFull\",\"sampleText\",\"postScriptCID\",\"wwsFamilyName\",\"wwsSubfamilyName\",\"lightPalette\",\"darkPalette\"],f=t+=2,d=0;d<s;d++){var u=n.readUshort(r,t);t+=2;var l=n.readUshort(r,t);t+=2;var v=n.readUshort(r,t);t+=2;var c=n.readUshort(r,t);t+=2;var p=n.readUshort(r,t);t+=2;var U=n.readUshort(r,t);t+=2;var g,S=h[c],m=f+12*s+U;if(0==u)g=n.readUnicode(r,m,p/2);else if(3==u&&0==l)g=n.readUnicode(r,m,p/2);else if(0==l)g=n.readASCII(r,m,p);else if(1==l)g=n.readUnicode(r,m,p/2);else if(3==l)g=n.readUnicode(r,m,p/2);else {if(1!=u)throw \"unknown encoding \"+l+\", platformID: \"+u;g=n.readASCII(r,m,p),console.debug(\"reading unknown MAC encoding \"+l+\" as ASCII\");}var b=\"p\"+u+\",\"+v.toString(16);null==o[b]&&(o[b]={}),o[b][void 0!==S?S:c]=g,o[b]._lang=v;}for(var y in o)if(null!=o[y].postScriptName&&1033==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName&&0==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName&&3084==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName)return o[y];for(var y in o){i=y;break}return console.debug(\"returning name table with languageID \"+o[i]._lang),o[i]},e[\"OS/2\"]={},e[\"OS/2\"].parse=function(r,t,a){var n=e._bin.readUshort(r,t);t+=2;var o={};if(0==n)e[\"OS/2\"].version0(r,t,o);else if(1==n)e[\"OS/2\"].version1(r,t,o);else if(2==n||3==n||4==n)e[\"OS/2\"].version2(r,t,o);else {if(5!=n)throw \"unknown OS/2 table version: \"+n;e[\"OS/2\"].version5(r,t,o);}return o},e[\"OS/2\"].version0=function(r,t,a){var n=e._bin;return a.xAvgCharWidth=n.readShort(r,t),t+=2,a.usWeightClass=n.readUshort(r,t),t+=2,a.usWidthClass=n.readUshort(r,t),t+=2,a.fsType=n.readUshort(r,t),t+=2,a.ySubscriptXSize=n.readShort(r,t),t+=2,a.ySubscriptYSize=n.readShort(r,t),t+=2,a.ySubscriptXOffset=n.readShort(r,t),t+=2,a.ySubscriptYOffset=n.readShort(r,t),t+=2,a.ySuperscriptXSize=n.readShort(r,t),t+=2,a.ySuperscriptYSize=n.readShort(r,t),t+=2,a.ySuperscriptXOffset=n.readShort(r,t),t+=2,a.ySuperscriptYOffset=n.readShort(r,t),t+=2,a.yStrikeoutSize=n.readShort(r,t),t+=2,a.yStrikeoutPosition=n.readShort(r,t),t+=2,a.sFamilyClass=n.readShort(r,t),t+=2,a.panose=n.readBytes(r,t,10),t+=10,a.ulUnicodeRange1=n.readUint(r,t),t+=4,a.ulUnicodeRange2=n.readUint(r,t),t+=4,a.ulUnicodeRange3=n.readUint(r,t),t+=4,a.ulUnicodeRange4=n.readUint(r,t),t+=4,a.achVendID=[n.readInt8(r,t),n.readInt8(r,t+1),n.readInt8(r,t+2),n.readInt8(r,t+3)],t+=4,a.fsSelection=n.readUshort(r,t),t+=2,a.usFirstCharIndex=n.readUshort(r,t),t+=2,a.usLastCharIndex=n.readUshort(r,t),t+=2,a.sTypoAscender=n.readShort(r,t),t+=2,a.sTypoDescender=n.readShort(r,t),t+=2,a.sTypoLineGap=n.readShort(r,t),t+=2,a.usWinAscent=n.readUshort(r,t),t+=2,a.usWinDescent=n.readUshort(r,t),t+=2},e[\"OS/2\"].version1=function(r,t,a){var n=e._bin;return t=e[\"OS/2\"].version0(r,t,a),a.ulCodePageRange1=n.readUint(r,t),t+=4,a.ulCodePageRange2=n.readUint(r,t),t+=4},e[\"OS/2\"].version2=function(r,t,a){var n=e._bin;return t=e[\"OS/2\"].version1(r,t,a),a.sxHeight=n.readShort(r,t),t+=2,a.sCapHeight=n.readShort(r,t),t+=2,a.usDefault=n.readUshort(r,t),t+=2,a.usBreak=n.readUshort(r,t),t+=2,a.usMaxContext=n.readUshort(r,t),t+=2},e[\"OS/2\"].version5=function(r,t,a){var n=e._bin;return t=e[\"OS/2\"].version2(r,t,a),a.usLowerOpticalPointSize=n.readUshort(r,t),t+=2,a.usUpperOpticalPointSize=n.readUshort(r,t),t+=2},e.post={},e.post.parse=function(r,t,a){var n=e._bin,o={};return o.version=n.readFixed(r,t),t+=4,o.italicAngle=n.readFixed(r,t),t+=4,o.underlinePosition=n.readShort(r,t),t+=2,o.underlineThickness=n.readShort(r,t),t+=2,o},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(r,e){var t=r.cmap,a=-1;if(null!=t.p0e4?a=t.p0e4:null!=t.p3e1?a=t.p3e1:null!=t.p1e0?a=t.p1e0:null!=t.p0e3&&(a=t.p0e3),-1==a)throw \"no familiar platform and encoding!\";var n=t.tables[a];if(0==n.format)return e>=n.map.length?0:n.map[e];if(4==n.format){for(var o=-1,s=0;s<n.endCount.length;s++)if(e<=n.endCount[s]){o=s;break}if(-1==o)return 0;if(n.startCount[o]>e)return 0;return 65535&(0!=n.idRangeOffset[o]?n.glyphIdArray[e-n.startCount[o]+(n.idRangeOffset[o]>>1)-(n.idRangeOffset.length-o)]:e+n.idDelta[o])}if(12==n.format){if(e>n.groups[n.groups.length-1][1])return 0;for(s=0;s<n.groups.length;s++){var i=n.groups[s];if(i[0]<=e&&e<=i[1])return i[2]+(e-i[0])}return 0}throw \"unknown cmap table format \"+n.format},e.U.glyphToPath=function(r,t){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[t]){var n=r.SVG.entries[t];return null==n?a:(\"string\"==typeof n&&(n=e.SVG.toPath(n),r.SVG.entries[t]=n),n)}if(r.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},s=r.CFF,i=r.CFF.Private;if(s.ROS){for(var h=0;s.FDSelect[h+2]<=t;)h+=2;i=s.FDArray[s.FDSelect[h+1]].Private;}e.U._drawCFF(r.CFF.CharStrings[t],o,s,i,a);}else r.glyf&&e.U._drawGlyf(t,r,a);return a},e.U._drawGlyf=function(r,t,a){var n=t.glyf[r];null==n&&(n=t.glyf[r]=e.glyf._parseGlyf(t,r)),null!=n&&(n.noc>-1?e.U._simpleGlyph(n,a):e.U._compoGlyph(n,t,a));},e.U._simpleGlyph=function(r,t){for(var a=0;a<r.noc;a++){for(var n=0==a?0:r.endPts[a-1]+1,o=r.endPts[a],s=n;s<=o;s++){var i=s==n?o:s-1,h=s==o?n:s+1,f=1&r.flags[s],d=1&r.flags[i],u=1&r.flags[h],l=r.xs[s],v=r.ys[s];if(s==n)if(f){if(!d){e.U.P.moveTo(t,l,v);continue}e.U.P.moveTo(t,r.xs[i],r.ys[i]);}else d?e.U.P.moveTo(t,r.xs[i],r.ys[i]):e.U.P.moveTo(t,(r.xs[i]+l)/2,(r.ys[i]+v)/2);f?d&&e.U.P.lineTo(t,l,v):u?e.U.P.qcurveTo(t,l,v,r.xs[h],r.ys[h]):e.U.P.qcurveTo(t,l,v,(l+r.xs[h])/2,(v+r.ys[h])/2);}e.U.P.closePath(t);}},e.U._compoGlyph=function(r,t,a){for(var n=0;n<r.parts.length;n++){var o={cmds:[],crds:[]},s=r.parts[n];e.U._drawGlyf(s.glyphIndex,t,o);for(var i=s.m,h=0;h<o.crds.length;h+=2){var f=o.crds[h],d=o.crds[h+1];a.crds.push(f*i.a+d*i.b+i.tx),a.crds.push(f*i.c+d*i.d+i.ty);}for(h=0;h<o.cmds.length;h++)a.cmds.push(o.cmds[h]);}},e.U._getGlyphClass=function(r,t){var a=e._lctf.getInterval(t,r);return -1==a?0:t[a+2]},e.U.getPairAdjustment=function(r,t,a){var n=!1;if(r.GPOS)for(var o=r.GPOS,s=o.lookupList,i=o.featureList,h=[],f=0;f<i.length;f++){var d=i[f];if(\"kern\"==d.tag){n=!0;for(var u=0;u<d.tab.length;u++)if(!h[d.tab[u]]){h[d.tab[u]]=!0;for(var l=s[d.tab[u]],v=0;v<l.tabs.length;v++)if(null!=l.tabs[v]){var c,p=l.tabs[v];if(!p.coverage||-1!=(c=e._lctf.coverageIndex(p.coverage,t)))if(1==l.ltype);else if(2==l.ltype){var U=null;if(1==p.fmt){var g=p.pairsets[c];for(f=0;f<g.length;f++)g[f].gid2==a&&(U=g[f]);}else if(2==p.fmt){var S=e.U._getGlyphClass(t,p.classDef1),m=e.U._getGlyphClass(a,p.classDef2);U=p.matrix[S][m];}if(U){var b=0;return U.val1&&U.val1[2]&&(b+=U.val1[2]),U.val2&&U.val2[0]&&(b+=U.val2[0]),b}}}}}}if(r.kern&&!n){var y=r.kern.glyph1.indexOf(t);if(-1!=y){var F=r.kern.rval[y].glyph2.indexOf(a);if(-1!=F)return r.kern.rval[y].vals[F]}}return 0},e.U._applySubs=function(r,t,a,n){for(var o=r.length-t-1,s=0;s<a.tabs.length;s++)if(null!=a.tabs[s]){var i,h=a.tabs[s];if(!h.coverage||-1!=(i=e._lctf.coverageIndex(h.coverage,r[t])))if(1==a.ltype)r[t],1==h.fmt?r[t]=r[t]+h.delta:r[t]=h.newg[i];else if(4==a.ltype)for(var f=h.vals[i],d=0;d<f.length;d++){var u=f[d],l=u.chain.length;if(!(l>o)){for(var v=!0,c=0,p=0;p<l;p++){for(;-1==r[t+c+(1+p)];)c++;u.chain[p]!=r[t+c+(1+p)]&&(v=!1);}if(v){r[t]=u.nglyph;for(p=0;p<l+c;p++)r[t+p+1]=-1;break}}}else if(5==a.ltype&&2==h.fmt)for(var U=e._lctf.getInterval(h.cDef,r[t]),g=h.cDef[U+2],S=h.scset[g],m=0;m<S.length;m++){var b=S[m],y=b.input;if(!(y.length>o)){for(v=!0,p=0;p<y.length;p++){var F=e._lctf.getInterval(h.cDef,r[t+1+p]);if(-1==U&&h.cDef[F+2]!=y[p]){v=!1;break}}if(v){var _=b.substLookupRecords;for(d=0;d<_.length;d+=2)_[d],_[d+1];}}}else if(6==a.ltype&&3==h.fmt){if(!e.U._glsCovered(r,h.backCvg,t-h.backCvg.length))continue;if(!e.U._glsCovered(r,h.inptCvg,t))continue;if(!e.U._glsCovered(r,h.ahedCvg,t+h.inptCvg.length))continue;var C=h.lookupRec;for(m=0;m<C.length;m+=2){U=C[m];var x=n[C[m+1]];e.U._applySubs(r,t+U,x,n);}}}},e.U._glsCovered=function(r,t,a){for(var n=0;n<t.length;n++){if(-1==e._lctf.coverageIndex(t[n],r[a+n]))return !1}return !0},e.U.glyphsToPath=function(r,t,a){for(var n={cmds:[],crds:[]},o=0,s=0;s<t.length;s++){var i=t[s];if(-1!=i){for(var h=s<t.length-1&&-1!=t[s+1]?t[s+1]:0,f=e.U.glyphToPath(r,i),d=0;d<f.crds.length;d+=2)n.crds.push(f.crds[d]+o),n.crds.push(f.crds[d+1]);a&&n.cmds.push(a);for(d=0;d<f.cmds.length;d++)n.cmds.push(f.cmds[d]);a&&n.cmds.push(\"X\"),o+=r.hmtx.aWidth[i],s<t.length-1&&(o+=e.U.getPairAdjustment(r,i,h));}}return n},e.U.P={},e.U.P.moveTo=function(r,e,t){r.cmds.push(\"M\"),r.crds.push(e,t);},e.U.P.lineTo=function(r,e,t){r.cmds.push(\"L\"),r.crds.push(e,t);},e.U.P.curveTo=function(r,e,t,a,n,o,s){r.cmds.push(\"C\"),r.crds.push(e,t,a,n,o,s);},e.U.P.qcurveTo=function(r,e,t,a,n){r.cmds.push(\"Q\"),r.crds.push(e,t,a,n);},e.U.P.closePath=function(r){r.cmds.push(\"Z\");},e.U._drawCFF=function(r,t,a,n,o){for(var s=t.stack,i=t.nStems,h=t.haveWidth,f=t.width,d=t.open,u=0,l=t.x,v=t.y,c=0,p=0,U=0,g=0,S=0,m=0,b=0,y=0,F=0,_=0,C={val:0,size:0};u<r.length;){e.CFF.getCharString(r,u,C);var x=C.val;if(u+=C.size,\"o1\"==x||\"o18\"==x)s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0;else if(\"o3\"==x||\"o23\"==x){s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0;}else if(\"o4\"==x)s.length>1&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),d&&e.U.P.closePath(o),v+=s.pop(),e.U.P.moveTo(o,l,v),d=!0;else if(\"o5\"==x)for(;s.length>0;)l+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,l,v);else if(\"o6\"==x||\"o7\"==x)for(var P=s.length,I=\"o6\"==x,w=0;w<P;w++){var O=s.shift();I?l+=O:v+=O,I=!I,e.U.P.lineTo(o,l,v);}else if(\"o8\"==x||\"o24\"==x){P=s.length;for(var T=0;T+6<=P;)c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),l=U+s.shift(),v=g+s.shift(),e.U.P.curveTo(o,c,p,U,g,l,v),T+=6;\"o24\"==x&&(l+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,l,v));}else {if(\"o11\"==x)break;if(\"o1234\"==x||\"o1235\"==x||\"o1236\"==x||\"o1237\"==x)\"o1234\"==x&&(p=v,U=(c=l+s.shift())+s.shift(),_=g=p+s.shift(),m=g,y=v,l=(b=(S=(F=U+s.shift())+s.shift())+s.shift())+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,l,v)),\"o1235\"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),F=U+s.shift(),_=g+s.shift(),S=F+s.shift(),m=_+s.shift(),b=S+s.shift(),y=m+s.shift(),l=b+s.shift(),v=y+s.shift(),s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,l,v)),\"o1236\"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),_=g=p+s.shift(),m=g,b=(S=(F=U+s.shift())+s.shift())+s.shift(),y=m+s.shift(),l=b+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,l,v)),\"o1237\"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),F=U+s.shift(),_=g+s.shift(),S=F+s.shift(),m=_+s.shift(),b=S+s.shift(),y=m+s.shift(),Math.abs(b-l)>Math.abs(y-v)?l=b+s.shift():v=y+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,l,v));else if(\"o14\"==x){if(s.length>0&&!h&&(f=s.shift()+a.nominalWidthX,h=!0),4==s.length){var k=s.shift(),G=s.shift(),D=s.shift(),B=s.shift(),L=e.CFF.glyphBySE(a,D),R=e.CFF.glyphBySE(a,B);e.U._drawCFF(a.CharStrings[L],t,a,n,o),t.x=k,t.y=G,e.U._drawCFF(a.CharStrings[R],t,a,n,o);}d&&(e.U.P.closePath(o),d=!1);}else if(\"o19\"==x||\"o20\"==x){s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0,u+=i+7>>3;}else if(\"o21\"==x)s.length>2&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),v+=s.pop(),l+=s.pop(),d&&e.U.P.closePath(o),e.U.P.moveTo(o,l,v),d=!0;else if(\"o22\"==x)s.length>1&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),l+=s.pop(),d&&e.U.P.closePath(o),e.U.P.moveTo(o,l,v),d=!0;else if(\"o25\"==x){for(;s.length>6;)l+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,l,v);c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),l=U+s.shift(),v=g+s.shift(),e.U.P.curveTo(o,c,p,U,g,l,v);}else if(\"o26\"==x)for(s.length%2&&(l+=s.shift());s.length>0;)c=l,p=v+s.shift(),l=U=c+s.shift(),v=(g=p+s.shift())+s.shift(),e.U.P.curveTo(o,c,p,U,g,l,v);else if(\"o27\"==x)for(s.length%2&&(v+=s.shift());s.length>0;)p=v,U=(c=l+s.shift())+s.shift(),g=p+s.shift(),l=U+s.shift(),v=g,e.U.P.curveTo(o,c,p,U,g,l,v);else if(\"o10\"==x||\"o29\"==x){var A=\"o10\"==x?n:a;if(0==s.length)console.debug(\"error: empty stack\");else {var W=s.pop(),M=A.Subrs[W+A.Bias];t.x=l,t.y=v,t.nStems=i,t.haveWidth=h,t.width=f,t.open=d,e.U._drawCFF(M,t,a,n,o),l=t.x,v=t.y,i=t.nStems,h=t.haveWidth,f=t.width,d=t.open;}}else if(\"o30\"==x||\"o31\"==x){var V=s.length,N=(T=0,\"o31\"==x);for(T+=V-(P=-3&V);T<P;)N?(p=v,U=(c=l+s.shift())+s.shift(),v=(g=p+s.shift())+s.shift(),P-T==5?(l=U+s.shift(),T++):l=U,N=!1):(c=l,p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),l=U+s.shift(),P-T==5?(v=g+s.shift(),T++):v=g,N=!0),e.U.P.curveTo(o,c,p,U,g,l,v),T+=4;}else {if(\"o\"==(x+\"\").charAt(0))throw console.debug(\"Unknown operation: \"+x,r),x;s.push(x);}}}t.x=l,t.y=v,t.nStems=i,t.haveWidth=h,t.width=f,t.open=d;};var t=e,a={Typr:t};return r.Typr=t,r.default=a,Object.defineProperty(r,\"__esModule\",{value:!0}),r}({}).Typr}\r\n\r\n/*!\r\nCustom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate\r\n(https://github.com/101arrowz/fflate) for use in Troika text rendering. \r\nOriginal licenses apply: \r\n- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)\r\n- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)\r\n*/\r\nfunction woff2otfFactory(){return function(r){var e=Uint8Array,n=Uint16Array,t=Uint32Array,a=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(r,e){for(var a=new n(31),i=0;i<31;++i)a[i]=e+=1<<r[i-1];var o=new t(a[30]);for(i=1;i<30;++i)for(var f=a[i];f<a[i+1];++f)o[f]=f-a[i]<<5|i;return [a,o]},u=f(a,2),v=u[0],s=u[1];v[28]=258,s[258]=28;for(var l=f(i,0)[0],c=new n(32768),g=0;g<32768;++g){var h=(43690&g)>>>1|(21845&g)<<1;h=(61680&(h=(52428&h)>>>2|(13107&h)<<2))>>>4|(3855&h)<<4,c[g]=((65280&h)>>>8|(255&h)<<8)>>>1;}var w=function(r,e,t){for(var a=r.length,i=0,o=new n(e);i<a;++i)++o[r[i]-1];var f,u=new n(e);for(i=0;i<e;++i)u[i]=u[i-1]+o[i-1]<<1;if(t){f=new n(1<<e);var v=15-e;for(i=0;i<a;++i)if(r[i])for(var s=i<<4|r[i],l=e-r[i],g=u[r[i]-1]++<<l,h=g|(1<<l)-1;g<=h;++g)f[c[g]>>>v]=s;}else for(f=new n(a),i=0;i<a;++i)r[i]&&(f[i]=c[u[r[i]-1]++]>>>15-r[i]);return f},d=new e(288);for(g=0;g<144;++g)d[g]=8;for(g=144;g<256;++g)d[g]=9;for(g=256;g<280;++g)d[g]=7;for(g=280;g<288;++g)d[g]=8;var m=new e(32);for(g=0;g<32;++g)m[g]=5;var b=w(d,9,1),p=w(m,5,1),y=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},L=function(r,e,n){var t=e/8|0;return (r[t]|r[t+1]<<8)>>(7&e)&n},U=function(r,e){var n=e/8|0;return (r[n]|r[n+1]<<8|r[n+2]<<16)>>(7&e)},k=[\"unexpected EOF\",\"invalid block type\",\"invalid length/literal\",\"invalid distance\",\"stream finished\",\"no stream handler\",,\"no callback\",\"invalid UTF-8 data\",\"extra field too long\",\"date not in range 1980-2099\",\"filename too long\",\"stream finishing\",\"invalid zip data\"],T=function(r,e,n){var t=new Error(e||k[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,T),!n)throw t;return t},O=function(r,f,u){var s=r.length;if(!s||u&&!u.l&&s<5)return f||new e(0);var c=!f||u,g=!u||u.i;u||(u={}),f||(f=new e(3*s));var h,d=function(r){var n=f.length;if(r>n){var t=new e(Math.max(2*n,r));t.set(f),f=t;}},m=u.f||0,k=u.p||0,O=u.b||0,A=u.l,x=u.d,E=u.m,D=u.n,M=8*s;do{if(!A){u.f=m=L(r,k,1);var S=L(r,k+1,3);if(k+=3,!S){var V=r[(I=((h=k)/8|0)+(7&h&&1)+4)-4]|r[I-3]<<8,_=I+V;if(_>s){g&&T(0);break}c&&d(O+V),f.set(r.subarray(I,_),O),u.b=O+=V,u.p=k=8*_;continue}if(1==S)A=b,x=p,E=9,D=5;else if(2==S){var j=L(r,k,31)+257,z=L(r,k+10,15)+4,C=j+L(r,k+5,31)+1;k+=14;for(var F=new e(C),P=new e(19),q=0;q<z;++q)P[o[q]]=L(r,k+3*q,7);k+=3*z;var B=y(P),G=(1<<B)-1,H=w(P,B,1);for(q=0;q<C;){var I,J=H[L(r,k,G)];if(k+=15&J,(I=J>>>4)<16)F[q++]=I;else {var K=0,N=0;for(16==I?(N=3+L(r,k,3),k+=2,K=F[q-1]):17==I?(N=3+L(r,k,7),k+=3):18==I&&(N=11+L(r,k,127),k+=7);N--;)F[q++]=K;}}var Q=F.subarray(0,j),R=F.subarray(j);E=y(Q),D=y(R),A=w(Q,E,1),x=w(R,D,1);}else T(1);if(k>M){g&&T(0);break}}c&&d(O+131072);for(var W=(1<<E)-1,X=(1<<D)-1,Y=k;;Y=k){var Z=(K=A[U(r,k)&W])>>>4;if((k+=15&K)>M){g&&T(0);break}if(K||T(2),Z<256)f[O++]=Z;else {if(256==Z){Y=k,A=null;break}var $=Z-254;if(Z>264){var rr=a[q=Z-257];$=L(r,k,(1<<rr)-1)+v[q],k+=rr;}var er=x[U(r,k)&X],nr=er>>>4;er||T(3),k+=15&er;R=l[nr];if(nr>3){rr=i[nr];R+=U(r,k)&(1<<rr)-1,k+=rr;}if(k>M){g&&T(0);break}c&&d(O+131072);for(var tr=O+$;O<tr;O+=4)f[O]=f[O-R],f[O+1]=f[O+1-R],f[O+2]=f[O+2-R],f[O+3]=f[O+3-R];O=tr;}}u.l=A,u.p=Y,u.b=O,A&&(m=1,u.m=E,u.d=x,u.n=D);}while(!m);return O==f.length?f:function(r,a,i){(null==a||a<0)&&(a=0),(null==i||i>r.length)&&(i=r.length);var o=new(r instanceof n?n:r instanceof t?t:e)(i-a);return o.set(r.subarray(a,i)),o}(f,0,O)},A=new e(0);var x=\"undefined\"!=typeof TextDecoder&&new TextDecoder;try{x.decode(A,{stream:!0}),1;}catch(r){}return r.convert_streams=function(r){var e=new DataView(r),n=0;function t(){var r=e.getUint16(n);return n+=2,r}function a(){var r=e.getUint32(n);return n+=4,r}function i(r){m.setUint16(b,r),b+=2;}function o(r){m.setUint32(b,r),b+=4;}for(var f={signature:a(),flavor:a(),length:a(),numTables:t(),reserved:t(),totalSfntSize:a(),majorVersion:t(),minorVersion:t(),metaOffset:a(),metaLength:a(),metaOrigLength:a(),privOffset:a(),privLength:a()},u=0;Math.pow(2,u)<=f.numTables;)u++;u--;for(var v=16*Math.pow(2,u),s=16*f.numTables-v,l=12,c=[],g=0;g<f.numTables;g++)c.push({tag:a(),offset:a(),compLength:a(),origLength:a(),origChecksum:a()}),l+=16;var h,w=new Uint8Array(12+16*c.length+c.reduce((function(r,e){return r+e.origLength+4}),0)),d=w.buffer,m=new DataView(d),b=0;return o(f.flavor),i(f.numTables),i(v),i(u),i(s),c.forEach((function(r){o(r.tag),o(r.origChecksum),o(l),o(r.origLength),r.outOffset=l,(l+=r.origLength)%4!=0&&(l+=4-l%4);})),c.forEach((function(e){var n,t=r.slice(e.offset,e.offset+e.compLength);if(e.compLength!=e.origLength){var a=new Uint8Array(e.origLength);n=new Uint8Array(t,2),O(n,a);}else a=new Uint8Array(t);w.set(a,e.outOffset);var i=0;(l=e.outOffset+e.origLength)%4!=0&&(i=4-l%4),w.set(new Uint8Array(i).buffer,e.outOffset+e.origLength),h=l+i;})),d.slice(0,h)},Object.defineProperty(r,\"__esModule\",{value:!0}),r}({}).convert_streams}\r\n\r\n/**\r\n * A factory wrapper parsing a font file using Typr.\r\n * Also adds support for WOFF files (not WOFF2).\r\n */\r\n\r\nfunction parserFactory(Typr, woff2otf) {\r\n  const cmdArgLengths = {\r\n    M: 2,\r\n    L: 2,\r\n    Q: 4,\r\n    C: 6,\r\n    Z: 0\r\n  };\r\n\r\n  // {joinType: \"skip+step,...\"}\r\n  const joiningTypeRawData = {\"C\":\"18g,ca,368,1kz\",\"D\":\"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v\",\"R\":\"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6\",\"L\":\"x9u,jff,a,fd,jv\",\"T\":\"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n\"};\r\n\r\n  const JT_LEFT = 1, //indicates that a character joins with the subsequent character, but does not join with the preceding character.\r\n    JT_RIGHT = 2, //indicates that a character joins with the preceding character, but does not join with the subsequent character.\r\n    JT_DUAL = 4, //indicates that a character joins with the preceding character and joins with the subsequent character.\r\n    JT_TRANSPARENT = 8, //indicates that the character does not join with adjacent characters and that the character must be skipped over when the shaping engine is evaluating the joining positions in a sequence of characters. When a JT_TRANSPARENT character is encountered in a sequence, the JOINING_TYPE of the preceding character passes through. Diacritical marks are frequently assigned this value.\r\n    JT_JOIN_CAUSING = 16, //indicates that the character forces the use of joining forms with the preceding and subsequent characters. Kashidas and the Zero Width Joiner (U+200D) are both JOIN_CAUSING characters.\r\n    JT_NON_JOINING = 32; //indicates that a character does not join with the preceding or with the subsequent character.,\r\n\r\n  let joiningTypeMap;\r\n  function getCharJoiningType(ch) {\r\n    if (!joiningTypeMap) {\r\n      const m = {\r\n        R: JT_RIGHT,\r\n        L: JT_LEFT,\r\n        D: JT_DUAL,\r\n        C: JT_JOIN_CAUSING,\r\n        U: JT_NON_JOINING,\r\n        T: JT_TRANSPARENT\r\n      };\r\n      joiningTypeMap = new Map();\r\n      for (let type in joiningTypeRawData) {\r\n        let lastCode = 0;\r\n        joiningTypeRawData[type].split(',').forEach(range => {\r\n          let [skip, step] = range.split('+');\r\n          skip = parseInt(skip,36);\r\n          step = step ? parseInt(step, 36) : 0;\r\n          joiningTypeMap.set(lastCode += skip, m[type]);\r\n          for (let i = step; i--;) {\r\n            joiningTypeMap.set(++lastCode, m[type]);\r\n          }\r\n        });\r\n      }\r\n    }\r\n    return joiningTypeMap.get(ch) || JT_NON_JOINING\r\n  }\r\n\r\n  const ISOL = 1, INIT = 2, FINA = 3, MEDI = 4;\r\n  const formsToFeatures = [null, 'isol', 'init', 'fina', 'medi'];\r\n\r\n  function detectJoiningForms(str) {\r\n    // This implements the algorithm described here:\r\n    // https://github.com/n8willis/opentype-shaping-documents/blob/master/opentype-shaping-arabic-general.md\r\n    const joiningForms = new Uint8Array(str.length);\r\n    let prevJoiningType = JT_NON_JOINING;\r\n    let prevForm = ISOL;\r\n    let prevIndex = -1;\r\n    for (let i = 0; i < str.length; i++) {\r\n      const code = str.codePointAt(i);\r\n      let joiningType = getCharJoiningType(code) | 0;\r\n      let form = ISOL;\r\n      if (joiningType & JT_TRANSPARENT) {\r\n        continue\r\n      }\r\n      if (prevJoiningType & (JT_LEFT | JT_DUAL | JT_JOIN_CAUSING)) {\r\n        if (joiningType & (JT_RIGHT | JT_DUAL | JT_JOIN_CAUSING)) {\r\n          form = FINA;\r\n          // isol->init, fina->medi\r\n          if (prevForm === ISOL || prevForm === FINA) {\r\n            joiningForms[prevIndex]++;\r\n          }\r\n        }\r\n        else if (joiningType & (JT_LEFT | JT_NON_JOINING)) {\r\n          // medi->fina, init->isol\r\n          if (prevForm === INIT || prevForm === MEDI) {\r\n            joiningForms[prevIndex]--;\r\n          }\r\n        }\r\n      }\r\n      else if (prevJoiningType & (JT_RIGHT | JT_NON_JOINING)) {\r\n        // medi->fina, init->isol\r\n        if (prevForm === INIT || prevForm === MEDI) {\r\n          joiningForms[prevIndex]--;\r\n        }\r\n      }\r\n      prevForm = joiningForms[i] = form;\r\n      prevJoiningType = joiningType;\r\n      prevIndex = i;\r\n      if (code > 0xffff) i++;\r\n    }\r\n    // console.log(str.split('').map(ch => ch.codePointAt(0).toString(16)))\r\n    // console.log(str.split('').map(ch => getCharJoiningType(ch.codePointAt(0))))\r\n    // console.log(Array.from(joiningForms).map(f => formsToFeatures[f] || 'none'))\r\n    return joiningForms\r\n  }\r\n\r\n  function stringToGlyphs (font, str) {\r\n    const glyphIds = [];\r\n    for (let i = 0; i < str.length; i++) {\r\n      const cc = str.codePointAt(i);\r\n      if (cc > 0xffff) i++;\r\n      glyphIds.push(Typr.U.codeToGlyph(font, cc));\r\n    }\r\n\r\n    const gsub = font['GSUB'];\r\n    if (gsub) {\r\n      const {lookupList, featureList} = gsub;\r\n      let joiningForms;\r\n      const supportedFeatures = /^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/;\r\n      const usedLookups = [];\r\n      featureList.forEach(feature => {\r\n        if (supportedFeatures.test(feature.tag)) {\r\n          for (let ti = 0; ti < feature.tab.length; ti++) {\r\n            if (usedLookups[feature.tab[ti]]) continue\r\n            usedLookups[feature.tab[ti]] = true;\r\n            const tab = lookupList[feature.tab[ti]];\r\n            const isJoiningFeature = /^(isol|init|fina|medi)$/.test(feature.tag);\r\n            if (isJoiningFeature && !joiningForms) { //lazy\r\n              joiningForms = detectJoiningForms(str);\r\n            }\r\n            for (let ci = 0; ci < glyphIds.length; ci++) {\r\n              if (!joiningForms || !isJoiningFeature || formsToFeatures[joiningForms[ci]] === feature.tag) {\r\n                Typr.U._applySubs(glyphIds, ci, tab, lookupList);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    return glyphIds\r\n  }\r\n\r\n  function firstNum(...args) {\r\n    for (let i = 0; i < args.length; i++) {\r\n      if (typeof args[i] === 'number') {\r\n        return args[i]\r\n      }\r\n    }\r\n  }\r\n\r\n  function wrapFontObj(typrFont) {\r\n    const glyphMap = Object.create(null);\r\n\r\n    const os2 = typrFont['OS/2'];\r\n    const hhea = typrFont.hhea;\r\n    const unitsPerEm = typrFont.head.unitsPerEm;\r\n    const ascender = firstNum(os2 && os2.sTypoAscender, hhea && hhea.ascender, unitsPerEm);\r\n\r\n    const fontObj = {\r\n      unitsPerEm,\r\n      ascender,\r\n      descender: firstNum(os2 && os2.sTypoDescender, hhea && hhea.descender, 0),\r\n      capHeight: firstNum(os2 && os2.sCapHeight, ascender),\r\n      xHeight: firstNum(os2 && os2.sxHeight, ascender),\r\n      lineGap: firstNum(os2 && os2.sTypoLineGap, hhea && hhea.lineGap),\r\n      forEachGlyph(text, fontSize, letterSpacing, callback) {\r\n        let glyphX = 0;\r\n        const fontScale = 1 / fontObj.unitsPerEm * fontSize;\r\n\r\n        const glyphIndices = stringToGlyphs(typrFont, text);\r\n        let charIndex = 0;\r\n        let prevGlyphIndex = -1;\r\n        glyphIndices.forEach((glyphIndex, i) => {\r\n          // Typr returns a glyph index per string codepoint, with -1s in place of those that\r\n          // were omitted due to ligature substitution. So we can track original index in the\r\n          // string via simple increment, and skip everything else when seeing a -1.\r\n          if (glyphIndex !== -1) {\r\n            let glyphObj = glyphMap[glyphIndex];\r\n            if (!glyphObj) {\r\n              const {cmds, crds} = Typr.U.glyphToPath(typrFont, glyphIndex);\r\n\r\n              // Build path string\r\n              let path = '';\r\n              let crdsIdx = 0;\r\n              for (let i = 0, len = cmds.length; i < len; i++) {\r\n                const numArgs = cmdArgLengths[cmds[i]];\r\n                path += cmds[i];\r\n                for (let j = 1; j <= numArgs; j++) {\r\n                  path += (j > 1 ? ',' : '') + crds[crdsIdx++];\r\n                }\r\n              }\r\n\r\n              // Find extents - Glyf gives this in metadata but not CFF, and Typr doesn't\r\n              // normalize the two, so it's simplest just to iterate ourselves.\r\n              let xMin, yMin, xMax, yMax;\r\n              if (crds.length) {\r\n                xMin = yMin = Infinity;\r\n                xMax = yMax = -Infinity;\r\n                for (let i = 0, len = crds.length; i < len; i += 2) {\r\n                  let x = crds[i];\r\n                  let y = crds[i + 1];\r\n                  if (x < xMin) xMin = x;\r\n                  if (y < yMin) yMin = y;\r\n                  if (x > xMax) xMax = x;\r\n                  if (y > yMax) yMax = y;\r\n                }\r\n              } else {\r\n                xMin = xMax = yMin = yMax = 0;\r\n              }\r\n\r\n              glyphObj = glyphMap[glyphIndex] = {\r\n                index: glyphIndex,\r\n                advanceWidth: typrFont.hmtx.aWidth[glyphIndex],\r\n                xMin,\r\n                yMin,\r\n                xMax,\r\n                yMax,\r\n                path,\r\n                pathCommandCount: cmds.length,\r\n                // forEachPathCommand(callback) {\r\n                //   let argsIndex = 0\r\n                //   const argsArray = []\r\n                //   for (let i = 0, len = cmds.length; i < len; i++) {\r\n                //     const numArgs = cmdArgLengths[cmds[i]]\r\n                //     argsArray.length = 1 + numArgs\r\n                //     argsArray[0] = cmds[i]\r\n                //     for (let j = 1; j <= numArgs; j++) {\r\n                //       argsArray[j] = crds[argsIndex++]\r\n                //     }\r\n                //     callback.apply(null, argsArray)\r\n                //   }\r\n                // }\r\n              };\r\n            }\r\n\r\n            // Kerning\r\n            if (prevGlyphIndex !== -1) {\r\n              glyphX += Typr.U.getPairAdjustment(typrFont, prevGlyphIndex, glyphIndex) * fontScale;\r\n            }\r\n\r\n            callback.call(null, glyphObj, glyphX, charIndex);\r\n\r\n            if (glyphObj.advanceWidth) {\r\n              glyphX += glyphObj.advanceWidth * fontScale;\r\n            }\r\n            if (letterSpacing) {\r\n              glyphX += letterSpacing * fontSize;\r\n            }\r\n\r\n            prevGlyphIndex = glyphIndex;\r\n          }\r\n          charIndex += (text.codePointAt(charIndex) > 0xffff ? 2 : 1);\r\n        });\r\n        return glyphX\r\n      }\r\n    };\r\n\r\n    return fontObj\r\n  }\r\n\r\n  return function parse(buffer) {\r\n    // Look to see if we have a WOFF file and convert it if so:\r\n    const peek = new Uint8Array(buffer, 0, 4);\r\n    const tag = Typr._bin.readASCII(peek, 0, 4);\r\n    if (tag === 'wOFF') {\r\n      buffer = woff2otf(buffer);\r\n    } else if (tag === 'wOF2') {\r\n      throw new Error('woff2 fonts not supported')\r\n    }\r\n    return wrapFontObj(Typr.parse(buffer)[0])\r\n  }\r\n}\r\n\r\n\r\nconst workerModule = /*#__PURE__*/defineWorkerModule({\r\n  name: 'Typr Font Parser',\r\n  dependencies: [typrFactory, woff2otfFactory, parserFactory],\r\n  init(typrFactory, woff2otfFactory, parserFactory) {\r\n    const Typr = typrFactory();\r\n    const woff2otf = woff2otfFactory();\r\n    return parserFactory(Typr, woff2otf)\r\n  }\r\n});\r\n\r\nconst CONFIG = {\r\n  defaultFontURL: 'https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff', //Roboto Regular\r\n  sdfGlyphSize: 64,\r\n  sdfMargin: 1 / 16,\r\n  sdfExponent: 9,\r\n  textureWidth: 2048\r\n};\r\nconst tempColor = /*#__PURE__*/new Color();\r\nlet hasRequested = false;\r\n\r\nfunction now$1() {\r\n  return (self.performance || Date).now()\r\n}\r\n\r\n/**\r\n * Customizes the text builder configuration. This must be called prior to the first font processing\r\n * request, and applies to all fonts.\r\n *\r\n * @param {String} config.defaultFontURL - The URL of the default font to use for text processing\r\n *                 requests, in case none is specified or the specifiede font fails to load or parse.\r\n *                 Defaults to \"Roboto Regular\" from Google Fonts.\r\n * @param {Number} config.sdfGlyphSize - The default size of each glyph's SDF (signed distance field)\r\n *                 texture used for rendering. Must be a power-of-two number, and applies to all fonts,\r\n *                 but note that this can also be overridden per call to `getTextRenderInfo()`.\r\n *                 Larger sizes can improve the quality of glyph rendering by increasing the sharpness\r\n *                 of corners and preventing loss of very thin lines, at the expense of memory. Defaults\r\n *                 to 64 which is generally a good balance of size and quality.\r\n * @param {Number} config.sdfExponent - The exponent used when encoding the SDF values. A higher exponent\r\n *                 shifts the encoded 8-bit values to achieve higher precision/accuracy at texels nearer\r\n *                 the glyph's path, with lower precision further away. Defaults to 9.\r\n * @param {Number} config.sdfMargin - How much space to reserve in the SDF as margin outside the glyph's\r\n *                 path, as a percentage of the SDF width. A larger margin increases the quality of\r\n *                 extruded glyph outlines, but decreases the precision available for the glyph itself.\r\n *                 Defaults to 1/16th of the glyph size.\r\n * @param {Number} config.textureWidth - The width of the SDF texture; must be a power of 2. Defaults to\r\n *                 2048 which is a safe maximum texture dimension according to the stats at\r\n *                 https://webglstats.com/webgl/parameter/MAX_TEXTURE_SIZE and should allow for a\r\n *                 reasonably large number of glyphs (default glyph size of 64^2 and safe texture size of\r\n *                 2048^2, times 4 channels, allows for 4096 glyphs.) This can be increased if you need to\r\n *                 increase the glyph size and/or have an extraordinary number of glyphs.\r\n */\r\nfunction configureTextBuilder(config) {\r\n  if (hasRequested) {\r\n    console.warn('configureTextBuilder called after first font request; will be ignored.');\r\n  } else {\r\n    assign(CONFIG, config);\r\n  }\r\n}\r\n\r\n/**\r\n * Repository for all font SDF atlas textures and their glyph mappings. There is a separate atlas for\r\n * each sdfGlyphSize. Each atlas has a single Texture that holds all glyphs for all fonts.\r\n *\r\n *   {\r\n *     [sdfGlyphSize]: {\r\n *       glyphCount: number,\r\n *       sdfGlyphSize: number,\r\n *       sdfTexture: Texture,\r\n *       sdfCanvas: HTMLCanvasElement,\r\n *       contextLost: boolean,\r\n *       glyphsByFont: Map<fontURL, Map<glyphID, {path, atlasIndex, sdfViewBox}>>\r\n *     }\r\n *   }\r\n */\r\nconst atlases = Object.create(null);\r\n\r\n/**\r\n * @typedef {object} TroikaTextRenderInfo - Format of the result from `getTextRenderInfo`.\r\n * @property {object} parameters - The normalized input arguments to the render call.\r\n * @property {Texture} sdfTexture - The SDF atlas texture.\r\n * @property {number} sdfGlyphSize - The size of each glyph's SDF; see `configureTextBuilder`.\r\n * @property {number} sdfExponent - The exponent used in encoding the SDF's values; see `configureTextBuilder`.\r\n * @property {Float32Array} glyphBounds - List of [minX, minY, maxX, maxY] quad bounds for each glyph.\r\n * @property {Float32Array} glyphAtlasIndices - List holding each glyph's index in the SDF atlas.\r\n * @property {Uint8Array} [glyphColors] - List holding each glyph's [r, g, b] color, if `colorRanges` was supplied.\r\n * @property {Float32Array} [caretPositions] - A list of caret positions for all characters in the string; each is\r\n *           three elements: the starting X, the ending X, and the bottom Y for the caret.\r\n * @property {number} [caretHeight] - An appropriate height for all selection carets.\r\n * @property {number} ascender - The font's ascender metric.\r\n * @property {number} descender - The font's descender metric.\r\n * @property {number} capHeight - The font's cap height metric, based on the height of Latin capital letters.\r\n * @property {number} xHeight - The font's x height metric, based on the height of Latin lowercase letters.\r\n * @property {number} lineHeight - The final computed lineHeight measurement.\r\n * @property {number} topBaseline - The y position of the top line's baseline.\r\n * @property {Array<number>} blockBounds - The total [minX, minY, maxX, maxY] rect of the whole text block;\r\n *           this can include extra vertical space beyond the visible glyphs due to lineHeight, and is\r\n *           equivalent to the dimensions of a block-level text element in CSS.\r\n * @property {Array<number>} visibleBounds - The total [minX, minY, maxX, maxY] rect of the whole text block;\r\n *           unlike `blockBounds` this is tightly wrapped to the visible glyph paths.\r\n * @property {Array<object>} chunkedBounds - List of bounding rects for each consecutive set of N glyphs,\r\n *           in the format `{start:N, end:N, rect:[minX, minY, maxX, maxY]}`.\r\n * @property {object} timings - Timing info for various parts of the rendering logic including SDF\r\n *           generation, typesetting, etc.\r\n * @frozen\r\n */\r\n\r\n/**\r\n * @callback getTextRenderInfo~callback\r\n * @param {TroikaTextRenderInfo} textRenderInfo\r\n */\r\n\r\n/**\r\n * Main entry point for requesting the data needed to render a text string with given font parameters.\r\n * This is an asynchronous call, performing most of the logic in a web worker thread.\r\n * @param {object} args\r\n * @param {getTextRenderInfo~callback} callback\r\n */\r\nfunction getTextRenderInfo(args, callback) {\r\n  hasRequested = true;\r\n  args = assign({}, args);\r\n  const totalStart = now$1();\r\n\r\n  // Apply default font here to avoid a 'null' atlas, and convert relative\r\n  // URLs to absolute so they can be resolved in the worker\r\n  args.font = toAbsoluteURL(args.font || CONFIG.defaultFontURL);\r\n\r\n  // Normalize text to a string\r\n  args.text = '' + args.text;\r\n\r\n  args.sdfGlyphSize = args.sdfGlyphSize || CONFIG.sdfGlyphSize;\r\n\r\n  // Normalize colors\r\n  if (args.colorRanges != null) {\r\n    let colors = {};\r\n    for (let key in args.colorRanges) {\r\n      if (args.colorRanges.hasOwnProperty(key)) {\r\n        let val = args.colorRanges[key];\r\n        if (typeof val !== 'number') {\r\n          val = tempColor.set(val).getHex();\r\n        }\r\n        colors[key] = val;\r\n      }\r\n    }\r\n    args.colorRanges = colors;\r\n  }\r\n\r\n  Object.freeze(args);\r\n\r\n  // Init the atlas if needed\r\n  const {textureWidth, sdfExponent} = CONFIG;\r\n  const {sdfGlyphSize} = args;\r\n  const glyphsPerRow = (textureWidth / sdfGlyphSize * 4);\r\n  let atlas = atlases[sdfGlyphSize];\r\n  if (!atlas) {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = textureWidth;\r\n    canvas.height = sdfGlyphSize * 256 / glyphsPerRow; // start tall enough to fit 256 glyphs\r\n    atlas = atlases[sdfGlyphSize] = {\r\n      glyphCount: 0,\r\n      sdfGlyphSize,\r\n      sdfCanvas: canvas,\r\n      sdfTexture: new Texture(\r\n        canvas,\r\n        undefined,\r\n        undefined,\r\n        undefined,\r\n        LinearFilter,\r\n        LinearFilter\r\n      ),\r\n      contextLost: false,\r\n      glyphsByFont: new Map()\r\n    };\r\n    atlas.sdfTexture.generateMipmaps = false;\r\n    initContextLossHandling(atlas);\r\n  }\r\n\r\n  const {sdfTexture, sdfCanvas} = atlas;\r\n  let fontGlyphs = atlas.glyphsByFont.get(args.font);\r\n  if (!fontGlyphs) {\r\n    atlas.glyphsByFont.set(args.font, fontGlyphs = new Map());\r\n  }\r\n\r\n  // Issue request to the typesetting engine in the worker\r\n  typesetInWorker(args).then(result => {\r\n    const {glyphIds, glyphPositions, fontSize, unitsPerEm, timings} = result;\r\n    const neededSDFs = [];\r\n    const glyphBounds = new Float32Array(glyphIds.length * 4);\r\n    const fontSizeMult = fontSize / unitsPerEm;\r\n    let boundsIdx = 0;\r\n    let positionsIdx = 0;\r\n    const quadsStart = now$1();\r\n    glyphIds.forEach((glyphId, i) => {\r\n      let glyphInfo = fontGlyphs.get(glyphId);\r\n\r\n      // If this is a glyphId not seen before, add it to the atlas\r\n      if (!glyphInfo) {\r\n        const {path, pathBounds} = result.glyphData[glyphId];\r\n\r\n        // Margin around path edges in SDF, based on a percentage of the glyph's max dimension.\r\n        // Note we add an extra 0.5 px over the configured value because the outer 0.5 doesn't contain\r\n        // useful interpolated values and will be ignored anyway.\r\n        const fontUnitsMargin = Math.max(pathBounds[2] - pathBounds[0], pathBounds[3] - pathBounds[1])\r\n          / sdfGlyphSize * (CONFIG.sdfMargin * sdfGlyphSize + 0.5);\r\n\r\n        const atlasIndex = atlas.glyphCount++;\r\n        const sdfViewBox = [\r\n          pathBounds[0] - fontUnitsMargin,\r\n          pathBounds[1] - fontUnitsMargin,\r\n          pathBounds[2] + fontUnitsMargin,\r\n          pathBounds[3] + fontUnitsMargin,\r\n        ];\r\n        fontGlyphs.set(glyphId, (glyphInfo = { path, atlasIndex, sdfViewBox }));\r\n\r\n        // Collect those that need SDF generation\r\n        neededSDFs.push(glyphInfo);\r\n      }\r\n\r\n      // Calculate bounds for renderable quads\r\n      // TODO can we get this back off the main thread?\r\n      const {sdfViewBox} = glyphInfo;\r\n      const posX = glyphPositions[positionsIdx++];\r\n      const posY = glyphPositions[positionsIdx++];\r\n      glyphBounds[boundsIdx++] = posX + sdfViewBox[0] * fontSizeMult;\r\n      glyphBounds[boundsIdx++] = posY + sdfViewBox[1] * fontSizeMult;\r\n      glyphBounds[boundsIdx++] = posX + sdfViewBox[2] * fontSizeMult;\r\n      glyphBounds[boundsIdx++] = posY + sdfViewBox[3] * fontSizeMult;\r\n\r\n      // Convert glyphId to SDF index for the shader\r\n      glyphIds[i] = glyphInfo.atlasIndex;\r\n    });\r\n    timings.quads = (timings.quads || 0) + (now$1() - quadsStart);\r\n\r\n    const sdfStart = now$1();\r\n    timings.sdf = {};\r\n\r\n    // Grow the texture height by power of 2 if needed\r\n    const currentHeight = sdfCanvas.height;\r\n    const neededRows = Math.ceil(atlas.glyphCount / glyphsPerRow);\r\n    const neededHeight = Math.pow(2, Math.ceil(Math.log2(neededRows * sdfGlyphSize)));\r\n    if (neededHeight > currentHeight) {\r\n      // Since resizing the canvas clears its render buffer, it needs special handling to copy the old contents over\r\n      console.info(`Increasing SDF texture size ${currentHeight}->${neededHeight}`);\r\n      resizeWebGLCanvasWithoutClearing(sdfCanvas, textureWidth, neededHeight);\r\n      // As of Three r136 textures cannot be resized once they're allocated on the GPU, we must dispose to reallocate it\r\n      sdfTexture.dispose();\r\n    }\r\n\r\n    Promise.all(neededSDFs.map(glyphInfo =>\r\n      generateGlyphSDF(glyphInfo, atlas, args.gpuAccelerateSDF).then(({timing}) => {\r\n        timings.sdf[glyphInfo.atlasIndex] = timing;\r\n      })\r\n    )).then(() => {\r\n      if (neededSDFs.length && !atlas.contextLost) {\r\n        safariPre15Workaround(atlas);\r\n        sdfTexture.needsUpdate = true;\r\n      }\r\n      timings.sdfTotal = now$1() - sdfStart;\r\n      timings.total = now$1() - totalStart;\r\n      // console.log(`SDF - ${timings.sdfTotal}, Total - ${timings.total - timings.fontLoad}`)\r\n\r\n      // Invoke callback with the text layout arrays and updated texture\r\n      callback(Object.freeze({\r\n        parameters: args,\r\n        sdfTexture,\r\n        sdfGlyphSize,\r\n        sdfExponent,\r\n        glyphBounds,\r\n        glyphAtlasIndices: glyphIds,\r\n        glyphColors: result.glyphColors,\r\n        caretPositions: result.caretPositions,\r\n        caretHeight: result.caretHeight,\r\n        chunkedBounds: result.chunkedBounds,\r\n        ascender: result.ascender,\r\n        descender: result.descender,\r\n        lineHeight: result.lineHeight,\r\n        capHeight: result.capHeight,\r\n        xHeight: result.xHeight,\r\n        topBaseline: result.topBaseline,\r\n        blockBounds: result.blockBounds,\r\n        visibleBounds: result.visibleBounds,\r\n        timings: result.timings,\r\n      }));\r\n    });\r\n  });\r\n\r\n  // While the typesetting request is being handled, go ahead and make sure the atlas canvas context is\r\n  // \"warmed up\"; the first request will be the longest due to shader program compilation so this gets\r\n  // a head start on that process before SDFs actually start getting processed.\r\n  Promise.resolve().then(() => {\r\n    if (!atlas.contextLost) {\r\n      warmUpSDFCanvas(sdfCanvas);\r\n    }\r\n  });\r\n}\r\n\r\nfunction generateGlyphSDF({path, atlasIndex, sdfViewBox}, {sdfGlyphSize, sdfCanvas, contextLost}, useGPU) {\r\n  if (contextLost) {\r\n    // If the context is lost there's nothing we can do, just quit silently and let it\r\n    // get regenerated when the context is restored\r\n    return Promise.resolve({timing: -1})\r\n  }\r\n  const {textureWidth, sdfExponent} = CONFIG;\r\n  const maxDist = Math.max(sdfViewBox[2] - sdfViewBox[0], sdfViewBox[3] - sdfViewBox[1]);\r\n  const squareIndex = Math.floor(atlasIndex / 4);\r\n  const x = squareIndex % (textureWidth / sdfGlyphSize) * sdfGlyphSize;\r\n  const y = Math.floor(squareIndex / (textureWidth / sdfGlyphSize)) * sdfGlyphSize;\r\n  const channel = atlasIndex % 4;\r\n  return generateSDF(sdfGlyphSize, sdfGlyphSize, path, sdfViewBox, maxDist, sdfExponent, sdfCanvas, x, y, channel, useGPU)\r\n}\r\n\r\nfunction initContextLossHandling(atlas) {\r\n  const canvas = atlas.sdfCanvas;\r\n\r\n  /*\r\n  // Begin context loss simulation\r\n  if (!window.WebGLDebugUtils) {\r\n    let script = document.getElementById('WebGLDebugUtilsScript')\r\n    if (!script) {\r\n      script = document.createElement('script')\r\n      script.id = 'WebGLDebugUtils'\r\n      document.head.appendChild(script)\r\n      script.src = 'https://cdn.jsdelivr.net/gh/KhronosGroup/WebGLDeveloperTools@b42e702/src/debug/webgl-debug.js'\r\n    }\r\n    script.addEventListener('load', () => {\r\n      initContextLossHandling(atlas)\r\n    })\r\n    return\r\n  }\r\n  window.WebGLDebugUtils.makeLostContextSimulatingCanvas(canvas)\r\n  canvas.loseContextInNCalls(500)\r\n  canvas.addEventListener('webglcontextrestored', (event) => {\r\n    canvas.loseContextInNCalls(5000)\r\n  })\r\n  // End context loss simulation\r\n  */\r\n\r\n  canvas.addEventListener('webglcontextlost', (event) => {\r\n    console.log('Context Lost', event);\r\n    event.preventDefault();\r\n    atlas.contextLost = true;\r\n  });\r\n  canvas.addEventListener('webglcontextrestored', (event) => {\r\n    console.log('Context Restored', event);\r\n    atlas.contextLost = false;\r\n    // Regenerate all glyphs into the restored canvas:\r\n    const promises = [];\r\n    atlas.glyphsByFont.forEach(glyphMap => {\r\n      glyphMap.forEach(glyph => {\r\n        promises.push(generateGlyphSDF(glyph, atlas, true));\r\n      });\r\n    });\r\n    Promise.all(promises).then(() => {\r\n      safariPre15Workaround(atlas);\r\n      atlas.sdfTexture.needsUpdate = true;\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Preload a given font and optionally pre-generate glyph SDFs for one or more character sequences.\r\n * This can be useful to avoid long pauses when first showing text in a scene, by preloading the\r\n * needed fonts and glyphs up front along with other assets.\r\n *\r\n * @param {object} options\r\n * @param {string} options.font - URL of the font file to preload. If not given, the default font will\r\n *        be loaded.\r\n * @param {string|string[]} options.characters - One or more character sequences for which to pre-\r\n *        generate glyph SDFs. Note that this will honor ligature substitution, so you may need\r\n *        to specify ligature sequences in addition to their individual characters to get all\r\n *        possible glyphs, e.g. `[\"t\", \"h\", \"th\"]` to get the \"t\" and \"h\" glyphs plus the \"th\" ligature.\r\n * @param {number} options.sdfGlyphSize - The size at which to prerender the SDF textures for the\r\n *        specified `characters`.\r\n * @param {function} callback - A function that will be called when the preloading is complete.\r\n */\r\nfunction preloadFont({font, characters, sdfGlyphSize}, callback) {\r\n  let text = Array.isArray(characters) ? characters.join('\\n') : '' + characters;\r\n  getTextRenderInfo({ font, sdfGlyphSize, text }, callback);\r\n}\r\n\r\n\r\n// Local assign impl so we don't have to import troika-core\r\nfunction assign(toObj, fromObj) {\r\n  for (let key in fromObj) {\r\n    if (fromObj.hasOwnProperty(key)) {\r\n      toObj[key] = fromObj[key];\r\n    }\r\n  }\r\n  return toObj\r\n}\r\n\r\n// Utility for making URLs absolute\r\nlet linkEl;\r\nfunction toAbsoluteURL(path) {\r\n  if (!linkEl) {\r\n    linkEl = typeof document === 'undefined' ? {} : document.createElement('a');\r\n  }\r\n  linkEl.href = path;\r\n  return linkEl.href\r\n}\r\n\r\n/**\r\n * Safari < v15 seems unable to use the SDF webgl canvas as a texture. This applies a workaround\r\n * where it reads the pixels out of that canvas and uploads them as a data texture instead, at\r\n * a slight performance cost.\r\n */\r\nfunction safariPre15Workaround(atlas) {\r\n  // Use createImageBitmap support as a proxy for Safari<15, all other mainstream browsers\r\n  // have supported it for a long while so any false positives should be minimal.\r\n  if (typeof createImageBitmap !== 'function') {\r\n    console.info('Safari<15: applying SDF canvas workaround');\r\n    const {sdfCanvas, sdfTexture} = atlas;\r\n    const {width, height} = sdfCanvas;\r\n    const gl = atlas.sdfCanvas.getContext('webgl');\r\n    let pixels = sdfTexture.image.data;\r\n    if (!pixels || pixels.length !== width * height * 4) {\r\n      pixels = new Uint8Array(width * height * 4);\r\n      sdfTexture.image = {width, height, data: pixels};\r\n      sdfTexture.flipY = false;\r\n      sdfTexture.isDataTexture = true;\r\n    }\r\n    gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\r\n  }\r\n}\r\n\r\n\r\nconst typesetterWorkerModule = /*#__PURE__*/defineWorkerModule({\r\n  name: 'Typesetter',\r\n  dependencies: [\r\n    CONFIG,\r\n    workerModule,\r\n    createTypesetter,\r\n    bidiFactory\r\n  ],\r\n  init(config, fontParser, createTypesetter, bidiFactory) {\r\n    const {defaultFontURL} = config;\r\n    return createTypesetter(fontParser, bidiFactory(), { defaultFontURL })\r\n  }\r\n});\r\n\r\nconst typesetInWorker = /*#__PURE__*/defineWorkerModule({\r\n  name: 'Typesetter',\r\n  dependencies: [\r\n    typesetterWorkerModule,\r\n  ],\r\n  init(typesetter) {\r\n    return function(args) {\r\n      return new Promise(resolve => {\r\n        typesetter.typeset(args, resolve);\r\n      })\r\n    }\r\n  },\r\n  getTransferables(result) {\r\n    // Mark array buffers as transferable to avoid cloning during postMessage\r\n    const transferables = [\r\n      result.glyphPositions.buffer,\r\n      result.glyphIds.buffer\r\n    ];\r\n    if (result.caretPositions) {\r\n      transferables.push(result.caretPositions.buffer);\r\n    }\r\n    if (result.glyphColors) {\r\n      transferables.push(result.glyphColors.buffer);\r\n    }\r\n    return transferables\r\n  }\r\n});\r\n\r\nfunction dumpSDFTextures() {\r\n  Object.keys(atlases).forEach(size => {\r\n    const canvas = atlases[size].sdfCanvas;\r\n    const {width, height} = canvas;\r\n    console.log(\"%c.\", `\r\n      background: url(${canvas.toDataURL()});\r\n      background-size: ${width}px ${height}px;\r\n      color: transparent;\r\n      font-size: 0;\r\n      line-height: ${height}px;\r\n      padding-left: ${width}px;\r\n    `);\r\n  });\r\n}\r\n\r\nconst templateGeometries = {};\r\n\r\nfunction getTemplateGeometry(detail) {\r\n  let geom = templateGeometries[detail];\r\n  if (!geom) {\r\n    // Geometry is two planes back-to-back, which will always be rendered FrontSide only but\r\n    // appear as DoubleSide by default. FrontSide/BackSide are emulated using drawRange.\r\n    // We do it this way to avoid the performance hit of two draw calls for DoubleSide materials\r\n    // introduced by Three.js in r130 - see https://github.com/mrdoob/three.js/pull/21967\r\n    const front = new PlaneGeometry(1, 1, detail, detail);\r\n    const back = front.clone();\r\n    const frontAttrs = front.attributes;\r\n    const backAttrs = back.attributes;\r\n    const combined = new BufferGeometry();\r\n    const vertCount = frontAttrs.uv.count;\r\n    for (let i = 0; i < vertCount; i++) {\r\n      backAttrs.position.array[i * 3] *= -1; // flip position x\r\n      backAttrs.normal.array[i * 3 + 2] *= -1; // flip normal z\r\n    }\r\n    ['position', 'normal', 'uv'].forEach(name => {\r\n      combined.setAttribute(name, new Float32BufferAttribute(\r\n        [...frontAttrs[name].array, ...backAttrs[name].array],\r\n        frontAttrs[name].itemSize)\r\n      );\r\n    });\r\n    combined.setIndex([...front.index.array, ...back.index.array.map(n => n + vertCount)]);\r\n    combined.translate(0.5, 0.5, 0);\r\n    geom = templateGeometries[detail] = combined;\r\n  }\r\n  return geom\r\n}\r\n\r\nconst glyphBoundsAttrName = 'aTroikaGlyphBounds';\r\nconst glyphIndexAttrName = 'aTroikaGlyphIndex';\r\nconst glyphColorAttrName = 'aTroikaGlyphColor';\r\n\r\n/**\r\n@class GlyphsGeometry\r\n\r\nA specialized Geometry for rendering a set of text glyphs. Uses InstancedBufferGeometry to\r\nrender the glyphs using GPU instancing of a single quad, rather than constructing a whole\r\ngeometry with vertices, for much smaller attribute arraybuffers according to this math:\r\n\r\n  Where N = number of glyphs...\r\n\r\n  Instanced:\r\n  - position: 4 * 3\r\n  - index: 2 * 3\r\n  - normal: 4 * 3\r\n  - uv: 4 * 2\r\n  - glyph x/y bounds: N * 4\r\n  - glyph indices: N * 1\r\n  = 5N + 38\r\n\r\n  Non-instanced:\r\n  - position: N * 4 * 3\r\n  - index: N * 2 * 3\r\n  - normal: N * 4 * 3\r\n  - uv: N * 4 * 2\r\n  - glyph indices: N * 1\r\n  = 39N\r\n\r\nA downside of this is the rare-but-possible lack of the instanced arrays extension,\r\nwhich we could potentially work around with a fallback non-instanced implementation.\r\n\r\n*/\r\nclass GlyphsGeometry extends InstancedBufferGeometry {\r\n  constructor() {\r\n    super();\r\n\r\n    this.detail = 1;\r\n    this.curveRadius = 0;\r\n\r\n    // Define groups for rendering text outline as a separate pass; these will only\r\n    // be used when the `material` getter returns an array, i.e. outlineWidth > 0.\r\n    this.groups = [\r\n      {start: 0, count: Infinity, materialIndex: 0},\r\n      {start: 0, count: Infinity, materialIndex: 1}\r\n    ];\r\n\r\n    // Preallocate empty bounding objects\r\n    this.boundingSphere = new Sphere();\r\n    this.boundingBox = new Box3();\r\n  }\r\n\r\n  computeBoundingSphere () {\r\n    // No-op; we'll sync the boundingSphere proactively when needed.\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    // No-op; we'll sync the boundingBox proactively when needed.\r\n  }\r\n\r\n  // Since our base geometry contains triangles for both front and back sides, we can emulate\r\n  // the \"side\" by restricting the draw range.\r\n  setSide(side) {\r\n    const verts = this.getIndex().count;\r\n    this.setDrawRange(side === BackSide ? verts / 2 : 0, side === DoubleSide ? verts : verts / 2);\r\n  }\r\n\r\n  set detail(detail) {\r\n    if (detail !== this._detail) {\r\n      this._detail = detail;\r\n      if (typeof detail !== 'number' || detail < 1) {\r\n        detail = 1;\r\n      }\r\n      let tpl = getTemplateGeometry(detail)\r\n      ;['position', 'normal', 'uv'].forEach(attr => {\r\n        this.attributes[attr] = tpl.attributes[attr].clone();\r\n      });\r\n      this.setIndex(tpl.getIndex().clone());\r\n    }\r\n  }\r\n  get detail() {\r\n    return this._detail\r\n  }\r\n\r\n  set curveRadius(r) {\r\n    if (r !== this._curveRadius) {\r\n      this._curveRadius = r;\r\n      this._updateBounds();\r\n    }\r\n  }\r\n  get curveRadius() {\r\n    return this._curveRadius\r\n  }\r\n\r\n  /**\r\n   * Update the geometry for a new set of glyphs.\r\n   * @param {Float32Array} glyphBounds - An array holding the planar bounds for all glyphs\r\n   *        to be rendered, 4 entries for each glyph: x1,x2,y1,y1\r\n   * @param {Float32Array} glyphAtlasIndices - An array holding the index of each glyph within\r\n   *        the SDF atlas texture.\r\n   * @param {Array} blockBounds - An array holding the [minX, minY, maxX, maxY] across all glyphs\r\n   * @param {Array} [chunkedBounds] - An array of objects describing bounds for each chunk of N\r\n   *        consecutive glyphs: `{start:N, end:N, rect:[minX, minY, maxX, maxY]}`. This can be\r\n   *        used with `applyClipRect` to choose an optimized `instanceCount`.\r\n   * @param {Uint8Array} [glyphColors] - An array holding r,g,b values for each glyph.\r\n   */\r\n  updateGlyphs(glyphBounds, glyphAtlasIndices, blockBounds, chunkedBounds, glyphColors) {\r\n    // Update the instance attributes\r\n    updateBufferAttr(this, glyphBoundsAttrName, glyphBounds, 4);\r\n    updateBufferAttr(this, glyphIndexAttrName, glyphAtlasIndices, 1);\r\n    updateBufferAttr(this, glyphColorAttrName, glyphColors, 3);\r\n    this._blockBounds = blockBounds;\r\n    this._chunkedBounds = chunkedBounds;\r\n    this.instanceCount = glyphAtlasIndices.length;\r\n    this._updateBounds();\r\n  }\r\n\r\n  _updateBounds() {\r\n    const bounds = this._blockBounds;\r\n    if (bounds) {\r\n      const { curveRadius, boundingBox: bbox } = this;\r\n      if (curveRadius) {\r\n        const { PI, floor, min, max, sin, cos } = Math;\r\n        const halfPi = PI / 2;\r\n        const twoPi = PI * 2;\r\n        const absR = Math.abs(curveRadius);\r\n        const leftAngle = bounds[0] / absR;\r\n        const rightAngle = bounds[2] / absR;\r\n        const minX = floor((leftAngle + halfPi) / twoPi) !== floor((rightAngle + halfPi) / twoPi)\r\n          ? -absR : min(sin(leftAngle) * absR, sin(rightAngle) * absR);\r\n        const maxX = floor((leftAngle - halfPi) / twoPi) !== floor((rightAngle - halfPi) / twoPi)\r\n          ? absR : max(sin(leftAngle) * absR, sin(rightAngle) * absR);\r\n        const maxZ = floor((leftAngle + PI) / twoPi) !== floor((rightAngle + PI) / twoPi)\r\n          ? absR * 2 : max(absR - cos(leftAngle) * absR, absR - cos(rightAngle) * absR);\r\n        bbox.min.set(minX, bounds[1], curveRadius < 0 ? -maxZ : 0);\r\n        bbox.max.set(maxX, bounds[3], curveRadius < 0 ? 0 : maxZ);\r\n      } else {\r\n        bbox.min.set(bounds[0], bounds[1], 0);\r\n        bbox.max.set(bounds[2], bounds[3], 0);\r\n      }\r\n      bbox.getBoundingSphere(this.boundingSphere);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Given a clipping rect, and the chunkedBounds from the last updateGlyphs call, choose the lowest\r\n   * `instanceCount` that will show all glyphs within the clipped view. This is an optimization\r\n   * for long blocks of text that are clipped, to skip vertex shader evaluation for glyphs that would\r\n   * be clipped anyway.\r\n   *\r\n   * Note that since `drawElementsInstanced[ANGLE]` only accepts an instance count and not a starting\r\n   * offset, this optimization becomes less effective as the clipRect moves closer to the end of the\r\n   * text block. We could fix that by switching from instancing to a full geometry with a drawRange,\r\n   * but at the expense of much larger attribute buffers (see classdoc above.)\r\n   *\r\n   * @param {Vector4} clipRect\r\n   */\r\n  applyClipRect(clipRect) {\r\n    let count = this.getAttribute(glyphIndexAttrName).count;\r\n    let chunks = this._chunkedBounds;\r\n    if (chunks) {\r\n      for (let i = chunks.length; i--;) {\r\n        count = chunks[i].end;\r\n        let rect = chunks[i].rect;\r\n        // note: both rects are l-b-r-t\r\n        if (rect[1] < clipRect.w && rect[3] > clipRect.y && rect[0] < clipRect.z && rect[2] > clipRect.x) {\r\n          break\r\n        }\r\n      }\r\n    }\r\n    this.instanceCount = count;\r\n  }\r\n}\r\n\r\n\r\nfunction updateBufferAttr(geom, attrName, newArray, itemSize) {\r\n  const attr = geom.getAttribute(attrName);\r\n  if (newArray) {\r\n    // If length isn't changing, just update the attribute's array data\r\n    if (attr && attr.array.length === newArray.length) {\r\n      attr.array.set(newArray);\r\n      attr.needsUpdate = true;\r\n    } else {\r\n      geom.setAttribute(attrName, new InstancedBufferAttribute(newArray, itemSize));\r\n      // If the new attribute has a different size, we also have to (as of r117) manually clear the\r\n      // internal cached max instance count. See https://github.com/mrdoob/three.js/issues/19706\r\n      // It's unclear if this is a threejs bug or a truly unsupported scenario; discussion in\r\n      // that ticket is ambiguous as to whether replacing a BufferAttribute with one of a\r\n      // different size is supported, but https://github.com/mrdoob/three.js/pull/17418 strongly\r\n      // implies it should be supported. It's possible we need to\r\n      delete geom._maxInstanceCount; //for r117+, could be fragile\r\n      geom.dispose(); //for r118+, more robust feeling, but more heavy-handed than I'd like\r\n    }\r\n  } else if (attr) {\r\n    geom.deleteAttribute(attrName);\r\n  }\r\n}\r\n\r\n// language=GLSL\r\nconst VERTEX_DEFS = `\r\nuniform vec2 uTroikaSDFTextureSize;\r\nuniform float uTroikaSDFGlyphSize;\r\nuniform vec4 uTroikaTotalBounds;\r\nuniform vec4 uTroikaClipRect;\r\nuniform mat3 uTroikaOrient;\r\nuniform bool uTroikaUseGlyphColors;\r\nuniform float uTroikaDistanceOffset;\r\nuniform float uTroikaBlurRadius;\r\nuniform vec2 uTroikaPositionOffset;\r\nuniform float uTroikaCurveRadius;\r\nattribute vec4 aTroikaGlyphBounds;\r\nattribute float aTroikaGlyphIndex;\r\nattribute vec3 aTroikaGlyphColor;\r\nvarying vec2 vTroikaGlyphUV;\r\nvarying vec4 vTroikaTextureUVBounds;\r\nvarying float vTroikaTextureChannel;\r\nvarying vec3 vTroikaGlyphColor;\r\nvarying vec2 vTroikaGlyphDimensions;\r\n`;\r\n\r\n// language=GLSL prefix=\"void main() {\" suffix=\"}\"\r\nconst VERTEX_TRANSFORM = `\r\nvec4 bounds = aTroikaGlyphBounds;\r\nbounds.xz += uTroikaPositionOffset.x;\r\nbounds.yw -= uTroikaPositionOffset.y;\r\n\r\nvec4 outlineBounds = vec4(\r\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\r\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\r\n);\r\nvec4 clippedBounds = vec4(\r\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\r\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\r\n);\r\n\r\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\r\n\r\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\r\n\r\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\r\n\r\nfloat rad = uTroikaCurveRadius;\r\nif (rad != 0.0) {\r\n  float angle = position.x / rad;\r\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\r\n  normal.xz = vec2(sin(angle), cos(angle));\r\n}\r\n  \r\nposition = uTroikaOrient * position;\r\nnormal = uTroikaOrient * normal;\r\n\r\nvTroikaGlyphUV = clippedXY.xy;\r\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\r\n\r\n${''/* NOTE: it seems important to calculate the glyph's bounding texture UVs here in the\r\n  vertex shader, rather than in the fragment shader, as the latter gives strange artifacts\r\n  on some glyphs (those in the leftmost texture column) on some systems. The exact reason\r\n  isn't understood but doing this here, then mix()-ing in the fragment shader, seems to work. */}\r\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\r\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\r\nvec2 txStartUV = txUvPerSquare * vec2(\r\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\r\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\r\n);\r\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\r\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\r\n`;\r\n\r\n// language=GLSL\r\nconst FRAGMENT_DEFS = `\r\nuniform sampler2D uTroikaSDFTexture;\r\nuniform vec2 uTroikaSDFTextureSize;\r\nuniform float uTroikaSDFGlyphSize;\r\nuniform float uTroikaSDFExponent;\r\nuniform float uTroikaDistanceOffset;\r\nuniform float uTroikaFillOpacity;\r\nuniform float uTroikaOutlineOpacity;\r\nuniform float uTroikaBlurRadius;\r\nuniform vec3 uTroikaStrokeColor;\r\nuniform float uTroikaStrokeWidth;\r\nuniform float uTroikaStrokeOpacity;\r\nuniform bool uTroikaSDFDebug;\r\nvarying vec2 vTroikaGlyphUV;\r\nvarying vec4 vTroikaTextureUVBounds;\r\nvarying float vTroikaTextureChannel;\r\nvarying vec2 vTroikaGlyphDimensions;\r\n\r\nfloat troikaSdfValueToSignedDistance(float alpha) {\r\n  // Inverse of exponential encoding in webgl-sdf-generator\r\n  ${''/* TODO - there's some slight inaccuracy here when dealing with interpolated alpha values; those\r\n    are linearly interpolated where the encoding is exponential. Look into improving this by rounding\r\n    to nearest 2 whole texels, decoding those exponential values, and linearly interpolating the result.\r\n  */}\r\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\r\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\r\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\r\n  return signedDist;\r\n}\r\n\r\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\r\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\r\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\r\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\r\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\r\n}\r\n\r\nfloat troikaGlyphUvToDistance(vec2 uv) {\r\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\r\n}\r\n\r\nfloat troikaGetAADist() {\r\n  ${''/*\r\n    When the standard derivatives extension is available, we choose an antialiasing alpha threshold based\r\n    on the potential change in the SDF's alpha from this fragment to its neighbor. This strategy maximizes \r\n    readability and edge crispness at all sizes and screen resolutions.\r\n  */}\r\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\r\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\r\n  #else\r\n  return vTroikaGlyphDimensions.x / 64.0;\r\n  #endif\r\n}\r\n\r\nfloat troikaGetFragDistValue() {\r\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\r\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\r\n \r\n  // Extrapolate distance when outside bounds:\r\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \r\n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\r\n\r\n  ${''/* \r\n  // TODO more refined extrapolated distance by adjusting for angle of gradient at edge...\r\n  // This has potential but currently gives very jagged extensions, maybe due to precision issues?\r\n  float uvStep = 1.0 / uTroikaSDFGlyphSize;\r\n  vec2 neighbor1UV = clampedGlyphUV + (\r\n    vTroikaGlyphUV.x != clampedGlyphUV.x ? vec2(0.0, uvStep * sign(0.5 - vTroikaGlyphUV.y)) :\r\n    vTroikaGlyphUV.y != clampedGlyphUV.y ? vec2(uvStep * sign(0.5 - vTroikaGlyphUV.x), 0.0) :\r\n    vec2(0.0)\r\n  );\r\n  vec2 neighbor2UV = clampedGlyphUV + (\r\n    vTroikaGlyphUV.x != clampedGlyphUV.x ? vec2(0.0, uvStep * -sign(0.5 - vTroikaGlyphUV.y)) :\r\n    vTroikaGlyphUV.y != clampedGlyphUV.y ? vec2(uvStep * -sign(0.5 - vTroikaGlyphUV.x), 0.0) :\r\n    vec2(0.0)\r\n  );\r\n  float neighbor1Distance = troikaGlyphUvToDistance(neighbor1UV);\r\n  float neighbor2Distance = troikaGlyphUvToDistance(neighbor2UV);\r\n  float distToUnclamped = length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\r\n  float distToNeighbor = length((clampedGlyphUV - neighbor1UV) * vTroikaGlyphDimensions);\r\n  float gradientAngle1 = min(asin(abs(neighbor1Distance - distance) / distToNeighbor), PI / 2.0);\r\n  float gradientAngle2 = min(asin(abs(neighbor2Distance - distance) / distToNeighbor), PI / 2.0);\r\n  distance += (cos(gradientAngle1) + cos(gradientAngle2)) / 2.0 * distToUnclamped;\r\n  */}\r\n\r\n  return distance;\r\n}\r\n\r\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\r\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\r\n  float alpha = step(-distanceOffset, -distance);\r\n  #else\r\n\r\n  float alpha = smoothstep(\r\n    distanceOffset + aaDist,\r\n    distanceOffset - aaDist,\r\n    distance\r\n  );\r\n  #endif\r\n\r\n  return alpha;\r\n}\r\n`;\r\n\r\n// language=GLSL prefix=\"void main() {\" suffix=\"}\"\r\nconst FRAGMENT_TRANSFORM = `\r\nfloat aaDist = troikaGetAADist();\r\nfloat fragDistance = troikaGetFragDistValue();\r\nfloat edgeAlpha = uTroikaSDFDebug ?\r\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\r\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\r\n\r\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\r\nvec4 fillRGBA = gl_FragColor;\r\nfillRGBA.a *= uTroikaFillOpacity;\r\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\r\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\r\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\r\n  -uTroikaStrokeWidth - aaDist,\r\n  -uTroikaStrokeWidth + aaDist,\r\n  fragDistance\r\n));\r\ngl_FragColor.a *= edgeAlpha;\r\n#endif\r\n\r\nif (edgeAlpha == 0.0) {\r\n  discard;\r\n}\r\n`;\r\n\r\n\r\n/**\r\n * Create a material for rendering text, derived from a baseMaterial\r\n */\r\nfunction createTextDerivedMaterial(baseMaterial) {\r\n  const textMaterial = createDerivedMaterial(baseMaterial, {\r\n    chained: true,\r\n    extensions: {\r\n      derivatives: true\r\n    },\r\n    uniforms: {\r\n      uTroikaSDFTexture: {value: null},\r\n      uTroikaSDFTextureSize: {value: new Vector2()},\r\n      uTroikaSDFGlyphSize: {value: 0},\r\n      uTroikaSDFExponent: {value: 0},\r\n      uTroikaTotalBounds: {value: new Vector4(0,0,0,0)},\r\n      uTroikaClipRect: {value: new Vector4(0,0,0,0)},\r\n      uTroikaDistanceOffset: {value: 0},\r\n      uTroikaOutlineOpacity: {value: 0},\r\n      uTroikaFillOpacity: {value: 1},\r\n      uTroikaPositionOffset: {value: new Vector2()},\r\n      uTroikaCurveRadius: {value: 0},\r\n      uTroikaBlurRadius: {value: 0},\r\n      uTroikaStrokeWidth: {value: 0},\r\n      uTroikaStrokeColor: {value: new Color()},\r\n      uTroikaStrokeOpacity: {value: 1},\r\n      uTroikaOrient: {value: new Matrix3()},\r\n      uTroikaUseGlyphColors: {value: true},\r\n      uTroikaSDFDebug: {value: false}\r\n    },\r\n    vertexDefs: VERTEX_DEFS,\r\n    vertexTransform: VERTEX_TRANSFORM,\r\n    fragmentDefs: FRAGMENT_DEFS,\r\n    fragmentColorTransform: FRAGMENT_TRANSFORM,\r\n    customRewriter({vertexShader, fragmentShader}) {\r\n      let uDiffuseRE = /\\buniform\\s+vec3\\s+diffuse\\b/;\r\n      if (uDiffuseRE.test(fragmentShader)) {\r\n        // Replace all instances of `diffuse` with our varying\r\n        fragmentShader = fragmentShader\r\n          .replace(uDiffuseRE, 'varying vec3 vTroikaGlyphColor')\r\n          .replace(/\\bdiffuse\\b/g, 'vTroikaGlyphColor');\r\n        // Make sure the vertex shader declares the uniform so we can grab it as a fallback\r\n        if (!uDiffuseRE.test(vertexShader)) {\r\n          vertexShader = vertexShader.replace(\r\n            voidMainRegExp,\r\n            'uniform vec3 diffuse;\\n$&\\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\\n'\r\n          );\r\n        }\r\n      }\r\n      return { vertexShader, fragmentShader }\r\n    }\r\n  });\r\n\r\n  // Force transparency - TODO is this reasonable?\r\n  textMaterial.transparent = true;\r\n\r\n  Object.defineProperties(textMaterial, {\r\n    isTroikaTextMaterial: {value: true},\r\n\r\n    // WebGLShadowMap reverses the side of the shadow material by default, which fails\r\n    // for planes, so here we force the `shadowSide` to always match the main side.\r\n    shadowSide: {\r\n      get() {\r\n        return this.side\r\n      },\r\n      set() {\r\n        //no-op\r\n      }\r\n    }\r\n  });\r\n\r\n  return textMaterial\r\n}\r\n\r\nconst defaultMaterial = /*#__PURE__*/ new MeshBasicMaterial({\r\n  color: 0xffffff,\r\n  side: DoubleSide,\r\n  transparent: true\r\n});\r\nconst defaultStrokeColor = 0x808080;\r\n\r\nconst tempMat4 = /*#__PURE__*/ new Matrix4();\r\nconst tempVec3a = /*#__PURE__*/ new Vector3();\r\nconst tempVec3b = /*#__PURE__*/ new Vector3();\r\nconst tempArray = [];\r\nconst origin = /*#__PURE__*/ new Vector3();\r\nconst defaultOrient = '+x+y';\r\n\r\nfunction first(o) {\r\n  return Array.isArray(o) ? o[0] : o\r\n}\r\n\r\nlet getFlatRaycastMesh = () => {\r\n  const mesh = new Mesh(\r\n    new PlaneGeometry(1, 1),\r\n    defaultMaterial\r\n  );\r\n  getFlatRaycastMesh = () => mesh;\r\n  return mesh\r\n};\r\nlet getCurvedRaycastMesh = () => {\r\n  const mesh = new Mesh(\r\n    new PlaneGeometry(1, 1, 32, 1),\r\n    defaultMaterial\r\n  );\r\n  getCurvedRaycastMesh = () => mesh;\r\n  return mesh\r\n};\r\n\r\nconst syncStartEvent = { type: 'syncstart' };\r\nconst syncCompleteEvent = { type: 'synccomplete' };\r\n\r\nconst SYNCABLE_PROPS = [\r\n  'font',\r\n  'fontSize',\r\n  'letterSpacing',\r\n  'lineHeight',\r\n  'maxWidth',\r\n  'overflowWrap',\r\n  'text',\r\n  'direction',\r\n  'textAlign',\r\n  'textIndent',\r\n  'whiteSpace',\r\n  'anchorX',\r\n  'anchorY',\r\n  'colorRanges',\r\n  'sdfGlyphSize'\r\n];\r\n\r\nconst COPYABLE_PROPS = SYNCABLE_PROPS.concat(\r\n  'material',\r\n  'color',\r\n  'depthOffset',\r\n  'clipRect',\r\n  'curveRadius',\r\n  'orientation',\r\n  'glyphGeometryDetail'\r\n);\r\n\r\n/**\r\n * @class Text\r\n *\r\n * A ThreeJS Mesh that renders a string of text on a plane in 3D space using signed distance\r\n * fields (SDF).\r\n */\r\nclass Text extends Mesh {\r\n  constructor() {\r\n    const geometry = new GlyphsGeometry();\r\n    super(geometry, null);\r\n\r\n    // === Text layout properties: === //\r\n\r\n    /**\r\n     * @member {string} text\r\n     * The string of text to be rendered.\r\n     */\r\n    this.text = '';\r\n\r\n    /**\r\n     * @member {number|string} anchorX\r\n     * Defines the horizontal position in the text block that should line up with the local origin.\r\n     * Can be specified as a numeric x position in local units, a string percentage of the total\r\n     * text block width e.g. `'25%'`, or one of the following keyword strings: 'left', 'center',\r\n     * or 'right'.\r\n     */\r\n    this.anchorX = 0;\r\n\r\n    /**\r\n     * @member {number|string} anchorX\r\n     * Defines the vertical position in the text block that should line up with the local origin.\r\n     * Can be specified as a numeric y position in local units (note: down is negative y), a string\r\n     * percentage of the total text block height e.g. `'25%'`, or one of the following keyword strings:\r\n     * 'top', 'top-baseline', 'top-cap', 'top-ex', 'middle', 'bottom-baseline', or 'bottom'.\r\n     */\r\n    this.anchorY = 0;\r\n\r\n    /**\r\n     * @member {number} curveRadius\r\n     * Defines a cylindrical radius along which the text's plane will be curved. Positive numbers put\r\n     * the cylinder's centerline (oriented vertically) that distance in front of the text, for a concave\r\n     * curvature, while negative numbers put it behind the text for a convex curvature. The centerline\r\n     * will be aligned with the text's local origin; you can use `anchorX` to offset it.\r\n     *\r\n     * Since each glyph is by default rendered with a simple quad, each glyph remains a flat plane\r\n     * internally. You can use `glyphGeometryDetail` to add more vertices for curvature inside glyphs.\r\n     */\r\n    this.curveRadius = 0;\r\n\r\n    /**\r\n     * @member {string} direction\r\n     * Sets the base direction for the text. The default value of \"auto\" will choose a direction based\r\n     * on the text's content according to the bidi spec. A value of \"ltr\" or \"rtl\" will force the direction.\r\n     */\r\n    this.direction = 'auto';\r\n\r\n    /**\r\n     * @member {string} font\r\n     * URL of a custom font to be used. Font files can be in .ttf, .otf, or .woff (not .woff2) formats.\r\n     * Defaults to the Roboto font loaded from Google Fonts.\r\n     */\r\n    this.font = null; //will use default from TextBuilder\r\n\r\n    /**\r\n     * @member {number} fontSize\r\n     * The size at which to render the font in local units; corresponds to the em-box height\r\n     * of the chosen `font`.\r\n     */\r\n    this.fontSize = 0.1;\r\n\r\n    /**\r\n     * @member {number} letterSpacing\r\n     * Sets a uniform adjustment to spacing between letters after kerning is applied. Positive\r\n     * numbers increase spacing and negative numbers decrease it.\r\n     */\r\n    this.letterSpacing = 0;\r\n\r\n    /**\r\n     * @member {number|string} lineHeight\r\n     * Sets the height of each line of text, as a multiple of the `fontSize`. Defaults to 'normal'\r\n     * which chooses a reasonable height based on the chosen font's ascender/descender metrics.\r\n     */\r\n    this.lineHeight = 'normal';\r\n\r\n    /**\r\n     * @member {number} maxWidth\r\n     * The maximum width of the text block, above which text may start wrapping according to the\r\n     * `whiteSpace` and `overflowWrap` properties.\r\n     */\r\n    this.maxWidth = Infinity;\r\n\r\n    /**\r\n     * @member {string} overflowWrap\r\n     * Defines how text wraps if the `whiteSpace` property is `normal`. Can be either `'normal'`\r\n     * to break at whitespace characters, or `'break-word'` to allow breaking within words.\r\n     * Defaults to `'normal'`.\r\n     */\r\n    this.overflowWrap = 'normal';\r\n\r\n    /**\r\n     * @member {string} textAlign\r\n     * The horizontal alignment of each line of text within the overall text bounding box.\r\n     */\r\n    this.textAlign = 'left';\r\n\r\n    /**\r\n     * @member {number} textIndent\r\n     * Indentation for the first character of a line; see CSS `text-indent`.\r\n     */\r\n    this.textIndent = 0;\r\n\r\n    /**\r\n     * @member {string} whiteSpace\r\n     * Defines whether text should wrap when a line reaches the `maxWidth`. Can\r\n     * be either `'normal'` (the default), to allow wrapping according to the `overflowWrap` property,\r\n     * or `'nowrap'` to prevent wrapping. Note that `'normal'` here honors newline characters to\r\n     * manually break lines, making it behave more like `'pre-wrap'` does in CSS.\r\n     */\r\n    this.whiteSpace = 'normal';\r\n\r\n\r\n    // === Presentation properties: === //\r\n\r\n    /**\r\n     * @member {THREE.Material} material\r\n     * Defines a _base_ material to be used when rendering the text. This material will be\r\n     * automatically replaced with a material derived from it, that adds shader code to\r\n     * decrease the alpha for each fragment (pixel) outside the text glyphs, with antialiasing.\r\n     * By default it will derive from a simple white MeshBasicMaterial, but you can use any\r\n     * of the other mesh materials to gain other features like lighting, texture maps, etc.\r\n     *\r\n     * Also see the `color` shortcut property.\r\n     */\r\n    this.material = null;\r\n\r\n    /**\r\n     * @member {string|number|THREE.Color} color\r\n     * This is a shortcut for setting the `color` of the text's material. You can use this\r\n     * if you don't want to specify a whole custom `material`. Also, if you do use a custom\r\n     * `material`, this color will only be used for this particuar Text instance, even if\r\n     * that same material instance is shared across multiple Text objects.\r\n     */\r\n    this.color = null;\r\n\r\n    /**\r\n     * @member {object|null} colorRanges\r\n     * WARNING: This API is experimental and may change.\r\n     * This allows more fine-grained control of colors for individual or ranges of characters,\r\n     * taking precedence over the material's `color`. Its format is an Object whose keys each\r\n     * define a starting character index for a range, and whose values are the color for each\r\n     * range. The color value can be a numeric hex color value, a `THREE.Color` object, or\r\n     * any of the strings accepted by `THREE.Color`.\r\n     */\r\n    this.colorRanges = null;\r\n\r\n    /**\r\n     * @member {number|string} outlineWidth\r\n     * WARNING: This API is experimental and may change.\r\n     * The width of an outline/halo to be drawn around each text glyph using the `outlineColor` and `outlineOpacity`.\r\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g.\r\n     * `\"12%\"` which is treated as a percentage of the `fontSize`. Defaults to `0`, which means\r\n     * no outline will be drawn unless an `outlineOffsetX/Y` or `outlineBlur` is set.\r\n     */\r\n    this.outlineWidth = 0;\r\n\r\n    /**\r\n     * @member {string|number|THREE.Color} outlineColor\r\n     * WARNING: This API is experimental and may change.\r\n     * The color of the text outline, if `outlineWidth`/`outlineBlur`/`outlineOffsetX/Y` are set.\r\n     * Defaults to black.\r\n     */\r\n    this.outlineColor = 0x000000;\r\n\r\n    /**\r\n     * @member {number} outlineOpacity\r\n     * WARNING: This API is experimental and may change.\r\n     * The opacity of the outline, if `outlineWidth`/`outlineBlur`/`outlineOffsetX/Y` are set.\r\n     * Defaults to `1`.\r\n     */\r\n    this.outlineOpacity = 1;\r\n\r\n    /**\r\n     * @member {number|string} outlineBlur\r\n     * WARNING: This API is experimental and may change.\r\n     * A blur radius applied to the outer edge of the text's outline. If the `outlineWidth` is\r\n     * zero, the blur will be applied at the glyph edge, like CSS's `text-shadow` blur radius.\r\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g.\r\n     * `\"12%\"` which is treated as a percentage of the `fontSize`. Defaults to `0`.\r\n     */\r\n    this.outlineBlur = 0;\r\n\r\n    /**\r\n     * @member {number|string} outlineOffsetX\r\n     * WARNING: This API is experimental and may change.\r\n     * A horizontal offset for the text outline.\r\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\r\n     * which is treated as a percentage of the `fontSize`. Defaults to `0`.\r\n     */\r\n    this.outlineOffsetX = 0;\r\n\r\n    /**\r\n     * @member {number|string} outlineOffsetY\r\n     * WARNING: This API is experimental and may change.\r\n     * A vertical offset for the text outline.\r\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\r\n     * which is treated as a percentage of the `fontSize`. Defaults to `0`.\r\n     */\r\n    this.outlineOffsetY = 0;\r\n\r\n    /**\r\n     * @member {number|string} strokeWidth\r\n     * WARNING: This API is experimental and may change.\r\n     * The width of an inner stroke drawn inside each text glyph using the `strokeColor` and `strokeOpacity`.\r\n     * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\r\n     * which is treated as a percentage of the `fontSize`. Defaults to `0`.\r\n     */\r\n    this.strokeWidth = 0;\r\n\r\n    /**\r\n     * @member {string|number|THREE.Color} strokeColor\r\n     * WARNING: This API is experimental and may change.\r\n     * The color of the text stroke, if `strokeWidth` is greater than zero. Defaults to gray.\r\n     */\r\n    this.strokeColor = defaultStrokeColor;\r\n\r\n    /**\r\n     * @member {number} strokeOpacity\r\n     * WARNING: This API is experimental and may change.\r\n     * The opacity of the stroke, if `strokeWidth` is greater than zero. Defaults to `1`.\r\n     */\r\n    this.strokeOpacity = 1;\r\n\r\n    /**\r\n     * @member {number} fillOpacity\r\n     * WARNING: This API is experimental and may change.\r\n     * The opacity of the glyph's fill from 0 to 1. This behaves like the material's `opacity` but allows\r\n     * giving the fill a different opacity than the `strokeOpacity`. A fillOpacity of `0` makes the\r\n     * interior of the glyph invisible, leaving just the `strokeWidth`. Defaults to `1`.\r\n     */\r\n    this.fillOpacity = 1;\r\n\r\n    /**\r\n     * @member {number} depthOffset\r\n     * This is a shortcut for setting the material's `polygonOffset` and related properties,\r\n     * which can be useful in preventing z-fighting when this text is laid on top of another\r\n     * plane in the scene. Positive numbers are further from the camera, negatives closer.\r\n     */\r\n    this.depthOffset = 0;\r\n\r\n    /**\r\n     * @member {Array<number>} clipRect\r\n     * If specified, defines a `[minX, minY, maxX, maxY]` of a rectangle outside of which all\r\n     * pixels will be discarded. This can be used for example to clip overflowing text when\r\n     * `whiteSpace='nowrap'`.\r\n     */\r\n    this.clipRect = null;\r\n\r\n    /**\r\n     * @member {string} orientation\r\n     * Defines the axis plane on which the text should be laid out when the mesh has no extra\r\n     * rotation transform. It is specified as a string with two axes: the horizontal axis with\r\n     * positive pointing right, and the vertical axis with positive pointing up. By default this\r\n     * is '+x+y', meaning the text sits on the xy plane with the text's top toward positive y\r\n     * and facing positive z. A value of '+x-z' would place it on the xz plane with the text's\r\n     * top toward negative z and facing positive y.\r\n     */\r\n    this.orientation = defaultOrient;\r\n\r\n    /**\r\n     * @member {number} glyphGeometryDetail\r\n     * Controls number of vertical/horizontal segments that make up each glyph's rectangular\r\n     * plane. Defaults to 1. This can be increased to provide more geometrical detail for custom\r\n     * vertex shader effects, for example.\r\n     */\r\n    this.glyphGeometryDetail = 1;\r\n\r\n    /**\r\n     * @member {number|null} sdfGlyphSize\r\n     * The size of each glyph's SDF (signed distance field) used for rendering. This must be a\r\n     * power-of-two number. Defaults to 64 which is generally a good balance of size and quality\r\n     * for most fonts. Larger sizes can improve the quality of glyph rendering by increasing\r\n     * the sharpness of corners and preventing loss of very thin lines, at the expense of\r\n     * increased memory footprint and longer SDF generation time.\r\n     */\r\n    this.sdfGlyphSize = null;\r\n\r\n    /**\r\n     * @member {boolean} gpuAccelerateSDF\r\n     * When `true`, the SDF generation process will be GPU-accelerated with WebGL when possible,\r\n     * making it much faster especially for complex glyphs, and falling back to a JavaScript version\r\n     * executed in web workers when support isn't available. It should automatically detect support,\r\n     * but it's still somewhat experimental, so you can set it to `false` to force it to use the JS\r\n     * version if you encounter issues with it.\r\n     */\r\n    this.gpuAccelerateSDF = true;\r\n\r\n    this.debugSDF = false;\r\n  }\r\n\r\n  /**\r\n   * Updates the text rendering according to the current text-related configuration properties.\r\n   * This is an async process, so you can pass in a callback function to be executed when it\r\n   * finishes.\r\n   * @param {function} [callback]\r\n   */\r\n  sync(callback) {\r\n    if (this._needsSync) {\r\n      this._needsSync = false;\r\n\r\n      // If there's another sync still in progress, queue\r\n      if (this._isSyncing) {\r\n        (this._queuedSyncs || (this._queuedSyncs = [])).push(callback);\r\n      } else {\r\n        this._isSyncing = true;\r\n        this.dispatchEvent(syncStartEvent);\r\n\r\n        getTextRenderInfo({\r\n          text: this.text,\r\n          font: this.font,\r\n          fontSize: this.fontSize || 0.1,\r\n          letterSpacing: this.letterSpacing || 0,\r\n          lineHeight: this.lineHeight || 'normal',\r\n          maxWidth: this.maxWidth,\r\n          direction: this.direction || 'auto',\r\n          textAlign: this.textAlign,\r\n          textIndent: this.textIndent,\r\n          whiteSpace: this.whiteSpace,\r\n          overflowWrap: this.overflowWrap,\r\n          anchorX: this.anchorX,\r\n          anchorY: this.anchorY,\r\n          colorRanges: this.colorRanges,\r\n          includeCaretPositions: true, //TODO parameterize\r\n          sdfGlyphSize: this.sdfGlyphSize,\r\n          gpuAccelerateSDF: this.gpuAccelerateSDF,\r\n        }, textRenderInfo => {\r\n          this._isSyncing = false;\r\n\r\n          // Save result for later use in onBeforeRender\r\n          this._textRenderInfo = textRenderInfo;\r\n\r\n          // Update the geometry attributes\r\n          this.geometry.updateGlyphs(\r\n            textRenderInfo.glyphBounds,\r\n            textRenderInfo.glyphAtlasIndices,\r\n            textRenderInfo.blockBounds,\r\n            textRenderInfo.chunkedBounds,\r\n            textRenderInfo.glyphColors\r\n          );\r\n\r\n          // If we had extra sync requests queued up, kick it off\r\n          const queued = this._queuedSyncs;\r\n          if (queued) {\r\n            this._queuedSyncs = null;\r\n            this._needsSync = true;\r\n            this.sync(() => {\r\n              queued.forEach(fn => fn && fn());\r\n            });\r\n          }\r\n\r\n          this.dispatchEvent(syncCompleteEvent);\r\n          if (callback) {\r\n            callback();\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initiate a sync if needed - note it won't complete until next frame at the\r\n   * earliest so if possible it's a good idea to call sync() manually as soon as\r\n   * all the properties have been set.\r\n   * @override\r\n   */\r\n  onBeforeRender(renderer, scene, camera, geometry, material, group) {\r\n    this.sync();\r\n\r\n    // This may not always be a text material, e.g. if there's a scene.overrideMaterial present\r\n    if (material.isTroikaTextMaterial) {\r\n      this._prepareForRender(material);\r\n    }\r\n\r\n    // We need to force the material to FrontSide to avoid the double-draw-call performance hit\r\n    // introduced in Three.js r130: https://github.com/mrdoob/three.js/pull/21967 - The sidedness\r\n    // is instead applied via drawRange in the GlyphsGeometry.\r\n    material._hadOwnSide = material.hasOwnProperty('side');\r\n    this.geometry.setSide(material._actualSide = material.side);\r\n    material.side = FrontSide;\r\n  }\r\n\r\n  onAfterRender(renderer, scene, camera, geometry, material, group) {\r\n    // Restore original material side\r\n    if (material._hadOwnSide) {\r\n      material.side = material._actualSide;\r\n    } else {\r\n      delete material.side; // back to inheriting from base material\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shortcut to dispose the geometry specific to this instance.\r\n   * Note: we don't also dispose the derived material here because if anything else is\r\n   * sharing the same base material it will result in a pause next frame as the program\r\n   * is recompiled. Instead users can dispose the base material manually, like normal,\r\n   * and we'll also dispose the derived material at that time.\r\n   */\r\n  dispose() {\r\n    this.geometry.dispose();\r\n  }\r\n\r\n  /**\r\n   * @property {TroikaTextRenderInfo|null} textRenderInfo\r\n   * @readonly\r\n   * The current processed rendering data for this TextMesh, returned by the TextBuilder after\r\n   * a `sync()` call. This will be `null` initially, and may be stale for a short period until\r\n   * the asynchrous `sync()` process completes.\r\n   */\r\n  get textRenderInfo() {\r\n    return this._textRenderInfo || null\r\n  }\r\n\r\n  // Handler for automatically wrapping the base material with our upgrades. We do the wrapping\r\n  // lazily on _read_ rather than write to avoid unnecessary wrapping on transient values.\r\n  get material() {\r\n    let derivedMaterial = this._derivedMaterial;\r\n    const baseMaterial = this._baseMaterial || this._defaultMaterial || (this._defaultMaterial = defaultMaterial.clone());\r\n    if (!derivedMaterial || derivedMaterial.baseMaterial !== baseMaterial) {\r\n      derivedMaterial = this._derivedMaterial = createTextDerivedMaterial(baseMaterial);\r\n      // dispose the derived material when its base material is disposed:\r\n      baseMaterial.addEventListener('dispose', function onDispose() {\r\n        baseMaterial.removeEventListener('dispose', onDispose);\r\n        derivedMaterial.dispose();\r\n      });\r\n    }\r\n    // If text outline is configured, render it as a preliminary draw using Three's multi-material\r\n    // feature (see GlyphsGeometry which sets up `groups` for this purpose) Doing it with multi\r\n    // materials ensures the layers are always rendered consecutively in a consistent order.\r\n    // Each layer will trigger onBeforeRender with the appropriate material.\r\n    if (this.outlineWidth || this.outlineBlur || this.outlineOffsetX || this.outlineOffsetY) {\r\n      let outlineMaterial = derivedMaterial._outlineMtl;\r\n      if (!outlineMaterial) {\r\n        outlineMaterial = derivedMaterial._outlineMtl = Object.create(derivedMaterial, {\r\n          id: {value: derivedMaterial.id + 0.1}\r\n        });\r\n        outlineMaterial.isTextOutlineMaterial = true;\r\n        outlineMaterial.depthWrite = false;\r\n        outlineMaterial.map = null; //???\r\n        derivedMaterial.addEventListener('dispose', function onDispose() {\r\n          derivedMaterial.removeEventListener('dispose', onDispose);\r\n          outlineMaterial.dispose();\r\n        });\r\n      }\r\n      return [\r\n        outlineMaterial,\r\n        derivedMaterial\r\n      ]\r\n    } else {\r\n      return derivedMaterial\r\n    }\r\n  }\r\n  set material(baseMaterial) {\r\n    if (baseMaterial && baseMaterial.isTroikaTextMaterial) { //prevent double-derivation\r\n      this._derivedMaterial = baseMaterial;\r\n      this._baseMaterial = baseMaterial.baseMaterial;\r\n    } else {\r\n      this._baseMaterial = baseMaterial;\r\n    }\r\n  }\r\n\r\n  get glyphGeometryDetail() {\r\n    return this.geometry.detail\r\n  }\r\n  set glyphGeometryDetail(detail) {\r\n    this.geometry.detail = detail;\r\n  }\r\n\r\n  get curveRadius() {\r\n    return this.geometry.curveRadius\r\n  }\r\n  set curveRadius(r) {\r\n    this.geometry.curveRadius = r;\r\n  }\r\n\r\n  // Create and update material for shadows upon request:\r\n  get customDepthMaterial() {\r\n    return first(this.material).getDepthMaterial()\r\n  }\r\n  get customDistanceMaterial() {\r\n    return first(this.material).getDistanceMaterial()\r\n  }\r\n\r\n  _prepareForRender(material) {\r\n    const isOutline = material.isTextOutlineMaterial;\r\n    const uniforms = material.uniforms;\r\n    const textInfo = this.textRenderInfo;\r\n    if (textInfo) {\r\n      const {sdfTexture, blockBounds} = textInfo;\r\n      uniforms.uTroikaSDFTexture.value = sdfTexture;\r\n      uniforms.uTroikaSDFTextureSize.value.set(sdfTexture.image.width, sdfTexture.image.height);\r\n      uniforms.uTroikaSDFGlyphSize.value = textInfo.sdfGlyphSize;\r\n      uniforms.uTroikaSDFExponent.value = textInfo.sdfExponent;\r\n      uniforms.uTroikaTotalBounds.value.fromArray(blockBounds);\r\n      uniforms.uTroikaUseGlyphColors.value = !isOutline && !!textInfo.glyphColors;\r\n\r\n      let distanceOffset = 0;\r\n      let blurRadius = 0;\r\n      let strokeWidth = 0;\r\n      let fillOpacity;\r\n      let strokeOpacity;\r\n      let strokeColor;\r\n      let offsetX = 0;\r\n      let offsetY = 0;\r\n\r\n      if (isOutline) {\r\n        let {outlineWidth, outlineOffsetX, outlineOffsetY, outlineBlur, outlineOpacity} = this;\r\n        distanceOffset = this._parsePercent(outlineWidth) || 0;\r\n        blurRadius = Math.max(0, this._parsePercent(outlineBlur) || 0);\r\n        fillOpacity = outlineOpacity;\r\n        offsetX = this._parsePercent(outlineOffsetX) || 0;\r\n        offsetY = this._parsePercent(outlineOffsetY) || 0;\r\n      } else {\r\n        strokeWidth = Math.max(0, this._parsePercent(this.strokeWidth) || 0);\r\n        if (strokeWidth) {\r\n          strokeColor = this.strokeColor;\r\n          uniforms.uTroikaStrokeColor.value.set(strokeColor == null ? defaultStrokeColor : strokeColor);\r\n          strokeOpacity = this.strokeOpacity;\r\n          if (strokeOpacity == null) strokeOpacity = 1;\r\n        }\r\n        fillOpacity = this.fillOpacity;\r\n      }\r\n\r\n      uniforms.uTroikaDistanceOffset.value = distanceOffset;\r\n      uniforms.uTroikaPositionOffset.value.set(offsetX, offsetY);\r\n      uniforms.uTroikaBlurRadius.value = blurRadius;\r\n      uniforms.uTroikaStrokeWidth.value = strokeWidth;\r\n      uniforms.uTroikaStrokeOpacity.value = strokeOpacity;\r\n      uniforms.uTroikaFillOpacity.value = fillOpacity == null ? 1 : fillOpacity;\r\n      uniforms.uTroikaCurveRadius.value = this.curveRadius || 0;\r\n\r\n      let clipRect = this.clipRect;\r\n      if (clipRect && Array.isArray(clipRect) && clipRect.length === 4) {\r\n        uniforms.uTroikaClipRect.value.fromArray(clipRect);\r\n      } else {\r\n        // no clipping - choose a finite rect that shouldn't ever be reached by overflowing glyphs or outlines\r\n        const pad = (this.fontSize || 0.1) * 100;\r\n        uniforms.uTroikaClipRect.value.set(\r\n          blockBounds[0] - pad,\r\n          blockBounds[1] - pad,\r\n          blockBounds[2] + pad,\r\n          blockBounds[3] + pad\r\n        );\r\n      }\r\n      this.geometry.applyClipRect(uniforms.uTroikaClipRect.value);\r\n    }\r\n    uniforms.uTroikaSDFDebug.value = !!this.debugSDF;\r\n    material.polygonOffset = !!this.depthOffset;\r\n    material.polygonOffsetFactor = material.polygonOffsetUnits = this.depthOffset || 0;\r\n\r\n    // Shortcut for setting material color via `color` prop on the mesh; this is\r\n    // applied only to the derived material to avoid mutating a shared base material.\r\n    const color = isOutline ? (this.outlineColor || 0) : this.color;\r\n\r\n    if (color == null) {\r\n      delete material.color; //inherit from base\r\n    } else {\r\n      const colorObj = material.hasOwnProperty('color') ? material.color : (material.color = new Color());\r\n      if (color !== colorObj._input || typeof color === 'object') {\r\n        colorObj.set(colorObj._input = color);\r\n      }\r\n    }\r\n\r\n    // base orientation\r\n    let orient = this.orientation || defaultOrient;\r\n    if (orient !== material._orientation) {\r\n      let rotMat = uniforms.uTroikaOrient.value;\r\n      orient = orient.replace(/[^-+xyz]/g, '');\r\n      let match = orient !== defaultOrient && orient.match(/^([-+])([xyz])([-+])([xyz])$/);\r\n      if (match) {\r\n        let [, hSign, hAxis, vSign, vAxis] = match;\r\n        tempVec3a.set(0, 0, 0)[hAxis] = hSign === '-' ? 1 : -1;\r\n        tempVec3b.set(0, 0, 0)[vAxis] = vSign === '-' ? -1 : 1;\r\n        tempMat4.lookAt(origin, tempVec3a.cross(tempVec3b), tempVec3b);\r\n        rotMat.setFromMatrix4(tempMat4);\r\n      } else {\r\n        rotMat.identity();\r\n      }\r\n      material._orientation = orient;\r\n    }\r\n  }\r\n\r\n  _parsePercent(value) {\r\n    if (typeof value === 'string') {\r\n      let match = value.match(/^(-?[\\d.]+)%$/);\r\n      let pct = match ? parseFloat(match[1]) : NaN;\r\n      value = (isNaN(pct) ? 0 : pct / 100) * this.fontSize;\r\n    }\r\n    return value\r\n  }\r\n\r\n  /**\r\n   * Translate a point in local space to an x/y in the text plane.\r\n   */\r\n  localPositionToTextCoords(position, target = new Vector2()) {\r\n    target.copy(position); //simple non-curved case is 1:1\r\n    const r = this.curveRadius;\r\n    if (r) { //flatten the curve\r\n      target.x = Math.atan2(position.x, Math.abs(r) - Math.abs(position.z)) * Math.abs(r);\r\n    }\r\n    return target\r\n  }\r\n\r\n  /**\r\n   * Translate a point in world space to an x/y in the text plane.\r\n   */\r\n  worldPositionToTextCoords(position, target = new Vector2()) {\r\n    tempVec3a.copy(position);\r\n    return this.localPositionToTextCoords(this.worldToLocal(tempVec3a), target)\r\n  }\r\n\r\n  /**\r\n   * @override Custom raycasting to test against the whole text block's max rectangular bounds\r\n   * TODO is there any reason to make this more granular, like within individual line or glyph rects?\r\n   */\r\n  raycast(raycaster, intersects) {\r\n    const {textRenderInfo, curveRadius} = this;\r\n    if (textRenderInfo) {\r\n      const bounds = textRenderInfo.blockBounds;\r\n      const raycastMesh = curveRadius ? getCurvedRaycastMesh() : getFlatRaycastMesh();\r\n      const geom = raycastMesh.geometry;\r\n      const {position, uv} = geom.attributes;\r\n      for (let i = 0; i < uv.count; i++) {\r\n        let x = bounds[0] + (uv.getX(i) * (bounds[2] - bounds[0]));\r\n        const y = bounds[1] + (uv.getY(i) * (bounds[3] - bounds[1]));\r\n        let z = 0;\r\n        if (curveRadius) {\r\n          z = curveRadius - Math.cos(x / curveRadius) * curveRadius;\r\n          x = Math.sin(x / curveRadius) * curveRadius;\r\n        }\r\n        position.setXYZ(i, x, y, z);\r\n      }\r\n      geom.boundingSphere = this.geometry.boundingSphere;\r\n      geom.boundingBox = this.geometry.boundingBox;\r\n      raycastMesh.matrixWorld = this.matrixWorld;\r\n      raycastMesh.material.side = this.material.side;\r\n      tempArray.length = 0;\r\n      raycastMesh.raycast(raycaster, tempArray);\r\n      for (let i = 0; i < tempArray.length; i++) {\r\n        tempArray[i].object = this;\r\n        intersects.push(tempArray[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  copy(source) {\r\n    // Prevent copying the geometry reference so we don't end up sharing attributes between instances\r\n    const geom = this.geometry;\r\n    super.copy(source);\r\n    this.geometry = geom;\r\n\r\n    COPYABLE_PROPS.forEach(prop => {\r\n      this[prop] = source[prop];\r\n    });\r\n    return this\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor().copy(this)\r\n  }\r\n}\r\n\r\n\r\n// Create setters for properties that affect text layout:\r\nSYNCABLE_PROPS.forEach(prop => {\r\n  const privateKey = '_private_' + prop;\r\n  Object.defineProperty(Text.prototype, prop, {\r\n    get() {\r\n      return this[privateKey]\r\n    },\r\n    set(value) {\r\n      if (value !== this[privateKey]) {\r\n        this[privateKey] = value;\r\n        this._needsSync = true;\r\n      }\r\n    }\r\n  });\r\n});\r\n\r\n//=== Utility functions for dealing with carets and selection ranges ===//\r\n\r\n/**\r\n * @typedef {object} TextCaret\r\n * @property {number} x - x position of the caret\r\n * @property {number} y - y position of the caret's bottom\r\n * @property {number} height - height of the caret\r\n * @property {number} charIndex - the index in the original input string of this caret's target\r\n *   character; the caret will be for the position _before_ that character.\r\n */\r\n\r\n/**\r\n * Given a local x/y coordinate in the text block plane, find the nearest caret position.\r\n * @param {TroikaTextRenderInfo} textRenderInfo - a result object from TextBuilder#getTextRenderInfo\r\n * @param {number} x\r\n * @param {number} y\r\n * @return {TextCaret | null}\r\n */\r\nfunction getCaretAtPoint(textRenderInfo, x, y) {\r\n  let closestCaret = null;\r\n  const {caretHeight} = textRenderInfo;\r\n  const caretsByRow = groupCaretsByRow(textRenderInfo);\r\n\r\n  // Find nearest row by y first\r\n  let closestRowY = Infinity;\r\n  caretsByRow.forEach((carets, rowY) => {\r\n    if (Math.abs(y - (rowY + caretHeight / 2)) < Math.abs(y - (closestRowY + caretHeight / 2))) {\r\n      closestRowY = rowY;\r\n    }\r\n  });\r\n\r\n  // Then find closest caret by x within that row\r\n  caretsByRow.get(closestRowY).forEach(caret => {\r\n    if (!closestCaret || Math.abs(x - caret.x) < Math.abs(x - closestCaret.x)) {\r\n      closestCaret = caret;\r\n    }\r\n  });\r\n  return closestCaret\r\n}\r\n\r\n\r\nconst _rectsCache = new WeakMap();\r\n\r\n/**\r\n * Given start and end character indexes, return a list of rectangles covering all the\r\n * characters within that selection.\r\n * @param {TroikaTextRenderInfo} textRenderInfo\r\n * @param {number} start - index of the first char in the selection\r\n * @param {number} end - index of the first char after the selection\r\n * @return {Array<{left, top, right, bottom}> | null}\r\n */\r\nfunction getSelectionRects(textRenderInfo, start, end) {\r\n  let rects;\r\n  if (textRenderInfo) {\r\n    // Check cache - textRenderInfo is frozen so it's safe to cache based on it\r\n    let prevResult = _rectsCache.get(textRenderInfo);\r\n    if (prevResult && prevResult.start === start && prevResult.end === end) {\r\n      return prevResult.rects\r\n    }\r\n\r\n    const {caretPositions, caretHeight} = textRenderInfo;\r\n\r\n    // Normalize\r\n    if (end < start) {\r\n      const s = start;\r\n      start = end;\r\n      end = s;\r\n    }\r\n    start = Math.max(start, 0);\r\n    end = Math.min(end, caretPositions.length + 1);\r\n\r\n    // Build list of rects, expanding the current rect for all characters in a run and starting\r\n    // a new rect whenever reaching a new line or a new bidi direction\r\n    rects = [];\r\n    let currentRect = null;\r\n    for (let i = start; i < end; i++) {\r\n      const x1 = caretPositions[i * 3];\r\n      const x2 = caretPositions[i * 3 + 1];\r\n      const left = Math.min(x1, x2);\r\n      const right = Math.max(x1, x2);\r\n      const bottom = caretPositions[i * 3 + 2];\r\n      if (!currentRect || bottom !== currentRect.bottom || left > currentRect.right || right < currentRect.left) {\r\n        currentRect = {\r\n          left: Infinity,\r\n          right: -Infinity,\r\n          bottom: bottom,\r\n          top: bottom + caretHeight\r\n        };\r\n        rects.push(currentRect);\r\n      }\r\n      currentRect.left = Math.min(left, currentRect.left);\r\n      currentRect.right = Math.max(right, currentRect.right);\r\n    }\r\n\r\n    // Merge any overlapping rects, e.g. those formed by adjacent bidi runs\r\n    rects.sort((a, b) => b.bottom - a.bottom || a.left - b.left);\r\n    for (let i = rects.length - 1; i-- > 0;) {\r\n      const rectA = rects[i];\r\n      const rectB = rects[i + 1];\r\n      if (rectA.bottom === rectB.bottom && rectA.left <= rectB.right && rectA.right >= rectB.left) {\r\n        rectB.left = Math.min(rectB.left, rectA.left);\r\n        rectB.right = Math.max(rectB.right, rectA.right);\r\n        rects.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    _rectsCache.set(textRenderInfo, {start, end, rects});\r\n  }\r\n  return rects\r\n}\r\n\r\nconst _caretsByRowCache = new WeakMap();\r\n\r\nfunction groupCaretsByRow(textRenderInfo) {\r\n  // textRenderInfo is frozen so it's safe to cache based on it\r\n  let caretsByRow = _caretsByRowCache.get(textRenderInfo);\r\n  if (!caretsByRow) {\r\n    const {caretPositions, caretHeight} = textRenderInfo;\r\n    caretsByRow = new Map();\r\n    for (let i = 0; i < caretPositions.length; i += 3) {\r\n      const rowY = caretPositions[i + 2];\r\n      let rowCarets = caretsByRow.get(rowY);\r\n      if (!rowCarets) {\r\n        caretsByRow.set(rowY, rowCarets = []);\r\n      }\r\n      rowCarets.push({\r\n        x: caretPositions[i],\r\n        y: rowY,\r\n        height: caretHeight,\r\n        charIndex: i / 3\r\n      });\r\n      // Add one more caret after the final char\r\n      if (i + 3 >= caretPositions.length) {\r\n        rowCarets.push({\r\n          x: caretPositions[i + 1],\r\n          y: rowY,\r\n          height: caretHeight,\r\n          charIndex: i / 3 + 1\r\n        });\r\n      }\r\n    }\r\n  }\r\n  _caretsByRowCache.set(textRenderInfo, caretsByRow);\r\n  return caretsByRow\r\n}\r\n\r\nexport { GlyphsGeometry, Text, configureTextBuilder, createTextDerivedMaterial, dumpSDFTextures, getCaretAtPoint, getSelectionRects, preloadFont, typesetterWorkerModule };\r\n", "\r\nimport { Text } from 'troika-three-text';\r\nimport { BufferAttribute, BufferGeometry, DynamicDrawUsage, Line, LineBasicMaterial, OrthographicCamera, Scene, WebGLRenderer } from 'three';\r\n\r\nimport { ThreePerf } from 'three-perf/ThreePerf';\r\n\r\n//\r\n\r\nexport class ThreePerfUI {\r\n\r\n    public canvas: HTMLCanvasElement;\r\n    public wrapper: HTMLElement;\r\n\r\n    private _perf: ThreePerf;\r\n\r\n    private _basicInfoElements: { [key:string]: Text };\r\n    private _memInfoElements: { [key:string]: Text };\r\n    private _charts: Map<string, Line> = new Map();\r\n\r\n    //\r\n\r\n    private _renderer: WebGLRenderer;\r\n    private _scene: Scene;\r\n    private _camera: OrthographicCamera;\r\n\r\n    private _width: number = 400;\r\n    private _height: number = 110;\r\n    public _backgroundOpacity: number = 0.7;\r\n\r\n    //\r\n\r\n    constructor ( props: { perf: ThreePerf, domElement: HTMLElement, backgroundOpacity?: number } ) {\r\n\r\n        this._perf = props.perf;\r\n        this._backgroundOpacity = props.backgroundOpacity ?? this._backgroundOpacity;\r\n\r\n        this.wrapper = document.createElement( 'div' );\r\n        this.wrapper.id = 'three-perf-ui';\r\n        this.wrapper.style.position = 'fixed';\r\n        this.wrapper.style.bottom = '0';\r\n        this.wrapper.style.left = '0';\r\n        this.wrapper.style.width = this._width + 'px';\r\n        this.wrapper.style.height = this._height + 'px';\r\n        props.domElement.appendChild( this.wrapper );\r\n\r\n        this.canvas = document.createElement( 'canvas' );\r\n        this.canvas.width = this._width;\r\n        this.canvas.height = this._height;\r\n        this.canvas.style.position = 'absolute';\r\n        this.wrapper.appendChild( this.canvas );\r\n\r\n        //\r\n\r\n        this.initCanvas();\r\n\r\n    };\r\n\r\n    public setScale ( value: number ) : void {\r\n\r\n        this.wrapper.style.width = value * this.width + 'px';\r\n        this.wrapper.style.height = value * this.height + 'px';\r\n        this._renderer.setSize( this._width * value, this._height * value, true );\r\n\r\n    };\r\n\r\n    public initCanvas () : void {\r\n\r\n        this._renderer = new WebGLRenderer({ canvas: this.canvas, antialias: true, alpha: true });\r\n        this._renderer.setClearColor( 0x000000, this._backgroundOpacity );\r\n        this._renderer.setPixelRatio( window.devicePixelRatio );\r\n        this._scene = new Scene();\r\n        this._camera = new OrthographicCamera( 0, this._width, 0, - this._height, 0.1, 100 );\r\n        this._camera.position.set( 0, 0, 10 )\r\n        this._camera.lookAt( 0, 0, 0 );\r\n        this._camera.updateProjectionMatrix();\r\n        this._scene.add( this._camera );\r\n        this._scene.userData.useStats = false;\r\n\r\n        // init labels\r\n\r\n        const gpuValue = new Text();\r\n        gpuValue.anchorX = 'right';\r\n        gpuValue.position.set( 45, - 8, 0 );\r\n        gpuValue.text = '0.000';\r\n        gpuValue.fontSize = 15;\r\n        gpuValue.color = 'rgb(253, 151, 31)';\r\n        gpuValue.sync();\r\n        this._scene.add( gpuValue );\r\n\r\n        const gpuMs = new Text();\r\n        gpuMs.anchorX = 'right';\r\n        gpuMs.position.set( 65, - 7, 0 );\r\n        gpuMs.text = 'ms';\r\n        gpuMs.fontSize = 9;\r\n        gpuMs.color = 'rgb(255, 255, 255)';\r\n        gpuMs.sync();\r\n        this._scene.add( gpuMs );\r\n\r\n        const gpuLabel = new Text();\r\n        gpuLabel.anchorX = 'right';\r\n        gpuLabel.position.set( 65, - 22, 0 );\r\n        gpuLabel.text = 'GPU';\r\n        gpuLabel.fontSize = 9;\r\n        gpuLabel.color = 'rgb(253, 151, 31)';\r\n        gpuLabel.sync();\r\n        this._scene.add( gpuLabel );\r\n\r\n        //\r\n\r\n        const cpuValue = new Text();\r\n        cpuValue.anchorX = 'right';\r\n        cpuValue.position.set( 115, - 8, 0 );\r\n        cpuValue.text = '0.000';\r\n        cpuValue.fontSize = 15;\r\n        cpuValue.color = 'rgb(66, 226, 46)';\r\n        cpuValue.sync();\r\n        this._scene.add( cpuValue );\r\n\r\n        const cpuMs = new Text();\r\n        cpuMs.anchorX = 'right';\r\n        cpuMs.position.set( 135, - 7, 0 );\r\n        cpuMs.text = 'ms';\r\n        cpuMs.fontSize = 9;\r\n        cpuMs.color = 'rgb(255, 255, 255)';\r\n        cpuMs.sync();\r\n        this._scene.add( cpuMs );\r\n\r\n        const cpuLabel = new Text();\r\n        cpuLabel.anchorX = 'right';\r\n        cpuLabel.position.set( 135, - 22, 0 );\r\n        cpuLabel.text = 'CPU';\r\n        cpuLabel.fontSize = 9;\r\n        cpuLabel.color = 'rgb(66, 226, 46)';\r\n        cpuLabel.sync();\r\n        this._scene.add( cpuLabel );\r\n\r\n        //\r\n\r\n        const fpsValue = new Text();\r\n        fpsValue.anchorX = 'center';\r\n        fpsValue.position.set( 165, - 8, 0 );\r\n        fpsValue.text = '0';\r\n        fpsValue.fontSize = 15;\r\n        fpsValue.color = 'rgb(238, 38, 110)';\r\n        fpsValue.sync();\r\n        this._scene.add( fpsValue );\r\n\r\n        const fpsLabel = new Text();\r\n        fpsLabel.anchorX = 'center';\r\n        fpsLabel.position.set( 175, - 22, 0 );\r\n        fpsLabel.text = 'FPS';\r\n        fpsLabel.fontSize = 9;\r\n        fpsLabel.color = 'rgb(238, 38, 110)';\r\n        fpsLabel.sync();\r\n        this._scene.add( fpsLabel );\r\n\r\n        //\r\n\r\n        const callsValue = new Text();\r\n        callsValue.anchorX = 'right';\r\n        callsValue.position.set( 235, - 8, 0 );\r\n        callsValue.text = '0';\r\n        callsValue.fontSize = 15;\r\n        callsValue.color = '#ffffff';\r\n        callsValue.sync();\r\n        this._scene.add( callsValue );\r\n\r\n        const callsLabel = new Text();\r\n        callsLabel.anchorX = 'right';\r\n        callsLabel.position.set( 235, - 22, 0 );\r\n        callsLabel.text = 'calls';\r\n        callsLabel.fontSize = 9;\r\n        callsLabel.color = 'rgb(101, 197, 188)';\r\n        callsLabel.sync();\r\n        this._scene.add( callsLabel );\r\n\r\n        //\r\n\r\n        const trianglesValue = new Text();\r\n        trianglesValue.anchorX = 'right';\r\n        trianglesValue.position.set( 315, - 8, 0 );\r\n        trianglesValue.text = '0';\r\n        trianglesValue.fontSize = 15;\r\n        trianglesValue.color = '#ffffff';\r\n        trianglesValue.sync();\r\n        this._scene.add( trianglesValue );\r\n\r\n        const trianglesLabel = new Text();\r\n        trianglesLabel.anchorX = 'right';\r\n        trianglesLabel.position.set( 315, - 22, 0 );\r\n        trianglesLabel.text = 'triangles';\r\n        trianglesLabel.fontSize = 9;\r\n        trianglesLabel.color = 'rgb(101, 197, 188)';\r\n        trianglesLabel.sync();\r\n        this._scene.add( trianglesLabel );\r\n\r\n        //\r\n\r\n        const renderpassesValue = new Text();\r\n        renderpassesValue.anchorX = 'right';\r\n        renderpassesValue.position.set( 365, - 8, 0 );\r\n        renderpassesValue.text = '0';\r\n        renderpassesValue.fontSize = 15;\r\n        renderpassesValue.color = '#ffffff';\r\n        renderpassesValue.sync();\r\n        this._scene.add( renderpassesValue );\r\n\r\n        const renderpassesLabel = new Text();\r\n        renderpassesLabel.anchorX = 'right';\r\n        renderpassesLabel.position.set( 365, - 22, 0 );\r\n        renderpassesLabel.text = 'passes';\r\n        renderpassesLabel.fontSize = 9;\r\n        renderpassesLabel.color = 'rgb(101, 197, 188)';\r\n        renderpassesLabel.sync();\r\n        this._scene.add( renderpassesLabel );\r\n\r\n        //\r\n\r\n        this._basicInfoElements = {\r\n            gpuValue:           gpuValue,\r\n            cpuValue:           cpuValue,\r\n            fpsValue:           fpsValue,\r\n            callsValue:         callsValue,\r\n            trianglesValue:     trianglesValue,\r\n            renderpassesValue:  renderpassesValue\r\n        };\r\n\r\n        //\r\n\r\n        const geometriesValue = new Text();\r\n        geometriesValue.anchorX = 'right';\r\n        geometriesValue.position.set( 65, - 39, 0 );\r\n        geometriesValue.text = '0';\r\n        geometriesValue.fontSize = 15;\r\n        geometriesValue.color = '#ffffff';\r\n        geometriesValue.sync();\r\n        this._scene.add( geometriesValue );\r\n\r\n        const geometriesLabel = new Text();\r\n        geometriesLabel.anchorX = 'right';\r\n        geometriesLabel.position.set( 65, - 53, 0 );\r\n        geometriesLabel.text = 'geometries';\r\n        geometriesLabel.fontSize = 9;\r\n        geometriesLabel.color = 'rgb(101, 197, 188)';\r\n        geometriesLabel.sync();\r\n        this._scene.add( geometriesLabel );\r\n\r\n        //\r\n\r\n        const texturesValue = new Text();\r\n        texturesValue.anchorX = 'right';\r\n        texturesValue.position.set( 135, - 39, 0 );\r\n        texturesValue.text = '0';\r\n        texturesValue.fontSize = 15;\r\n        texturesValue.color = '#ffffff';\r\n        texturesValue.sync();\r\n        this._scene.add( texturesValue );\r\n\r\n        const texturesLabel = new Text();\r\n        texturesLabel.anchorX = 'right';\r\n        texturesLabel.position.set( 135, - 53, 0 );\r\n        texturesLabel.text = 'textures';\r\n        texturesLabel.fontSize = 9;\r\n        texturesLabel.color = 'rgb(101, 197, 188)';\r\n        texturesLabel.sync();\r\n        this._scene.add( texturesLabel );\r\n\r\n        //\r\n\r\n        const shadersValue = new Text();\r\n        shadersValue.anchorX = 'right';\r\n        shadersValue.position.set( 205, - 39, 0 );\r\n        shadersValue.text = '0';\r\n        shadersValue.fontSize = 15;\r\n        shadersValue.color = '#ffffff';\r\n        shadersValue.sync();\r\n        this._scene.add( shadersValue );\r\n\r\n        const shadersLabel = new Text();\r\n        shadersLabel.anchorX = 'right';\r\n        shadersLabel.position.set( 205, - 53, 0 );\r\n        shadersLabel.text = 'shaders';\r\n        shadersLabel.fontSize = 9;\r\n        shadersLabel.color = 'rgb(101, 197, 188)';\r\n        shadersLabel.sync();\r\n        this._scene.add( shadersLabel );\r\n\r\n        //\r\n\r\n        const linesValue = new Text();\r\n        linesValue.anchorX = 'right';\r\n        linesValue.position.set( 275, - 39, 0 );\r\n        linesValue.text = '0';\r\n        linesValue.fontSize = 15;\r\n        linesValue.color = '#ffffff';\r\n        linesValue.sync();\r\n        this._scene.add( linesValue );\r\n\r\n        const linesLabel = new Text();\r\n        linesLabel.anchorX = 'right';\r\n        linesLabel.position.set( 275, - 53, 0 );\r\n        linesLabel.text = 'lines';\r\n        linesLabel.fontSize = 9;\r\n        linesLabel.color = 'rgb(101, 197, 188)';\r\n        linesLabel.sync();\r\n        this._scene.add( linesLabel );\r\n\r\n        //\r\n\r\n        const pointsValue = new Text();\r\n        pointsValue.anchorX = 'right';\r\n        pointsValue.position.set( 345, - 39, 0 );\r\n        pointsValue.text = '0';\r\n        pointsValue.fontSize = 15;\r\n        pointsValue.color = '#ffffff';\r\n        pointsValue.sync();\r\n        this._scene.add( pointsValue );\r\n\r\n        const pointsLabel = new Text();\r\n        pointsLabel.anchorX = 'right';\r\n        pointsLabel.position.set( 345, - 53, 0 );\r\n        pointsLabel.text = 'points';\r\n        pointsLabel.fontSize = 9;\r\n        pointsLabel.color = 'rgb(101, 197, 188)';\r\n        pointsLabel.sync();\r\n        this._scene.add( pointsLabel );\r\n\r\n        //\r\n\r\n        this._memInfoElements = {\r\n            geometriesValue:        geometriesValue,\r\n            geometriesLabel:        geometriesLabel,\r\n\r\n            texturesValue:          texturesValue,\r\n            texturesLabel:          texturesLabel,\r\n\r\n            shadersValue:           shadersValue,\r\n            shadersLabel:           shadersLabel,\r\n\r\n            linesValue:             linesValue,\r\n            linesLabel:             linesLabel,\r\n\r\n            pointsValue:            pointsValue,\r\n            pointsLabel:            pointsLabel\r\n        };\r\n\r\n        // init charts\r\n\r\n        // gpu chart\r\n\r\n        const gpuChartGeometry = new BufferGeometry();\r\n        let positions = new Float32Array( 60 * 3 );\r\n\r\n        for ( let i = 0; i < 60; i ++ ) {\r\n\r\n            positions[ 3 * i + 0 ] = this._width / 59 * i;\r\n            positions[ 3 * i + 1 ] = - 110;\r\n            positions[ 3 * i + 2 ] = 0;\r\n\r\n        }\r\n\r\n        let positionAttribute = new BufferAttribute( positions, 3 );\r\n        positionAttribute.usage = DynamicDrawUsage;\r\n        gpuChartGeometry.setAttribute( 'position', positionAttribute );\r\n\r\n        const gpuChart = new Line( gpuChartGeometry, new LineBasicMaterial({ color: 'rgb(253, 151, 31)' }) );\r\n        this._scene.add( gpuChart );\r\n        this._charts.set( 'gpu', gpuChart );\r\n\r\n        // cpu chart\r\n\r\n        const cpuChartGeometry = new BufferGeometry();\r\n        positions = new Float32Array( 60 * 3 );\r\n\r\n        for ( let i = 0; i < 60; i ++ ) {\r\n\r\n            positions[ 3 * i + 0 ] = this._width / 59 * i;\r\n            positions[ 3 * i + 1 ] = - 110;\r\n            positions[ 3 * i + 2 ] = 0;\r\n\r\n        }\r\n\r\n        positionAttribute = new BufferAttribute( positions, 3 );\r\n        positionAttribute.usage = DynamicDrawUsage;\r\n        cpuChartGeometry.setAttribute( 'position', positionAttribute );\r\n\r\n        const cpuChart = new Line( cpuChartGeometry, new LineBasicMaterial({ color: 'rgb(66, 226, 46)' }) );\r\n        this._scene.add( cpuChart );\r\n        this._charts.set( 'cpu', cpuChart );\r\n\r\n        // fps chart\r\n\r\n        const fpsChartGeometry = new BufferGeometry();\r\n        positions = new Float32Array( 60 * 3 );\r\n\r\n        for ( let i = 0; i < 60; i ++ ) {\r\n\r\n            positions[ 3 * i + 0 ] = this._width / 59 * i;\r\n            positions[ 3 * i + 1 ] = - 110;\r\n            positions[ 3 * i + 2 ] = 0;\r\n\r\n        }\r\n\r\n        positionAttribute = new BufferAttribute( positions, 3 );\r\n        positionAttribute.usage = DynamicDrawUsage;\r\n        fpsChartGeometry.setAttribute( 'position', positionAttribute );\r\n\r\n        const fpsChart = new Line( fpsChartGeometry, new LineBasicMaterial({ color: 'rgb(238, 38, 110)' }) );\r\n        this._scene.add( fpsChart );\r\n        this._charts.set( 'fps', fpsChart );\r\n\r\n    };\r\n\r\n    public update () : void {\r\n\r\n        // update charts\r\n\r\n        if ( this._perf.chart && this._perf.showGraph ) {\r\n\r\n            for ( const chartName in this._perf.chart.data ) {\r\n\r\n                const chartData = this._perf.chart.data[ chartName ];\r\n                if ( ! this._charts.get( chartName ) || ! chartData ) continue;\r\n                const geometry = this._charts.get( chartName )!.geometry as BufferGeometry;\r\n                const positionAttr = geometry.attributes.position;\r\n\r\n                let maxValue = 0;\r\n\r\n                for ( let i = 0; i < chartData.length; i ++ ) {\r\n\r\n                    if ( chartData[ i ] > maxValue ) maxValue = chartData[ i ];\r\n\r\n                }\r\n\r\n                maxValue = Math.max( maxValue, 20 );\r\n\r\n                for ( let i = 0; i < chartData.length; i ++ ) {\r\n\r\n                    let id = ( this._perf.chart.circularId + i + 1 ) % 60;\r\n                    positionAttr.setY( i, ( chartData[ id ] / maxValue * 90 - 110 ) * this.height / 110 );\r\n\r\n                }\r\n\r\n                positionAttr.needsUpdate = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // update labels\r\n\r\n        this._basicInfoElements.gpuValue.text = this._perf.log.gpu.toFixed( 3 );\r\n        this._basicInfoElements.cpuValue.text = this._perf.log.cpu.toFixed( 3 );\r\n        this._basicInfoElements.fpsValue.text = this._perf.log.fps.toFixed( 0 );\r\n        this._basicInfoElements.callsValue.text = this._perf.threeRenderer.info.render.calls.toString();\r\n        this._basicInfoElements.trianglesValue.text = this._perf.threeRenderer.info.render.triangles.toString();\r\n        this._basicInfoElements.renderpassesValue.text = this._perf.renderPassesNumber.toString();\r\n\r\n        this._memInfoElements.geometriesValue.text = this._perf.threeRenderer.info.memory.geometries.toString();\r\n        this._memInfoElements.texturesValue.text = this._perf.threeRenderer.info.memory.textures.toString();\r\n        this._memInfoElements.shadersValue.text = this._perf.threeRenderer.info.programs?.length.toString() ?? '';\r\n        this._memInfoElements.linesValue.text = this._perf.threeRenderer.info.render.lines.toString();\r\n        this._memInfoElements.pointsValue.text = this._perf.threeRenderer.info.render.points.toString();\r\n\r\n        // render\r\n\r\n        this.render();\r\n\r\n    };\r\n\r\n    private render () {\r\n\r\n        this._renderer.render( this._scene, this._camera );\r\n\r\n    };\r\n\r\n    public dispose () : void {\r\n\r\n        this.wrapper.remove();\r\n\r\n    };\r\n\r\n    //\r\n\r\n    public toggleVisibility ( value: boolean ) : void {\r\n\r\n        this.wrapper.style.display = value ? 'block' : 'none';\r\n\r\n    };\r\n\r\n    public toggleCharts ( value: boolean ) : void {\r\n\r\n        this._charts.forEach( ( chart ) => {\r\n\r\n            chart.visible = value;\r\n\r\n        });\r\n\r\n        if ( this._perf.showGraph ) {\r\n\r\n            this.height = ( this._perf.memory ? 110 : 70 );\r\n\r\n        } else {\r\n\r\n            this.height = ( this._perf.memory ? 70 : 40 );\r\n\r\n        }\r\n\r\n        this.wrapper.style.height = this._perf.scale * this.height + 'px';\r\n\r\n    };\r\n\r\n    public toggleMemoryInfo ( value: boolean ) : void {\r\n\r\n        for ( const key in this._memInfoElements ) {\r\n\r\n            this._memInfoElements[ key ].visible = value;\r\n\r\n        }\r\n\r\n        this.width = 380; // ( value ? 350 : 320 );\r\n\r\n        if ( this._perf.showGraph ) {\r\n\r\n            this.height = ( this._perf.memory ? 110 : 70 );\r\n\r\n        } else {\r\n\r\n            this.height = ( this._perf.memory ? 70 : 40 );\r\n\r\n        }\r\n\r\n        this.wrapper.style.width = this._perf.scale * this.width + 'px';\r\n        this.wrapper.style.height = this._perf.scale * this.height + 'px';\r\n\r\n    };\r\n\r\n    public setBackgroundOpacity ( value: number ) : void {\r\n\r\n        this._backgroundOpacity = value;\r\n        this._renderer.setClearColor( 0x000000, this._backgroundOpacity );\r\n        this.render();\r\n\r\n    };\r\n\r\n    //\r\n\r\n    get width () : number {\r\n\r\n        return this._width;\r\n\r\n    };\r\n\r\n    set width ( value: number ) {\r\n\r\n        this._width = value;\r\n        this._camera.right = value;\r\n        this._camera.updateProjectionMatrix();\r\n        this._renderer.setSize( this._perf.scale * this._width, this._perf.scale * this._height );\r\n        this.render();\r\n\r\n    };\r\n\r\n    get height () : number {\r\n\r\n        return this._height;\r\n\r\n    };\r\n\r\n    set height ( value: number ) {\r\n\r\n        this._height = value;\r\n        this._camera.bottom = - value;\r\n        this._camera.updateProjectionMatrix();\r\n        this._renderer.setSize( this._perf.scale * this._width, this._perf.scale * this._height );\r\n        this.render();\r\n\r\n    };\r\n\r\n};\r\n", "\r\nimport { MathUtils } from 'three';\r\n\r\nimport { ThreePerf } from 'three-perf/ThreePerf';\r\nimport { IChart, ILogsAccums } from './helpers/Types';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        GLPerf: any\r\n    }\r\n    interface Performance {\r\n        memory: any\r\n    }\r\n};\r\n\r\nexport const overLimitFps = {\r\n    value: 0,\r\n    fpsLimit: 60,\r\n    isOverLimit: 0\r\n};\r\n\r\nconst average = ( arr: number[] ) => arr?.reduce( ( a: number, b: number ) => a + b, 0 ) / arr.length;\r\n\r\n//\r\n\r\nexport class GLPerf {\r\n\r\n    public names: string[] = [''];\r\n    public finished: any[] = [];\r\n    public gl: WebGL2RenderingContext;\r\n    public extension: any;\r\n    public query: any;\r\n    public paused: boolean = false;\r\n    public overClock: boolean = false;\r\n    public queryHasResult: boolean = false;\r\n    public queryCreated: boolean = false;\r\n    public isWebGL2: boolean = true;\r\n    public memAccums: number[] = [];\r\n    public gpuAccums: number[] = [];\r\n    public activeAccums: boolean[] = [];\r\n    public logsAccums: ILogsAccums = {\r\n        mem: [],\r\n        gpu: [],\r\n        cpu: [],\r\n        fps: [],\r\n        fpsFixed: []\r\n    };\r\n    public fpsChart: number[] = [];\r\n    public gpuChart: number[] = [];\r\n    public cpuChart: number[] = [];\r\n    public memChart: number[] = [];\r\n    public paramLogger: any = () => {};\r\n    public glFinish: any = () => {};\r\n    public chartLogger: any = () => {};\r\n    public chartLen: number = 60;\r\n    public logsPerSecond: number = 10;\r\n    public maxMemory: number = 1500;\r\n    public chartHz: number = 10;\r\n    public startCpuProfiling: boolean = false;\r\n    public lastCalculateFixed: number = 0;\r\n    public chartFrame: number = 0;\r\n    public gpuTimeProcess: number = 0;\r\n    public chartTime: number = 0;\r\n    public activeQueries: number = 0;\r\n    public circularId: number = 0;\r\n    public detected: number = 0;\r\n    public frameId: number = 0;\r\n    public rafId: number = 0;\r\n    public idleCbId: number = 0;\r\n    public checkQueryId: number = 0;\r\n    public uuid: string | undefined = undefined;\r\n    public currentCpu: number = 0;\r\n    public currentMem: number = 0;\r\n    public paramFrame: number = 0;\r\n    public paramTime: number = 0;\r\n    public now: any = () => {};\r\n    public t0: number = 0;\r\n\r\n    public trackGPU: boolean;\r\n\r\n    public perf: ThreePerf;\r\n\r\n    //\r\n\r\n    constructor ( settings: { paramLogger: ( logger: any ) => void, chartLogger: ( chart: IChart ) => void, perf: ThreePerf, gl: WebGL2RenderingContext, trackGPU: boolean, overClock: boolean, chartLen?: any, chartHz?: any, logsPerSecond: number } ) {\r\n\r\n        this.perf = settings.perf;\r\n        this.trackGPU = settings.trackGPU;\r\n        this.overClock = settings.overClock;\r\n        this.logsPerSecond = settings.logsPerSecond;\r\n        this.gl = settings.gl;\r\n        this.paramLogger = settings.paramLogger;\r\n        this.chartLogger = settings.chartLogger;\r\n\r\n        window.GLPerf = window.GLPerf || {};\r\n\r\n        this.fpsChart = new Array(this.chartLen).fill( 0 );\r\n        this.gpuChart = new Array(this.chartLen).fill( 0 );\r\n        this.cpuChart = new Array(this.chartLen).fill( 0 );\r\n        this.memChart = new Array(this.chartLen).fill( 0 );\r\n        this.now = () => ( window.performance && window.performance.now ? window.performance.now() : Date.now() );\r\n\r\n        this.initGpu();\r\n        this.is120hz();\r\n\r\n    };\r\n\r\n    private initGpu () : void {\r\n\r\n        this.uuid = MathUtils.generateUUID();\r\n\r\n        if ( this.gl ) {\r\n\r\n            this.isWebGL2 = true;\r\n\r\n            if ( ! this.extension ) {\r\n\r\n                this.extension = this.gl.getExtension( 'EXT_disjoint_timer_query_webgl2' );\r\n\r\n            }\r\n\r\n            if ( this.extension === null ) {\r\n\r\n                this.isWebGL2 = false;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * 120hz device detection\r\n     */\r\n\r\n    private is120hz () : void {\r\n\r\n        let n = 0;\r\n\r\n        const loop = ( t: number ) => {\r\n\r\n            if ( ++ n < 20 ) {\r\n\r\n                this.rafId = window.requestAnimationFrame( loop );\r\n\r\n            } else {\r\n\r\n                this.detected = Math.ceil( ( 1e3 * n ) / ( t - this.t0 ) / 70 );\r\n                window.cancelAnimationFrame( this.rafId );\r\n\r\n            }\r\n\r\n            if ( ! this.t0 ) this.t0 = t;\r\n\r\n        }\r\n\r\n        this.rafId = window.requestAnimationFrame( loop );\r\n\r\n    };\r\n\r\n    /**\r\n     * Explicit UI add\r\n     * @param { string | undefined } name\r\n     */\r\n\r\n    private addUI ( name: string ) : void {\r\n\r\n        if ( this.names.indexOf( name ) === - 1 ) {\r\n\r\n            this.names.push( name );\r\n            this.gpuAccums.push( 0 );\r\n            this.activeAccums.push( false );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    public nextFps = ( d: any ) : void => {\r\n\r\n        const goal = 1000 / 60;\r\n        const elapsed = goal - d.timeRemaining();\r\n        const fps = ( goal * overLimitFps.fpsLimit ) / 10 / elapsed;\r\n\r\n        if ( fps < 0 ) return;\r\n\r\n        overLimitFps.value = fps;\r\n\r\n        if ( overLimitFps.isOverLimit < 25 ) {\r\n\r\n            overLimitFps.isOverLimit ++;\r\n\r\n        } else {\r\n\r\n            this.perf.overclockingFps = true;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Increase frameID\r\n     * @param { any | undefined } now\r\n     */\r\n\r\n    public nextFrame = ( now: any ) : void => {\r\n\r\n        this.frameId ++;\r\n        const t = now || this.now();\r\n        let duration = t - this.paramTime;\r\n        let gpu = 0;\r\n\r\n        // params\r\n\r\n        if ( this.frameId <= 1 ) {\r\n\r\n            this.paramFrame = this.frameId;\r\n            this.paramTime = t;\r\n\r\n        } else {\r\n\r\n            if ( t >= this.paramTime ) {\r\n\r\n                this.maxMemory = window.performance.memory ? window.performance.memory.jsHeapSizeLimit / 1048576 : 0;\r\n                const frameCount = this.frameId - this.paramFrame;\r\n                const fpsFixed = ( frameCount * 1000 ) / duration;\r\n                const fps = this.perf.overclockingFps ? overLimitFps.value : fpsFixed;\r\n\r\n                gpu = this.isWebGL2 ? this.gpuAccums[ 0 ] : this.gpuAccums[ 0 ] / duration;\r\n\r\n                if ( this.isWebGL2 ) {\r\n\r\n                    this.gpuAccums[ 0 ] = 0;\r\n\r\n                } else {\r\n\r\n                    Promise.all( this.finished ).then( () => {\r\n\r\n                        this.gpuAccums[ 0 ] = 0;\r\n                        this.finished = [];\r\n\r\n                    });\r\n\r\n                }\r\n\r\n                this.currentMem = Math.round( window.performance && window.performance.memory ? window.performance.memory.usedJSHeapSize / 1048576 : 0 );\r\n\r\n                if ( window.performance && this.startCpuProfiling ) {\r\n\r\n                    window.performance.mark('cpu-finished');\r\n                    const cpuMeasure = performance.measure('cpu-duration', 'cpu-started', 'cpu-finished');\r\n                    this.currentCpu = cpuMeasure.duration;\r\n\r\n                    this.logsAccums.cpu.push( this.currentCpu );\r\n                    // make sure the measure has started and ended\r\n                    this.startCpuProfiling = false;\r\n\r\n                }\r\n\r\n                this.logsAccums.mem.push( this.currentMem );\r\n                this.logsAccums.fpsFixed.push( fpsFixed );\r\n                this.logsAccums.fps.push( fps );\r\n                this.logsAccums.gpu.push( gpu );\r\n\r\n                if ( this.overClock && typeof window.requestIdleCallback !== 'undefined' ) {\r\n\r\n                    if ( overLimitFps.isOverLimit > 0 && fps > fpsFixed ) {\r\n\r\n                        overLimitFps.isOverLimit --;\r\n\r\n                    } else if ( this.perf.overclockingFps ) {\r\n\r\n                        this.perf.overclockingFps = false;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // TODO 200 to settings\r\n\r\n                if ( t >= this.paramTime + 1000 / this.logsPerSecond ) {\r\n\r\n                    this.paramLogger({\r\n                        cpu:            average( this.logsAccums.cpu ),\r\n                        gpu:            average( this.logsAccums.gpu ),\r\n                        mem:            average( this.logsAccums.mem ),\r\n                        fps:            average( this.logsAccums.fps ),\r\n                        duration:       Math.round( duration ),\r\n                        maxMemory:      this.maxMemory,\r\n                        frameCount\r\n                    });\r\n\r\n                    this.logsAccums.mem = [];\r\n                    this.logsAccums.fps = [];\r\n                    this.logsAccums.gpu = [];\r\n                    this.logsAccums.cpu = [];\r\n\r\n                    this.paramFrame = this.frameId;\r\n                    this.paramTime = t;\r\n\r\n                }\r\n\r\n                if ( this.overClock ) {\r\n\r\n                    // calculate the max framerate every two seconds\r\n\r\n                    if ( t - this.lastCalculateFixed >= 2 * 1000 ) {\r\n\r\n                        this.lastCalculateFixed = now;\r\n                        overLimitFps.fpsLimit = Math.round( average( this.logsAccums.fpsFixed ) / 10 ) * 100;\r\n                        this.perf.fpsLimit = overLimitFps.fpsLimit / 10;\r\n                        this.logsAccums.fpsFixed = [];\r\n\r\n                        this.paramFrame = this.frameId;\r\n                        this.paramTime = t;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // chart\r\n\r\n        if ( ! this.detected || ! this.chartFrame ) {\r\n\r\n            this.chartFrame = this.frameId;\r\n            this.chartTime = t;\r\n            this.circularId = 0;\r\n\r\n        } else {\r\n\r\n            const timespan = t - this.chartTime;\r\n            let hz = ( this.chartHz * timespan ) / 1e3;\r\n\r\n            while ( -- hz > 0 && this.detected ) {\r\n\r\n                const frameCount = this.frameId - this.chartFrame;\r\n                const fpsFixed = ( frameCount / timespan ) * 1e3;\r\n                const fps = this.perf.overclockingFps ? overLimitFps.value : fpsFixed;\r\n                this.fpsChart[ this.circularId % this.chartLen ] = fps;\r\n                // this.fpsChart[this.circularId % this.chartLen] = ((overLimitFps.isOverLimit > 0 ? overLimitFps.value : fps) / overLimitFps.fpsLimit) * 60;\r\n                const memS = 1000 / this.currentMem;\r\n                const cpuS = this.currentCpu;\r\n                const gpuS = (this.isWebGL2 ? this.gpuAccums[ 1 ] * 2 : Math.round( ( this.gpuAccums[ 1 ] / duration ) * 100 ) ) + 4;\r\n\r\n                if ( gpuS > 0 ) {\r\n\r\n                    this.gpuChart[ this.circularId % this.chartLen ] = gpuS;\r\n\r\n                }\r\n\r\n                if ( cpuS > 0 ) {\r\n\r\n                    this.cpuChart[ this.circularId % this.chartLen ] = cpuS;\r\n\r\n                }\r\n\r\n                if ( memS > 0 ) {\r\n\r\n                    this.memChart[ this.circularId % this.chartLen ] = memS;\r\n\r\n                }\r\n\r\n                for ( let i = 0; i < this.names.length; i ++ ) {\r\n\r\n                    this.chartLogger({\r\n                        i,\r\n                        data: {\r\n                            fps: this.fpsChart,\r\n                            gpu: this.gpuChart,\r\n                            cpu: this.cpuChart,\r\n                            mem: this.memChart\r\n                        },\r\n                        circularId: this.circularId\r\n                    });\r\n\r\n                }\r\n\r\n                this.circularId ++;\r\n                this.chartFrame = this.frameId;\r\n                this.chartTime = t;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    private startGpu () : void {\r\n\r\n        const gl = this.gl;\r\n        const ext = this.extension;\r\n\r\n        if ( ! gl || ! ext ) return;\r\n\r\n        if ( this.isWebGL2 ) {\r\n\r\n            let available = false;\r\n            let disjoint: any;\r\n            let ns: any;\r\n\r\n            if ( this.query ) {\r\n\r\n                this.queryHasResult = false;\r\n                let query = this.query;\r\n\r\n                available = gl.getQueryParameter( query, gl.QUERY_RESULT_AVAILABLE );\r\n                disjoint = gl.getParameter( ext.GPU_DISJOINT_EXT );\r\n\r\n                if ( available && ! disjoint ) {\r\n\r\n                    ns = gl.getQueryParameter( this.query, gl.QUERY_RESULT );\r\n                    const ms = ns * 1e-6;\r\n\r\n                    if ( available || disjoint ) {\r\n\r\n                        // Clean up the query object.\r\n                        gl.deleteQuery( this.query );\r\n\r\n                        // Don't re-enter this polling loop.\r\n                        query = null;\r\n\r\n                    }\r\n\r\n                    if ( available && ms > 0 ) {\r\n\r\n                        // update the display if it is valid\r\n\r\n                        if ( ! disjoint ) {\r\n\r\n                            this.activeAccums.forEach( ( _active: any, i: any ) => {\r\n                                this.gpuAccums[ i ] = ms\r\n                            });\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( available || ! this.query ) {\r\n\r\n                this.queryCreated = true;\r\n                this.query = gl.createQuery();\r\n\r\n                gl.beginQuery( ext.TIME_ELAPSED_EXT, this.query );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    private endGpu () : void {\r\n\r\n        // finish the query measurement\r\n        const ext = this.extension;\r\n        const gl = this.gl;\r\n\r\n        if ( this.isWebGL2 && this.queryCreated && gl.getQuery( ext.TIME_ELAPSED_EXT, gl.CURRENT_QUERY ) ) {\r\n\r\n            gl.endQuery( ext.TIME_ELAPSED_EXT );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Begin named measurement\r\n     * @param { string | undefined } name\r\n     */\r\n    public begin ( name: string ) : void {\r\n\r\n        this.startGpu();\r\n        this.updateAccums( name );\r\n\r\n    };\r\n\r\n    /**\r\n     * End named measure\r\n     * @param { string | undefined } name\r\n     */\r\n    public end ( name: string ) : void {\r\n\r\n        this.endGpu();\r\n        this.updateAccums( name );\r\n\r\n    };\r\n\r\n    private updateAccums ( name: string ) : void {\r\n\r\n        let nameId = this.names.indexOf( name );\r\n\r\n        if ( nameId === -1 ) {\r\n\r\n            nameId = this.names.length;\r\n            this.addUI( name );\r\n\r\n        }\r\n\r\n        const t = this.now();\r\n\r\n        this.activeAccums[ nameId ] = ! this.activeAccums[ nameId ];\r\n        this.t0 = t;\r\n\r\n    };\r\n\r\n};\r\n", "\r\nimport { Pane } from 'tweakpane';\r\nimport { Camera, Mesh, Object3D, Scene, WebGLRenderer } from 'three';\r\n\r\nimport { ThreePerfUI } from './ui/UI';\r\nimport { GLPerf } from './GLPerf';\r\nimport { IChart, IGLLogger, ILogger, IProgramsPerfs } from './helpers/Types';\r\n\r\n//\r\n\r\ninterface IThreePerfProps {\r\n    renderer:           THREE.WebGLRenderer;\r\n    domElement:         HTMLElement;\r\n    overClock?:         boolean;\r\n    logsPerSecond?:     number;\r\n    deepAnalyze?:       boolean;\r\n    anchorX?:           'left' | 'right';\r\n    anchorY?:           'top' | 'bottom';\r\n    showGraph?:         boolean;\r\n    scale?:             number;\r\n    memory?:            boolean;\r\n    enabled?:           boolean;\r\n    visible?:           boolean;\r\n    actionToCallUI?:    string;\r\n    guiVisible?:        boolean;\r\n    backgroundOpacity?: number;\r\n};\r\n\r\nconst updateMatrixWorldTemp = Object3D.prototype.updateMatrixWorld;\r\nconst updateWorldMatrixTemp = Object3D.prototype.updateWorldMatrix;\r\nconst updateMatrixTemp = Object3D.prototype.updateMatrix;\r\n\r\nconst maxGl = [ 'calls', 'triangles', 'points', 'lines' ];\r\nconst maxLog = [ 'gpu', 'cpu', 'mem', 'fps' ];\r\n\r\n//\r\n\r\nexport class ThreePerf {\r\n\r\n    public gui = new Pane();\r\n    public guiFolder: any;\r\n\r\n    public ui: ThreePerfUI;\r\n    private perfEngine: GLPerf;\r\n\r\n    // state\r\n    public deepAnalyze: boolean;\r\n    public log: any;\r\n    public paused: boolean;\r\n    public overclockingFps: boolean\r\n    public fpsLimit: number;\r\n    public startTime: number;\r\n    public triggerProgramsUpdate: number;\r\n    public customData: number;\r\n    public accumulated: {\r\n        totalFrames:    number;\r\n        log:            ILogger;\r\n        gl:             IGLLogger;\r\n        max: {\r\n            log:        ILogger\r\n            gl:         IGLLogger\r\n        }\r\n    } = {\r\n        totalFrames:        0,\r\n        log: {\r\n            i:              0,\r\n            maxMemory:      0,\r\n            gpu:            0,\r\n            mem:            0,\r\n            cpu:            0,\r\n            fps:            0,\r\n            duration:       0,\r\n            frameCount:     0\r\n        },\r\n        gl: {\r\n            calls:          0,\r\n            triangles:      0,\r\n            points:         0,\r\n            lines:          0,\r\n            counts:         0\r\n        },\r\n        max: {\r\n            log: {\r\n                i:              0,\r\n                maxMemory:      0,\r\n                gpu:            0,\r\n                mem:            0,\r\n                cpu:            0,\r\n                fps:            0,\r\n                duration:       0,\r\n                frameCount:     0\r\n            },\r\n            gl: {\r\n                calls:          0,\r\n                triangles:      0,\r\n                points:         0,\r\n                lines:          0,\r\n                counts:         0\r\n            },\r\n        }\r\n    };\r\n    public chart: {\r\n        data: {\r\n            [index: string]:    number[];\r\n        };\r\n        circularId:             number;\r\n    };\r\n    public infos: {\r\n        version:        string;\r\n        renderer:       string;\r\n        vendor:         string;\r\n    };\r\n    public gl: WebGLRenderer;\r\n    public programs: IProgramsPerfs;\r\n    public objectWithMaterials: Mesh[];\r\n    public renderPassesNumber: number = 0;\r\n\r\n    public threeRenderer: WebGLRenderer;\r\n\r\n    private _anchorX: 'left' | 'right';\r\n    private _anchorY: 'top' | 'bottom';\r\n    private _showGraph: boolean;\r\n    private _memory: boolean;\r\n    private _scale: number;\r\n    private _visible: boolean;\r\n    private _enabled: boolean;\r\n    private _keypressed: string = '';\r\n    private _guiVisible: boolean = true;\r\n\r\n    public actionToCallUI: string = 'dev';\r\n\r\n    private rendererRender: ( scene: Scene, camera: Camera ) => void;\r\n\r\n    //\r\n\r\n    constructor ( props: IThreePerfProps ) {\r\n\r\n        this.deepAnalyze = props.deepAnalyze ?? false;\r\n        this.threeRenderer = props.renderer;\r\n\r\n        this.ui = new ThreePerfUI({ perf: this, domElement: props.domElement, backgroundOpacity: props.backgroundOpacity });\r\n\r\n        this._visible = props.visible ?? true;\r\n        this._enabled = props.enabled ?? true;\r\n        this.scale = props.scale ?? 1;\r\n        this.anchorX = props.anchorX ?? 'left';\r\n        this.anchorY = props.anchorY ?? 'top';\r\n        this.showGraph = props.showGraph ?? true;\r\n        this.memory = props.memory ?? true;\r\n        this.actionToCallUI = props.actionToCallUI ?? '';\r\n        this.guiVisible = props.guiVisible ?? false;\r\n        this.gui.element.parentElement!.style.width = '300px';\r\n\r\n        window.addEventListener( 'keypress', this.keypressHandler );\r\n\r\n        //\r\n\r\n        const overClock = props.overClock ?? true;\r\n\r\n        this.perfEngine = new GLPerf({\r\n            perf:           this,\r\n            trackGPU:       true,\r\n            overClock:      overClock,\r\n            chartLen:       120, // chart ? chart.length : 120,\r\n            chartHz:        60, // chart ? chart.hz : 60,\r\n            logsPerSecond:  props.logsPerSecond ?? 10,\r\n            gl:             props.renderer.getContext() as WebGL2RenderingContext,\r\n            chartLogger: ( chart: IChart ) => {\r\n\r\n                this.chart = chart;\r\n\r\n            },\r\n            paramLogger: ( logger: any ) => {\r\n\r\n                if ( ! this._enabled ) return;\r\n\r\n                const log = {\r\n                    maxMemory:      logger.maxMemory,\r\n                    gpu:            logger.gpu,\r\n                    cpu:            logger.cpu,\r\n                    mem:            logger.mem,\r\n                    fps:            logger.fps,\r\n                    totalTime:      logger.duration,\r\n                    frameCount:     logger.frameCount,\r\n                };\r\n\r\n                this.log = log;\r\n\r\n                const accumulated: any = this.accumulated;\r\n                const glRender: any = this.threeRenderer.info.render;\r\n\r\n                accumulated.totalFrames ++;\r\n                accumulated.gl.calls += glRender.calls;\r\n                accumulated.gl.triangles += glRender.triangles;\r\n                accumulated.gl.points += glRender.points;\r\n                accumulated.gl.lines += glRender.lines;\r\n\r\n                accumulated.log.gpu += logger.gpu;\r\n                accumulated.log.cpu += logger.cpu;\r\n                accumulated.log.mem += logger.mem;\r\n                accumulated.log.fps += logger.fps;\r\n\r\n                // calculate max\r\n\r\n                for ( let i = 0; i < maxGl.length; i ++ ) {\r\n\r\n                    const key = maxGl[ i ];\r\n                    const value = glRender[ key ];\r\n\r\n                    if ( value > accumulated.max.gl[ key ] ) {\r\n\r\n                        accumulated.max.gl[ key ] = value;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                for ( let i = 0; i < maxLog.length; i ++ ) {\r\n\r\n                    const key = maxLog[ i ];\r\n                    const value = logger[ key ];\r\n\r\n                    if ( value > accumulated.max.log[ key ] ) {\r\n\r\n                        accumulated.max.log[ key ] = value;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // TODO CONVERT TO OBJECT AND VALUE ALWAYS 0 THIS IS NOT CALL\r\n                this.accumulated = accumulated;\r\n                this.ui.update();\r\n\r\n            }\r\n        });\r\n\r\n        // Infos\r\n\r\n        const ctx = props.renderer.getContext();\r\n        let glRenderer = null;\r\n        let glVendor = null;\r\n\r\n        const rendererInfo: any = ctx.getExtension( 'WEBGL_debug_renderer_info' );\r\n        const glVersion = ctx.getParameter( ctx.VERSION );\r\n\r\n        if ( rendererInfo != null ) {\r\n\r\n            glRenderer = ctx.getParameter( rendererInfo.UNMASKED_RENDERER_WEBGL );\r\n            glVendor = ctx.getParameter( rendererInfo.UNMASKED_VENDOR_WEBGL );\r\n\r\n        }\r\n\r\n        if ( ! glVendor ) {\r\n\r\n            glVendor = 'Unknown vendor';\r\n\r\n        }\r\n\r\n        if ( ! glRenderer ) {\r\n\r\n            glRenderer = ctx.getParameter( ctx.RENDERER );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        this.startTime = performance.now();\r\n\r\n        this.infos = {\r\n            version:    glVersion,\r\n            renderer:   glRenderer,\r\n            vendor:     glVendor\r\n        };\r\n\r\n        this.rendererRender = this.threeRenderer.render;\r\n        this.threeRenderer.info.autoReset = false;\r\n\r\n        this.threeRenderer.render = ( scene: Scene, camera: Camera ) => {\r\n\r\n            this.renderPassesNumber ++;\r\n            this.rendererRender.call( this.threeRenderer, scene, camera );\r\n\r\n        };\r\n\r\n        // add three perf pane\r\n\r\n        // @ts-ignore\r\n        this.guiFolder = this.gui.addFolder({ title: 'Settings' });\r\n        const perfFolder = this.guiFolder.addFolder({ title: 'ThreePerf' });\r\n        perfFolder.addInput( this, 'visible', { label: 'Visible' } );\r\n        perfFolder.addInput( this, 'enabled', { label: 'Enabled' } );\r\n        perfFolder.addInput( this, 'anchorX', { label: 'xAnchor', options: { left: 'left', right: 'right' } });\r\n        perfFolder.addInput( this, 'anchorY', { label: 'yAnchor', options: { top: 'top', bottom: 'bottom' } });\r\n        perfFolder.addInput( this, 'backgroundOpacity', { label: 'Background opacity', min: 0, max: 1, step: 0.1 } );\r\n        perfFolder.addInput( this, 'memory', { label: 'Memory' } );\r\n        perfFolder.addInput( this, 'showGraph', { label: 'Charts' } );\r\n        perfFolder.addInput( this, 'scale', { label: 'Scale', min: 0.1, max: 2, step: 0.1 } );\r\n        perfFolder.addInput( this, 'logsPerSecond', { label: 'LogsPerSecond', min: 1, max: 60, step: 1 } );\r\n\r\n        //\r\n\r\n        console.log( 'ThreePerf inited.' );\r\n\r\n    };\r\n\r\n    public begin () {\r\n\r\n        this.perfEngine.begin( 'profiler' );\r\n\r\n    };\r\n\r\n    public end () {\r\n\r\n        this.afterRender();\r\n        this.renderPassesNumber = 0;\r\n        this.threeRenderer.info.reset();\r\n\r\n    };\r\n\r\n    public dispose () {\r\n\r\n        this.ui.dispose();\r\n        this.gui.element.parentElement?.remove();\r\n        window.removeEventListener( 'keypress', this.keypressHandler );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    private keypressHandler = ( event: KeyboardEvent ) : void => {\r\n\r\n        if ( ! this.actionToCallUI ) return;\r\n\r\n        this._keypressed += event.key;\r\n        const keys = this._keypressed.split('');\r\n\r\n        while ( keys.length > this.actionToCallUI.length ) {\r\n\r\n            keys.shift();\r\n\r\n        }\r\n\r\n        if ( keys.join('') === this.actionToCallUI ) {\r\n\r\n            this._keypressed = '';\r\n            this.guiVisible = ! this.guiVisible;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    private afterRender = () => {\r\n\r\n        if ( ! this._enabled ) return;\r\n\r\n        if ( ! this.perfEngine.paused ) {\r\n\r\n            this.perfEngine.nextFrame( window.performance.now() );\r\n\r\n            if ( this.perfEngine.overClock && typeof window.requestIdleCallback !== 'undefined' ) {\r\n\r\n                this.perfEngine.idleCbId = requestIdleCallback( this.perfEngine.nextFps );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if ( this.perfEngine ) {\r\n\r\n            this.perfEngine.end( 'profiler' );\r\n\r\n        }\r\n\r\n        if ( window.performance ) {\r\n\r\n            window.performance.mark( 'cpu-started' );\r\n            this.perfEngine.startCpuProfiling = true;\r\n\r\n        }\r\n\r\n        if ( this.deepAnalyze ) {\r\n\r\n            // todo\r\n\r\n        }\r\n\r\n    };\r\n\r\n    //\r\n\r\n    get enabled () {\r\n\r\n        return this._enabled;\r\n\r\n    };\r\n\r\n    set enabled ( value: boolean ) {\r\n\r\n        this._enabled = value;\r\n\r\n    };\r\n\r\n    get visible () {\r\n\r\n        return this._visible;\r\n\r\n    };\r\n\r\n    set visible ( value: boolean ) {\r\n\r\n        this._visible = value;\r\n        this.ui.toggleVisibility( value );\r\n\r\n    };\r\n\r\n    get guiVisible () {\r\n\r\n        return this._guiVisible;\r\n\r\n    };\r\n\r\n    set guiVisible ( value: boolean ) {\r\n\r\n        this._guiVisible = value;\r\n        this.gui.element.parentElement!.style['display'] = value ? 'block' : 'none';\r\n\r\n    };\r\n\r\n    get anchorX () {\r\n\r\n        return this._anchorX;\r\n\r\n    };\r\n\r\n    set anchorX ( value: 'left' | 'right' ) {\r\n\r\n        this._anchorX = value;\r\n\r\n        if ( this._anchorX === 'left' ) {\r\n\r\n            this.ui.wrapper.style.left = '0';\r\n            this.ui.wrapper.style.right = '';\r\n\r\n        } else {\r\n\r\n            this.ui.wrapper.style.left = '';\r\n            this.ui.wrapper.style.right = '0';\r\n\r\n        }\r\n\r\n    };\r\n\r\n    get anchorY () {\r\n\r\n        return this._anchorY;\r\n\r\n    };\r\n\r\n    set anchorY ( value: 'top' | 'bottom' ) {\r\n\r\n        this._anchorY = value;\r\n\r\n        if ( this._anchorY === 'top' ) {\r\n\r\n            this.ui.wrapper.style.top = '0';\r\n            this.ui.wrapper.style.bottom = '';\r\n\r\n        } else {\r\n\r\n            this.ui.wrapper.style.top = '';\r\n            this.ui.wrapper.style.bottom = '0';\r\n\r\n        }\r\n\r\n    };\r\n\r\n    get showGraph () {\r\n\r\n        return this._showGraph;\r\n\r\n    };\r\n\r\n    set showGraph ( value: boolean ) {\r\n\r\n        this._showGraph = value;\r\n        this.ui.toggleCharts( value );\r\n\r\n    };\r\n\r\n    get memory () {\r\n\r\n        return this._memory;\r\n\r\n    };\r\n\r\n    set memory ( value: boolean ) {\r\n\r\n        this._memory = value;\r\n        this.ui.toggleMemoryInfo( value );\r\n\r\n    };\r\n\r\n    get scale () {\r\n\r\n        return this._scale;\r\n\r\n    };\r\n\r\n    set scale ( value: number ) {\r\n\r\n        this._scale = value;\r\n        this.ui.setScale( value );\r\n\r\n    };\r\n\r\n    get logsPerSecond () {\r\n\r\n        return this.perfEngine.logsPerSecond;\r\n\r\n    };\r\n\r\n    set logsPerSecond ( value: number ) {\r\n\r\n        this.perfEngine.logsPerSecond = value;\r\n\r\n    };\r\n\r\n    get backgroundOpacity () {\r\n\r\n        return this.ui._backgroundOpacity;\r\n\r\n    };\r\n\r\n    set backgroundOpacity ( value: number ) {\r\n\r\n        this.ui.setBackgroundOpacity( value );\r\n\r\n    };\r\n\r\n};\r\n"],
  "mappings": "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",
  "names": ["exports", "className", "result", "document", "item", "api", "origin", "op", "Color", "Pane", "result", "DerivedMaterial", "now", "lineXOffset", "glyphObj", "r", "t", "a", "e", "i", "o", "f", "u", "v", "s", "l", "g", "h", "n", "c", "d", "m", "k", "O", "A", "x", "b", "w", "typrFactory", "woff2otfFactory", "parserFactory", "assign", "sdfViewBox", "assign", "createTypesetter", "now"]
}
